!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){var e=function(e,t){var n;"localStorage"in window&&"true"===localStorage.getItem("freshworks-omnibar:debug")&&(t.unshift("Omnibar - IST IFrame Script : "+(new Date).toUTCString()+" |"),(n=console)[e].apply(n,t))},t=function(){return e("log",[].slice.call(arguments))},n=function(){return{ALL_EVENTS:["click","keydown","mousemove"],removeEvents:function(e,t){e.forEach(function(e){window.removeEventListener(e,t,!0)})},attachEvents:function(e,t){e.forEach(function(e){window.addEventListener(e,t,!0)})}}};!function(e){try{var i,o,r=n(),a=r.ALL_EVENTS,c=r.removeEvents,E=r.attachEvents,u="IST_IFRAME_LOADED",f=function(n,i){void 0===i&&(i=""),t("Sending event "+n+", with properties: "+i),e.parent.postMessage({iFrameEventType:n,userEvent:i},"*")},v=function(e){f("IST_IFRAME_EVENT",e&&e.type)},s=function(){clearTimeout(i),clearInterval(o)};e.addEventListener("message",function(e){var n=e.data,i=n.iFrameEventType,o=n.eventToAttachOrDetach;i&&o&&(t("Received event : "+i+", with properties: "+o),"IST_IFRAME_STOP_NOTIFY"===i&&s(),"IST_IFRAME_ATTACH_EVENTS"===i&&(s(),c(a,v),E(o,v)),"IST_IFRAME_REMOVE_EVENTS"===i&&(s(),c(o,v)))}),i=setTimeout(function(){t("iFrame reached max timeout. Stopping the timeout. Check if Omnibar has loaded?"),s()},12e4),o=setInterval(function(){f(u)},5e3),f(u)}catch(e){t("Error in iFrame Script",e)}}(window)});
