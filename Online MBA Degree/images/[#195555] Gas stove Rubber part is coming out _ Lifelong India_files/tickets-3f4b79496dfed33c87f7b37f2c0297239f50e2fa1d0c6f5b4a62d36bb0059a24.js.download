"use strict";define("freshdesk/components/module-tickets/compose-email/component",["exports","freshdesk/mixins/tickets/form","ember-keyboard","freshdesk/mixins/tickets/insert-canned-response","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/utils/blank-array","freshdesk/constants/ticket","ember-concurrency","@freshdesk/common/utils/plain-text","freshdesk/utils/tickets/has-ticket-permissions","freshdesk/mixins/tickets/ticket-templates","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/tickets/ticket-fields-extra","freshdesk/mixins/slash-commands/config","freshdesk/constants/ticket-template"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h,f){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var b=Ember.Component.extend(t.default,s.EKMixin,n.default,i.default,m.default,u.default,p.default,a.default,h.default,{store:Ember.inject.service(),i18n:Ember.inject.service(),ticketFields:Ember.inject.service(),eventSources:Ember.inject.service(),marketplace:Ember.inject.service(),renderStates:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),renderLater:Ember.computed.reads("renderStates.renderLater"),mkpInterfacePage:"newTicket",classNames:["__module-tickets__compose-email"],scrollOffset:-150,displayInlineCannedResponse:!1,dynamicAttachmentsIds:null,selectedContact:null,startContactValidations:!1,ticketCompany:null,isLoaded:!1,data:null,renderMkpApp:!0,defaultSubmitBtn:"tickets.compose_email.send",refreshTemplate:!1,descriptionValue:null,shouldApplySignature:!0,addedAttachments:(0,r.default)(),inlineAttachments:(0,r.default)(),selectedCc:(0,r.default)(),cloudAttachments:Ember.computed.alias("model.cloudFiles"),userTicketGlobalScope:Ember.computed.equal("currentUser.ticketScope",l.default.agentScope.global),restrictedComposeEnabled:Ember.computed.reads("currentAccount.restrictedComposeEmailEnabled"),submitDisabled:Ember.computed.not("currentAccount.accountData.verified"),emailOptions:Ember.computed("globalEmailConfig","currentUser","restrictedComposeEnabled","updatedEmailConfig",(function(){var e=Ember.get(this,"customGlobalEmailConfig");if(Ember.get(this,"restrictedComposeEnabled")&&!Ember.get(this,"userTicketGlobalScope")){var t=Ember.get(this,"currentUser.groupIds");e=e.filter((function(e){var s=Ember.get(e,"groupId");return!(s&&!t.includes(s))}))}return e})),responderEmail:Ember.computed("globalPrimaryEmail","emailOptions","restrictedComposeEnabled",(function(){var e=Ember.get(this,"globalPrimaryEmail");if(Ember.get(this,"restrictedComposeEnabled")&&!Ember.get(this,"userTicketGlobalScope")){var t=Ember.get(this,"emailOptions");e=t.length>0?t[0]:Ember.get(this,"globalPrimaryEmail")}return e})),isTemplatesEnabled:Ember.computed((function(){var e=Ember.get(this,"currentAccount");return e.hasFeature("ticket_templates")||e.hasFeature("parent_child_tickets")})),fields:Ember.computed("ticketFields.fields",(function(){var e=Ember.get(this,"ticketFields.fields"),t=e.find((function(e){return"default_requester"===Ember.get(e,"type")})),s=e.find((function(e){return"default_subject"===Ember.get(e,"type")}));return Ember.set(s,"requiredForAgents",!0),Ember.set(t,"fieldName","email"),e.filterBy("hiddenInComposeEmail",!1).sortBy("sortPriorityInComposeEmail")})),submitNewTicket:Ember.on((0,s.keyDown)("cmd+Enter"),(function(){this.send("submit")})),composeEmailTemplates:Ember.computed.filter("templates",(function(e){return!e.source||e.source===f.OUTBOUND_SOURCE_ID})),init:function(){this._super.apply(this,arguments);var e=Ember.get(this,"data");if(this._setDefaultValues(),this.createAdditonalFields(Ember.get(this,"formFields"),{fieldName:"email",fieldType:"email",isRequired:!0,isEmail:!0},"default_requester"),e?this._setModelData(null,e):this._initializeData(),Ember.get(this,"isTemplatesEnabled")){var t=!1;Ember.get(this,"fetchTemplatesTask").perform(t)}Ember.get(this,"marketplace").on("fromUpdated",this.fromUpdated.bind(this)),Ember.get(this,"marketplace").on("activeEmailConfigUpdated",this.activeEmailConfigUpdated.bind(this)),this.activeEmailConfigUpdated()},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").deregisterControls(Ember.get(this,"mkpInterfacePage")),Ember.get(this,"mkpInterface").deregisterControls("ticketActions")},actions:{multipleCompany:function(e){Ember.set(this,"ticketCompany",e)},onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},onRemoveAttachment:function(e){var t;if(e){Ember.get(this,"dynamicAttachmentsIds").removeObject(parseInt(e.id));var s=Ember.get(this,"model");s.attachments.removeObject(e),(null===(t=s.attachmentIds)||void 0===t?void 0:t.length)&&s.attachmentIds.removeObject(e.id)}},onChangeTo:function(e){Ember.set(this,"selectedContact",e),Ember.set(this,"model.email",Ember.get(this,"selectedContact.email"))},onChangeEmailConfig:function(e){Ember.get(this,"eventSources").publishFieldChange(Ember.get(this,"responderEmail.replyEmail"),Ember.get(e,"replyEmail"),"ticket","from"),Ember.set(this,"responderEmail",e)},submit:function(){this.setDescription();var e=Ember.get(this,"model"),t=[],s=this;return Ember.set(e,"requesterId",null),Ember.set(this,"startContactValidations",!0),Ember.set(e,"companyId",Ember.get(this,"ticketCompany")),this.addAttachments(),t.push(Ember.get(this,"marketplace").publishEvent({event:"ticket.sendEmail",data:e.serialize()}).then((function(){return Ember.get(s,"sendEmailAndSaveTicket").perform()})).catch((function(e){return s._mkpPublishEventError(e)}))),Ember.RSVP.Promise.all(t.compact())},cancel:function(){Ember.get(this,"router").transitionTo("helpdesk.tickets")}},fromUpdated:function(){var e=Ember.get(this,"mkpInterface.controlData.from.value");if(e){var t=Ember.get(this,"globalEmailConfig").filterBy("replyEmail",e);1===t.length&&Ember.set(this,"globalPrimaryEmail",t[0])}},willDestroy:function(){this._super.apply(this,arguments),Ember.get(this,"marketplace").off("fromUpdated")},onTicketSave:function(e){this.clearFormField(),Ember.set(this,"isLoaded",!1),Ember.get(this,"model.inlineAttachmentIds")&&Ember.set(this,"model.inlineAttachmentIds",[]),Ember.get(this,"toSendAgain")?(this._initializeData(!0),this.toggleProperty("renderMkpApp"),this.send("clearTemplate")):(0,d.default)(Ember.get(this,"model"),Ember.get(this,"currentUser"),{type:l.default.sourceType.outboundEmail})?this._transitionToTicket(e):Ember.get(this,"router").transitionTo("helpdesk.tickets")},_transitionToTicket:function(e){Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.ticket.id)},_failure:function(e){Ember.set(this,"isLoaded",!0),e.errors?Ember.get(this,"flashMessages").danger(e.errors[0].message):Ember.get(this,"flashMessages").danger(e.message)},_setDefaultValues:function(){Ember.set(this,"dynamicAttachmentsIds",[])},_checkSignatureEmpty:function(e){var t=document.createElement("div");t.innerHTML=e;var s=(0,c.default)(e),n=t.getElementsByTagName("img").length;return!(/\S/.test(s)||n>0)},_getSignature:function(){var e=Ember.get(this,"currentUser.signature");return e=e?e.replace(/\{{[^{]*}/g,""):e,this._checkSignatureEmpty(e)?null:e},_initializeData:function(e){var t=Ember.get(this,"store"),s=this._getSignature();Ember.RSVP.hash({newTicket:t.createRecord("ticket",{status:l.default.status.closed,priority:l.default.priority.low,description:s,customFields:{}})}).then(this._setModelData.bind(this,e))},_setModelData:function(e,t){var s=this;Ember.set(this,"model",t.newTicket),e?Ember.run.next((function(){Ember.set(s,"isLoaded",!0)})):Ember.set(this,"isLoaded",!0)},_mkpPublishEventError:function(e){return Ember.get(this,"eventSources").errorHandler("marketplace.errors.tickets.composeEmailSend",e)},serializedModel:function(e){var t=e.serialize();return t.email_config_id=parseInt(Ember.get(this,"responderEmail").id),t},addAttachments:function(){var e=Ember.get(this,"model"),t=Ember.get(this,"dynamicAttachmentsIds");Ember.isPresent(t)&&Ember.setProperties(e,{attachmentIds:t})},clearFormField:function(){Ember.setProperties(this,{selectedCc:[],selectedContact:null,startContactValidations:!1,dynamicAttachmentsIds:[],ticketCompany:null})},sendEmailAndSaveTicket:(0,o.task)(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"model"),e.prev=1,e.next=4,t.sendEmail(this.serializedModel(t));case 4:return s=e.sent,this.onTicketSave(s),Ember.get(this,"currentAccount").hasFeature("suggested_articles_count")&&this._updateArticlesSuggested(Ember.get(this,"articlesSuggested")),e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(1),this._failure(void 0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),defaultStatus:l.default.status.closed,defaultPriority:l.default.defaultPriority});e.default=b})),define("freshdesk/components/module-tickets/compose-email/compose-email-form-builder/component",["exports","freshdesk/mixins/tickets/form","ember-keyboard","freshdesk/mixins/tickets/insert-canned-response","@freshdesk/tickets/mixins/email-config","freshdesk/utils/blank-array","freshdesk/mixins/marketplace/interface/ticket-properties"],(function(e,t,s,n,i,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=Ember.Component.extend(t.default,s.EKMixin,n.default,i.default,r.default,{store:Ember.inject.service(),i18n:Ember.inject.service(),eventSources:Ember.inject.service(),ticketFields:Ember.inject.service(),scroller:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),startContactValidations:!1,displayInlineCannedResponse:!1,ticketCompany:null,oldDescription:null,validationAttribute:"email",requesterLabel:"fd.to",mkpInterfacePage:"newTicket",addedAttachments:(0,a.default)(),inlineAttachments:(0,a.default)(),ticket:Ember.computed.alias("model"),description:Ember.computed("model.description",(function(){var e=Ember.get(this,"model.description"),t=Ember.get(this,"oldDescription");return t!=e?(Ember.set(this,"oldDescription",e),e):t})),selectedGroup:Ember.computed("model.group",(function(){var e=Ember.get(this,"model.group");return Ember.get(e,"name")?this._labelGroup(e):null})),allGroupsList:Ember.computed.map("allGroups",(function(e){return this._labelGroup(e)})),isGroupRequired:Ember.computed("fields.@each","model.status",(function(){var e=Ember.get(this,"fields").findBy("type","default_group"),t=Ember.get(e,"requiredForAgents");return t||Ember.get(e,"requiredForClosure")&&Ember.get(this,"model.isMarkedClosed")})),descriptionIsRequired:Ember.computed("fields.length","model.status",(function(){var e=Ember.get(this,"fields").findBy("type","default_description"),t=Ember.get(e,"requiredForAgents");return t||Ember.get(e,"requiredForClosure")&&Ember.get(this,"model.isMarkedClosed")})),ticketAttachments:Ember.computed("model.attachments","inlineAttachments",(function(){var e=[],t=[];return Ember.get(this,"model.attachments")&&(e=Ember.get(this,"model.attachments").toArray()),Ember.get(this,"inlineAttachments")&&(t=Ember.get(this,"inlineAttachments").toArray()),e.concat(t)})),didInsertElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").registerControls(Ember.get(this,"mkpInterfacePage")),Ember.get(this,"mkpInterface").registerControls("ticketActions")},actions:{showCreateWhen:function(e,t){return t.canCreate},onChangeGroup:function(e){var t=Ember.get(this,"allGroupsList");Ember.set(this,"selectedGroup",t.find((function(t){return t.value===e}))),this._assignTicketGroup()},insertCannedResponse:function(e){this.setCannedResponse(e),Ember.set(this,"displayInlineCannedResponse",!1)}},_labelGroup:function(e){return{value:parseInt(Ember.get(e,"id")),label:Ember.get(e,"name")}},_assignTicketGroup:function(){var e=parseInt(Ember.get(this,"selectedGroup.value"));Ember.get(this,"eventSources").publishFieldChange(Ember.get(this,"model.groupId"),e,"ticket","groupId"),Ember.set(this,"model.groupId",e)},isMandatory:function(e){return Ember.get(e,"requiredForAgents")||Ember.get(e,"requiredForClosure")}});e.default=l})),define("freshdesk/components/module-tickets/compose-email/compose-email-form-builder/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"XJ8URoEm",block:'{"symbols":["field","currentSection","sectionField","value","customValidation","onchange"],"statements":[[4,"each",[[23,["formFields"]]],null,{"statements":[[4,"unless",[[22,1,["belongsToSection"]]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["hide_",[22,1,["name"]]],null]],null],"hide"],null]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,1,["type"]],"default_description"],null]],null,{"statements":[[4,"component",[[23,["form","custom-component"]]],[["isRequired","form","model","valuePath"],[[23,["descriptionIsRequired"]],[23,["form","form"]],[23,["model"]],"description"]],{"statements":[[0,"          "],[7,"label"],[11,"id","createEmailEditor"],[11,"class","label-field"],[9],[1,[27,"t",["ticket.fields.description"],null],false],[0," "],[10],[0,"\\n"],[4,"if",[[27,"launched",["froala_cursor_jump_fix"],null]],null,{"statements":[[0,"            "],[1,[27,"ui-form/editor/ticket-editor",null,[["ariaLabelledBy","value","onInsertAttachment","onRemoveAttachment","externalAttachments","showCannedResponse","enableSlashCommands","showSolution","placeholder","contentChanged","cannedResponseModal","validation","customClass","enableInlineCannedResponse","skipFirstSendAction","isUpdateDescription","descriptionValue","cloudAttachments","ticket","showFooter","wrapDefaultFont","fixedFormattingToolbar","updateArticlesSuggested"],["createEmailEditor",[23,["description"]],[23,["onInsertAttachment"]],[23,["onRemoveAttachment"]],[23,["ticketAttachments"]],true,true,true,"",[27,"action",[[22,0,[]],[27,"mut",[[23,["model","description"]]],null]],null],[23,["displayInlineCannedResponse"]],[22,5,[]],"editor-create-ticket ticket-action",[27,"toggle-action",["displayInlineCannedResponse",[22,0,[]]],null],false,[23,["refreshTemplate"]],[23,["descriptionValue"]],[23,["cloudAttachments"]],[23,["model"]],true,true,true,[27,"action",[[22,0,[]],"updateArticlesSuggested"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"ui-form/editor/ticket-editor",null,[["ariaLabelledBy","value","onInsertAttachment","onRemoveAttachment","externalAttachments","showCannedResponse","enableSlashCommands","showSolution","placeholder","contentChanged","cannedResponseModal","validation","customClass","enableInlineCannedResponse","editorInput","skipFirstSendAction","isUpdateDescription","descriptionValue","cloudAttachments","ticket","showFooter","wrapDefaultFont","fixedFormattingToolbar","updateArticlesSuggested"],["createEmailEditor",[23,["description"]],[23,["onInsertAttachment"]],[23,["onRemoveAttachment"]],[23,["ticketAttachments"]],true,true,true,"",[27,"action",[[22,0,[]],[27,"mut",[[23,["model","description"]]],null]],null],[23,["displayInlineCannedResponse"]],[22,5,[]],"editor-create-ticket ticket-action",[27,"toggle-action",["displayInlineCannedResponse",[22,0,[]]],null],[23,["editorInput"]],false,[23,["refreshTemplate"]],[23,["descriptionValue"]],[23,["cloudAttachments"]],[23,["model"]],true,true,true,[27,"action",[[22,0,[]],"updateArticlesSuggested"],null]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[4,5,6]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_requester"],null]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/new-ticket/default-requester",null,[["model","form","startContactValidations","allowContactCreate","emailOnlyContact","onChangeRequester","isEmailInvalid","requesterValue","onchangeCompany","hasValidation","validationAttribute","showCreateWhen","requesterLabel","page","noMatchesMessage","refreshTemplate","disabled","selectedEmailDetails","allowBcc"],[[23,["model"]],[23,["form"]],[23,["startContactValidations"]],false,true,[27,"action",[[22,0,[]],[23,["onChangeRequester"]]],null],[23,["isEmailInvalid"]],[23,["requesterValue"]],[23,["onchangeCompany"]],true,[23,["validationAttribute"]],[27,"action",[[22,0,[]],"showCreateWhen"],null],[23,["requesterLabel"]],"new-ticket",false,[23,["refreshTemplate"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,1,["name"]]],null]],null],true,false],null],[23,["selectedEmailDetails"]],[23,["allowBcc"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_group"],null]],null,{"statements":[[0,"        "],[1,[27,"component",[[23,["form","select-field"]],[22,1,["fieldName"]]],[["options","placeholder","searchEnabled","optionLabelPath","optionValuePath","hideDefaultOption","isRequired","selected","data-test-id","onchange","disabled"],[[23,["allGroupsList"]],[27,"t",["ticket.fields.group_name"],null],true,"label","value",true,[23,["isGroupRequired"]],[23,["selectedGroup"]],"group-id",[27,"action",[[22,0,[]],"onChangeGroup"],null],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,1,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"not-eq",[[22,1,["name"]],"company"],null]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,1,[]]],[["form","model","refresh","disabled"],[[23,["form"]],[23,["model"]],[23,["refreshTemplate"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,1,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[22,1,["hasSections"]]],null,{"statements":[[4,"module-tickets/ticket-form/section-form",null,[["sectionField","ticket"],[[22,1,[]],[23,["model"]]]],{"statements":[[4,"each",[[22,2,["fields"]]],null,{"statements":[[0,"            "],[7,"div"],[12,"class",[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["hide_",[22,3,["name"]]],null]],null],"hide"],null]],[9],[0,"\\n              "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,3,[]]],[["form","model","refresh","disabled"],[[23,["form"]],[23,["model"]],[23,["refreshTemplate"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,3,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[3]},null]],"parameters":[2]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[7,"div"],[11,"class","hide"],[9],[0,"\\n  "],[1,[27,"component",[[23,["form","text-field"]],"inline_attachment_ids"],[["disabled","value"],[true,[23,["model","inlineAttachmentIds"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/compose-email/compose-email-form-builder/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/compose-email/form-fields/component",["exports","freshdesk/mixins/tickets/form","ember-keyboard","freshdesk/mixins/tickets/insert-canned-response","@freshdesk/tickets/mixins/email-config"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend(t.default,s.EKMixin,n.default,i.default,{store:Ember.inject.service(),i18n:Ember.inject.service(),ticketFields:Ember.inject.service(),eventSources:Ember.inject.service(),classNames:["__module-tickets__compose-email__form-fields input"],startContactValidations:!1,showMandatoryFields:!0,ticketCompany:null,mkpInterfacePage:"newTicket",composeEmailFormFields:Ember.computed("formFields",(function(){var e=this;return Ember.get(this,"formFields").filter((function(t){return e.isMandatory(t)}))})),extraFormFields:Ember.computed("formFields",(function(){var e=this;return Ember.get(this,"formFields").filter((function(t){return!e.isMandatory(t)}))})),showAndHideFieldsLabel:Ember.computed("showMandatoryFields",(function(){return Ember.get(this,"showMandatoryFields")?"tickets.compose_email.more":"tickets.compose_email.non-mandatory"})),extraFieldsLength:Ember.computed("extraFormFields.[]",(function(){var e=Ember.get(this,"extraFormFields").filterBy("belongsToSection",!0);return Ember.get(this,"extraFormFields").length-e.length})),willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").deregisterControls(Ember.get(this,"mkpInterfacePage")),Ember.get(this,"mkpInterface").deregisterControls("ticketActions")},actions:{onInsertAttachment:function(){this.sendAction.apply(this,["onInsertAttachment"].concat(Array.prototype.slice.call(arguments)))},onRemoveAttachment:function(){this.sendAction.apply(this,["onRemoveAttachment"].concat(Array.prototype.slice.call(arguments)))},updateArticlesSuggestedInTicket:function(e){this.updateArticlesSuggestedInTicket(e)},changeForm:function(){this.toggleProperty("showMandatoryFields")},saveTags:function(e){Ember.set(this,"model.tags",e)}},isMandatory:function(e){return Ember.get(e,"requiredForAgents")||Ember.get(e,"requiredForClosure")}});e.default=a})),define("freshdesk/components/module-tickets/compose-email/form-fields/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"8H5n0ork",block:'{"symbols":[],"statements":[[0,"\\n"],[1,[27,"module-tickets/compose-email/compose-email-form-builder",null,[["formFields","form","model","fields","startContactValidations","onchangeCompany","onChangeRequester","onInsertAttachment","onRemoveAttachment","refreshTemplate","allowBcc","descriptionValue","cloudAttachments","updateArticlesSuggestedInTicket","selectedEmailDetails"],[[23,["composeEmailFormFields"]],[23,["form"]],[23,["model"]],[23,["fields"]],[23,["startContactValidations"]],[23,["onchangeCompany"]],[27,"action",[[22,0,[]],[23,["onChangeRequester"]]],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["refreshTemplate"]],true,[23,["descriptionValue"]],[23,["cloudAttachments"]],[27,"action",[[22,0,[]],"updateArticlesSuggestedInTicket"],null],[23,["selectedEmailDetails"]]]]],false],[0,"\\n"],[7,"label"],[11,"class","label-field"],[9],[0,"\\n  "],[1,[27,"t",["tickets.compose-email.tags"],null],false],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","tag-list"],[11,"data-test-id","tags"],[9],[0,"\\n  "],[1,[27,"app-components/app-tags/create-tag",null,[["tags","saveTags","onAddFocus"],[[23,["model","tags"]],[27,"action",[[22,0,[]],"saveTags"],null],false]]],false],[0,"\\n"],[10],[0,"\\n"],[4,"if",[[27,"gte",[[23,["extraFieldsLength"]],1],null]],null,{"statements":[[0,"  "],[7,"p"],[11,"class","text__link text__link--more"],[9],[0,"\\n    "],[7,"a"],[11,"role","button"],[11,"data-test-id","showMoreFields"],[12,"onclick",[27,"action",[[22,0,[]],"changeForm"],null]],[9],[0,"\\n      "],[1,[27,"t",[[23,["showAndHideFieldsLabel"]]],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["showMandatoryFields"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/compose-email/compose-email-form-builder",null,[["formFields","form","model","fields","onchangeCompany","startContactValidations","onChangeRequester","onInsertAttachment","onRemoveAttachment","cloudAttachments","refreshTemplate","data-test-id","updateArticlesSuggestedInTicket"],[[23,["extraFormFields"]],[23,["form"]],[23,["model"]],[23,["fields"]],[23,["onchangeCompany"]],[23,["startContactValidations"]],[27,"action",[[22,0,[]],[23,["onChangeRequester"]]],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["cloudAttachments"]],[23,["refreshTemplate"]],"compose-additional-fields",[27,"action",[[22,0,[]],"updateArticlesSuggestedInTicket"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[7,"div"],[11,"id","scroll-to-bottom"],[9],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/compose-email/form-fields/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/compose-email/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"GjoPB7hx",block:'{"symbols":["wrapper","sideBar","form"],"statements":[[1,[27,"app-components/app-maintitle",null,[["title"],[[27,"t",["fd.send.email"],null]]]],false],[0,"\\n"],[4,"page-layout/page-wrapper",null,[["class"],["content-widget-wrap new-ticket-wrap"]],{"statements":[[0,"  "],[7,"div"],[11,"class","compose-email-form"],[9],[0,"\\n"],[4,"component",[[22,1,["content-widget"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","compose-email-form__form-for"],[9],[0,"\\n"],[4,"if",[[23,["isLoaded"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","compose-email-form__info-text"],[9],[0,"\\n            "],[1,[27,"t",["tickets.compose_email.info"],null],false],[0,"\\n            "],[7,"a"],[11,"href","https://support.freshdesk.com/support/solutions/articles/211974"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n              "],[1,[27,"t",["tickets.compose_email.learn_more"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[12,"class",[28,["input ",[27,"if",[[23,["mkpInterface","controlData","from","hide"]],"hide"],null]]]],[9],[0,"\\n            "],[7,"label"],[11,"class","compose-email-form__responder label-field text--small"],[9],[1,[27,"t",["fd.from"],null],false],[10],[0,"\\n            "],[1,[27,"app-components/from-email",null,[["disabled","userTicketGlobalScope","restrictedComposeEnabled","fromOptions","selectedEmailConfig","onchange"],[[23,["mkpInterface","controlData","from","disable"]],[23,["userTicketGlobalScope"]],[23,["restrictedComposeEnabled"]],[23,["emailOptions"]],[23,["responderEmail"]],[27,"action",[[22,0,[]],"onChangeEmailConfig"],null]]]],false],[0,"\\n          "],[10],[0,"\\n"],[4,"ui-form/form-for",[[23,["model"]],[23,["rules"]]],[["submit","focusOnError","defaultSubmitBtn","scrollOffset"],[[27,"action",[[22,0,[]],"submit"],null],[23,["focusOnError"]],[23,["defaultSubmitBtn"]],[23,["scrollOffset"]]]],{"statements":[[0,"\\n            "],[1,[27,"module-tickets/compose-email/form-fields",null,[["model","fields","form","startContactValidations","discriptionIsRequired","cloudAttachments","onchangeCompany","onChangeRequester","onInsertAttachment","onRemoveAttachment","refreshTemplate","descriptionValue","updateArticlesSuggestedInTicket","selectedEmailDetails"],[[23,["model"]],[23,["fields"]],[22,3,[]],[23,["startContactValidations"]],[23,["descriptionIsRequired"]],[23,["cloudAttachments"]],[27,"action",[[22,0,[]],"multipleCompany"],null],[27,"action",[[22,0,[]],"onChangeTo"],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["refreshTemplate"]],[23,["descriptionValue"]],[27,"action",[[22,0,[]],"updateArticlesSuggestedInTicket"],null],[23,["selectedContact"]]]]],false],[0,"\\n\\n            "],[7,"div"],[11,"class","modal__footer form-submission create-ticket-footer"],[9],[0,"\\n"],[4,"if",[[23,["submitDisabled"]]],null,{"statements":[[0,"                "],[7,"span"],[11,"class","text--red footer-warning"],[9],[1,[27,"t",["tickets.compose-email.activation-warning"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[7,"label"],[11,"class","modal__footer__label"],[9],[0,"\\n                "],[7,"span"],[11,"data-test-id","createAnother"],[11,"class","modal__footer__checkbox"],[9],[0,"\\n                  "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","value"],["createAnotherTicket",[23,["toSendAgain"]]]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[9],[0,"\\n                  "],[1,[27,"t",["tickets.compose_email.create"],null],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n              "],[7,"button"],[11,"data-test-id","cancelButton"],[11,"name","button"],[11,"class","modal__footer__btn btn btn--secondary"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n                "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n              "],[10],[0,"\\n              "],[1,[27,"component",[[22,3,["submit"]]],[["disableWhen"],[[23,["submitDisabled"]]]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[3]},null],[0,"          "],[1,[27,"interactivity-beacon",null,[["routeInteractive"],[true]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["renderLater"]]],null,{"statements":[[0,"          "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","pageType"],["new_email_background","new_email"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,1,["sidebar"]]],[["class"],["multiple-widget-slider ticket-requester-info template_sidebar ticket-template-block content-widget-wrap"]],{"statements":[[4,"app-components/widget-sidebar",null,[["class","showHideSidebar","ticket","renderInPlace"],["pull-left",[22,1,["showHideSidebar"]],[23,["ticket"]],true]],{"statements":[[4,"if",[[23,["isTemplatesEnabled"]]],null,{"statements":[[4,"component",[[22,2,["addWidget"]]],[["widgetId","label","icon","minimized"],["tickettemplates",[27,"t",["fd.admin.template"],null],"ticket-template",false]],{"statements":[[4,"if",[[23,["fetchTemplatesTask","isRunning"]]],null,{"statements":[[0,"              "],[1,[27,"ui-components/gravity-loader",null,[["isLoading","class"],[true,"tickets-list-loading"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"module-tickets/ticket-template",null,[["templates","selectedName","templateApplied","applyTemplate","clearTemplate","hasAssociation","showEmailOnly"],[[23,["composeEmailTemplates"]],[23,["selectedName"]],[23,["templateApplied"]],[27,"action",[[22,0,[]],"applyTemplate"],null],[27,"action",[[22,0,[]],"clearTemplate"],null],false,true]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[27,"hasabilities",["view_contacts"],null]],null,{"statements":[[4,"component",[[22,2,["addWidget"]]],[["widgetId","class","label","icon","minimized"],["contactwidget","contactwidget_wrapper",[27,"t",["fd.contact_details"],null],"info",false]],{"statements":[[0,"            "],[1,[27,"module-tickets/new-ticket/requester-widget",null,[["contact"],[[23,["selectedContact"]]]]],false],[0,"\\n            "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","pageType","renderMkpApp"],["new_email_requester_info","new_email",[23,["renderMkpApp"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/compose-email/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/add-requester/component",["exports","freshdesk/constants/contacts/default-attributes","freshdesk/constants/validations/contact-validation","freshdesk/constants/validations/ucr-contact-model-validation","freshdesk/utils/other-phone","ember-cp-validations"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Ember.Component.extend({currentUser:Ember.inject.service(),classNames:["__module-tickets__new-ticket__add-requester"],model:null,startValidate:!1,defaultContactFields:t.defaultContactFields,filteredContactFields:Ember.computed("hasUniqueContactIdentifier",(function(){var e=this;return t.defaultContactFields.filter((function(t){return"uniqueExternalId"!==t.valuePath||Ember.get(e,"hasUniqueContactIdentifier")}))})),requesterMandatoryInfo:"ticket.requester.mandatory.hint",addressFieldLabel:"ticket.contactfields.address",selectedCompany:Ember.computed("model",{get:function(){return[]},set:function(e,t){return t}}),init:function(){this._super.apply(this,arguments);var e=Ember.get(this,"model");this._setDefaultValues();var t=this.currentAccount.launched("ucr-write"),r=(0,i.getValidationRule)(t,{},s.default,n.default),l=this.customContactValidation||(0,a.buildValidations)(r);l.apply(e)},willClearRender:function(){this._super.apply(this,arguments);var e=Ember.get(this,"model");this.clearDirtyValue(e)},didInsertElement:function(){var e=this;Ember.run.later((function(){var t=e.element;t&&t.querySelector("input")&&t.querySelector("input").focus()}),100)},actions:{onchange:function(e){Ember.set(this,"selectedCompany",e);var t=Ember.get(this,"model");Ember.set(t,"companyName",e.value)},cancel:function(){this.attrs.cancel()},hasPrivilege:function(e){var t=Ember.get(this,"currentUser").hasAbility("manage_companies");return e.length>1&&t}},clearDirtyValue:function(e){var t=Ember.get(this,"requester");for(var s in t)Ember.set(e,t[s],null)},_setDefaultValues:function(){if(this.showAddressField){Ember.set(this,"requester",{address:"address"})}Ember.set(this,"company",{fieldType:"companies",searchField:"value",url:"/search/autocomplete/companies"})}});e.default=r})),define("freshdesk/components/module-tickets/new-ticket/add-requester/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"XNOr+Tby",block:'{"symbols":["field","option"],"statements":[[7,"div"],[11,"class","add-requester"],[9],[0,"\\n  "],[7,"span"],[11,"class","add-requester__add-text"],[9],[0,"\\n    "],[1,[27,"t",["ticket.requester.new"],null],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"data-test-id","cancelAddContact"],[11,"class","add-requester__cancel-text"],[12,"onclick",[27,"action",[[22,0,[]],"cancel"],null]],[9],[0,"\\n    "],[1,[27,"t",["ticket.requester.cancel"],null],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"data-test-id","mandatory-field-warning"],[11,"class","add-requester__mandatory-text"],[9],[1,[27,"t",[[23,["requesterMandatoryInfo"]]],null],false],[10],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","add-requester-field"],[9],[0,"\\n"],[4,"each",[[23,["filteredContactFields"]]],null,{"statements":[[0,"    "],[1,[27,"ui-form/text-field",null,[["data-test-id","class","valuePath","label","model","maxLength","startValidate"],[[22,1,["id"]],[22,1,["class"]],[22,1,["valuePath"]],[27,"t",[[22,1,["label"]]],null],[23,["model"]],255,[23,["startValidate"]]]]],false],[0,"\\n"],[4,"if",[[27,"eq",[[22,1,["valuePath"]],"email"],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","text--xsmall"],[9],[1,[27,"t",["fd.company"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","add-requester-field__company-field"],[9],[0,"\\n"],[4,"ui-form/remote-select-field",null,[["data-test-id","selected","customFdLabel","allowCreate","onchange","fieldType","searchField","url","showCreateWhen"],["requesterCompany",[23,["selectedCompany"]],[27,"t",["fd.company"],null],true,[27,"action",[[22,0,[]],"onchange"],null],[23,["company","fieldType"]],[23,["company","searchField"]],[23,["company","url"]],[27,"action",[[22,0,[]],"hasPrivilege"],null]]],{"statements":[[0,"          "],[1,[22,2,["value"]],false],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[4,"if",[[23,["showAddressField"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","address-field"],[9],[0,"\\n      "],[1,[27,"ui-form/text-field",null,[["valuePath","data-test-id","label","model","startValidate"],[[23,["requester","address"]],"requester-address",[27,"t",[[23,["addressFieldLabel"]]],null],[23,["model"]],[23,["startValidate"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/add-requester/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/component",["exports","ember-concurrency","freshdesk/mixins/tickets/form","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/mixins/tickets/insert-canned-response","freshdesk/constants/ticket","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/integrations/installed-apps","freshdesk/mixins/tickets/ticket-templates","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/tickets/ticket-fields-extra","freshdesk/mixins/fetch-user","freshdesk/mixins/slash-commands/config","freshdesk/utils/tickets/has-ticket-permissions","freshdesk/utils/tickets/ticket-form","freshdesk/constants/contacts/default-attributes","freshdesk/mixins/tickets/quick-create-failure","freshdesk/constants/ticket-template"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h,f,b,k){function g(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var s=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(o){i=!0,a=o}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var E=Ember.Component.extend(s.default,i.default,r.default,l.default,o.default,c.default,d.default,m.default,n.default,b.default,u.default,{currentUser:Ember.inject.service(),store:Ember.inject.service(),i18n:Ember.inject.service(),ajax:Ember.inject.service(),ticketFields:Ember.inject.service(),eventSources:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),marketplace:Ember.inject.service("marketplace"),mkpInterface:Ember.inject.service("marketplace-interface"),renderStates:Ember.inject.service(),classNames:["__module-tickets__new-ticket"],scrollOffset:-150,status:null,templateFields:["responderId","productId","parentTemplateId","childTemplateIds"],data:null,contactAttribute:null,contactCreateUrl:"/api/_/contacts/quick_create",selectedContact:null,createAnother:!1,createWithServiceTask:!1,focusOnError:0,dynamicAttachmentsIds:null,startContactValidations:!1,ticketCompany:null,addNewRequester:!0,isDisabled:!1,refreshTemplate:!1,descriptionValue:null,renderMkpApp:!0,contactId:null,emailId:null,cloudAttachments:Ember.computed.alias("model.cloudFiles"),isFSMEnabled:Ember.computed.reads("currentAccount.fsmEnabled"),renderLater:Ember.computed.reads("renderStates.renderLater"),isLoaded:Ember.computed((function(){return!1})),loadSidebar:!1,toggleCreateAnother:!0,templatesLoaded:!1,showTags:!0,updateContactAddress:!1,addChildLabel:"ticket.submit.createWithServiceTask",overrideTicketProperties:null,fields:Ember.computed("ticketFields.fields",(function(){var e=Ember.get(this,"ticketFields.fields"),t=e.find((function(e){return"default_requester"===Ember.get(e,"type")}));return Ember.set(t,"fieldName","requesterId"),this.checkCustomSourceFeature?e.filterBy("hiddenInCreate",!1):e.filter((function(e){var t=e.name,s=e.hiddenInCreate;return"source"!==t&&!s}))})),checkCustomSourceFeature:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("custom_source")&&Ember.get(this,"currentAccount").launched("ticket_source_revamp")})),contactEmailDetails:Ember.computed((function(){if(Ember.get(this,"emailId"))return Ember.get(this,"emailId");if(Ember.get(this,"contactId")){var e=this.peekUser(parseInt(Ember.get(this,"contactId")));if(null!==e)return Ember.get(e,"email")}})),newTicketTemplates:Ember.computed.filter("templates",(function(e){return e.source!==k.OUTBOUND_SOURCE_ID})),init:function(){this._super.apply(this,arguments),this._setDefaultValues(),this.createAdditonalFields(Ember.get(this,"formFields"),{fieldName:"email",fieldType:"email",isRequired:!0,isEmail:!0},"default_requester");var e=Ember.get(this,"data");Ember.set(this,"contactId",parseInt(Ember.get(this,"model.contactId"))),Ember.set(this,"emailId",Ember.get(this,"model.email")),e&&this._setModelData(null,e),this.ticketFormFieldOptions&&Ember.setProperties(this,this.ticketFormFieldOptions),Ember.isPresent(this.isTemplatesEnabled)||this.set("isTemplatesEnabled",this.currentAccount.hasFeature("ticket_templates")||this.currentAccount.hasFeature("parent_child_tickets"))},fetchTopicUserTask:(0,t.task)(regeneratorRuntime.mark((function e(t){var s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ember.get(this,"contactEmailDetails")){e.next=3;break}return e.next=3,this.fetchUser(parseInt(Ember.get(this,"contactId"))).then((function(e){Ember.set(s,"contactEmailDetails",e.data.email)}));case 3:this._prefillTopicData(t);case 4:case"end":return e.stop()}}),e,this)}))),fetchNewTicket:(0,t.task)(regeneratorRuntime.mark((function e(){var t,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"model"),s=t.topicId,e.next=3,this.fetchTicket();case 3:return n=e.sent,Ember.setProperties(this,{model:n.newTicket,newContact:n.newContact}),e.abrupt("return",s||!1);case 6:case"end":return e.stop()}}),e,this)}))),fetchTicket:function(){return Ember.RSVP.hash({newTicket:Ember.get(this,"store").createRecord("ticket",this._buildOptions()),newContact:Ember.get(this,"store").createRecord("contact")})},_buildOptions:function(){var e=Ember.get(this,"currentUser.id"),t=Ember.get(this,"store").peekRecord("agent",e),s={status:this.defaultStatus,priority:this.defaultPriority,customFields:{}};return Ember.setProperties(s,{responder:t,responderId:e,source:this.defaultSource}),this.overrideTicketProperties&&Ember.setProperties(s,this.overrideTicketProperties),s},fetchTemplatesTaskRunner:(0,t.task)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ember.get(this,"fetchTemplatesTask").perform();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),actions:{onChangeSubmitOptions:function(e,t){if(t)switch(e){case"createAnother":Ember.set(this,"createWithServiceTask",!1);break;case"createWithServiceTask":Ember.set(this,"createAnother",!1)}},ticketFetchCallback:function(e){e?Ember.get(this,"fetchTopicUserTask").perform(e):Ember.set(this,"isLoaded",!0)},multipleCompany:function(e){Ember.set(this,"ticketCompany",e)},onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},onRemoveAttachment:function(e){var t;if(e){Ember.get(this,"dynamicAttachmentsIds").removeObject(parseInt(e.id));var s=Ember.get(this,"model");s.attachments.removeObject(e),(null===(t=s.attachmentIds)||void 0===t?void 0:t.length)&&s.attachmentIds.removeObject(e.id)}},toggleAddRequester:function(){Ember.set(this,"ticketCompany",null),Ember.set(this,"selectedContact",null),Ember.set(this,"startContactValidations",!1),Ember.tryInvoke(this,"onToggleAddRequester",[this.model,this.addNewRequester])},onChangeRequester:function(e){Ember.set(this,"selectedContact",e),Ember.tryInvoke(this,"onContactUpdate",[e,this.model,!0])},onTicketFieldChange:function(e,t){Ember.tryInvoke(this,"onAppointmentTimeChange",[e,t,this.model])},submit:function(){var e=Ember.tryInvoke(this,"onSubmit",[this.model,this.newContact,this.addNewRequester]);this.addAttachments();var t=Ember.get(this,"model"),s=[],n=this;Ember.get(this,"addNewRequester")&&Ember.set(t,"companyId",Ember.get(this,"ticketCompany"));var i={ticket:Ember.get(this,"model").serialize(),requester:this._getUserDataForApps()};return s.push(Ember.get(this,"marketplace").publishEvent({event:"ticket.saveTicket",data:i}).then((function(){return Ember.get(n,"addNewRequester")&&!e?Ember.get(n,"saveTicket").perform():Ember.get(n,"contactAndTicketCreation").perform(!e)})).catch((function(e){return n._mkpPublishEventError(e)}))),Ember.RSVP.Promise.all(s.compact())},cancel:function(){Ember.get(this,"model.topicId")?Ember.get(this,"router").transitionTo("helpdesk.forums.topics",Ember.get(this,"model.topicId")):Ember.get(this,"router").transitionTo("helpdesk.tickets")}},updateParentRequesterInfo:(0,t.task)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.peekUser(t),!(0,h.updateCustomerInfo)(s,this.currentUser,this.model,this.updateContactAddress)){e.next=11;break}return e.prev=2,e.next=5,s.save({adapterOptions:{enforce_mandatory:!1}});case 5:this.flashMessage(!0,this.i18n.t("contacts.success.update")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this._failure(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])}))),_prefillTopicData:function(e){var t=Ember.get(this,"store").findRecord("topic",e).then(this._fetchTopicPost);Ember.RSVP.all([t]).then(this._updateModelData.bind(this))},_fetchTopicPost:function(e){var t={};return e.getFirstPost().then((function(s){var n=Ember.getProperties(e,"title","userId","id"),i=n.title,a=n.userId,r=n.id,l=Ember.get(s,"data.description");return Ember.setProperties(t,{subject:i,description:l,requesterId:a,topicId:r}),t}))},_updateModelData:function(e){var t=v(e,1)[0],s=t.descriptionValue;Ember.setProperties(Ember.get(this,"model"),t),Ember.setProperties(this,{descriptionValue:s}),Ember.set(this,"isLoaded",!0)},_setDefaultValues:function(){Ember.set(this,"contactAttribute",["companyName"].concat(g(f.defaultContactFieldNames))),this.get("requesterConfig.showAddressField")&&this.contactAttribute.pushObject("address"),Ember.set(this,"dynamicAttachmentsIds",[]);var e=[Object.create({value:a.default.status.closed,translatedLabel:Ember.get(this,"i18n").t("fd.close")})];Ember.set(this,"status",e)},_getUserDataForApps:function(){return Ember.get(this,"newContact.email")?Ember.get(this,"newContact").serialize():{name:Ember.get(this,"selectedContact.value"),email:Ember.get(this,"selectedContact.email"),id:Ember.get(this,"selectedContact.id")}},_setModelData:function(e,t){var s=this;Ember.set(this,"model",t.newTicket),Ember.set(this,"newContact",t.newContact),e?Ember.run.next((function(){Ember.set(s,"isLoaded",!0)})):Ember.set(this,"isLoaded",!0)},flashMessage:function(e,t){var s=Ember.get(this,"flashMessages");t&&(e?s.success(t):s.danger(t))},_transitionToTicket:function(e){var t=this;this.clearFormFields(),this.clearCloudAttachments(),this.toggleProperty("toggleCreateAnother"),Ember.get(this,"createAnother")?(Ember.tryInvoke(this,"onRefresh"),Ember.get(this,"refreshAction")(),Ember.run.next((function(){return t.toggleProperty("toggleCreateAnother")}))):(0,p.default)(Ember.get(this,"model"),Ember.get(this,"currentUser"))?Ember.get(this,"createWithServiceTask")?Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.id,{queryParams:{createServiceTask:!0}}):Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.id):Ember.get(this,"router").transitionTo("helpdesk.tickets"),this.flashMessage(!0,this.i18n.t("ticket.create.success"))},_mkpPublishEventError:function(e){return Ember.get(this,"eventSources").errorHandler("marketplace.errors.tickets.saveTicket",e)},_failure:function(e){Ember.set(this,"isLoaded",!0),e.errors?this.flashMessage(!1,e.errors[0].message):this.flashMessage(!1,e.message)},clearFormFields:function(){Ember.set(this,"ticketCompany",null),Ember.set(this,"selectedContact",null),Ember.set(this,"dynamicAttachmentsIds",[]),Ember.set(this,"updateContactAddress",!1)},addAttachments:function(){var e=Ember.get(this,"model"),t=Ember.get(this,"dynamicAttachmentsIds");Ember.isPresent(t)&&Ember.setProperties(e,{attachmentIds:t})},createContact:(0,t.task)(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},Ember.get(this,"contactAttribute").forEach((function(e){s[e.decamelize()]=Ember.get(t,e)})),e.prev=2,e.next=5,Ember.get(this,"ajax").request(Ember.get(this,"contactCreateUrl"),{method:"POST",data:JSON.stringify(s)});case 5:return n=e.sent,this.flashMessage(!0,this.i18n.t("ticket.requester.create.success")),Ember.set(this,"newContact",Ember.get(this,"store").createRecord("contact")),e.abrupt("return",n.data);case 11:e.prev=11,e.t0=e.catch(2),this.quickCreateFailure(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),validateAndCreateContact:(0,t.task)(regeneratorRuntime.mark((function e(){var t,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"newContact"),e.next=3,t.validate();case 3:if(s=e.sent,n=s.validations,!Ember.get(n,"isInvalid")){e.next=8;break}return this.incrementProperty("focusOnError"),e.abrupt("return");case 8:return e.next=10,Ember.get(this,"createContact").perform(t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),contactAndTicketCreation:(0,t.task)(regeneratorRuntime.mark((function e(){var t,s,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],Ember.set(this,"startContactValidations",!0),e.next=4,Ember.get(this,"validateAndCreateContact").perform();case 4:if(s=e.sent,n=s?s.id:null,i=Ember.get(this,"model"),Ember.tryInvoke(this,"onContactUpdate",[s,i,!1]),!n){e.next=14;break}return Ember.set(i,"requesterId",n),t&&this.toggleProperty("addNewRequester"),e.next=13,Ember.get(this,"saveTicket").perform(!0);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)}))),saveTicket:(0,t.task)(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setDescription(),s=Ember.get(this,"model"),e.prev=2,e.next=5,s.save();case 5:if(n=e.sent,Ember.get(s,"inlineAttachmentIds")&&Ember.set(s,"inlineAttachmentIds",[]),!this.get("requesterConfig.showUpdateToContact")||t){e.next=10;break}return e.next=10,this.updateParentRequesterInfo.perform(s.requesterId);case 10:return this._transitionToTicket(n),Ember.get(this,"currentAccount").hasFeature("suggested_articles_count")&&this._updateArticlesSuggested(Ember.get(this,"articlesSuggested")),e.abrupt("return",n);case 15:e.prev=15,e.t0=e.catch(2),this._failure(e.t0);case 18:case"end":return e.stop()}}),e,this,[[2,15]])}))),defaultStatus:a.default.defaultStatus,defaultPriority:a.default.defaultPriority,defaultSource:a.default.defaultSource});e.default=E})),define("freshdesk/components/module-tickets/new-ticket/custom-create/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__new-ticket__custom-create"]});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/custom-create/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"3AuDEfon",block:'{"symbols":[],"statements":[[7,"div"],[9],[0,"\\n  "],[7,"span"],[11,"class","custom-create__span"],[9],[0,"\\n    "],[1,[27,"svg-jar",["add"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[1,[27,"t",["ticket.requester.customAdd"],null],false],[0,"\\n  \\""],[1,[23,["term","searchText"]],false],[0,"\\"\\n  "],[1,[27,"t",["ticket.requester.customAdd.requester"],null],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/custom-create/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/default-requester/component",["exports","@freshdesk/common/utils/duplicate-check","ember-concurrency","freshdesk/utils/blank-array","freshdesk/mixins/fetch-user","freshdesk/constants/static-url-list"],(function(e,t,s,n,i,a){function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=/<(.*?)>/,o=Ember.Component.extend(i.default,{store:Ember.inject.service("store"),ajax:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),eventSources:Ember.inject.service(),marketplace:Ember.inject.service("marketplace"),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["__module-tickets__new-ticket__default-requester"],contactFindUrl:"/search/autocomplete/requesters",allowContactCreate:!1,emailOnlyContact:!1,addNewRequester:!0,contactEmail:null,createdContactId:null,fetchAgentDetails:!1,hasValidation:!1,model:null,newContact:null,refreshTemplate:!1,requesterLabel:"ticket.requester.label",showCcField:!0,showCompanyField:!0,startContactValidations:!1,ticketCompany:null,validationAttribute:"requesterId",requesterId:null,isEmailInvalid:!1,isNewTicketPage:!1,isNewServiceTask:!1,classNameBindings:["isEmailInvalid:error"],hasUniqueContactIdentifier:Ember.computed("currentAccount.features",(function(){return Ember.get(this,"currentAccount").hasFeature("unique_contact_identifier")})),requesterMandatoryInfo:Ember.computed("hasUniqueContactIdentifier",(function(){return this.isNewServiceTask?"ticket.requester.mandatory.phone":Ember.get(this,"hasUniqueContactIdentifier")?"ticket.requester.mandatory.hint":"ticket.requester.mandatory.hint_without_unique_external_id"})),selectedCc:(0,n.default)(),selectedBcc:(0,n.default)(),showCc:Ember.computed.empty("model.ccEmails"),allowBcc:!1,showAddBcc:!1,selectedBccEmails:Ember.computed.mapBy("selectedBcc","email"),selectedCcEmails:Ember.computed.mapBy("selectedCc","email"),notFreshcallerTicket:Ember.computed.not("isfreshcallerTicket"),showAddCc:Ember.computed.and("showCc","showCcField","notFreshcallerTicket"),applyCompanyFieldStyle:Ember.computed.and("showCc","allowContactCreate"),requester:Ember.computed("model","createdContactId","refreshTemplate",(function(){var e=Ember.get(this,"model.requesterId");return e?Ember.get(this,"findContact").perform(e):null})),hasAbilityToAddContact:Ember.computed("addNewRequester",(function(){return Ember.get(this,"addNewRequester")&&Ember.get(this,"currentUser").hasAbility("ManageContacts")})),selectedContact:Ember.computed("requesterValue","requester.isSuccessful",{get:function(){return Ember.get(this,"requesterValue")?Ember.get(this,"requesterValue"):Ember.get(this,"requester.isSuccessful")?Ember.get(this,"requester.value"):Ember.get(this,"model.requesterId")?Ember.get(this,"model.requesterId"):null},set:function(e,t){return t}}),shouldShowCompanyField:Ember.computed("companyList","hasMultipleCompanyFeature","showCompanyField",(function(){var e=Ember.get(this,"showCompanyField"),t=Ember.get(this,"companyList").length>1;return Ember.get(this,"hasMultipleCompanyFeature")&&e&&t})),contactInfo:Ember.computed("selectedContact","fetchAgentDetails",(function(){var e,t=Ember.get(this,"fetchAgentDetails"),s=Ember.get(this,"selectedContact.id");return s&&!t&&(e=this.fetchUser(s,{reload:!0,include:"company"})),e})),hasMultipleCompanyFeature:Ember.computed("currentAccount.features",(function(){return Ember.get(this,"currentAccount").hasFeature("MultipleUserCompanies")})),companyList:Ember.computed("contactInfo.isFulfilled",(function(){var e=[];Ember.set(this,"ticketCompany",null);var t=Ember.get(this,"contactInfo");if(t&&Ember.get(t,"isFulfilled")&&Ember.get(this,"hasMultipleCompanyFeature")){var s=Ember.get(t,"content");null!==Ember.get(s,"companyId")&&(Ember.set(this,"ticketCompany",Ember.get(s,"companyId")),e.push({id:parseInt(Ember.get(s,"company.id")),name:Ember.get(s,"company.name")})),Ember.get(s,"otherCompanies").forEach((function(t){e.push({id:t.id,name:t.name})})),parseInt(s.id)===Ember.get(this,"requesterId")&&Ember.get(this,"model.companyId")&&Ember.set(this,"ticketCompany",Ember.get(this,"model.companyId"))}return e.length<=1&&Ember.set(this,"ticketCompany",null),this.send("onchangeCompany",Ember.get(this,"ticketCompany")),e})),init:function(){var e=this;this._super.apply(this,arguments);var t=Ember.get(this,"validationAttribute");Ember.set(this,"requesterId",Ember.get(this,"model.requesterId")),Ember.get(this,"hasValidation")&&t&&Ember.defineProperty(this,"contactValidation",Ember.computed.reads("model.validations.attrs.".concat(t)));var s=Ember.get(this,"model.ccEmails")||[],n=s.map((function(e){return{email:e,details:e,valid:!0}}));if(Ember.get(this,"allowBcc")&&this.loadBccState(),Ember.get(this,"emailOnlyContact")&&Ember.get(this,"selectedEmailDetails.email"))Ember.setProperties(this,{selectedContact:Ember.get(this,"selectedEmailDetails"),"model.email":Ember.get(this,"selectedEmailDetails.email")});else if(Ember.get(this,"contactEmailDetails"))this.contactEmailLoad(Ember.get(this,"contactEmailDetails"));else{var i=Ember.get(this,"contactId");i?this.fetchUser(i).then((function(t){e.contactEmailLoad(t.data.email,t.data)})):this.sendAction("onChangeRequester",null)}Ember.set(this,"selectedCc",n),Ember.get(this,"marketplace").on("ccUpdated",this.ccUpdated.bind(this)),"new-ticket"===Ember.get(this,"page")&&Ember.setProperties(this,{isNewTicketPage:!0})},actions:{onchangeCompany:function(e){this.sendAction("onchangeCompany",e)},handleFocus:function(e){Ember.get(this,"selectedContact")&&Ember.get(this,"selectedContact.id")||this.tabPressed||(e.actions.open(),Ember.set(this,"tabPressed",!0))},handleBlur:function(e){if(Ember.get(this,"isNewTicketPage")&&!Ember.get(this,"isValueSelected")){var t=e.searchText,s={email:t,details:t};Ember.set(this,"isValueSelected",!0),e.actions.select(s)}},handleInput:function(){Ember.get(this,"isNewTicketPage")&&Ember.setProperties(this,{isEmailInvalid:!1,isValueSelected:!1})},handleKeydown:function(e,s,n){var i=this;if(Ember.get(this,"isNewTicketPage")){var a=s.target.value;if((9===s.keyCode||13===s.keyCode)&&a){var r;if(e.highlighted)r=e.highlighted;else{var o=a;a.indexOf(" ")>0&&a.indexOf("<")>0&&(o=a.match(l)[1]),r={email:o,details:a},(0,t.isValidEmail)(o)||(r.valid=!1)}e.actions.select(n(r,e),s)}9===s.keyCode&&(Ember.set(this,"tabPressed",!0),Ember.run.later((function(){Ember.set(i,"tabPressed",!1)})))}},showCreateWhen:function(e,t){return!Ember.get(this,"isNewTicketPage")&&(!this.attrs.showCreateWhen||this.attrs.showCreateWhen(e,t))},onChangeRequester:function(e){e=this.selectFromSuggestions(e),Ember.get(this,"eventSources").publishFieldChange(Ember.get(this,"selectedRequester"),e.email,"ticket","requester"),Ember.set(this,"selectedRequester",e.email),Ember.setProperties(this,{fetchAgentDetails:!1,selectedContact:e,"model.requesterId":e.id?e.id:null,"model.email":e.email?e.email:null}),this.sendAction("onChangeRequester",e)},toggleCc:function(){Ember.get(this,"mkpInterface.controlData.cc.disable")||Ember.get(this,"mkpInterface.controlData.to.disable")||(this.toggleProperty("showCc"),Ember.set(this,"selectedCc",[]),Ember.set(this,"model.ccEmails",null))},toggleBcc:function(){this.toggleProperty("showAddBcc"),Ember.setProperties(this,{selectedBcc:[],"model.bccEmails":null})},onChange:function(e,t){var s,n=t.map((function(e){return e.email})),i=this.extractValidEmails(n);Ember.setProperties(this,(r(s={},"selected".concat(e.capitalize()),t),r(s,"model.".concat(e,"Emails"),i),s))},toggleAddRequester:function(){Ember.get(this,"mkpInterface.controlData.to.disable")||(Ember.get(this,"isNewTicketPage")&&this.setRequesterField(Ember.get(this,"selectedContact.details")),this._cleanRequester(),this.toggleProperty("addNewRequester"),Ember.get(this,"addNewRequester")?Ember.set(this,"showCc",!Ember.get(this,"model.ccEmails")):Ember.set(this,"showCc",!1),this.sendAction("toggleAddRequester"))}},loadBccState:function(){var e=Ember.get(this,"model.bccEmails"),t=Ember.get(this,"currentAccount.globalBccEmails");e?this.setBccState(e):Ember.isEmpty(t)?Ember.get(this,"ajax").request(a.default.emailBcc,{method:"GET"}).then(this.bccSuccess.bind(this)).catch(this.bccFailure.bind(this)):this.setBccState(t),Ember.isEmpty(e)&&Ember.isEmpty(t)&&Ember.set(this,"showAddBcc",!0)},setBccState:function(e){var t=this.constructBccEmailValues(e);Ember.setProperties(this,{"model.bccEmails":e,selectedBcc:t})},bccSuccess:function(e){var t=e.bcc.emails,s={"currentAccount.globalBccEmails":t,"model.bccEmails":t,selectedBcc:this.constructBccEmailValues(t)};s.showAddBcc=Ember.isArray(t)&&Ember.isEmpty(t),Ember.setProperties(this,s)},bccFailure:function(){this._failure({message:Ember.get(this,"i18n").t("fd.somethingwentwrong.line1")})},constructBccEmailValues:function(e){return e.map((function(e){return{email:e,details:e}}))},extractValidEmails:function(e){return e.filter((function(e){return(0,t.isValidEmail)(e)}))},contactEmailLoad:function(e,t){Ember.set(this,"model.email",e);var s=t?this.getOtherDetailsForContact(t):e,n={details:s};Ember.set(this,"selectedContact",n),Ember.set(this,"model.requesterId",Ember.get(this,"contactId")),Ember.setProperties(this,{fetchAgentDetails:!1,selectedContact:{id:Ember.get(this,"contactId"),email:s,details:s},"model.requesterId":Ember.get(this,"contactId")}),!Ember.get(this,"selectedContact.id")&&Ember.get(this,"allowContactCreate")&&this.setRequesterField(s),this.sendAction("onChangeRequester",{id:Ember.get(this,"contactId"),email:s,details:s})},getOtherDetailsForContact:function(e){return e.email?e.email:e.phone?"".concat(e.name," (").concat(e.phone,")"):e.twitterId?"@".concat(e.twitterId):e.uniqueExternalId?"".concat(e.name," (").concat(e.uniqueExternalId,")"):"".concat(e.name," (").concat(e.mobile,")")},selectFromSuggestions:function(e){if(Ember.get(this,"isNewTicketPage")){Ember.setProperties(this,{"model.shouldValidate.requesterId":!!e.id||!e.email,"model.email":e.email});var s=!0;e.email&&!e.id&&(s=(0,t.isValidEmail)(e.email)),Ember.set(this,"isEmailInvalid",!s)}else this.toggleNewContact(e,!0);return Ember.set(this,"isValueSelected",!0),e},toggleNewContact:function(e){Ember.get(this,"allowContactCreate")&&!e.id&&(this.setRequesterField(e.details),this.send("toggleAddRequester"))},ccUpdated:function(){var e=Ember.get(this,"mkpInterface.controlData.cc.value");if(e){var t=this.extractValidEmails(e.map((function(e){return Ember.get(e,"email")})));Ember.setProperties(this,{selectedCc:e,"model.ccEmails":t,showCc:!1})}},willDestroy:function(){this._super.apply(this,arguments),Ember.get(this,"marketplace").off("ccUpdated")},_cleanRequester:function(){Ember.setProperties(this,{selectedContact:null,"model.requesterId":null,"model.email":null,isEmailInvalid:!1,ticketCompany:null})},_failure:function(e){this.flashMessage(!1,e.message)},flashMessage:function(e,t){var s=Ember.get(this,"flashMessages");return e?s.success(t):s.danger(t)},isNumber:function(e){return!isNaN(e)&&isFinite(e)},_getContactDetails:function(e){var t,s=Ember.get(this,"contactEmail");if(s)t="<".concat(s,">");else{var n=Ember.get(this,"model.senderEmail")||Ember.get(e,"email"),i=Ember.get(e,"phone"),a=Ember.get(e,"mobile"),r=Ember.get(e,"twitterId");t=n?"<".concat(n,">"):i?"(".concat(i,")"):a?"(".concat(a,")"):r?"(".concat(r,")"):""}return"".concat(Ember.get(e,"name")," ").concat(t)},setRequesterField:function(e){var s=Ember.get(this,"newContact");(0,t.isValidEmail)(e)?Ember.set(s,"email",e):this.isNumber(e)?Ember.set(s,"phone",e):Ember.set(s,"name",e)},findContact:(0,s.task)(regeneratorRuntime.mark((function e(t){var s,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchUser(t,{backgroundReload:!1});case 3:return s=e.sent,n=this._getContactDetails(s),i={details:n,email:Ember.get(s,"email"),id:Ember.get(s,"id"),value:Ember.get(s,"name")},e.abrupt("return",i);case 9:e.prev=9,e.t0=e.catch(0),this._failure(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))});e.default=o})),define("freshdesk/components/module-tickets/new-ticket/default-requester/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5GBOXqw2",block:'{"symbols":["option","option","email","option"],"statements":[[4,"if",[[27,"and",[[23,["allowContactCreate"]],[27,"not",[[23,["addNewRequester"]]],null]],null]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/new-ticket/add-requester",null,[["model","startValidate","showAddressField","customContactValidation","requesterMandatoryInfo","addressFieldLabel","hasUniqueContactIdentifier","cancel"],[[23,["newContact"]],[23,["startContactValidations"]],[23,["showAddressField"]],[23,["customContactValidation"]],[23,["requesterMandatoryInfo"]],[23,["addressFieldLabel"]],[23,["hasUniqueContactIdentifier"]],[27,"action",[[22,0,[]],"toggleAddRequester"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","to","hide"]],"hide"],null]],[9],[0,"\\n    "],[7,"div"],[11,"class","text--xsmall label-field"],[9],[0,"\\n      "],[1,[27,"t",[[23,["requesterLabel"]]],null],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","to","disable"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n        "],[7,"span"],[11,"class","display__email"],[9],[1,[23,["selectedContact","details"]],false],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-form/remote-select-field",null,[["selected","onchange","data-test-id","searchField","form","url","customFdLabel","emailOnlyContact","validationAttribute","hasValidation","allowInvalid","validation","onBlur","onFocus","onInput","handleKeydown","noMatchesMessage","showCreateWhen","skipCloseOnRightClick","allowHtmlSafe"],[[23,["selectedContact"]],[27,"action",[[22,0,[]],"onChangeRequester"],null],"requester","details",[23,["form","form"]],[23,["contactFindUrl"]],[27,"t",[[23,["requesterLabel"]]],null],[23,["emailOnlyContact"]],[23,["validationAttribute"]],[23,["hasValidation"]],false,[23,["contactValidation"]],[27,"action",[[22,0,[]],"handleBlur"],null],[27,"action",[[22,0,[]],"handleFocus"],null],[27,"action",[[22,0,[]],"handleInput"],null],[27,"action",[[22,0,[]],"handleKeydown"],null],[23,["noMatchesMessage"]],[27,"action",[[22,0,[]],"showCreateWhen"],null],true,true]],{"statements":[[0,"        "],[1,[22,4,["details"]],false],[0,"\\n"]],"parameters":[4]},null],[4,"if",[[23,["isEmailInvalid"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"data-test-error","contact"],[11,"class","help-block"],[9],[1,[27,"t",["contact.validation.email.invalid.message"],null],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[7,"div"],[11,"class","requester-and-cc-link"],[9],[0,"\\n"],[4,"if",[[23,["allowContactCreate"]]],null,{"statements":[[4,"if",[[23,["hasAbilityToAddContact"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"data-test-id","addContactLink"],[11,"class","requester-and-cc"],[12,"onclick",[27,"action",[[22,0,[]],"toggleAddRequester"],null]],[9],[1,[27,"t",["ticket.requester.new"],null],false],[10],[0,"\\n"],[4,"if",[[23,["showAddCc"]]],null,{"statements":[[0,"            "],[7,"span"],[12,"class",[28,["separator-line pl-9 pr-9 ",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]]]],[9],[0,"|"],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["showAddCc"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"data-test-id","showCcLink"],[12,"class",[28,["requester-and-cc ",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"toggleCc"],null]],[9],[0,"\\n          "],[1,[27,"t",["tickets.new.add_cc"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["showAddCc"]],[23,["allowBcc"]],[23,["showAddBcc"]]],null]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","separator-line pl-9 pr-9"],[9],[0,"|"],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["allowBcc"]],[23,["showAddBcc"]]],null]],null,{"statements":[[0,"        "],[7,"button"],[11,"data-test-id","showBccLink"],[11,"class","cursor-pointer link-no-underline pl-0"],[12,"onclick",[27,"action",[[22,0,[]],"toggleBcc"],null]],[9],[0,"\\n          "],[1,[27,"t",["fd.add"],null],false],[0," "],[1,[27,"t",["fd.bcc"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"],[4,"if",[[23,["shouldShowCompanyField"]]],null,{"statements":[[0,"      "],[7,"div"],[12,"class",[27,"if",[[27,"not",[[23,["applyCompanyFieldStyle"]]],null],"company-field"],null]],[9],[0,"\\n        "],[1,[27,"ui-form/select-box",null,[["placeholder","data-test-id","options","optionLabelPath","optionValuePath","value","isRequired","hideDefaultOption","searchEnabled","onchange"],[[27,"t",["fd.company"],null],"ticketCompany",[23,["companyList"]],"name","id",[23,["ticketCompany"]],true,true,true,[27,"action",[[22,0,[]],"onchangeCompany"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[27,"and",[[23,["showCcField"]],[23,["notFreshcallerTicket"]],[27,"not",[[23,["showCc"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]],[9],[0,"\\n    "],[7,"div"],[12,"class",[27,"if",[[23,["shouldShowCompanyField"]],"text--xsmall cc-label","text--xsmall cc-label cc-label__company"],null]],[9],[0,"\\n      "],[1,[27,"t",["fd.cc"],null],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","cc","disable"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"id","display__emails"],[11,"class","display_emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedCc"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","display__email"],[9],[1,[22,3,["details"]],false],[10],[0,"\\n"]],"parameters":[3]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-form/remote-select-field",null,[["data-test-id","selected","customFdLabel","onchange","searchField","updateTabIndex","multiple","isSelectOnTab","maxcount","url"],["Cc",[23,["selectedCc"]],[27,"t",["fd.cc"],null],[27,"action",[[22,0,[]],"onChange","cc"],null],"details",true,true,true,50,[23,["contactFindUrl"]]]],{"statements":[[0,"        "],[1,[22,2,["details"]],false],[0,"\\n"]],"parameters":[2]},null]],"parameters":[]}],[4,"if",[[27,"and",[[23,["showCcField"]],[23,["addNewRequester"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"data-test-id","hideCcLink"],[11,"class","requester-and-cc-link requester-and-cc"],[12,"onclick",[27,"action",[[22,0,[]],"toggleCc"],null]],[9],[1,[27,"t",["tickets.new.hide_cc"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","add-requester__cc-gap"],[9],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[23,["allowBcc"]],[27,"not",[[23,["showAddBcc"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[12,"class","text--xsmall cc-label"],[9],[0,"\\n    "],[1,[27,"t",["fd.bcc"],null],false],[0,"\\n  "],[10],[0,"\\n"],[4,"ui-form/remote-select-field",null,[["data-test-id","selected","customFdLabel","onchange","searchField","multiple","updateTabIndex","isSelectOnTab","maxcount","url"],["bcc",[23,["selectedBcc"]],[27,"t",["fd.bcc"],null],[27,"action",[[22,0,[]],"onChange","bcc"],null],"details",true,true,true,50,[23,["contactFindUrl"]]]],{"statements":[[0,"    "],[1,[22,1,["details"]],false],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[7,"button"],[11,"data-test-id","hideBccLink"],[11,"class","element-flex flex-direction--row-reverse cursor-pointer link max-width"],[12,"onclick",[27,"action",[[22,0,[]],"toggleBcc"],null]],[9],[0,"\\n    "],[1,[27,"t",["fd.hide"],null],false],[0," "],[1,[27,"t",["fd.bcc"],null],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/default-requester/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/requester-widget/component",["exports","ember-concurrency","freshdesk/mixins/fetch-user"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(s.default,{store:Ember.inject.service("store"),classNames:["__module-tickets__new-ticket__requester-widget"],allowContactCreate:!0,addNewRequester:!0,contact:null,isNewContact:Ember.computed("contact","addNewRequester",(function(){var e=this.contact,t=this.addNewRequester,s=this.allowContactCreate;return e||s&&!t})),isRequesterPresent:Ember.computed("contact",(function(){var e=this.contact;return e&&e.id})),contactInfo:Ember.computed("contact",(function(){var e=this.contact;return e&&e.id?this._getContact.perform(e):null})),companyInfo:Ember.computed("contactInfo.isSuccessful",(function(){var e=Ember.get(this,"contactInfo.value");if(e&&Ember.get(e,"companyId")){var t=Ember.get(e,"companyId");return this._getCompany.perform(t)}return null})),_failure:function(e){this.flashMessage(!1,e.message)},flashMessage:function(e,t){var s=this.flashMessages;return e?s.success(t):s.danger(t)},_getContact:(0,t.task)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchUser(t.id);case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),this._failure(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),_getCompany:(0,t.task)(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.store,e.prev=1,e.next=4,n.findRecord("company",t);case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1),this._failure(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))});e.default=n})),define("freshdesk/components/module-tickets/new-ticket/requester-widget/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"oXPiE3nY",block:'{"symbols":[],"statements":[[4,"if",[[23,["isRequesterPresent"]]],null,{"statements":[[4,"if",[[27,"or",[[23,["contactInfo","isRunning"]],[23,["companyInfo","isRunning"]]],null]],null,{"statements":[[4,"ui-components/module-loading",null,[["class"],["requester-info-sidebar__loading"]],{"statements":[[0,"      "],[7,"div"],[11,"data-test-id","contactInfoLoading"],[11,"class","requester-info-sidebar__loading__text"],[9],[0,"\\n        "],[1,[27,"t",["tickets.compose_email.requester_info.loading"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/widgets/requester-info",null,[["requester","company","renderPriority","reloadRequesterInfo","data-test-id"],[[23,["contactInfo","value"]],[23,["companyInfo","value"]],0,true,"contactInfoLoaded"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isNewContact"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"data-test-id","newContact"],[11,"class","requester-info-sidebar__present"],[9],[0,"\\n      "],[7,"p"],[9],[0,"\\n        "],[7,"img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/empty-states/requestor-empty-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg"],[12,"alt",[27,"t",["tickets.compose_email.requester_info.empty_message"],null]],[9],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"p"],[11,"class","requester-info-sidebar__present__new-info"],[9],[0,"\\n        "],[1,[27,"t",["ticket.requester.new.message"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"data-test-id","emptyContactDetail"],[11,"class","requester-info-sidebar__present"],[9],[0,"\\n      "],[7,"p"],[9],[0,"\\n        "],[7,"img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/empty-states/requestor-empty-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg"],[12,"alt",[27,"t",["tickets.compose_email.requester_info.empty_message"],null]],[9],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"p"],[11,"class","requester-info-sidebar__present__empty"],[9],[0,"\\n        "],[1,[27,"t",["tickets.compose_email.requester_info.empty_message"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"p"],[11,"class","requester-info-sidebar__present__item-info"],[9],[0,"\\n        "],[1,[27,"t",["tickets.compose_email.requester_info.info_message"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/requester-widget/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/send-and-close/component",["exports","freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/component","freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/template","ember-concurrency"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=t.default.extend({model:null,form:null,customStatus:null,layout:s.default,_status:Ember.computed.reads("customStatus"),hasFeatureSharedOwnership:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("shared_ownership")})),actions:{send:function(e){Ember.get(this,"onClick").perform(e)}},onClick:(0,n.task)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ember.set(this,"pendingState",!0),e.next=3,Ember.get(this,"onSend").perform(t);case 3:Ember.set(this,"pendingState",!1);case 4:case"end":return e.stop()}}),e,this)}))),onSend:(0,n.task)(regeneratorRuntime.mark((function e(t){var s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ember.get(this,"model"),t&&(Ember.set(s,"status",t),Ember.get(this,"hasFeatureSharedOwnership")&&Ember.setProperties(s,{internalGroupId:null,internalAgentId:null})),n=Ember.get(this,"form"),e.next=5,Ember.get(n,"save").perform(s);case 5:case"end":return e.stop()}}),e,this)})))});e.default=i})),define("freshdesk/components/module-tickets/new-ticket/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"DOYXapZI",block:'{"symbols":["wrapper","sidebarLoader","sideBar","newTicketRender","form","&default"],"statements":[[4,"page-layout/page-wrapper",null,[["class"],["content-widget-wrap new-ticket-wrap"]],{"statements":[[0,"  "],[7,"div"],[11,"data-test-id","newTicketPage"],[11,"class","new-ticket-form mt-10"],[9],[0,"\\n"],[4,"if",[[23,["toggleCreateAnother"]]],null,{"statements":[[4,"component",[[22,1,["content-widget"]]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","taskName","fetchDataTask","queryParams","placeholderType","renderCallback"],[0,"fetchNewTicket",[23,["fetchNewTicket"]],[23,["queryParams"]],"new-ticket-form",[27,"action",[[22,0,[]],"ticketFetchCallback"],null]]],{"statements":[[4,"component",[[22,4,["loader-state"]]],[["loaderClass"],["ticket-loading"]],{"statements":[[0,"            "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,4,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[4,"if",[[23,["isLoaded"]]],null,{"statements":[[0,"              "],[7,"div"],[12,"class",[28,["new-ticket-form__form-for template_form ",[27,"if",[[23,["isDisabled"]],"template_disabled","template_enabled"],null]]]],[9],[0,"\\n                "],[14,6,[[27,"hash",null,[["alertSection"],[[27,"component",[[23,["infoMessage"]]],null]]]]]],[0,"\\n"],[4,"ui-form/form-for",[[23,["model"]],[23,["rules"]]],[["submit","focusOnError","scrollOffset"],[[27,"action",[[22,0,[]],"submit"],null],[23,["focusOnError"]],[23,["scrollOffset"]]]],{"statements":[[0,"                  "],[1,[27,"module-tickets/new-ticket/ticket-form-field",null,[["fields","model","newContact","form","formType","allowSectionFields","showTags","hiddenFields","requesterConfig","updateContactAddress","onchangeCompany","addNewRequester","startContactValidations","onInsertAttachment","onRemoveAttachment","onChangeRequester","toggleAddRequester","onTicketFieldChange","refreshTemplate","descriptionValue","cloudAttachments","contactEmailDetails","contactId","emailId","updateArticlesSuggestedInTicket"],[[23,["fields"]],[23,["model"]],[23,["newContact"]],[22,5,[]],[23,["formType"]],[23,["allowSectionFields"]],[23,["showTags"]],[23,["hiddenFields"]],[23,["requesterConfig"]],[23,["updateContactAddress"]],[27,"action",[[22,0,[]],"multipleCompany"],null],[23,["addNewRequester"]],[23,["startContactValidations"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[27,"action",[[22,0,[]],"onChangeRequester"],null],[27,"action",[[22,0,[]],"toggleAddRequester"],null],[27,"action",[[22,0,[]],"onTicketFieldChange"],null],[23,["refreshTemplate"]],[23,["descriptionValue"]],[23,["cloudAttachments"]],[23,["contactEmailDetails"]],[23,["contactId"]],[23,["emailId"]],[27,"action",[[22,0,[]],"updateArticlesSuggestedInTicket"],null]]]],false],[0,"\\n                  "],[7,"div"],[11,"class","modal__footer form-submission create-ticket-footer"],[9],[0,"\\n                    "],[7,"div"],[11,"class","form-submission__options"],[9],[0,"\\n                      "],[7,"label"],[11,"class","modal__footer__label"],[9],[0,"\\n                        "],[7,"span"],[11,"data-test-id","createAnother"],[11,"class","modal__footer__checkbox"],[9],[0,"\\n                          "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","value","onchange"],["createAnotherTicket",[23,["createAnother"]],[27,"action",[[22,0,[]],"onChangeSubmitOptions","createAnother"],null]]]],false],[0,"\\n                        "],[10],[0,"\\n                        "],[7,"span"],[11,"class","create-another-ticket"],[9],[0,"\\n                          "],[1,[27,"t",["ticket.submit.createAnother"],null],false],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["isFSMEnabled"]],[23,["currentUserPrivileges","canCreateChildServiceTask"]]],null]],null,{"statements":[[0,"                        "],[7,"label"],[11,"class","modal__footer__label"],[9],[0,"\\n                          "],[7,"span"],[11,"data-test-id","createWithServiceTask"],[11,"class","modal__footer__checkbox"],[9],[0,"\\n                            "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","value","onchange"],["createWithServiceTask",[23,["createWithServiceTask"]],[27,"action",[[22,0,[]],"onChangeSubmitOptions","createWithServiceTask"],null]]]],false],[0,"\\n                          "],[10],[0,"\\n                          "],[7,"span"],[9],[0,"\\n                            "],[1,[27,"t",[[23,["addChildLabel"]]],null],false],[0,"\\n                          "],[10],[0,"\\n                        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[10],[0,"\\n                    "],[7,"div"],[11,"class","form-submission__actions"],[9],[0,"\\n                      "],[7,"button"],[11,"data-test-id","cancelButton"],[11,"name","button"],[11,"class","modal__footer__btn btn btn--secondary"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n                        "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n                      "],[10],[0,"\\n                      "],[7,"div"],[11,"data-test-id","submitButton"],[11,"class","submit-btn-and-close"],[9],[0,"\\n                        "],[1,[27,"module-tickets/new-ticket/send-and-close",null,[["canSetStatus","label","model","customStatus","form","send","pendingLabel"],[[27,"hasabilities",["edit_ticket_properties"],null],[27,"t",["ticket.submit.new"],null],[23,["model"]],[23,["status"]],[22,5,["form"]],[27,"perform",[[23,["send"]]],null],[27,"t",["async.button.wait_text"],null]]]],false],[0,"\\n                      "],[10],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[5]},null],[0,"                "],[1,[27,"interactivity-beacon",null,[["routeInteractive"],[true]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[4]},null],[4,"if",[[23,["renderLater"]]],null,{"statements":[[0,"          "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","pageType"],["new_ticket_background","new_ticket"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"component",[[22,1,["sidebar"]]],[["class"],["multiple-widget-slider ticket-requester-info template_sidebar ticket-template-block content-widget-wrap"]],{"statements":[[4,"sequential-render",null,[["renderPriority","taskName","fetchDataTask","renderCallback"],[1,"fetchTemplatesTaskRunner",[23,["fetchTemplatesTaskRunner"]],[27,"action",[[22,0,[]],[27,"mut",[[23,["templatesLoaded"]]],null],true],null]]],{"statements":[[4,"component",[[22,2,["loader-state"]]],null,{"statements":[[0,"            "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,2,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[4,"app-components/widget-sidebar",null,[["class","showHideSidebar","ticket","renderInPlace"],["pull-left",[22,1,["showHideSidebar"]],[23,["ticket"]],true]],{"statements":[[4,"if",[[23,["isTemplatesEnabled"]]],null,{"statements":[[4,"component",[[22,3,["addWidget"]]],[["widgetId","label","icon","minimized"],["tickettemplates",[27,"t",["fd.admin.template"],null],"ticket-template",false]],{"statements":[[4,"if",[[23,["templatesLoaded"]]],null,{"statements":[[0,"                    "],[1,[27,"module-tickets/ticket-template",null,[["templates","applyTemplate","clearTemplate","updateChildTemplates"],[[23,["newTicketTemplates"]],[27,"action",[[22,0,[]],"applyTemplate"],null],[27,"action",[[22,0,[]],"clearTemplate",true],null],[27,"action",[[22,0,[]],"updateChildTemplates"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[27,"hasabilities",["view_contacts"],null]],null,{"statements":[[4,"component",[[22,3,["addWidget"]]],[["widgetId","class","label","icon","minimized"],["contactwidget","contactwidget_wrapper",[27,"t",["fd.contact_details"],null],"info",false]],{"statements":[[0,"                  "],[1,[27,"module-tickets/new-ticket/requester-widget",null,[["allowContactCreate","addNewRequester","contact"],[true,[23,["addNewRequester"]],[23,["selectedContact"]]]]],false],[0,"\\n                  "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","pageType","renderMkpApp"],["new_ticket_requester_info","new_ticket",[23,["renderMkpApp"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[3]},null]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"      "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/ticket-assign-to/component",["exports","freshdesk/mixins/tickets/form"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{store:Ember.inject.service(),ticketFields:Ember.inject.service(),eventSources:Ember.inject.service(),internalGroupAgentFNames:null,fieldType:null,hasFeatureSplitAssignTo:Ember.computed((function(){return Ember.get(this,"currentAccount").launched("group_agent_split")})),currentStatus:Ember.computed.reads("model.status"),hasFeatureSharedOwnership:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("shared_ownership")})),init:function(){this._super.apply(this,arguments),this._setDefaultValues()},actions:{onSaveAgentAndGroup:function(e,t){this._saveAgentAndGroupModel(Ember.get(this,"model"),e,t,"responderId","groupId")},onSaveInternalAgentAndGroup:function(e,t){Ember.setProperties(this,{selectedinternalGroup:t,selectedinternalAgent:e}),this._saveAgentAndGroupModel(Ember.get(this,"model"),e,t,"internalAgentId","internalGroupId")}},_setDefaultValues:function(){Ember.set(this,"internalGroupAgentFNames",["internalGroupId","internalAgentId"])}});e.default=s})),define("freshdesk/components/module-tickets/new-ticket/ticket-assign-to/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"M+4Fe5RJ",block:'{"symbols":[],"statements":[[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[4,"if",[[27,"eq",[[23,["fieldType"]],"default_group"],null]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/shared/assign-to-new",null,[["agentList","groupList","form","groupValue","agentValue","disabled","onSave"],[[23,["allAgents"]],[23,["allGroups"]],[23,["form"]],[23,["groupValue"]],[23,["agentValue"]],[23,["disabled"]],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["fieldType"]],"default_internal_group"],null],[23,["hasFeatureSharedOwnership"]]],null]],null,{"statements":[[4,"if",[[23,["internalGroups","length"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/assign-to-new",null,[["data-test-id","agentList","groupList","allowNilGroup","form","fieldNames","groupValue","agentValue","disabled","onSave"],["internal-group-agent",[23,["internalAgents"]],[23,["internalGroups"]],false,[23,["form"]],[23,["internalGroupAgentFNames"]],[23,["selectedinternalGroup"]],[23,["selectedinternalAgent"]],[23,["disabled"]],[27,"action",[[22,0,[]],"onSaveInternalAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"ui-form/text-field",null,[["label","disabled","value"],[[27,"t",["ticket.fields.internal_group_name"],null],true,[27,"t",["tickets.nointernalgroup"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["fieldType"]],"default_group"],null]],null,{"statements":[[0,"    "],[1,[27,"app-components/assign-to",null,[["label","type","agentList","groupList","size","form","groupValue","agentValue","disabled","onSave"],[[27,"t",["ticket.assignto"],null],"text",[23,["allAgents"]],[23,["allGroups"]],"large",[23,["form","form"]],[23,["groupValue"]],[23,["agentValue"]],[23,["disabled"]],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["fieldType"]],"default_internal_group"],null],[23,["hasFeatureSharedOwnership"]]],null]],null,{"statements":[[4,"if",[[23,["internalGroups","length"]]],null,{"statements":[[0,"      "],[1,[27,"app-components/assign-to",null,[["label","type","data-test-id","agentList","groupList","allowNilGroup","size","form","fieldNames","groupValue","agentValue","disabled","onSave"],[[27,"t",["ticket.assigntointernal"],null],"text","assigntoInternal",[23,["internalAgents"]],[23,["internalGroups"]],false,"large",[23,["form","form"]],[23,["internalGroupAgentFNames"]],[23,["selectedinternalGroup"]],[23,["selectedinternalAgent"]],[23,["disabled"]],[27,"action",[[22,0,[]],"onSaveInternalAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"ui-form/text-field",null,[["label","disabled","value"],[[27,"t",["ticket.assigntointernal"],null],true,[27,"t",["tickets.nointernalgroup"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/ticket-assign-to/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/new-ticket/ticket-form-field/component",["exports","freshdesk/mixins/tickets/form","freshdesk/mixins/tickets/insert-canned-response","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/integrations/installed-apps","freshdesk/mixins/marketplace/interface/ticket-properties","ember-keyboard","freshdesk/utils/tickets/ticket-form"],(function(e,t,s,n,i,a,r,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=Ember.Component.extend(t.default,r.EKMixin,s.default,n.default,i.default,a.default,{mkpInterface:Ember.inject.service("marketplace-interface"),currentUser:Ember.inject.service(),classNames:["__module-tickets__new-ticket__ticket-form-field"],classNameBindings:["hasFieldGroups:form-field-groups"],manageContact:null,model:null,newContact:null,cannedResponseModal:!1,inlineAttachments:null,addNewRequester:!0,allowContactCreate:!0,ticketCompany:null,oldDescription:null,mkpInterfacePage:"newTicket",attributeBindings:["data-test-id"],"data-test-id":"createNewTicket",showTags:!0,allowSectionFields:!1,formType:null,isNewServiceTask:!1,addressFieldLabel:"condition.service_location",hiddenFields:[],groupValue:Ember.computed.alias("model.group"),agentValue:Ember.computed.alias("model.responder"),hasFieldGroups:Ember.computed.gt("formFieldGroups.length",1),description:Ember.computed("model.description",(function(){var e=Ember.get(this,"model.description"),t=Ember.get(this,"oldDescription");return t!=e?(Ember.set(this,"oldDescription",e),e):t})),ticketAttachments:Ember.computed("model.attachments","inlineAttachments",(function(){var e=[],t=[];return Ember.get(this,"model.attachments")&&(e=Ember.get(this,"model.attachments").map((function(e){return e}))),Ember.get(this,"inlineAttachments")&&(t=Ember.get(this,"inlineAttachments").map((function(e){return e}))),e.concat(t)})),descriptionIsRequired:Ember.computed("fields.length","model.status",(function(){var e=Ember.get(this,"fields").findBy("type","default_description"),t=Ember.get(e,"requiredForAgents");return t||Ember.get(e,"requiredForClosure")&&Ember.get(this,"model.isMarkedClosed")})),init:function(){this._super.apply(this,arguments),this._setDefaultValues(),this._setFormFieldGroups()},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").deregisterControls(Ember.get(this,"mkpInterfacePage")),Ember.get(this,"mkpInterface").deregisterControls("ticketActions")},didInsertElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").registerControls(Ember.get(this,"mkpInterfacePage")),Ember.get(this,"mkpInterface").registerControls("ticketActions")},actions:{saveTags:function(e){Ember.set(this,"model.tags",e)},insertCannedResponse:function(e){this.setCannedResponse(e),Ember.set(this,"cannedResponseModal",!1)},hideCreateOnInvalidInputForRequester:function(e,t){return!!Ember.get(this,"currentUser").hasAbilities(Ember.get(this,"manageContact"))&&(!e.includes("@")||t.canCreate)}},_setDefaultValues:function(){Ember.set(this,"inlineAttachments",[]),Ember.set(this,"manageContact",["manage_contacts"]),this.requesterConfig&&Ember.setProperties(this,this.requesterConfig)},_setFormFieldGroups:function(){var e=this.store.peekAll("section");Ember.set(this,"customTemplate",(0,l.customTemplate)(this.formType,this.get("model.type"))),Ember.set(this,"formFieldGroups",(0,l.buildFormFieldGroups)(this.get("customTemplate.fieldGroups"),this.formFields,e))}});e.default=o})),define("freshdesk/components/module-tickets/new-ticket/ticket-form-field/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ABm5o/Ov",block:'{"symbols":["formGroup","field","currentSection","sectionField","value","customValidation","onchange"],"statements":[[4,"each",[[23,["formFieldGroups"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[27,"concat",["form-group ",[22,1,["name"]]],null]],[9],[0,"\\n"],[4,"if",[[22,1,["label"]]],null,{"statements":[[0,"      "],[7,"h4"],[11,"class","form-group__title"],[9],[1,[27,"t",[[22,1,["label"]]],null],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"each",[[22,1,["fields"]]],null,{"statements":[[4,"if",[[27,"and",[[27,"not",[[27,"contains",[[22,2,["name"]],[23,["hiddenFields"]]],null]],null],[27,"or",[[23,["allowSectionFields"]],[27,"not",[[27,"or",[[23,["allowSectionFields"]],[22,2,["belongsToSection"]]],null]],null]],null]],null]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["hide_",[22,2,["name"]]],null]],null],"hide"],null]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,2,["type"]],"default_description"],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","new-ticket-form__ticket-editor"],[9],[0,"\\n"],[4,"ui-form/custom-component",null,[["isRequired","data-test-id","model","form","valuePath"],[[23,["descriptionIsRequired"]],"description",[23,["model"]],[23,["form","form"]],"description"]],{"statements":[[0,"                "],[7,"label"],[11,"id","newTicketEditor"],[11,"class","label-field"],[9],[1,[27,"t",["ticket.fields.description"],null],false],[0," "],[10],[0,"\\n"],[4,"if",[[27,"launched",["froala_cursor_jump_fix"],null]],null,{"statements":[[0,"                  "],[1,[27,"ui-form/editor/ticket-editor",null,[["ariaLabelledBy","value","onInsertAttachment","onRemoveAttachment","externalAttachments","showCannedResponse","enableSlashCommands","showSolution","placeholder","contentChanged","cannedResponseModal","validation","customClass","enableInlineCannedResponse","clearFileCache","skipFirstSendAction","isUpdateDescription","descriptionValue","cloudAttachments","ticket","wrapDefaultFont","showFooter","fixedFormattingToolbar","updateArticlesSuggested"],["newTicketEditor",[23,["description"]],[23,["onInsertAttachment"]],[23,["onRemoveAttachment"]],[23,["ticketAttachments"]],true,true,true,"",[27,"action",[[22,0,[]],[27,"mut",[[23,["model","description"]]],null]],null],[23,["cannedResponseModal"]],[22,6,[]],"editor-create-ticket ticket-action",[27,"toggle-action",["cannedResponseModal",[22,0,[]]],null],true,false,[23,["refreshTemplate"]],[23,["descriptionValue"]],[23,["cloudAttachments"]],[23,["model"]],true,true,true,[27,"action",[[22,0,[]],"updateArticlesSuggested"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[27,"ui-form/editor/ticket-editor",null,[["ariaLabelledBy","value","onInsertAttachment","onRemoveAttachment","externalAttachments","showCannedResponse","enableSlashCommands","showSolution","placeholder","contentChanged","cannedResponseModal","validation","customClass","enableInlineCannedResponse","editorInput","clearFileCache","skipFirstSendAction","isUpdateDescription","descriptionValue","cloudAttachments","ticket","wrapDefaultFont","showFooter","fixedFormattingToolbar","updateArticlesSuggested"],["newTicketEditor",[23,["description"]],[23,["onInsertAttachment"]],[23,["onRemoveAttachment"]],[23,["ticketAttachments"]],true,true,true,"",[27,"action",[[22,0,[]],[27,"mut",[[23,["model","description"]]],null]],null],[23,["cannedResponseModal"]],[22,6,[]],"editor-create-ticket ticket-action",[27,"toggle-action",["cannedResponseModal",[22,0,[]]],null],[23,["editorInput"]],true,false,[23,["refreshTemplate"]],[23,["descriptionValue"]],[23,["cloudAttachments"]],[23,["model"]],true,true,true,[27,"action",[[22,0,[]],"updateArticlesSuggested"],null]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[5,6,7]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"default_requester"],null]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/new-ticket/default-requester",null,[["model","newContact","form","requesterValue","isEmailInvalid","refreshTemplate","addNewRequester","isfreshcallerTicket","startContactValidations","allowContactCreate","onChangeRequester","toggleAddRequester","onchangeCompany","hasValidation","page","noMatchesMessage","showCreateWhen","contactEmailDetails","contactId","showUpdateToContact","showAddressField","isNewServiceTask","addressFieldLabel","customContactValidation"],[[23,["model"]],[23,["newContact"]],[23,["form"]],[23,["requesterValue"]],[23,["isEmailInvalid"]],[23,["refreshTemplate"]],[23,["addNewRequester"]],[23,["isfreshcallerTicket"]],[23,["startContactValidations"]],[23,["allowContactCreate"]],[23,["onChangeRequester"]],[23,["toggleAddRequester"]],[23,["onchangeCompany"]],true,"new-ticket",false,[27,"action",[[22,0,[]],"hideCreateOnInvalidInputForRequester"],null],[23,["contactEmailDetails"]],[23,["contactId"]],[23,["showUpdateToContact"]],[23,["showAddressField"]],[23,["isNewServiceTask"]],[23,["addressFieldLabel"]],[23,["customContactValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"default_group"],null]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/new-ticket/ticket-assign-to",null,[["fieldType","model","ticket","groupValue","agentValue","disabled","form"],["default_group",[23,["model"]],[23,["model"]],[23,["groupValue"]],[23,["agentValue"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,2,["name"]]],null]],null],true,false],null],[23,["form"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"default_internal_group"],null]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/new-ticket/ticket-assign-to",null,[["fieldType","model","ticket","form","disabled"],["default_internal_group",[23,["model"]],[23,["model"]],[23,["form"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,2,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"not-eq",[[22,2,["type"]],"default_agent"],null],[27,"not-eq",[[22,2,["type"]],"default_internal_agent"],null]],null]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,2,[]]],[["form","model","refresh","onFieldChange","disabled"],[[23,["form"]],[23,["model"]],[23,["refreshTemplate"]],[23,["onTicketFieldChange"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,2,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"\\n"],[4,"if",[[22,2,["hasSections"]]],null,{"statements":[[4,"module-tickets/ticket-form/section-form",null,[["sectionField","ticket"],[[22,2,[]],[23,["model"]]]],{"statements":[[4,"each",[[22,3,["fields"]]],null,{"statements":[[0,"                "],[7,"div"],[12,"class",[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["hide_",[22,4,["name"]]],null]],null],"hide"],null]],[9],[0,"\\n                  "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,4,[]]],[["form","model","refresh","disabled"],[[23,["form"]],[23,["model"]],[23,["refreshTemplate"]],[27,"if",[[27,"get",[[22,0,[]],[27,"concat",["disable_",[22,4,["name"]]],null]],null],true,false],null]]]],false],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[4]},null]],"parameters":[3]},null]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"eq",[[22,2,["name"]],"cf_fsm_service_location"],null],[27,"not",[[27,"contains",[[22,2,["name"]],[23,["hiddenFields"]]],null]],null],[27,"or",[[23,["isServiceLocationPresent"]],[23,["showUpdateToContact"]]],null]],null]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-form/custom-form/update-contact",null,[["updateContactAddress"],[[23,["updateContactAddress"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[4,"if",[[27,"and",[[27,"eq",[[22,1,["name"]],"appointmentInfo"],null],[23,["model","responderId"]]],null]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-form/custom-form/agent-availability",null,[["ticketResponderId","fsmStartTime","fsmEndTime","scrollOnLoad"],[[23,["model","responderId"]],[23,["model","customFields","cf_fsm_appointment_start_time"]],[23,["model","customFields","cf_fsm_appointment_end_time"]],[23,["scrollOnLoad"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[23,["showTags"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","tag-list"],[9],[0,"\\n    "],[7,"div"],[11,"class","text--xsmall text--specific pb-9"],[9],[0,"\\n      "],[1,[27,"t",["tickets.new.tags"],null],false],[0,"\\n    "],[10],[0,"\\n    "],[1,[27,"app-components/app-tags/create-tag",null,[["tags","verticalPosition","saveTags","onAddFocus"],[[23,["model","tags"]],"above",[27,"action",[[22,0,[]],"saveTags"],null],false]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[7,"div"],[11,"class","hide"],[9],[0,"\\n  "],[1,[27,"component",[[23,["form","text-field"]],"inline_attachment_ids"],[["disabled","value"],[true,[23,["model","inlineAttachmentIds"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/new-ticket/ticket-form-field/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/assign-to-new/component",["exports","freshdesk/utils/search"],(function(e,t){function s(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=1,i=2,a={name:"--",id:null},r=Ember.Component.extend({i18n:Ember.inject.service(),reloadNecessary:Ember.inject.service(),classNames:["__module-tickets__assign-to"],classNameBindings:["isDisabled:disabled","isDisabled:input"],attributeBindings:["dataTestId:data-test-id"],dataTestId:"group-agent",resetData:!1,fieldNames:["groupId","responderId"],fieldCollection:{responderId:{placeholder:"ticket.fields.responder_name",serviceTaskPlaceholder:"tickets.service_task.agent",disabledPlaceholder:"noagent",dataTestId:"agent"},internalAgentId:{placeholder:"ticket.fields.internal_agent_name",disabledPlaceholder:"noagent",dataTestId:"internalAgent"},internalGroupId:{placeholder:"ticket.fields.internal_group_name",disabledPlaceholder:"nogroup",dataTestId:"internalGroup"},groupId:{placeholder:"ticket.fields.group_name",serviceTaskPlaceholder:"tickets.service_task.group",disabledPlaceholder:"nogroup",dataTestId:"group"}},sortList:["name"],isDisabled:Ember.computed.readOnly("disabled"),allowNilGroup:!0,groups:Ember.computed("groupList","form",(function(){var e=Ember.get(this,"groupList");return Ember.get(this,"form")||(e=[a].concat(s(e))),e})),resultGroups:(0,t.default)("sortedGroups","name","searchText",null,"reloadNecessary.accountDataVersion"),allAgents:Ember.computed.reads("agentList"),resultAgents:(0,t.default)("sortedAgents","name","searchText",null,"reloadNecessary.accountDataVersion"),groupAgentCollection:Ember.computed("fieldNames",(function(){var e=Ember.get(this,"fieldNames");return{group:this._setGroupAgentCollection(e[0]),agent:this._setGroupAgentCollection(e[1])}})),_setGroupAgentCollection:function(e){var t=Ember.get(this,"i18n"),s=this.fieldCollection[e];return{fieldName:e,placeholder:"Service Task"===Ember.get(this,"form.form.model.type")?t.t(s.serviceTaskPlaceholder):t.t(s.placeholder),dataTestId:s.dataTestId,dataHeapId:s.dataHeapId,disabledPlaceholder:t.t("tickets.assignto.".concat(this.fieldCollection[e].disabledPlaceholder))}},agents:Ember.computed("ticket","selectedAgent","selectedGroup","allAgents","form",(function(){var e=Ember.get(this,"selectedGroup.id"),t=Ember.get(this,"selectedGroup.agentIds"),n=Ember.get(this,"allAgents");return e&&(n=n.filter((function(e){return t.includes(parseInt(e.id))}))),Ember.get(this,"form")||(n=[a].concat(s(n))),n})),sortedGroups:Ember.computed.sort("groups","sortList"),sortedAgents:Ember.computed.sort("agents","sortList"),selectedGroup:Ember.computed("groupValue","resetData",{get:function(){return Ember.get(this,"form")?Ember.get(this,"groupValue"):this._selectedData("groupValue.id","resultGroups")},set:function(e,t){return t}}),selectedAgent:Ember.computed("agentValue","resetData",{get:function(){return Ember.get(this,"form")?Ember.get(this,"agentValue"):this._selectedData("agentValue.id","resultAgents")},set:function(e,t){return Ember.get(this,"form")||null!==t?t:a}}),actions:{onItemSelected:function(e,t,s){if(e==n){if(Ember.set(this,"selectedGroup",s),Ember.get(this,"selectedAgent.id")&&s&&s.id){var a=Ember.get(s,"id");Ember.get(this,"selectedAgent.groupIds").includes(parseInt(a))||Ember.set(this,"selectedAgent",null)}!Ember.get(this,"allowNilGroup")&&Ember.isEmpty(s)&&Ember.set(this,"selectedAgent",null)}else e==i&&Ember.set(this,"selectedAgent",s);this.saveData()}},saveData:function(e,t){var s=this,n=Ember.get(this,"selectedAgent"),i=Ember.get(this,"selectedGroup"),a=Ember.get(this,"onSave")(n,i,t);Ember.isEmpty(a)?e&&e():a.then(e,(function(){s.toggleProperty("resetData")}))},_selectedData:function(e,t){var s=Ember.get(this,e)||null;return Ember.get(this,t).findBy("id",s)}});e.default=r})),define("freshdesk/components/module-tickets/shared/assign-to-new/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"eaV1Wyok",block:'{"symbols":["agent","group"],"statements":[[7,"div"],[12,"class",[28,["group-field  ",[27,"if",[[27,"not",[[23,["form"]]],null],"pr-5 mb-0","mb-16"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["disabled"]]],null,{"statements":[[0,"    "],[1,[27,"ui-form/disabled-field",null,[["label","value","classNames"],[[27,"unless",[[23,["hideLabel"]],[23,["groupAgentCollection","group","placeholder"]]],null],[23,["selectedGroup","name"]],[23,["disabledClasses"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["resultGroups"]]],null,{"statements":[[4,"if",[[23,["form"]]],null,{"statements":[[0,"      "],[1,[27,"component",[[23,["form","select-field"]],[23,["groupAgentCollection","group","fieldName"]]],[["options","isCustomRequired","ignoreFieldLevelValidation","placeholder","optionLabelPath","optionValuePath","data-test-id","dataHeapId","onchange","isFreddySuggestion","beforeOptionsComponent"],[[23,["resultGroups"]],true,[23,["ignoreFieldLevelValidation"]],[23,["groupAgentCollection","group","placeholder"]],"name","id",[23,["groupAgentCollection","group","dataTestId"]],[23,["groupAgentCollection","group","dataHeapId"]],[27,"action",[[22,0,[]],"onItemSelected",1],null],[23,["groupBotSuggestion"]],[27,"if",[[23,["groupBotSuggestion"]],[27,"component",["module-tickets/shared/freddy-suggestion/property"],[["ticket","onchange","botSuggestion"],[[23,["form","form","model"]],[27,"action",[[22,0,[]],"onItemSelected",1],null],[23,["groupBotSuggestion"]]]]],null],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"data-test-id","group-select"],[11,"class","assign-to-select hcell-template hint hint--left pl-10 pr-10"],[12,"aria-label",[27,"t",["tickets.group"],null]],[9],[0,"\\n"],[4,"power-select",null,[["selected","options","searchField","searchEnabled","onchange"],[[23,["selectedGroup"]],[23,["resultGroups"]],"name",true,[27,"action",[[22,0,[]],"onItemSelected",1,null],null]]],{"statements":[[0,"          "],[1,[22,2,["name"]],false],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"ui-form/text-field",null,[["label","disabled","data-test-id","value"],[[23,["groupAgentCollection","group","placeholder"]],true,[23,["groupAgentCollection","group","dataTestId"]],[23,["groupAgentCollection","group","disabledPlaceholder"]]]]],false],[0,"\\n  "]],"parameters":[]}]],"parameters":[]}],[4,"if",[[27,"or",[[23,["allowNilGroup"]],[27,"and",[[27,"not",[[23,["allowNilGroup"]]],null],[23,["selectedGroup"]]],null]],null]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["agent-field ",[27,"if",[[27,"not",[[23,["form"]]],null],"border-left--none","border-left"],null]]]],[9],[0,"\\n      "],[7,"div"],[12,"class",[28,["agent-filter ",[27,"if",[[27,"not",[[23,["form"]]],null],"pl-0 mt-0","pl-10 mt-5"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["disabled"]]],null,{"statements":[[0,"          "],[1,[27,"ui-form/disabled-field",null,[["label","value","classNames"],[[27,"unless",[[23,["hideLabel"]],[23,["groupAgentCollection","agent","placeholder"]]],null],[23,["selectedAgent","name"]],[23,["disabledClasses"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["form"]]],null,{"statements":[[0,"          "],[1,[27,"component",[[23,["form","select-field"]],[23,["groupAgentCollection","agent","fieldName"]]],[["options","isCustomRequired","ignoreFieldLevelValidation","placeholder","optionLabelPath","optionValuePath","data-test-id","dataHeapId","onchange","isFreddySuggestion","beforeOptionsComponent"],[[23,["resultAgents"]],true,[23,["ignoreFieldLevelValidation"]],[23,["groupAgentCollection","agent","placeholder"]],"name","id",[23,["groupAgentCollection","agent","dataTestId"]],[23,["groupAgentCollection","agent","dataHeapId"]],[27,"action",[[22,0,[]],"onItemSelected",2],null],[23,["agentBotSuggestion"]],[27,"if",[[23,["agentBotSuggestion"]],[27,"component",["module-tickets/shared/freddy-suggestion/property"],[["ticket","onchange","botSuggestion"],[[23,["form","form","model"]],[27,"action",[[22,0,[]],"onItemSelected",2],null],[23,["agentBotSuggestion"]]]]],null],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"div"],[11,"data-test-id","agent-select"],[11,"class","assign-to-select hcell-template hint hint--left pl-10 pr-10"],[12,"aria-label",[27,"t",["tickets.agent"],null]],[9],[0,"\\n"],[4,"power-select",null,[["selected","options","searchField","searchEnabled","onchange"],[[23,["selectedAgent"]],[23,["resultAgents"]],"name",true,[27,"action",[[22,0,[]],"onItemSelected",2,null],null]]],{"statements":[[0,"              "],[1,[22,1,["name"]],false],[0,"\\n"]],"parameters":[1]},null],[0,"          "],[10],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/assign-to-new/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/assign-to-new/trigger-cell-renderer/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({groupName:null,agentName:null,ticket:null,extra:null,"data-test-id":Ember.computed("column.name",(function(){return"".concat(Ember.get(this,"column.name"),"_test_label")}))});e.default=t})),define("freshdesk/components/module-tickets/shared/assign-to-new/trigger-cell-renderer/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"fC13Yngc",block:'{"symbols":[],"statements":[[7,"div"],[11,"data-test-assignto-trigger",""],[11,"class","group-agent-label"],[9],[0,"\\n  "],[7,"div"],[11,"class","group-agent-label-text"],[9],[0,"\\n    "],[7,"div"],[11,"class","display-label"],[9],[0,"\\n      "],[7,"p"],[12,"class",[28,["group-label pl-10 ",[27,"if",[[23,["isEditable"]],"hint hint--left"],null]]]],[9],[0,"\\n        "],[7,"span"],[11,"class","group-text"],[9],[1,[27,"fill-default",[[23,["groupName"]],"--"],null],false],[10],[0,"\\n"],[4,"if",[[23,["isEditable"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","ember-power-select-status-icon"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","display-label"],[9],[0,"\\n      "],[7,"p"],[12,"class",[28,["agent-label pr-10 pl-5 ",[27,"if",[[23,["isEditable"]],"hint hint--left"],null]]]],[9],[0,"\\n        "],[7,"span"],[11,"class","agent-text"],[9],[1,[27,"fill-default",[[23,["agentName"]],"--"],null],false],[10],[0,"\\n"],[4,"if",[[23,["isEditable"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","ember-power-select-status-icon"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/assign-to-new/trigger-cell-renderer/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/associated-tickets/component",["exports","freshdesk/constants/associations","freshdesk/constants/ticket"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend({displayType:null,displaySchema:null,associatedTicketsCount:null,ticket:Ember.computed.reads("data.currentTicket"),fromTicketList:Ember.computed.reads("data.ticketsListPage"),init:function(){this._super.apply(this,arguments),this._setDisplaySchema(),this.sendAction("modalLoaded")},actions:{cancel:function(){this.sendAction("close")},updateTicketsCount:function(e){Ember.set(this,"associatedTicketsCount",e)}},_getDisplayType:function(){switch(Ember.get(this,"ticket.associationType")){case s.default.associationType.parent:return"associatedServiceTasks"===Ember.get(this,"data.type")?"displayServiceTask":"displayParent";case s.default.associationType.tracker:return"displayTracker"}},_setDisplaySchema:function(){var e=this._getDisplayType();Ember.set(this,"displayType",e),Ember.set(this,"displaySchema",t.default[e])}});e.default=n})),define("freshdesk/components/module-tickets/shared/associated-tickets/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"2Y+4B1JX",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n"],[4,"if",[[23,["associatedTicketsCount"]]],null,{"statements":[[0,"      "],[1,[27,"svg-jar",[[23,["displaySchema","headerIcon"]]],[["class"],["modal-icons"]]],false],[0,"\\n      "],[7,"span"],[11,"data-test-id","assoc-modal-title"],[9],[0,"\\n        "],[1,[27,"titleize",[[27,"t",[[23,["displaySchema","headerTitle"]]],[["count"],[[23,["associatedTicketsCount"]]]]]],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"],[1,[27,"module-tickets/shared/associated-tickets/ticket-list",null,[["unlinkAction","ticket","fromTicketList","associatedTicketsCount","closeModal","type","displaySchema","isRelatedTickets"],[true,[23,["ticket"]],[23,["fromTicketList"]],"updateTicketsCount",[27,"action",[[22,0,[]],"cancel"],null],[27,"t",["tickets.ticket_associations.related.label"],null],[23,["displaySchema"]],true]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/associated-tickets/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/component",["exports","ember-concurrency","freshdesk/mixins/tickets/bulk-actions-helper","freshdesk/utils/blank-array","freshdesk/constants/ticket"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend(s.default,{store:Ember.inject.service(),i18n:Ember.inject.service(),ticketBulkAction:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),classNames:["__module-tickets__shared__associated-tickets__ticket-list"],selectedTicket:{},showBulkUpdates:!0,assocAction:null,perPageCount:30,page:1,tickets:(0,n.default)(),hideFooter:Ember.computed.or("isTrackerList","unlinkAction"),isTracker:Ember.computed.equal("ticket.associationType",3),isParent:Ember.computed.equal("ticket.associationType",1),selectedAssocTicketsCount:Ember.computed.reads("selectedAssocTickets.length"),permissibleTickets:Ember.computed.filterBy("selectedTickets","permission",!0),permissibleTicketsCount:Ember.computed.reads("permissibleTickets.length"),selectedTicketsCount:Ember.computed.reads("selectedTickets.length"),disableBulkActions:Ember.computed.lt("selectedTicketsCount",1),isPaginationRequired:Ember.computed.gt("totalPages",1),noAssociations:Ember.computed.lt("associatedTickets.length",1),showGroupTitle:Ember.computed.not("currentAccount.fsmWithNoParentChild"),canDoBulkUpdate:Ember.computed("currentUserPrivileges.{hasLinkTicketPrivilege,hasParentChildPrivilege}",(function(){switch(Ember.get(this,"ticket.associationType")){case i.default.associationType.parent:return this.currentUserPrivileges.hasParentChildPrivilege;case i.default.associationType.tracker:return this.currentUserPrivileges.hasLinkTicketPrivilege;default:return!0}})),totalPages:Ember.computed("ticket.associatedTicketsCount",(function(){return Math.ceil(Ember.get(this,"ticket.associatedTicketsCount")/30)})),canUpdateAll:Ember.computed("permissibleTicketsCount","selectedTicketsCount",(function(){return this.permissibleTicketsCount==this.selectedTicketsCount})),permissibleAssocTickets:Ember.computed("assocAction",(function(){return"update"===this.assocAction?this.permissibleTickets:this.selectedTickets})),selectedAssocTickets:Ember.computed.map("permissibleAssocTickets",(function(e){return parseInt(e.id)})),selectedTickets:Ember.computed.filter("associatedTickets.@each.checkbox",(function(e){return e.checkbox})),associatedTickets:Ember.computed.map("tickets.[]",(function(e){return Ember.set(e,"checkbox",!1),e})),selectAll:Ember.computed("associatedTickets.@each.checkbox",{get:function(){return this.associatedTickets.isEvery("checkbox",!0)},set:function(e,t){return t}}),init:function(){this._super.apply(this,arguments),this.isRelatedTickets&&this.getAssociatedTickets.perform()},willDestroyElement:function(){Ember.set(this,"assocAction",null)},actions:{showBulkReply:function(){var e=this;Ember.set(this,"assocAction","update"),this.selectedAssocTicketsCount?(Ember.setProperties(this,{"ticketBulkAction.associatedTicketsAction":!0,"ticketBulkAction.selectedAssocTicketIds":this.selectedAssocTickets,"ticketBulkAction.selectedTicketsCount":this.selectedTicketsCount,"ticketBulkAction.updateAll":this.canUpdateAll,"ticketBulkAction.permissibleTickets":this.permissibleTicketsCount,"ticketBulkAction.assocPermissibeTickets":this.permissibleTickets}),this.sendAction("closeModal"),Ember.run.next((function(){e.ticketBulkAction.toggleBulkAction(),e.ticketBulkAction.getBroadcastMessage()}))):this.flashMessages.danger(this.i18n.t("tickets.bulkupdate.update_error")),Ember.set(this,"assocAction",null)},cancelUnlink:function(){Ember.set(this,"showBulkUnlink",!1)},bulkUnlink:function(){this.unlinkTickets()},showBulkUnlink:function(){Ember.set(this,"assocAction","unlink"),this.selectedAssocTicketsCount&&Ember.set(this,"showBulkUnlink",!0),Ember.set(this,"assocAction",null)},selectAllTickets:function(e){this.associatedTickets.forEach((function(t){t.hasPermission&&Ember.set(t,"checkbox",e)}))},unlink:function(e){this.tickets.filterBy("unlink",!0).forEach((function(e){Ember.set(e,"unlink",!1)})),Ember.set(e,"unlink",!0)},fetchMore:function(){this.getAssociatedTickets.perform()},cancel:function(e){e.toggleProperty("unlink")}},unlinkTickets:function(){var e=this.selectedAssocTickets;this.ticket.bulkUnlink({ids:e}).then(this.getCurrentTicketsList.bind(this))},getCurrentTicketsList:function(){var e=this,t=this.tickets,s=this.selectedTickets;s.forEach((function(s){e.updateTicketProperties(s),t=t.rejectBy("id",s.id.toString())})),Ember.setProperties(this,{tickets:t,showBulkUnlink:!1}),this.updateTrackerAssocTicketsCount(s.length)},updateTicketProperties:function(e){var t={ticket:{id:Ember.get(e,"id"),association_type:null}};this.store.pushPayload(t)},updateTrackerAssocTicketsCount:function(e){var t={ticket:{id:Ember.get(this,"ticket.id"),associated_tickets_count:Ember.get(this,"ticket.associatedTicketsCount")-e}};this.store.pushPayload(t),this.closeModal();var s=this.i18n.t("tickets.ticket_associations.link_tickets.unlink_success");this.flashMessages.success(s)},_confirmUnlinkCB:function(e){var t=this.tickets;Ember.setProperties(e,{trackerId:this.TRACKER_ID_AFTER_UNLINK,unlink:!1}),t.removeObject(e),this.updateTrackerAssocTicketsCount(1)},_convertResponseItemToTicket:function(e){var t=this.store,s=t.peekRecord("ticket",e.id);return s?t.pushPayload(e):(t.pushPayload({ticket:e}),s=t.peekRecord("ticket",e.id)),s},getAssociatedTickets:(0,t.task)(regeneratorRuntime.mark((function e(){var t,s,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"displaySchema.filters"),s={page:this.page,include:"count"},n=t?Object.assign(s,t):s,e.next=5,this.ticket.getAllAssociatedTickets(n);case 5:i=e.sent,a=this._handleResponse(i),Ember.set(this,"tickets",a),this.sendAction("associatedTicketsCount",i.meta.count||0);case 9:case"end":return e.stop()}}),e,this)}))).restartable(),_handleResponse:function(e){var t=this;if(e.data)return e.data.map((function(e){return t._convertResponseItemToTicket(e)}))},_handleFailure:function(){var e=this.i18n.t("tickets.ticket_associations.associated_tickets.failed");this.flashMessages.danger(e)}});e.default=a})),define("freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Peak+stZ",block:'{"symbols":["data","type","item"],"statements":[[4,"if",[[23,["getAssociatedTickets","isRunning"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","search-results__loading associated-loading"],[11,"data-test-id","tracker-loading"],[9],[0,"\\n    "],[1,[21,"ui-components/part-loading"],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["showBulkUnlink"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/shared/associated-tickets/ticket-list/unlink-confirmation",null,[["selectedAssocTicketsCount","cancel","bulkUnlink"],[[23,["selectedAssocTicketsCount"]],[27,"action",[[22,0,[]],"cancelUnlink"],null],[27,"action",[[22,0,[]],"bulkUnlink"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div"],[11,"id","assoc-list-container"],[12,"class",[28,["associate-ticket-list-container ",[27,"if",[[27,"and",[[23,["fromTicketList"]],[23,["canDoBulkUpdate"]]],null],"ticket-list"],null],[27,"if",[[23,["hideFooter"]]," no-footer"],null],[27,"if",[[23,["isTrackerList"]]," mt-75"],null]," ",[27,"if",[[23,["showBulkUnlink"]],"unlink"],null]]]],[11,"data-test-id","assoc-list-container"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["fromTicketList"]],[23,["showBulkUpdates"]],[23,["canDoBulkUpdate"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","bulk-updates"],[11,"data-test-id","bulk-updates-header"],[9],[0,"\\n        "],[1,[27,"ui-form/custom-checkbox",null,[["value","data-test-id","onchange","class"],[[23,["selectAll"]],"associated-tickets-bulk-select",[27,"action",[[22,0,[]],"selectAllTickets"],null],"select-all"]]],false],[0,"\\n        "],[7,"button"],[12,"aria-label",[27,"t",["tickets.bulkactions"],null]],[11,"class","app-icon-btn app-icon-btn--text"],[12,"disabled",[21,"disableBulkActions"]],[12,"onclick",[27,"action",[[22,0,[]],"showBulkReply"],null]],[11,"data-test-id","bulk-update"],[9],[0,"\\n          "],[1,[27,"svg-jar",["convert"],[["class"],["app-icon"]]],false],[0,"\\n          "],[1,[27,"t",["tickets.bulkactions"],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["isTracker"]]],null,{"statements":[[0,"          "],[7,"button"],[12,"aria-label",[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null]],[11,"class","app-icon-btn app-icon-btn--text"],[12,"disabled",[21,"disableBulkActions"]],[12,"onclick",[27,"action",[[22,0,[]],"showBulkUnlink"],null]],[11,"data-test-id","bulk-unlink"],[9],[0,"\\n            "],[1,[27,"svg-jar",["unlink"],[["aria-label","class"],["Unlink","app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"each",[[27,"-each-in",[[23,["associationGroups"]]],null]],null,{"statements":[[4,"if",[[22,1,["tickets","length"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","assoc-group-wrapper"],[12,"data-test-id",[22,2,[]]],[9],[0,"\\n"],[4,"if",[[27,"and",[[27,"not-eq",[[22,2,[]],"default"],null],[23,["showGroupTitle"]]],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","title-rl-wrapper"],[9],[0,"\\n              "],[7,"h4"],[11,"class","title-rl-wrapper__title"],[11,"data-test-id","assoc-group-title"],[9],[0,"\\n                "],[1,[27,"titleize",[[27,"t",[[22,1,["label"]]],[["count"],[[22,1,["tickets","length"]]]]]],null],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","title-rl-wrapper__line"],[9],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[4,"each",[[22,1,["tickets"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","associate-ticket-list-item-conatiner"],[9],[0,"\\n              "],[7,"div"],[12,"class",[28,["associate-ticket-list row ",[27,"if",[[23,["isParent"]],"","highlight"],null]," ",[27,"if",[[22,3,["unlink"]],"fade",""],null]]]],[11,"data-test-id","associate-ticket-list-item"],[9],[0,"\\n                "],[7,"div"],[11,"class","container-fluid clearfix"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["fromTicketList"]],[23,["canDoBulkUpdate"]]],null]],null,{"statements":[[0,"                    "],[1,[27,"ui-form/custom-checkbox",null,[["class","data-test-feedback-action","data-test-id","value","disabled"],["associated-tickets-select pull-left","select",[27,"concat",["assoc-ticket-checkbox-",[22,3,["id"]]],null],[22,3,["checkbox"]],[27,"not",[[22,3,["hasPermission"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","associatedTickets","showStatus","class"],[[22,3,[]],true,true,"list-content-wrap pull-left"]]],false],[0,"\\n                  "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n"],[4,"if",[[23,["linkActions"]]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","action-buttons"],[9],[0,"\\n                        "],[7,"a"],[12,"aria-label",[27,"t",["tickets.link"],null]],[12,"onClick",[27,"action",[[22,0,[]],[23,["linkToTracker"]],[22,3,["id"]]],null]],[11,"class","app-icon-btn app-icon-btn--secondary hint--rounded hint--top"],[9],[0,"\\n                          "],[1,[27,"svg-jar",["insert-link"],[["aria-label","class"],["Link","app-icon hint--rounded hint--top"]]],false],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["isTracker"]],[23,["currentUserPrivileges","hasLinkTicketPrivilege"]]],null]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","action-buttons"],[9],[0,"\\n                        "],[7,"a"],[12,"aria-label",[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null]],[12,"onClick",[27,"action",[[22,0,[]],"unlink",[22,3,[]]],null]],[12,"class",[28,["app-icon-btn app-icon-btn--secondary hint--rounded hint--top ",[27,"if",[[23,["showBulkUnlink"]],"disabled"],null]]]],[11,"data-test-id","unlink-ticket"],[9],[0,"\\n\\n                          "],[1,[27,"svg-jar",["unlink"],[["aria-label","class"],["Unlink","app-icon hint--rounded hint--top"]]],false],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[10],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"],[4,"if",[[23,["isTracker"]]],null,{"statements":[[0,"                "],[7,"div"],[12,"class",[28,["unlink-confirm row ",[27,"if",[[22,3,["unlink"]],"active",""],null]]]],[11,"data-test-id","associate-ticket-unlink"],[9],[0,"\\n                  "],[7,"div"],[11,"class","col-md-3"],[9],[0,"\\n                  "],[10],[0,"\\n                  "],[7,"div"],[11,"class","col-md-9"],[9],[0,"\\n                    "],[7,"div"],[11,"class","confirm-text"],[9],[0,"\\n                      "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.confirm"],null],false],[0,"\\n                    "],[10],[0,"\\n                    "],[7,"div"],[11,"class","actions-links"],[9],[0,"\\n                      "],[7,"button"],[11,"class","btn btn--transparent text--uppercase cancel"],[12,"onclick",[27,"action",[[22,0,[]],"cancel",[22,3,[]]],null]],[9],[0,"\\n                        "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n                      "],[10],[0,"\\n                      "],[7,"button"],[11,"class","btn btn--transparent text--uppercase submit"],[12,"onclick",[27,"action",[[22,0,[]],"confirmUnlink",[22,3,[]]],null]],[11,"data-test-id","unlink-confirm-link"],[9],[0,"\\n                        "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],false],[0,"\\n                      "],[10],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[3]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[4,"if",[[27,"and",[[23,["noAssociations"]],[23,["linkActions"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","noresult-container"],[11,"data-test-id","noresult-container"],[9],[0,"\\n        "],[7,"img"],[12,"src",[23,["emptyState","image"]]],[12,"alt",[27,"t",[[23,["emptyState","label"]]],null]],[9],[10],[0,"\\n        "],[7,"h3"],[9],[0,"\\n          "],[1,[27,"t",[[23,["emptyState","label"]]],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["allowCreate"]]],null,{"statements":[[0,"          "],[7,"a"],[12,"onClick",[21,"createTracker"]],[11,"data-test-id","create-tracker"],[11,"class","ml5 text--small"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.new"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[4,"if",[[27,"or",[[23,["isTracker"]],[23,["isParent"]]],null]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[27,"if",[[23,["isPaginationRequired"]],"tickets-pagination"],null]],[9],[0,"\\n      "],[1,[27,"ui-components/fresh-pagination",null,[["pageBasedType","count","perPage","page","onPageChange"],[true,[23,["ticket","associatedTicketsCount"]],[23,["perPageCount"]],[23,["page"]],[27,"action",[[22,0,[]],"fetchMore"],null]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/unlink-confirmation/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({actions:{cancel:function(){this.sendAction("cancel")},bulkUnlink:function(){this.sendAction("bulkUnlink")}}});e.default=t}));define("freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/unlink-confirmation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"PHYbbjgI",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","unlink-confirmation"],[9],[0,"\\n  "],[7,"div"],[11,"class","confirmation-text"],[9],[1,[27,"t",["tickets.ticket_associations.bulkUnlink.confirmation"],[["selectedAssocTicketsCount","count"],[[23,["selectedAssocTicketsCount"]],[23,["selectedAssocTicketsCount"]]]]],false],[10],[0,"\\n  "],[7,"button"],[11,"class","btn btn--secondary"],[12,"onclick",[27,"action",[[22,0,[]],"cancel"],null]],[11,"data-test-id","cancel-unlink"],[9],[0,"\\n    "],[1,[27,"t",["common.cancel"],null],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"button"],[11,"class","btn btn--secondary submit-unlink"],[12,"onclick",[27,"action",[[22,0,[]],"bulkUnlink",[23,["item"]]],null]],[9],[0,"\\n    "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/associated-tickets/ticket-list/unlink-confirmation/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/association-type/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={1:"PARENT",2:"CHILD",3:"TRACKER",4:"RELATED"},s=Ember.Component.extend({tagName:"",associationType:Ember.computed("ticket.associationType",(function(){var e=Ember.get(this,"ticket.associationType");return t[e]}))});e.default=s})),define("freshdesk/components/module-tickets/shared/association-type/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"6zpEVtFq",block:'{"symbols":[],"statements":[[4,"if",[[23,["associationType"]]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","tag tag--uppercase ellipsis tag--associated"],[9],[1,[21,"associationType"],false],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/association-type/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/bot-suggested-article/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({actions:{insertData:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.toggleSuggestedArticle(),this.insertData(parseInt(e),t,s)}}});e.default=t})),define("freshdesk/components/module-tickets/shared/bot-suggested-article/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"kAzUNDaj",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","bot-suggested-solution-article"],[9],[0,"\\n  "],[7,"div"],[11,"class","article-modal__header"],[9],[0,"\\n    "],[7,"div"],[11,"class","modal-article__header text--extra-bold mb-8"],[9],[0,"\\n      "],[1,[23,["article","title"]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","modal-article__description mb-10"],[9],[0,"\\n      "],[7,"div"],[11,"class","article-folder__desc article-data"],[9],[0,"\\n        "],[1,[27,"svg-jar",["folder"],[["class"],["app-icon app-icon--small folder-icon"]]],false],[0,"\\n        "],[7,"span"],[11,"class","article-folder__title"],[9],[1,[21,"folderTitle"],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","article-folder__timing article-data"],[9],[0,"\\n        "],[1,[27,"svg-jar",["activities"],[["class"],["app-icon app-icon--small folder-icon"]]],false],[0,"\\n        "],[7,"span"],[11,"class","article-folder__time"],[9],[7,"span"],[11,"class","date-modified"],[9],[1,[27,"t",["fd.freddy.date.modified.on"],null],false],[10],[1,[27,"moment-format",[[23,["article","updatedAt"]],[23,["currentAccount","timeFormat","fullTimeAt"]]],null],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","modal-article__action-bar"],[9],[0,"\\n"],[4,"if",[[23,["isArticleVisible"]]],null,{"statements":[[0,"        "],[7,"button"],[11,"data-test-id","link-btn"],[12,"aria-label",[27,"t",["insert-solutions.link-label"],null]],[11,"class","hint--rounded hint--bottom app-icon-btn app-icon-btn--text"],[12,"onclick",[27,"action",[[22,0,[]],"insertData",[23,["article","id"]],"link",""],null]],[9],[0,"\\n          "],[1,[27,"svg-jar",["insert-link"],[["class"],["app-icon app-icon--small btn-label preview-icon"]]],false],[0,"\\n          "],[7,"span"],[11,"class","insert-link-txt"],[9],[1,[27,"t",["insert-solutions.insert-link"],null],false],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"button"],[11,"data-test-id","content-btn"],[12,"aria-label",[27,"t",["insert-solutions.content-label"],null]],[11,"class","hint--rounded hint--bottom app-icon-btn app-icon-btn--text"],[12,"onclick",[27,"action",[[22,0,[]],"insertData",[23,["article","id"]],"content",[23,["article","description"]]],null]],[9],[0,"\\n        "],[1,[27,"svg-jar",["new"],[["class"],["app-icon app-icon--small btn-label preview-icon"]]],false],[0,"\\n        "],[7,"span"],[11,"class","insert-content-txt"],[9],[1,[27,"t",["insert-solutions.insert-content"],null],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","article-modal__content mb-18"],[9],[0,"\\n    "],[7,"div"],[11,"class","article-description-content mb-18"],[11,"id","article-desc-content"],[9],[0,"\\n      "],[1,[27,"html-safe",[[23,["article","description"]]],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/bot-suggested-article/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/collision-dropdown-hover/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__shared__collision-dropdown-hover"],maxStringLength:18,actions:{prevent:function(){return!1},open:function(e,t){if(t){Ember.run.cancel(Ember.get(this,"_closeDebounce"));var s=Ember.run.debounce(this,e.actions.open,100);return Ember.set(this,"_openDebounce",s),!1}},closeLater:function(e){Ember.run.cancel(Ember.get(this,"_openDebounce"));var t=Ember.run.debounce(this,e.actions.close,100);Ember.set(this,"_closeDebounce",t)}}});e.default=t})),define("freshdesk/components/module-tickets/shared/collision-dropdown-hover/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"heqL+qmw",block:'{"symbols":["dd","agent"],"statements":[[4,"if",[[23,["agents","length"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","agent-collision-btn"],[9],[0,"\\n"],[4,"basic-dropdown",null,[["verticalPosition","renderInPlace"],[[23,["direction"]],"true"]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["onMouseDown","onMouseEnter","onMouseLeave"],[[27,"action",[[22,0,[]],"prevent"],null],[27,"action",[[22,0,[]],"open"],null],[27,"action",[[22,0,[]],"closeLater"],null]]],{"statements":[[0,"        "],[7,"div"],[11,"class","view-flip active"],[11,"rel","notice-popover"],[12,"data-test-id",[21,"testIdentifier"]],[9],[0,"\\n          "],[7,"div"],[11,"class","flip-front"],[9],[0,"\\n            "],[1,[27,"svg-jar",[[23,["icon"]]],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","flip-back"],[9],[0,"\\n            "],[1,[23,["agents","length"]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,1,["content"]]],[["onMouseEnter","onMouseLeave"],[[27,"action",[[22,0,[]],"open"],null],[27,"action",[[22,0,[]],"closeLater"],null]]],{"statements":[[0,"        "],[7,"div"],[11,"class","text--uppercase agent_collision_header"],[9],[0,"\\n          "],[1,[27,"t",[[23,["headerText"]]],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"each",[[23,["agents"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","agent_collision_option"],[9],[1,[27,"ellipsis-text",[[22,2,["userName"]],[23,["maxStringLength"]]],null],false],[10],[0,"\\n"]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/collision-dropdown-hover/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/freddy-suggestion/property/component",["exports","freshdesk/utils/freddy-field-prediction"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),classNames:["freddy-field-suggestion","pa-8"],actions:{triggerOption:function(){var e=this.select,s=this.ticket;(0,t.fieldSelect)(this,{fieldData:this.botSuggestion,ticket:s}),e&&e.actions.close()}}});e.default=s})),define("freshdesk/components/module-tickets/shared/freddy-suggestion/property/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"zJ315vzt",block:'{"symbols":[],"statements":[[7,"button"],[11,"data-test-id","freddy-field-option"],[11,"class","answer--block"],[12,"onclick",[27,"action",[[22,0,[]],"triggerOption"],null]],[9],[0,"\\n  "],[7,"span"],[11,"class","answer--img pr-3"],[9],[1,[27,"svg-jar",["freddy-field-suggestion"],[["class"],["app-icon app-icon--small"]]],false],[10],[0,"\\n  "],[7,"div"],[11,"class","answer--header text--xsmall"],[9],[1,[27,"t",["fd.freddy.suggestion"],null],false],[10],[0,"\\n  "],[7,"span"],[11,"data-test-id","answer--label"],[11,"class","wordbreak-fix element-flex answer--label text--extra-bold pl-20"],[9],[1,[23,["botSuggestion","valueLabel"]],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/freddy-suggestion/property/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/link-tickets/component",["exports","freshdesk/constants/search","ember-concurrency","freshdesk/constants/static-url-list","freshdesk/constants/ticket","freshdesk/utils/blank-array"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=[{id:1,label:"tickets.merge.requester",value:"requester",url:n.default.trackerFilterByRequester},{id:2,label:"tickets.merge.subject",value:"subject",url:n.default.trackerFilterBySubject},{id:3,label:"tickets.merge.id",value:"display_id",url:n.default.trackerFilterByID}],l=Ember.Component.extend({store:Ember.inject.service(),ajax:Ember.inject.service(),currentUser:Ember.inject.service(),classNames:["__module-tickets__shared__link-tickets"],optionsArray:r,fromListPage:!1,searchValue:"",isLoading:!1,selectedRequester:null,ticketList:(0,a.default)(),relatedTicketIds:(0,a.default)(),type:Ember.computed.reads("data.type"),optionSelected:r.objectAt(0),ticket:Ember.computed.reads("data.currentTicket"),allowCreate:Ember.computed.equal("type","tracker"),emptyState:Ember.computed("type",(function(){return i.LINK_EMPTY_STATE[this.type]})),translationData:Ember.computed("type",(function(){return{modalTitle:"tickets.ticket_associations.link_tickets.".concat(this.type,".add"),searchLabel:"tickets.ticket_associations.link_tickets.".concat(this.type,".search."),ticketListType:"tickets.ticket_associations.".concat(this.type,".label")}})),isSearch:Ember.computed("searchValue","selectedRequester",(function(){var e=Ember.get(this,"searchValue"),t=Ember.get(this,"selectedRequester");return!(!e.trim()&&!t)})),isRecentTrackers:Ember.computed("ticketList",(function(){var e=Ember.get(this,"ticketList"),t=Ember.get(this,"isSearch");return!(!e.length||t)||t})),selectedTrackerAssocCount:Ember.computed("selectedTracker",(function(){var e=Ember.get(this,"selectedTracker.firstObject.associatedTicketsCount");return e||0})),selectedTracker:Ember.computed.filter("ticketList",(function(e){return e.id==Ember.get(this,"ticketId")})),resultLabel:Ember.computed("searchValue","selectedRequester","ticketList",(function(){var e,t=Ember.get(this,"searchValue"),s=Ember.get(this,"selectedRequester"),n=Ember.get(this,"ticketList.length");return e=t.trim()||s?"tickets.ticket_associations.link_tickets.search_results":"tickets.ticket_associations.link_tickets.recent_".concat(this.type,"s"),this.i18n.t(e,{count:n})})),init:function(){this._super.apply(this,arguments),this._setModalData(),this._getTrackerList(),this.sendAction("modalLoaded")},actions:{cancel:function(){this.sendAction("close")},chooseOption:function(e){Ember.setProperties(this,{optionSelected:e,selectedRequester:null,searchValue:""}),this._getTrackerList()},engageSearch:function(e){Ember.set(this,"searchValue",e),this.send("debouncedSearch")},debouncedSearch:function(){Ember.run.debounce(this,this._getTrackerList,t.default.searchDebounceTime)},onCancel:function(){Ember.setProperties(this,{searchValue:"",selectedRequester:null}),this._getTrackerList()},linkToTracker:function(e){var t=this;Ember.set(this,"ticketId",e);var s,n=Ember.get(this,"ticket")||Ember.get(this,"ticketList.firstObject"),i={};i["".concat(this.type,"_id")]=parseInt(e),Ember.get(this,"fromListPage")?(i.ids=this.relatedTicketIds,s=n.bulkLink(i)):(Ember.set(n,"".concat(this.type,"Id"),e),s=n.save()),s.then((function(){t.sendAction("close"),Ember.get(t,"fromListPage")?(t.updateTracker(e),t._updateTicketList(e)):(t.updateTicketProperties(n),t.sendAction("updateTrackerAction"));var s=Ember.get(t,"i18n").t("tickets.ticket_associations.link_tickets.link_success");Ember.get(t,"flashMessages").success(s,{content:{linkText:"#".concat(e),linkAction:t.actions.transitionToTicketId.bind(t,e)}})}))},transitionToTicketId:function(e){Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e)},createTracker:function(){var e=Ember.get(this,"ticket"),t=Ember.get(this,"currentUser.id"),s={status:i.default.defaultStatus,priority:i.default.defaultPriority,customFields:{},requesterId:t},n=Ember.get(this,"store").createRecord("ticket",s),a={options:{template:"module-tickets/ticket-form",closeOnEscapse:!0,showModalClose:!0},data:{type:"createTracker",relatedTicketIds:Ember.get(this,"relatedTicketIds"),ticket:n,currentTicket:e,updateTrackerFn:Ember.get(this,"updateTrackerAction"),from:Ember.get(this,"fromListPage")}};this.overlay.open(a)},onSelectRequester:function(e){Ember.set(this,"selectedRequester",e),this._getTrackerList()}},_setModalData:function(){var e=Ember.get(this,"data");if(e){var t=!!e.from;Ember.set(this,"fromListPage",t),Ember.set(this,"relatedTicketIds",e.relatedTicketIds),Ember.set(this,"updateTrackerAction",e.updateTrackerFn),Ember.set(this,"type",e.type)}},_handleSearchResponse:function(e){return e.results},_convertSearchItemToTicket:function(e){var t=Ember.get(this,"store"),s=t.peekRecord("ticket",e.id);if(s)t.pushPayload(e),s=t.peekRecord("ticket",e.id);else{var n={subject:e.subject,createdAt:e.created_at,requesterId:e.requester_id,responderId:e.responder_id,groupId:e.group_id,dueBy:Ember.isPresent(e.due_by)?new Date(e.due_by):e.due_by,permission:!0,status:e.status};s=t.createRecord("ticket",Ember.assign({},{id:e.id},n))}return s},_setTrackerSearchParams:function(){var e,t=Ember.get(this,"searchValue"),s=Ember.get(this,"isSearch"),n=Ember.get(this,"selectedRequester"),i=Ember.get(this,"optionSelected.value");return s?"requester"===i&&n?{context:this.type,field:Ember.get(this,"optionSelected.value"),requester_ids:[n.id]}:t.trim()?{context:this.type,field:Ember.get(this,"optionSelected.value"),term:t}:e:{context:"recent_".concat(this.type)}},_getTrackerList:function(){Ember.set(this,"isLoading",!0);var e=n.default.ticketsFilterAsTrackers;Ember.get(this,"ajax").post(e,{data:JSON.stringify(this._setTrackerSearchParams())}).then(this._showTickets.bind(this))},_showTickets:function(e){var t=this,s=e.tickets.map((function(e){return t._convertSearchItemToTicket(e)}));Ember.set(this,"ticketList",s),Ember.set(this,"isLoading",!1)},updateTracker:function(e){var t=Ember.get(this,"data.model"),s={ticket:{id:e,associated_tickets_count:Ember.get(this,"selectedTrackerAssocCount")+Ember.get(t,"selectedRecords").length}};Ember.get(this,"store").pushPayload(s)},_updateTicketList:function(e){var t=this,s=Ember.get(this,"data.model");s&&Ember.get(s,"selectedRecords").forEach((function(s){t.updateTicketProperties(s,e),s.toggleProperty("selected")}))},updateTicketProperties:function(e,t){var s={ticket:{id:Ember.get(e,"id"),tracker_id:t,association_type:i.default.associationType.related}};Ember.get(this,"store").pushPayload(s)},searchRequesters:(0,s.task)(regeneratorRuntime.mark((function e(t){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.timeout)(250);case 2:return i=n.default.requesterSearch,e.next=5,Ember.get(this,"ajax").post(i,{data:JSON.stringify({term:t})});case 5:return a=e.sent,r=a.contacts||[],e.abrupt("return",Ember.isEmpty(r)?[{empty:!0}]:r);case 8:case"end":return e.stop()}}),e,this)}))).restartable()});e.default=l})),define("freshdesk/components/module-tickets/shared/link-tickets/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"i2HfaJm/",block:'{"symbols":["option","select","group"],"statements":[[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n    "],[1,[27,"svg-jar",["related"],[["class"],["modal-icons"]]],false],[0," "],[1,[27,"t",[[23,["translationData","modalTitle"]]],[["count"],[[23,["relatedTicketIds","length"]]]]],false],[0,"\\n"],[4,"if",[[27,"and",[[23,["isRecentTrackers"]],[23,["allowCreate"]]],null]],null,{"statements":[[0,"      "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],"createTracker"],null]],[11,"data-test-id","create-tracker"],[11,"class","ml5 text--small"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.new"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[4,"if",[[23,["isRecentTrackers"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","tracker-list-top"],[9],[0,"\\n      "],[7,"div"],[11,"class","modal-search clearfix tracker-search"],[9],[0,"\\n        "],[7,"div"],[11,"class","modal-filter-wrapper"],[9],[0,"\\n          "],[7,"div"],[11,"class","text__content clearfix"],[9],[0,"\\n            "],[7,"span"],[11,"class","pull-left"],[9],[0,"\\n              "],[7,"div"],[11,"class","search-options"],[9],[0,"\\n"],[4,"power-select",null,[["selected","options","searchEnabled","onchange"],[[23,["optionSelected"]],[23,["optionsArray"]],false,[27,"action",[[22,0,[]],"chooseOption"],null]]],{"statements":[[0,"                  "],[1,[27,"t",[[22,3,["label"]]],null],false],[0,"\\n"]],"parameters":[3]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n\\n          "],[7,"div"],[11,"class","modal-search clearfix search-container"],[9],[0,"\\n            "],[7,"div"],[11,"class","modal-filter-wrapper"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["optionSelected","value"]],"requester"],null]],null,{"statements":[[0,"                "],[7,"div"],[11,"class","merge-search-ticket tracker-search-dropdown"],[9],[0,"\\n                  "],[1,[27,"svg-jar",["search"],[["class"],["app-icon app-icon--small modal-search-icon"]]],false],[0,"\\n"],[4,"ui-form/select-field",null,[["options","allowCreate","placeholder","selected","dropdownClass","multiple","onchange","search"],[[23,["options"]],false,[27,"t",[[27,"concat",[[23,["translationData","searchLabel"]],[23,["optionSelected","value"]]],null]],null],[23,["selectedRequester"]],"tracker-search-dropdown",false,[27,"action",[[22,0,[]],"onSelectRequester"],null],[27,"perform",[[23,["searchRequesters"]]],null]]],{"statements":[[4,"unless",[[22,2,["loading"]]],null,{"statements":[[4,"if",[[22,1,["empty"]]],null,{"statements":[[0,"                        "],[7,"span"],[9],[1,[27,"t",["fd.norecords"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[1,[22,1,["value"]],false],[0,"\\n                        "],[1,[27,"t",["tickets.merge.requestor.email"],[["email"],[[22,1,["email"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"                "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"ui-components/search-field",null,[["value","size","key-up","placeholder","allowRecentSearch","engageSearch","cancelButton","on-cancel"],[[23,["searchValue"]],"small",[27,"action",[[22,0,[]],"debouncedSearch"],null],[27,"t",[[27,"concat",[[23,["translationData","searchLabel"]],[23,["optionSelected","value"]]],null]],null],false,[27,"action",[[22,0,[]],"engageSearch"],null],true,[27,"action",[[22,0,[]],"onCancel"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n      "],[7,"div"],[11,"class","tracker-list-label text--uppercase"],[9],[0,"\\n        "],[1,[21,"resultLabel"],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[1,[27,"module-tickets/shared/associated-tickets/ticket-list",null,[["linkActions","linkToTracker","emptyState","allowCreate","type","tickets","isLoading","isSearch","isTrackerList","showBulkUpdates","createTracker"],[true,[27,"action",[[22,0,[]],"linkToTracker"],null],[23,["emptyState"]],[23,["allowCreate"]],[27,"t",[[23,["translationData","ticketListType"]]],null],[23,["ticketList"]],[23,["isLoading"]],[23,["isSearch"]],true,false,[27,"action",[[22,0,[]],"createTracker"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/link-tickets/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/priority-dropdown/component",["exports","freshdesk/constants/ticket"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({mkpInterface:Ember.inject.service("marketplace-interface"),currentUserPrivileges:Ember.inject.service(),tagName:"",additionalClasses:"",priority:null,defaultEmpty:!1,updatePromise:null,isSelected:!1,searchEnabled:!1,showPriorityPointer:!1,isDisabled:Ember.computed.readOnly("disabled"),isSaving:Ember.computed.readOnly("updatePromise.isPending"),isSuccess:Ember.computed.readOnly("updatePromise.isFulfilled"),isError:Ember.computed.readOnly("updatePromise.isRejected"),flashActive:Ember.computed.or("isSuccess","isError","isSaving"),abilities:Ember.computed("currentUser.userData.abilities.[]",(function(){return Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type")).toString()})),priorityObject:Ember.computed("priority","mkpInterface.controlData.dropdownOptionsUpdated",(function(){var e=Ember.get(this,"mkpInterface.controlData.mkpFieldChange"),s=e?e.priority:null,n=this.getAttr("priority");if(!n){if(this.getAttr("defaultEmpty")||s)return null;n=1}return t.default.priorityList.findBy("value",n)})),priorityList:Ember.computed("mkpInterface.controlData.dropdownOptionsUpdated",(function(){var e=Ember.get(this,"mkpInterface.controlData.mkpFieldChange");if(e&&e.priority){var s=e.priority;return t.default.priorityList.filter((function(e){return s.includes(e.value)}))}return t.default.priorityList})),actions:{choosePriority:function(e){Ember.set(this,"isSelected",!0),this.sendAction("saveAction",e.value)},onFocus:function(e){this.onFocusPriority&&!this.isSelected&&this.onFocusPriority(e),Ember.set(this,"isSelected",!1)}}});e.default=s})),define("freshdesk/components/module-tickets/shared/priority-dropdown/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"EeTjuJBW",block:'{"symbols":["priority"],"statements":[[4,"if",[[27,"or",[[23,["fromBulkAction"]],[27,"and",[[27,"not",[[23,["isPropEditDisabled"]]],null],[27,"haspermissions",null,[["model","abilities"],[[23,["ticket"]],[23,["abilities"]]]]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[12,"aria-label",[27,"t",["fd.priority"],null]],[12,"class",[28,[[21,"additionalClasses"]," hint hint--left select-priority"]]],[11,"data-test-dropdown","dropdown-priority"],[9],[0,"\\n"],[4,"ui-form/select-field",null,[["selected","options","disabled","customFdLabel","onFocus","onchange","searchEnabled","beforeOptionsComponent","searchField","data-test-id"],[[23,["priorityObject"]],[23,["priorityList"]],[23,["isDisabled"]],[27,"t",["fd.priority"],null],[27,"action",[[22,0,[]],"onFocus"],null],[27,"action",[[22,0,[]],"choosePriority"],null],[23,["searchEnabled"]],[27,"if",[[23,["botSuggestion"]],[27,"component",["module-tickets/shared/freddy-suggestion/property"],[["ticket","botSuggestion"],[[23,["ticket"]],[23,["botSuggestion"]]]]],null],null],"priorityValue","priority"]],{"statements":[[0,"      "],[7,"span"],[12,"class",[28,["tickets__list--",[22,1,["key"]]," tickets__list--dropdown"]]],[9],[10],[0,"\\n      "],[1,[27,"t",[[27,"concat",["ticket.priorityLabels.",[22,1,["key"]]],null]],null],false],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","list-filter__label disabledField"],[9],[0,"\\n    "],[7,"span"],[12,"class",[28,["tickets__list--",[23,["priorityObject","key"]]," tickets__list--dropdown"]]],[9],[10],[0,"\\n    "],[1,[27,"t",[[27,"concat",["ticket.priorityLabels.",[23,["priorityObject","key"]]],null]],null],false],[0,"\\n"],[4,"if",[[23,["showPriorityPointer"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","ember-power-select-status-icon priority-icon list-filter__label__pointer"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/priority-dropdown/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-merge/card-layer/component",["exports"],(function(e){function t(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({classNames:["card-layer"],cardList:Ember.computed("tickets",(function(){var e=this.tickets.length,s=e>1?e-1:0;return t(Array(s>4?4:s).keys()).reverse()}))});e.default=s})),define("freshdesk/components/module-tickets/shared/tickets-merge/card-layer/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"xg0Khj7H",block:'{"symbols":["card"],"statements":[[4,"each",[[23,["cardList"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[28,["card-item card-item-",[22,1,[]]]]],[11,"data-test-id","item-card"],[9],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-merge/card-layer/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-merge/component",["exports","ember-concurrency","freshdesk/constants/static-url-list","freshdesk/utils/error-handler","@freshworks/ember-collaboration-threads/constants/thread"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=[{id:"private",label:"tickets.merge.finalscreen.private",description:"tickets.merge.finalscreen.private.subtext",icon:"lock-fill"},{id:"public",label:"tickets.merge.finalscreen.public",description:"tickets.merge.finalscreen.public.subtext",icon:"globe-fill"}],r=[{id:1,label:"tickets.merge.requester",value:"requester",placeholder:"tickets.merge.contacts.placeholder"},{id:2,label:"tickets.merge.subject",value:"subject",placeholder:"tickets.merge.subject.placeholder"},{id:3,label:"tickets.merge.id",value:"display_id",placeholder:"tickets.merge.id.placeholder"}],l=Ember.Component.extend({store:Ember.inject.service(),ajax:Ember.inject.service(),i18n:Ember.inject.service(),currentAccount:Ember.inject.service(),classNames:["__module-tickets__shared__tickets-merge"],isFirstScreen:!0,isPrimaryNoteEditing:!1,privateOptions:a,primaryNote:"",secondaryNote:"",primaryNoteTextField:"",secondaryNoteTextField:"",isPrimaryPrivate:!0,isSecondaryPrivate:!0,isSecondaryCC:!1,isMergeInProgress:!1,optionsArray:r,optionSelected:r.objectAt(0),primaryPrivateSelected:a.objectAt(0),primaryPrivate:a.objectAt(0),secondaryPrivateSelected:a.objectAt(0),secondaryPrivate:a.objectAt(0),tickets:Ember.computed.reads("data.tickets"),updateToggleAction:Ember.computed.reads("data.updateToggleFn"),disableContinue:Ember.computed.lte("tickets.length",1),sortedTickets:Ember.computed.sort("tickets",(function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})),primaryTicket:Ember.computed("sortedTickets.[]",{get:function(){return Ember.get(this,"sortedTickets.firstObject")},set:function(e,t){return t}}),ticketSummaryEnabled:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("ticket_summary")})),discussionThreadsEnabled:Ember.computed((function(){var e=i.THREAD_TYPE_CONDITIONS[i.TICKET_THREAD_TYPES.DISCUSSION],t=e.feature,s=e.launchParty;return this.currentAccount.mandatesEnabled({mandatoryFeatures:[t],mandatoryLaunchParties:[s]})})),discardText:Ember.computed("ticketSummaryEnabled","discussionThreadsEnabled",(function(){return this.ticketSummaryEnabled&&this.discussionThreadsEnabled?"tickets.merge.firstscreen.summaryanddiscussiontext":this.ticketSummaryEnabled?"tickets.merge.firstscreen.summarytext":this.discussionThreadsEnabled?"tickets.merge.firstscreen.discussiontext":null})),secondaryTicketsList:Ember.computed("primaryTicket","tickets.[]",(function(){var e=Ember.get(this,"primaryTicket");return Ember.get(this,"tickets").filter((function(t){return t!==e}))})),init:function(){this._super.apply(this,arguments),this.sendAction("modalLoaded")},actions:{cancel:function(){Ember.get(this,"isMergeInProgress")||this.sendAction("close")},chooseOption:function(e){Ember.set(this,"optionSelected",e)},changePrimary:function(e){Ember.get(this,"isMergeInProgress")||Ember.set(this,"primaryTicket",e)},removeTicket:function(e){this.removeTicket(e)},continueClick:function(){Ember.get(this,"isMergeInProgress")||Ember.get(this,"tickets").length>1&&(this.generateNotes(),Ember.setProperties(this,{isFirstScreen:!1,isPrimaryNoteEditing:!1,isSecondaryNoteEditing:!1}))},back:function(){Ember.get(this,"isMergeInProgress")||(Ember.set(this,"isFirstScreen",!0),Ember.setProperties(this,{isPrimaryPrivate:!0,isSecondaryPrivate:!0}))},primaryNoteEdit:function(){Ember.get(this,"isMergeInProgress")||Ember.setProperties(this,{isPrimaryNoteEditing:!0,isSecondaryNoteEditing:!1,primaryNoteTextField:Ember.get(this,"primaryNote")})},cancelPrimaryNote:function(){Ember.get(this,"isMergeInProgress")||Ember.set(this,"isPrimaryNoteEditing",!1)},cancelSecondaryNote:function(){Ember.get(this,"isMergeInProgress")||Ember.set(this,"isSecondaryNoteEditing",!1)},secondaryNoteEdit:function(){Ember.get(this,"isMergeInProgress")||Ember.setProperties(this,{isSecondaryNoteEditing:!0,isPrimaryNoteEditing:!1,secondaryNoteTextField:Ember.get(this,"secondaryNote")})},addPrimaryNote:function(){Ember.get(this,"isMergeInProgress")||Ember.setProperties(this,{primaryNote:Ember.get(this,"primaryNoteTextField"),primaryPrivateSelected:Ember.get(this,"primaryPrivate"),isPrimaryPrivate:"private"===Ember.get(this,"primaryPrivate.id"),isPrimaryNoteEditing:!1})},addSecondaryNote:function(){Ember.get(this,"isMergeInProgress")||Ember.setProperties(this,{secondaryNote:Ember.get(this,"secondaryNoteTextField"),secondaryPrivateSelected:Ember.get(this,"secondaryPrivate"),isSecondaryPrivate:"private"===Ember.get(this,"secondaryPrivate.id"),isSecondaryNoteEditing:!1})},merge:function(){if(!Ember.get(this,"isMergeInProgress")){var e=Ember.get(this,"primaryTicket");if(e)return Ember.set(this,"isMergeInProgress",!0),e.merge(this.getMergeParams()).then(this._mergeUpdateSucces.bind(this)).catch(this._mergeUpdateFailed.bind(this))}},addTicket:function(e){if(!Ember.get(this,"isMergeInProgress")){var t=Ember.get(this,"tickets");Ember.set(e,"isAdded",!0),t.pushObject(e.ticket)}},removeTicketFromSearchList:function(e){Ember.set(e,"isAdded",!1),this.removeTicket(e.ticket)},secondaryPrivateChanged:function(e){Ember.set(this,"secondaryPrivate",e)},primaryPrivateChanged:function(e){Ember.set(this,"primaryPrivate",e)},onSelectSearchOptions:function(e,t){if(!Ember.isEmpty(e)){var s=e.objectAt(0);s.ticket||s.empty||t.actions.search(Ember.assign({},s,{lastSearchedText:s.details,selectedOptionString:s.details}))}}},warpIDWithLink:function(e){var t="".concat(window.location.origin,"/helpdesk/tickets/");return'<a href="'.concat(t).concat(e,'" target="_blank" rel="noreferrer">').concat(e,"</a>")},concatIDs:function(e){var t=this,s=[].concat(e),n=this.warpIDWithLink(s.pop()),i=s.map((function(e){return t.warpIDWithLink(e)})).join(", ");return Ember.get(this,"i18n").t("tickets.merge.mergeids",{idsJoin:Ember.String.htmlSafe(i),lastid:Ember.String.htmlSafe(n)})},generateNotes:function(){var e,t="",s=Ember.get(this,"primaryTicket.id"),n=Ember.get(this,"secondaryTicketsList").mapBy("id");t=n.length>1?Ember.get(this,"i18n").t("tickets.merge.primarynote.ids",{secondaryIDs:Ember.String.htmlSafe(this.concatIDs(n))}):Ember.get(this,"i18n").t("tickets.merge.primarynote.id",{secondaryID:Ember.String.htmlSafe(this.warpIDWithLink(n.objectAt(0)))}),e=Ember.get(this,"i18n").t("tickets.merge.secondarynote",{primaryID:Ember.String.htmlSafe(this.warpIDWithLink(s))}),Ember.setProperties(this,{primaryNote:t,primaryNoteTextField:t,secondaryNote:e,secondaryNoteTextField:e,secondaryIDs:n})},getMergeParams:function(){return{primary_id:parseInt(Ember.get(this,"primaryTicket.id")),ticket_ids:Ember.get(this,"secondaryIDs").map((function(e){return+e})),note_in_primary:{body:Ember.get(this,"primaryNote"),private:Ember.get(this,"isPrimaryPrivate")},note_in_secondary:{body:Ember.get(this,"secondaryNote"),private:Ember.get(this,"isSecondaryPrivate")},convert_recepients_to_cc:Ember.get(this,"isSecondaryCC")}},_setRequestParams:function(e){var t=Ember.get(this,"optionSelected.value"),s={context:"merge",field:t};return"requester"===t?"string"==typeof e?s={term:e}:s.requester_ids=[e.id]:s.term=e,s},_convertSearchItemToTicket:function(e){var t=Ember.get(this,"store"),s=t.peekRecord("ticket",e.id),n={subject:e.subject,createdAt:e.created_at,requesterId:e.requester_id,responderId:e.responder_id,groupId:e.group_id,stats:e.stats};return s?Ember.setProperties(s,n):s=t.createRecord("ticket",Ember.assign({},{id:e.id},n)),s},searchFetch:(0,t.task)(regeneratorRuntime.mark((function e(n){var i,a,r,l,o,c,d,m,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.timeout)(250);case 2:return i=Ember.get(this,"optionSelected.value"),a=s.default.requesterSearch,r=s.default.ticketsFilterAsTrackers,l="requester"===i&&"string"==typeof n?a:r,o=Ember.get(this,"tickets"),c=[],e.next=9,Ember.get(this,"ajax").post(l,{data:JSON.stringify(this._setRequestParams(n))});case 9:return d=e.sent,"requester"===i&&"string"==typeof n?c=d.contacts||[]:(m=d.tickets.map((function(e){return u._convertSearchItemToTicket(e)})),c=m.map((function(e){return{ticket:e,isAdded:o.findBy("id",Ember.get(e,"id"))}}))),e.abrupt("return",Ember.isEmpty(c)?[{empty:!0}]:c);case 12:case"end":return e.stop()}}),e,this)}))).restartable(),removeTicket:function(e){Ember.get(this,"isMergeInProgress")||Ember.get(this,"tickets").removeObject(e)},_mergeUpdateSucces:function(){var e=Ember.get(this,"updateToggleAction"),t=Ember.get(this,"primaryTicket");Ember.set(this,"isMergeInProgress",!1),e instanceof Function?e(Ember.get(t,"id")):"string"==typeof e&&Ember.get(this,e)(Ember.get(t,"id")),Ember.get(this,"close")()},_mergeUpdateFailed:function(e){Ember.set(this,"isMergeInProgress",!1),n.default.throwMessageForKeys(this,e,"code",{})}});e.default=l})),define("freshdesk/components/module-tickets/shared/tickets-merge/edit-note/component",["exports","freshdesk/constants/editor/tickets-merge-note"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({classNames:["merge__item","merge__edititem"],classNameBindings:["hasTicket::merge__editsecondary"],editorOptions:t.default,hasTicket:Ember.computed.bool("ticket"),selectedHandle:Ember.computed.reads("selected"),actions:{changePrivateOptionHandle:function(e,t){t.actions.close(),Ember.set(this,"selectedHandle",e),this.privateOptionSelect(e)}}});e.default=s})),define("freshdesk/components/module-tickets/shared/tickets-merge/edit-note/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"/ReDCK1z",block:'{"symbols":["d","options","dropdown","option"],"statements":[[4,"if",[[23,["hasTicket"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","merge__section merge__editheader"],[9],[0,"\\n    "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","class"],[[23,["ticket"]],"list-content-wrap"]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","merge__editheader"],[9],[0,"\\n    "],[7,"div"],[11,"class","merge-editnote-info text__content"],[9],[0,"\\n      "],[1,[27,"t",["tickets.merge.secondarynote.title"],[["length"],[[23,["ticketCount"]]]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]}],[7,"div"],[11,"class","merge__section merge__editbody"],[11,"data-test-id","merge-editbody"],[9],[0,"\\n  "],[1,[27,"ui-form/editor/ticket-editor",null,[["placeholder","value","showCannedResponse","showSolution","showSurvey","contentChanged","showFooter","showAttachments","skipFirstSendAction","wrapDefaultFont","fixedFormattingToolbar"],["",[23,["noteTextField"]],false,false,false,[27,"action",[[22,0,[]],[27,"mut",[[23,["noteTextField"]]],null]],null],true,false,false,true,true]]],false],[0,"\\n  "],[7,"div"],[11,"id","editor-toolbar"],[11,"class","editor-toolbar"],[9],[10],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","text-right pt-16 border-top"],[9],[0,"\\n  "],[7,"div"],[11,"class","merge__note-footer"],[9],[0,"\\n    "],[7,"label"],[11,"class","pull-left"],[9],[0,"\\n"],[4,"ui-components/drop-down",null,[["class","direction","selected"],["private-dropdown","left",[23,["selectedHandle"]]]],{"statements":[[4,"component",[[22,1,["trigger"]]],null,{"statements":[[0,"          "],[7,"span"],[12,"class",[28,["private-dropdown__trigger ",[27,"if",[[27,"eq",[[23,["selectedHandle","id"]],"private"],null],"private-dropdown__privatenote"],null]]]],[11,"data-test-id","private-dropdown-trigger"],[9],[0,"\\n            "],[1,[27,"svg-jar",[[23,["selectedHandle","icon"]]],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"span"],[11,"class","muted"],[11,"data-test-id","selected-description"],[9],[0,"\\n            "],[1,[27,"t",[[23,["selectedHandle","description"]]],null],false],[0,"\\n          "],[10],[0,"\\n          "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["options"],[[23,["privateOptions"]]]],{"statements":[[0,"          "],[7,"div"],[11,"class","popup-title"],[9],[0,"\\n            "],[1,[27,"t",["tickets.merge.finalscreen.privacy.title"],null],false],[0,"\\n          "],[10],[0,"\\n"],[4,"each",[[22,2,[]]],null,{"statements":[[0,"            "],[7,"div"],[12,"onclick",[27,"action",[[22,0,[]],"changePrivateOptionHandle",[22,4,[]],[22,3,[]]],null]],[12,"class",[28,["dropdown__option ",[27,"if",[[27,"eq",[[22,4,[]],[23,["selectedHandle"]]],null],"selected"],null]]]],[11,"data-test-id","dropdown-option"],[9],[0,"\\n              "],[7,"div"],[12,"class",[28,["option-icon ",[27,"if",[[27,"eq",[[22,4,["id"]],"private"],null],"option--privatenote"],null]]]],[9],[0,"\\n                "],[1,[27,"svg-jar",[[22,4,["icon"]]],[["class"],["app-icon app-icon--small option-icon-normal"]]],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","option"],[9],[0,"\\n                "],[7,"div"],[9],[1,[27,"t",[[22,4,["label"]]],null],false],[10],[0,"\\n                "],[7,"div"],[11,"class","private-options-label private-options-label-popup"],[9],[1,[27,"t",[[22,4,["description"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[4]},null]],"parameters":[2,3]},null]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n    "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"data-test-id","cancel-secondary-edit"],[11,"type","button"],[3,"action",[[22,0,[]],[23,["cancelNote"]]]],[9],[0,"\\n      "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"button"],[12,"disabled",[27,"not",[[23,["noteTextField"]]],null]],[11,"name","button"],[11,"class","btn btn--primary"],[11,"data-test-id","add-note"],[11,"type","button"],[3,"action",[[22,0,[]],[23,["addNote"]]]],[9],[0,"\\n      "],[1,[27,"t",["tickets.merge.primarynote.addasprivate"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-merge/edit-note/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-merge/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"3gJFL/d4",block:'{"symbols":["item","index","item","item","select","group"],"statements":[[7,"div"],[11,"class","modal-title-subtext pt-20"],[9],[0,"\\n  "],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n    "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n"],[4,"if",[[23,["isFirstScreen"]]],null,{"statements":[[0,"        "],[1,[27,"svg-jar",["merge-action"],[["class"],["modal-icons"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"button"],[11,"class","merge-back"],[11,"type","button"],[3,"action",[[22,0,[]],"back"]],[9],[0,"\\n          "],[1,[27,"svg-jar",["back"],[["class"],["modal-icons app-icon--normal app-icon--dark"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"      "],[7,"span"],[11,"class","merge-title"],[9],[1,[27,"t",["tickets.merge.title"],null],false],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["isFirstScreen"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","text__infotext modal_subtext pt-10"],[11,"data-test-id","merge-ticket-subtitle"],[9],[0,"\\n        "],[1,[23,["tickets","length"]],false],[1,[27,"t",["tickets.merge.firstscreen.subtitle"],null],false],[1,[27,"if",[[23,["discardText"]],[27,"t",[[23,["discardText"]]],null]],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","text__infotext modal_subtext pt-10"],[9],[0,"\\n        "],[1,[27,"t",["tickets.merge.finalscreen.subtitle"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[4,"if",[[23,["isFirstScreen"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","modal-body merge"],[11,"data-test-id","merge-ticket"],[9],[0,"\\n      "],[7,"div"],[11,"class","modal-search clearfix"],[9],[0,"\\n        "],[7,"div"],[11,"class","modal-filter-wrapper"],[9],[0,"\\n          "],[7,"div"],[11,"class","text__content clearfix"],[9],[0,"\\n            "],[7,"span"],[11,"class","pull-left"],[9],[0,"\\n              "],[7,"div"],[11,"class","search-options"],[9],[0,"\\n"],[4,"ui-form/select-field",null,[["data-test-id","selected","options","searchEnabled","onchange"],["search-options-select",[23,["optionSelected"]],[23,["optionsArray"]],false,[27,"action",[[22,0,[]],"chooseOption"],null]]],{"statements":[[0,"                  "],[1,[27,"t",[[22,6,["label"]]],null],false],[0,"\\n"]],"parameters":[6]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n\\n          "],[7,"div"],[11,"class","modal-search clearfix search-container"],[9],[0,"\\n            "],[7,"div"],[11,"class","modal-filter-wrapper"],[9],[0,"\\n              "],[7,"div"],[11,"class","merge-search-ticket"],[11,"data-test-id","merge-search-ticket-item"],[9],[0,"\\n                "],[1,[27,"svg-jar",["search"],[["class"],["app-icon app-icon--small modal-search-icon"]]],false],[0,"\\n"],[4,"ui-form/select-field",null,[["class","closeOnSelect","multiple","clearSearch","dropdownClass","placeholder","search","searchField","allowClear","onchange"],["power-select",false,true,true,"merge-search-dropdown",[27,"t",[[23,["optionSelected","placeholder"]]],null],[27,"perform",[[23,["searchFetch"]]],null],"label",true,[27,"action",[[22,0,[]],"onSelectSearchOptions"],null]]],{"statements":[[4,"unless",[[22,5,["loading"]]],null,{"statements":[[4,"if",[[22,4,["ticket"]]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","merge__item clearfix"],[11,"data-test-id","merge-item"],[9],[0,"\\n                        "],[7,"div"],[11,"class","pull-left primary-mark"],[9],[0,"\\n"],[4,"if",[[22,4,["isAdded"]]],null,{"statements":[[0,"                            "],[7,"span"],[11,"data-test-id","remove-ticket"],[3,"action",[[22,0,[]],"removeTicketFromSearchList",[22,4,[]]],[["preventDefault","bubble"],[false,false]]],[9],[0,"\\n                              "],[1,[27,"svg-jar",["remove"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n                            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[7,"span"],[11,"data-test-id","primary-add"],[3,"action",[[22,0,[]],"addTicket",[22,4,[]]],[["preventDefault","bubble"],[false,false]]],[9],[0,"\\n                              "],[1,[27,"svg-jar",["add"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n                            "],[10],[0,"\\n"]],"parameters":[]}],[0,"                        "],[10],[0,"\\n                        "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","class"],[[22,4,["ticket"]],"list-content-wrap pull-left"]]],false],[0,"\\n                      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[22,4,["empty"]]],null,{"statements":[[0,"                        "],[7,"span"],[9],[1,[27,"t",["fd.norecords"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[7,"div"],[11,"class","requester"],[11,"data-test-id","requester-item"],[9],[0,"\\n                          "],[7,"span"],[9],[1,[22,4,["value"]],false],[10],[0,"\\n                          "],[7,"span"],[11,"class","text--gray"],[9],[1,[27,"t",["tickets.merge.requestor.email"],[["email"],[[22,4,["email"]]]]],false],[10],[0,"\\n                        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null]],"parameters":[4,5]},null],[0,"              "],[10],[0,"\\n\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"each",[[23,["sortedTickets"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["merge__item first ",[27,"if",[[27,"eq",[[22,3,[]],[23,["primaryTicket"]]],null],"merge__item-primary"],null]]]],[11,"data-test-id","merge-item-first"],[9],[0,"\\n          "],[7,"div"],[11,"class","merge-delete pull-left"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,3,[]],[23,["primaryTicket"]]],null]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","removewatcher--disabled"],[11,"data-test-id","removewatcher-disabled"],[9],[0,"\\n                "],[1,[27,"svg-jar",["remove"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[12,"aria-label",[27,"t",["tickets.merge.item.remove"],null]],[11,"class","hint--top"],[11,"data-test-id","removewatcher-enabled"],[3,"action",[[22,0,[]],"removeTicket",[22,3,[]]]],[9],[0,"\\n                "],[1,[27,"svg-jar",["remove"],[["class","data-test-id"],["app-icon app-icon--normal","removeTicket"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n          "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","class"],[[22,3,[]],"list-content-wrap pull-left"]]],false],[0,"\\n          "],[7,"div"],[11,"class","pull-right primary-mark"],[11,"data-test-id","add-primary-mark"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,3,[]],[23,["primaryTicket"]]],null]],null,{"statements":[[0,"              "],[1,[27,"svg-jar",["primary-ticket"],[["class"],["app-icon app-icon--large primary-custom"]]],false],[0,"\\n              "],[7,"span"],[11,"class","primary-label"],[9],[1,[27,"t",["tickets.merge.firstscreen.primarylabel"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[12,"aria-label",[27,"t",["tickets.merge.firstscreen.primarymark"],null]],[12,"onclick",[27,"action",[[22,0,[]],"changePrimary",[22,3,[]]],null]],[11,"class","hint--top change-primary"],[11,"data-test-id","change-primary-item"],[9],[0,"\\n                "],[1,[27,"svg-jar",["secondary-tickets"],[["class"],["app-icon app-icon--large secondary-custom"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[3]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n      "],[7,"label"],[11,"class","pull-left addrecipients"],[11,"data-test-id","ticket-addrecipients"],[9],[0,"\\n        "],[1,[27,"ui-form/custom-checkbox",null,[["class","labelId","value"],["merge-checkbox addrecipients-checkbox","addrecipients",[23,["isSecondaryCC"]]]]],false],[0,"\\n        "],[1,[27,"t",["tickets.merge.firstscreen.footer.addrecipients"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"data-test-id","cancel"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n        "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"button"],[11,"name","button"],[12,"disabled",[21,"disableContinue"]],[11,"class","continue-merge btn btn--primary"],[11,"data-test-id","continue-merge"],[11,"type","button"],[3,"action",[[22,0,[]],"continueClick"]],[9],[0,"\\n        "],[1,[27,"t",["tickets.merge.firstscreen.footer.continue"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isPrimaryNoteEditing"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/tickets-merge/edit-note",null,[["noteTextField","ticket","privateOptions","selected","privateOptionSelect","isPrivate","cancelNote","addNote"],[[23,["primaryNoteTextField"]],[23,["primaryTicket"]],[23,["privateOptions"]],[23,["primaryPrivateSelected"]],[27,"action",[[22,0,[]],"primaryPrivateChanged"],null],[23,["isPrimaryPrivate"]],[27,"action",[[22,0,[]],"cancelPrimaryNote"],null],[27,"action",[[22,0,[]],"addPrimaryNote"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","merge__item merge__item-primary"],[11,"data-test-id","merge-item"],[9],[0,"\\n        "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","class"],[[23,["primaryTicket"]],"list-content-wrap pull-left"]]],false],[0,"\\n        "],[7,"div"],[11,"class","merge-edit pull-right"],[9],[0,"\\n          "],[7,"div"],[11,"class","app-icon-btn"],[11,"data-test-id","primary-note-edit"],[3,"action",[[22,0,[]],"primaryNoteEdit"]],[9],[0,"\\n            "],[1,[27,"svg-jar",["edit"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[7,"div"],[12,"class",[28,["merge-child ",[27,"if",[[23,["isSecondaryNoteEditing"]],"merge-collapsed"],null]]]],[11,"data-test-id","merge-child-item"],[9],[0,"\\n"],[4,"if",[[23,["isSecondaryNoteEditing"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","merge__wrap"],[9],[0,"\\n          "],[1,[27,"module-tickets/shared/tickets-merge/edit-note",null,[["ticketCount","noteTextField","privateOptions","selected","privateOptionSelect","cancelNote","addNote"],[[23,["secondaryTicketsList","length"]],[23,["secondaryNoteTextField"]],[23,["privateOptions"]],[23,["secondaryPrivateSelected"]],[27,"action",[[22,0,[]],"secondaryPrivateChanged"],null],[27,"action",[[22,0,[]],"cancelSecondaryNote"],null],[27,"action",[[22,0,[]],"addSecondaryNote"],null]]]],false],[0,"\\n          "],[1,[27,"module-tickets/shared/tickets-merge/card-layer",null,[["tickets"],[[23,["secondaryTicketsList"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","secondary-header"],[9],[0,"\\n          "],[7,"span"],[11,"class","text--uppercase"],[9],[1,[27,"t",["tickets.merge.finalscreen.secondarytickets"],[["length"],[[23,["secondaryTicketsList","length"]]]]],false],[10],[0,"\\n          "],[7,"a"],[11,"data-test-id","edit-note"],[11,"class","edit-note"],[11,"href",""],[3,"action",[[22,0,[]],"secondaryNoteEdit"]],[9],[1,[27,"t",["tickets.merge.finalscreen.editnote"],null],false],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"each",[[23,["secondaryTicketsList"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","merge__item"],[11,"data-test-id","merge-item"],[9],[0,"\\n            "],[1,[27,"module-tickets/shared/tickets-merge/ticket-item",null,[["ticket","class"],[[22,1,[]],"list-content-wrap pull-left"]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1,2]},null]],"parameters":[]}],[0,"    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","modal-footer form_submission second-footer"],[9],[0,"\\n      "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"data-test-id","cancel-merge"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n        "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[1,[27,"async-button",null,[["action","default","pending","class","data-test-id"],[[27,"action",[[22,0,[]],"merge"],null],[27,"t",["tickets.merge.finalscreen.footer.merge"],null],[27,"t",["tickets.merge.finalscreen.footer.merging"],null],"merge-tickets btn btn--primary","merge-tickets"]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-merge/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-merge/ticket-item/component",["exports","freshdesk/constants/ticket"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),ticketFields:Ember.inject.service(),permissionNotPresent:Ember.computed.none("ticket.permission"),labels:Ember.computed("ticket.type",(function(){return Ember.get(this,"ticket.type")===t.default.serviceTaskType?{agent:"tickets.service_task.agent",group:"tickets.service_task.group"}:{agent:"tickets.agent",group:"tickets.group"}})),agentName:Ember.computed("ticket.responderId",(function(){var e=Ember.get(this,"ticket.responderId");return e?Ember.get(this.store.peekRecord("agent",e),"contact.name"):""})),groupName:Ember.computed("ticket.groupId",(function(){var e=Ember.get(this,"ticket.groupId");return e?Ember.get(this.store.peekRecord("group",e),"name"):""})),statusName:Ember.computed("ticket.status",(function(){var e=Ember.get(this,"ticket.status");return Ember.get(this,"ticketFields.statusChoices").findBy("value",e).label}))});e.default=s})),define("freshdesk/components/module-tickets/shared/tickets-merge/ticket-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"JFa+86Q2",block:'{"symbols":[],"statements":[[4,"if",[[27,"or",[[23,["permissionNotPresent"]],[23,["ticket","permission"]]],null]],null,{"statements":[[4,"link-to",["helpdesk.tickets.show",[23,["ticket","id"]]],[["target","data-test-id","class"],["_blank","ticket-name-link","text--semibold ticket-subject"]],{"statements":[[0,"    "],[7,"span"],[11,"class","text--gray"],[11,"data-test-id","ticket-number"],[9],[0,"#"],[1,[23,["ticket","id"]],false],[10],[0,"\\n    "],[7,"span"],[11,"class","merge-ticket-subject"],[9],[1,[23,["ticket","subject"]],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"  "],[7,"span"],[11,"class","text--gray"],[9],[0,"#"],[1,[23,["ticket","id"]],false],[10],[0,"\\n  "],[7,"span"],[11,"class","text--gray merge-ticket-subject"],[9],[1,[23,["ticket","subject"]],false],[10],[0,"\\n"]],"parameters":[]}],[7,"p"],[11,"class","text__content text__infotext pt-2"],[9],[0,"\\n  "],[7,"div"],[11,"class","text__infotext pb-2"],[9],[0,"\\n    "],[7,"span"],[11,"data-test-id","group-label"],[9],[1,[27,"t",[[23,["labels","group"]]],null],false],[0,": "],[10],[0,"\\n    "],[7,"span"],[11,"data-test-id","group-value"],[11,"class","text--dark hint--rounded hint--bottom"],[12,"aria-label",[21,"groupName"]],[9],[0,"\\n      "],[1,[27,"truncate",[[27,"fill-default",[[23,["groupName"]]],null],12,true],null],false],[0,"\\n    "],[10],[0,"\\n    "],[1,[27,"svg-jar",["dot"],[["class"],["app-icon app-icon--micro"]]],false],[0,"\\n    "],[7,"span"],[11,"data-test-id","agent-label"],[9],[1,[27,"t",[[23,["labels","agent"]]],null],false],[0,": "],[10],[0,"\\n    "],[7,"span"],[11,"data-test-id","group-value"],[11,"class","text--dark hint--rounded hint--bottom"],[12,"aria-label",[21,"agentName"]],[9],[0,"\\n      "],[1,[27,"truncate",[[27,"fill-default",[[23,["agentName"]]],null],8,true],null],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["showStatus"]]],null,{"statements":[[0,"      "],[1,[27,"svg-jar",["dot"],[["class"],["app-icon app-icon--micro"]]],false],[0,"\\n      "],[1,[27,"t",["tickets.status"],null],false],[0,":\\n      "],[7,"span"],[11,"class","text--dark hint--rounded hint--bottom"],[12,"aria-label",[21,"statusName"]],[9],[0,"\\n        "],[1,[27,"truncate",[[27,"fill-default",[[23,["statusName"]]],null],10,true],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n  "],[1,[27,"app-components/ticket-currentstate-info",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-merge/ticket-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/component",["exports","freshdesk/constants/ticket","@freshdesk/common/mixins/search/save-recent-search","ember-local-storage","freshdesk/mixins/shortcuts/navigation-list"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend(s.default,i.default,{store:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),currentAccount:Ember.inject.service(),searchValue:null,hideButtons:!1,executionInProgress:!1,showCloseValidationDialog:!1,userDisabledServiceTaskWarning:!1,recentSearchCache:(0,n.storageFor)("scenarios"),searchInProgress:Ember.computed.notEmpty("searchValue"),isScenariosLoaded:Ember.computed.readOnly("scenarios.isFulfilled"),isEmptyFolder:Ember.computed.equal("scenarios.length",0),allowCreateScenarios:Ember.computed("currentAccount.accountData.{features.[],launched.[]}",(function(){return!this.currentAccount.launched("scenario_automations_privileges")||this.currentAccount.hasFeature("scenarioAutomation")&&this.currentUserPrivileges.hasScenarioAutomationPrivilege})),showCreateScenarionOnHeader:Ember.computed("isEmptyFolder","allowCreateScenarios",(function(){return!this.isEmptyFolder&&this.allowCreateScenarios})),contentLength:Ember.computed.reads("filteredScenarios.length"),filteredScenarios:Ember.computed("scenarios.length","searchValue",(function(){var e=this,t=Ember.get(this,"scenarios"),s=Ember.get(this,"searchValue");return t.filter((function(t){return e._matchScenario(t,s)}))})),isRecentEmpty:Ember.computed((function(){var e=this.getRecent();return Ember.isEmpty(e)})),recentScenarios:Ember.computed("isScenariosLoaded",(function(){var e=this.getRecent().toArray();if(Ember.get(this,"isScenariosLoaded")&&e.length>0)return Ember.get(this,"scenarios").filter((function(t){return e.includes(Ember.get(t,"id"))}))})),isServiceTaskSelected:Ember.computed("selectedRecords.[]",(function(){return Ember.get(this,"selectedRecords")instanceof Array&&!!Ember.get(this,"selectedRecords").find((function(e){return Ember.get(e,"type")==t.default.serviceTaskType}))})),showServiceTaskWarning:Ember.computed("isServiceTaskSelected","userDisabledServiceTaskWarning",(function(){return Ember.get(this,"isServiceTaskSelected")&&!Ember.get(this,"userDisabledServiceTaskWarning")})),init:function(){this._super.apply(this,arguments),Ember.set(this,"scenarios",Ember.get(this,"store").query("scenario-automation",{}))},actions:{hideServiceTaskWarning:function(){Ember.set(this,"userDisabledServiceTaskWarning",!0)},executeScenario:function(e){this.send("toggleExecutionState");var t=Ember.get(this,"executeScenario");return this.saveRecent(Ember.get(e,"id")),t(e).then(this._onCloseCB.bind(this)).catch(this._onExecutionError.bind(this))},toggleExecutionState:function(){this.toggleProperty("executionInProgress")}},_onCloseCB:function(e){e&&e.ticketCloseFailed?Ember.set(this,"showCloseValidationDialog",!0):(this.send("toggleExecutionState"),this.onclose())},_onExecutionError:function(){this.send("toggleExecutionState")},_matchScenario:function(e,t){var s=Ember.get(e,"name").toLowerCase();return!t||s.includes(t.toLowerCase())},recentCount:t.default.recentCount.scenarios,minCountForSearch:t.default.minCountForSearch.scenarios});e.default=a})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/empty-folder/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/empty-folder/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"6hqbnDAQ",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","modal__empty-state"],[9],[0,"\\n  "],[7,"img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/empty-states/execute-scenario-list-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg"],[12,"alt",[27,"t",["scenario.no-data"],null]],[9],[10],[0,"\\n  "],[7,"div"],[11,"class","text__empty-state--large"],[9],[0,"\\n    "],[1,[27,"t",["scenario.no-data"],null],false],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["allowCreateScenarios"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","text--semibold mt-6"],[9],[0,"\\n      "],[7,"a"],[12,"href",[27,"generate-url",["scenario_automations/"],null]],[9],[0,"\\n        "],[7,"span"],[9],[1,[27,"t",["common.create-new"],null],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-scenarios/empty-folder/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/scenario-item/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({isExecuting:!1,classNameBindings:["currentList:current__item--active"],scenarioIcon:Ember.computed("scenario",(function(){return Ember.get(this,"scenario.private")?"lock":"globe"}))});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/scenario-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"lc7cXZS6",block:'{"symbols":["component","state"],"statements":[[7,"div"],[11,"class","scenarios__item container-fluid"],[11,"data-test-item","execute-scenario-item"],[9],[0,"\\n  "],[7,"div"],[11,"class","col-md-1"],[9],[0,"\\n    "],[1,[27,"svg-jar",[[23,["scenarioIcon"]]],[["class"],["app-icon app-icon--small vertical-align"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","col-md-11 text__content"],[9],[0,"\\n    "],[7,"div"],[11,"class","text__content text--semibold"],[9],[0,"\\n      "],[1,[23,["scenario","name"]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"p"],[11,"class","text__content text--gray"],[9],[0,"\\n      "],[1,[23,["scenario","description"]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","scenarios__item__btn"],[9],[0,"\\n"],[4,"async-button",null,[["action","tagName","class","data-test-button"],[[27,"action",[[22,0,[]],[23,["executeScenario"]],[23,["scenario"]]],null],"div","pull-right","execute-button"]],{"statements":[[4,"if",[[22,2,["isDefault"]]],null,{"statements":[[0,"        "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text scenarios-btn"],[9],[0,"\\n          "],[1,[27,"svg-jar",["admin"],[["class"],["app-icon app-icon--verysmall app-icon--muted-secondary"]]],false],[0,"\\n          "],[7,"span"],[9],[0," "],[1,[27,"t",["fd.execute"],null],false],[0," "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[22,2,["isPending"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","btn btn--transparent text-center"],[9],[0,"\\n          "],[7,"span"],[11,"class","typingloader"],[9],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-scenarios/scenario-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/shared/tickets-scenarios/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"BuR5IUAc",block:'{"symbols":["scenario","scenario"],"statements":[[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n    "],[1,[27,"svg-jar",["execute-scenarios"],[["class"],["modal-icons"]]],false],[0,"\\n    "],[1,[27,"t",["fd.executescenario"],null],false],[0,"\\n"],[4,"if",[[23,["showCreateScenarionOnHeader"]]],null,{"statements":[[0,"      "],[7,"a"],[12,"href",[27,"generate-url",["scenario_automations/"],null]],[11,"rel","noopener"],[11,"target","_blank"],[11,"class","text--small text--semibold"],[9],[0,"\\n        "],[7,"span"],[9],[1,[27,"t",["common.create-new"],null],false],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[12,"class",[28,["modal-content show execute-scenarios ",[27,"if",[[23,["executionInProgress"]],"scenario-executing"],null]]]],[11,"data-test-sidebar","execute-scenario-sidebar"],[9],[0,"\\n"],[4,"if",[[23,["isScenariosLoaded"]]],null,{"statements":[[4,"if",[[23,["isEmptyFolder"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/tickets-scenarios/empty-folder",null,[["allowCreateScenarios"],[[23,["allowCreateScenarios"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["showServiceTaskWarning"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-id","service-task-warning-box"],[11,"class","clearfix warning-box mt-20 mb-4"],[9],[0,"\\n          "],[7,"div"],[11,"class","pull-left warning-box--body"],[9],[0,"\\n            "],[1,[27,"svg-jar",["warning"],[["class"],["app-icon--large vertical-align element-inline"]]],false],[0,"\\n            "],[7,"span"],[11,"class","warning-box--text text--small vertical-align element-inline pl-15 ml-10"],[9],[0,"\\n              "],[1,[27,"t",["tickets.bulkactions.executescenario.warning"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n            "],[7,"a"],[11,"role","button"],[11,"class","dismiss-button"],[12,"aria-label",[27,"t",["tickets.bulkactions.executescenario.dismiss"],null]],[12,"onclick",[27,"action",[[22,0,[]],"hideServiceTaskWarning"],null]],[9],[0,"\\n              "],[1,[27,"t",["tickets.bulkactions.executescenario.dismiss"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"gt",[[23,["scenarios","length"]],[23,["minCountForSearch"]]],null]],null,{"statements":[[0,"        "],[1,[27,"ui-components/search-field",null,[["placeholder","uniqueIdClass","value","data-test-textbox"],["Search Scenarios","scenarios__search",[23,["searchValue"]],"scenario-searchfield"]]],false],[0,"\\n"],[4,"unless",[[27,"or",[[23,["searchInProgress"]],[23,["isRecentEmpty"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","search-category"],[9],[0,"\\n            "],[7,"div"],[11,"class","text-sub-title"],[9],[1,[27,"t",["common.recentlabel"],null],false],[10],[0,"\\n"],[4,"each",[[23,["recentScenarios"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/shared/tickets-scenarios/scenario-item",null,[["scenario","executeScenario","searchValue"],[[22,2,[]],[27,"action",[[22,0,[]],"executeScenario"],null],[23,["searchValue"]]]]],false],[0,"\\n"]],"parameters":[2]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n      "],[7,"div"],[11,"class","search-category"],[9],[0,"\\n"],[4,"unless",[[23,["searchInProgress"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","text-sub-title"],[9],[1,[27,"t",["scenarios.all"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[23,["filteredScenarios"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/shared/tickets-scenarios/scenario-item",null,[["scenario","executeScenario","searchValue"],[[22,1,[]],[27,"action",[[22,0,[]],"executeScenario"],null],[23,["searchValue"]]]]],false],[0,"\\n"]],"parameters":[1]},{"statements":[[0,"          "],[7,"div"],[11,"class","text__empty-state"],[9],[1,[27,"t",["common.no-search-result"],[["resource"],["scenarios"]]],false],[10],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"    "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"],[4,"if",[[23,["showCloseValidationDialog"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/tickets-list/shared/close-validation",null,[["tickets","totalTickets","assignedProperties","onclose"],[[23,["selectedRecords"]],[23,["totalRecords"]],[23,["assignedProperties"]],[23,["onclose"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/shared/tickets-scenarios/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/threads/shared/anchor/component",["exports","freshdesk/utils/tickets/conversation"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),i18n:Ember.inject.service(),currentAccount:Ember.inject.service(),manageLightbox:Ember.inject.service(),classNames:["module-tickets__threads__shared__anchor"],defaultClass:"default-bg",classNameBindings:["defaultClass","isAgent::requestor","isPrivateNote:private-note-bg"],helpdeskName:Ember.computed.reads("currentAccount.helpdeskName"),showQuotedButton:Ember.computed.or("anchorData.{hasQuotedText,quotedContent}"),isAutomatedNote:Ember.computed.reads("anchorData.isAutomationRule"),isBroadcastNote:Ember.computed.equal("anchorData.categoryType","broadcast"),isAutoResponse:Ember.computed.and("currentAccount.showAutoRespondedNoteInTicketDetails","anchorData.autoResponse"),isNote:Ember.computed.or("anchorData.{isNote,isAutomationRule}"),isAgent:Ember.computed.or("anchorData.user.{isAgent,deletedAgent}"),notBroadcastNote:Ember.computed.not("isBroadcastNote"),isPrivate:Ember.computed.reads("anchorData.private"),isPrivateNote:Ember.computed.and("isNote","isPrivate","notBroadcastNote","notIsSocialIncoming"),displayEmailLength:1,showTextBold:!1,anchorData:Ember.computed("anchor",(function(){return this.anchor&&this.anchor.id?this.store.findRecord(this.anchor.type,this.anchor.id):null})),hideDivider:Ember.computed("anchorData.{ccEmails,toEmails}",(function(){return Ember.isEmpty(Ember.get(this,"anchorData.ccEmails"))||Ember.isEmpty(Ember.get(this,"anchorData.toEmails"))})),hideBccDivider:Ember.computed("anchorData.{bccEmails,ccEmails,toEmails}",(function(){return Ember.isEmpty(Ember.get(this,"anchorData.bccEmails"))||Ember.isEmpty(Ember.get(this,"anchorData.ccEmails"))&&Ember.isEmpty(Ember.get(this,"anchorData.toEmails"))})),notIsSocialIncoming:Ember.computed("anchorData.{isSocial,incoming,categoryType}",(function(){return!(Ember.get(this,"anchorData.isSocial")&&Ember.get(this,"anchorData.incoming")&&"customer_response"===Ember.get(this,"anchorData.categoryType"))})),performedBySystem:Ember.computed("anchorData","isAutomatedNote",(function(){var e=Ember.get(this,"anchorData.userId");return Ember.isEmpty(e)&&this.isAutomatedNote})),anchorIcon:Ember.computed("anchorData.sourceType",(function(){return(0,t.getAnchorIcon)(this.anchorData)})),showLastEditInfo:Ember.computed("anchorData.{lastEditedUserId,lastEditedAt}",(function(){return null!=Ember.get(this,"anchorData.lastEditedUserId")&&null!=Ember.get(this,"anchorData.lastEditedAt")})),statusString:Ember.computed("anchorData",(function(){return this.set("conversation",this.anchorData),(0,t.getStatusString)(this.getProperties("conversation","isNote","isPrivateNote","isBroadcastNote","isAutoResponse"),this.i18n)})),albumName:Ember.computed("anchorData.id",(function(){return"anchor_".concat(Ember.get(this,"anchorData.id"))})),anchorImgSelector:Ember.computed("albumName",(function(){return"[data-album='".concat(this.albumName,"'].anchor-body img[src]")})),didRender:function(){this._super.apply(this,arguments),this.manageLightbox.removeInlineImages(this.albumName),this.manageLightbox.addInlineImages(this.albumName,this.anchorImgSelector)},actions:{onBodyClick:function(e){"img"===e.target.nodeName.toLowerCase()&&e.target.classList.contains("inline-image")&&this.manageLightbox.openInlineImage(e.target.src,this.albumName)}}});e.default=s})),define("freshdesk/components/module-tickets/threads/shared/anchor/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5wwiCTvQ",block:'{"symbols":["wrapper"],"statements":[[4,"if",[[23,["anchorData"]]],null,{"statements":[[4,"collab-threads/wrappers/anchor",null,null,{"statements":[[4,"component",[[22,1,["headerIcon"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","header-icon"],[9],[0,"\\n"],[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"          "],[7,"figure"],[11,"class","ticket-source-icon-wrap ticket-source-activity"],[11,"data-test-id","system-automated-avatar"],[9],[0,"\\n            "],[1,[27,"svg-jar",["system-activities"],[["class"],["system-icon app-icon--white"]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"app-components/avatar-user",null,[["user","size","inline"],[[23,["anchorData","user"]],"medium-secondary",true]]],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["headerData"]]],null,{"statements":[[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","user"],[11,"data-test-id","helpdesk-name"],[9],[1,[21,"helpdeskName"],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"app-components/contact-popover",null,[["user","class"],[[23,["anchorData","user"]],"highlighted-contact"]]],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[7,"span"],[11,"data-test-id","status-string"],[9],[1,[21,"statusString"],false],[10],[0,"\\n      "],[7,"div"],[11,"class","created-time"],[9],[0,"\\n        "],[1,[27,"ui-components/time-ago",null,[["dateTime","showHintRight"],[[23,["anchorData","createdAt"]],true]]],false],[0,"\\n"],[4,"if",[[23,["anchorData","toEmails"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","element-inline"],[11,"data-test-id","to-emails"],[9],[0,"\\n            "],[1,[27,"ui-components/emails-info",null,[["emails","displayingLength","showTextBold","text","type"],[[23,["anchorData","toEmails"]],[23,["displayEmailLength"]],[23,["showTextBold"]],[27,"t",["fd.to"],null],[27,"t",["fd.to"],null]]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"span"],[11,"data-test-id","email-divider"],[12,"class",[27,"if",[[23,["hideDivider"]],"hide","message__email__divider ml-2 mr-2"],null]],[9],[10],[0,"\\n"],[4,"if",[[23,["anchorData","ccEmails"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","element-inline"],[11,"data-test-id","cc-emails"],[9],[0,"\\n            "],[1,[27,"ui-components/emails-info",null,[["emails","displayingLength","showTextBold","text","type"],[[23,["anchorData","ccEmails"]],[23,["displayEmailLength"]],[23,["showTextBold"]],[27,"t",["fd.cc"],null],[27,"t",["fd.cc"],null]]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"span"],[11,"data-test-id","bcc-email-divider"],[12,"class",[27,"if",[[23,["hideBccDivider"]],"hide","message__email__divider ml-2 mr-2"],null]],[9],[10],[0,"\\n"],[4,"if",[[23,["anchorData","bccEmails"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","element-inline"],[11,"data-test-id","bcc-emails"],[9],[0,"\\n            "],[1,[27,"ui-components/emails-info",null,[["emails","displayingLength","showTextBold","text","type"],[[23,["anchorData","bccEmails"]],[23,["displayEmailLength"]],[23,["showTextBold"]],[27,"t",["fd.bcc"],null],[27,"t",["fd.bcc"],null]]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["contentIcon"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","content-icon"],[12,"aria-label",[21,"anchorIcon"]],[11,"data-test-id","content-icon"],[9],[0,"\\n        "],[1,[27,"svg-jar",[[23,["anchorIcon"]]],[["class"],["app-icon app-icon-convo app-icon--small app-icon--topalign"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["contentData"]]],null,{"statements":[[4,"if",[[23,["showLastEditInfo"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-id","edit-info"],[11,"class","secondary-info text--xsmall text--dark mb-14"],[9],[0,"\\n          "],[1,[27,"t",["tickets.conversation.last-edit-info"],null],false],[0,"\\n          "],[1,[27,"app-components/user-link",null,[["user"],[[23,["anchorData","lastEditedUser"]]]]],false],[0,",\\n          "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["anchorData","lastEditedAt"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"p"],[11,"class","anchor-body"],[12,"onclick",[27,"action",[[22,0,[]],"onBodyClick"],null]],[12,"data-album",[21,"albumName"]],[11,"data-test-id","anchor-body"],[9],[0,"\\n        "],[1,[27,"collab-threads/shared/anchor-body",null,[["body","attachments","bodyText"],[[23,["anchorData","body"]],[23,["anchorData","attachments"]],[23,["anchorData","bodyText"]]]]],false],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[23,["showQuotedButton"]]],null,{"statements":[[0,"        "],[1,[27,"app-components/quoted-content",null,[["model"],[[23,["anchorData"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[1]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/threads/shared/anchor/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activities-pagination/component",["exports"],(function(e){function t(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({totalCount:null,isLoading:Ember.computed.reads("fetchNextActivity.isRunning"),sortedItems:Ember.computed.sort("activities","sortBy"),showPagination:Ember.computed.gt("remainingCount",0),sortBy:Ember.computed("isReverseOrder",(function(){return Ember.get(this,"isReverseOrder")?["_id:desc"]:["_id"]})),remainingCount:Ember.computed("totalCount","activities.[]","items.[]",(function(){var e=Ember.get(this,"activities.length"),t=Ember.get(this,"items.length")-Ember.get(this,"activities.length");return Ember.get(this,"totalCount")-e-t})),activities:Ember.computed.filterBy("items","canDisplayInTickets"),activityIds:Ember.computed.mapBy("items","_id"),fetchSince:Ember.observer("ticket.updatedCounter",(function(){var e=this;if(Ember.get(this,"ticket.updatedCounter")>0){var t=this.getSinceId();Ember.get(this,"fetchNextActivity").perform(t).then((function(t){return e._updateCount(t)}))}})),actions:{nextPage:function(){return this.populateNextPage()}},getBeforeId:function(){return Math.min.apply(Math,t(Ember.get(this,"activityIds")))},getSinceId:function(){return Math.max.apply(Math,t(Ember.get(this,"activityIds")))},_updateCount:function(e){var t=e.activities.length;this.incrementProperty("totalCount",t)},populateNextPage:function(){var e=this.getBeforeId();Ember.get(this,"fetchNextActivity").perform(void 0,e)}});e.default=s}));define("freshdesk/components/module-tickets/ticket-details/activities-pagination/load-more/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component;e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activities-pagination/load-more/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"yYBTNMaL",block:'{"symbols":[],"statements":[[4,"if",[[23,["showPagination"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","ticket-details__item--more text--xsmall"],[9],[0,"\\n    "],[7,"button"],[12,"onclick",[21,"nextPage"]],[11,"data-test-id","activities-load-more"],[11,"class","more-block"],[9],[0,"\\n"],[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"        "],[1,[27,"ui-components/inline-loader",null,[["loaderClass"],["ticket-loading"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[11,"class","more-count"],[9],[1,[21,"remainingCount"],false],[10],[0,"\\n        "],[7,"span"],[11,"class","text--semibold"],[9],[1,[27,"t",["tickets.view_conversations"],null],false],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activities-pagination/load-more/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activities-pagination/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"qvViT9Eg",block:'{"symbols":["load-more-button","activity"],"statements":[[4,"with",[[27,"component",["module-tickets/ticket-details/activities-pagination/load-more"],[["isLoading","nextPage","remainingCount","showPagination"],[[23,["isLoading"]],[27,"action",[[22,0,[]],"nextPage"],null],[23,["remainingCount"]],[23,["showPagination"]]]]]],null,{"statements":[[0,"\\n"],[4,"unless",[[23,["isReverseOrder"]]],null,{"statements":[[0,"    "],[1,[22,1,[]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[7,"div"],[11,"data-test-id","activity-container"],[9],[0,"\\n"],[4,"each",[[23,["sortedItems"]]],null,{"statements":[[4,"if",[[22,2,["isNote"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/conversation",null,[["conversation","isReverseOrder","isInActivity","emailFailureDetails"],[[22,2,["conversation"]],[23,["isReverseOrder"]],true,[23,["emailFailureDetails"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/activity",null,[["activity","ticketFields"],[[22,2,[]],[23,["ticketFields"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[2]},null],[0,"  "],[10],[0,"\\n\\n"],[4,"if",[[23,["isReverseOrder"]]],null,{"statements":[[0,"    "],[1,[22,1,[]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activities-pagination/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/associated-ticket-actions/component",["exports","freshdesk/constants/activity"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),"data-test-id":"activity-associated",associatedTicketsCount:Ember.computed.reads("actionContent.length"),associatedTicket:Ember.computed("actionContent",(function(){var e=this.actionContent;return this.store.findRecord("ticket",e,{backgroundReload:!1})})),length:Ember.computed("associatedTicketsCount",(function(){return this.associatedTicketsCount-1})),actionPerformed:Ember.computed("actionType",(function(){var e=this.actionType;return t.default.associatedTickets.actionPerformed[e]})),parentTitle:Ember.computed("actionType",(function(){var e=this.actionType;return t.default.associatedTickets.parentTitle[e]})),listTitle:Ember.computed("actionType",(function(){var e=this.actionType;return t.default.associatedTickets.listTitle[e]})),actionItem:Ember.computed("actionType",(function(){var e=this.actionType;return t.default.associatedTickets.actionItem[e]}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/associated-ticket-actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"n+ib7iqF",block:'{"symbols":["associatedTicketId","index"],"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"single-association"],null]],null,{"statements":[[0,"  "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.association_ticket_actions.",[23,["actionType"]]],null]],null],false],[0,"\\n"],[4,"link-to",["helpdesk.tickets.show",[23,["associatedTicket","id"]]],null,{"statements":[[0,"    "],[1,[23,["associatedTicket","subject"]],false],[0," (#"],[1,[23,["associatedTicket","id"]],false],[0,")\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"parent-reopened"],null]],null,{"statements":[[0,"  "],[1,[27,"t",["tickets.activities.actions.association_ticket_actions.parent_ticket_reopened"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"tracker-unlinked-all"],null]],null,{"statements":[[0,"  "],[1,[27,"t",[[23,["actionPerformed"]]],null],false],[0," "],[1,[21,"actionContent"],false],[0," "],[1,[27,"t",[[23,["listTitle"]]],[["count"],[[23,["actionContent"]]]]],false],[0," "],[1,[27,"t",[[23,["parentTitle"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[27,"t",[[23,["actionPerformed"]]],null],false],[0," "],[1,[21,"associatedTicketsCount"],false],[0,"\\n  "],[1,[27,"t",[[23,["listTitle"]]],[["count"],[[23,["associatedTicketsCount"]]]]],false],[0,"\\n  (\\n"],[4,"each",[[23,["actionContent"]]],null,{"statements":[[4,"link-to",["helpdesk.tickets.show",[22,1,[]]],null,{"statements":[[0,"      #"],[1,[22,1,[]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"not-eq",[[22,2,[]],[23,["length"]]],null]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","content-seperator"],[9],[0,","],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"  )\\n  "],[1,[27,"t",[[23,["parentTitle"]]],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/associated-ticket-actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/basic-actions/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{deleteStatus:Ember.computed("actionType","actionContent",(function(){var e=this.getLabel("status"),t=this.getKeys("status"),s=this.actionContent,n=this.dynamicProperties(t,s.current_value),i=s.deleted_value;return this.i18n.t("tickets.activities.actions.property_delete",{label:e,currentValue:n,deletedValue:i})})),deletedAgent:Ember.computed("actionType","actionContent",(function(){var e=this.actionContent;return this.getRecord("contact",e)})),actionItem:Ember.computed("actionType","actionContent",(function(){switch(this.actionType){case"add_tag":case"remove_tag":return"tag-actions";case"delete":case"restore":case"spam":case"unspam":case"archive":return"delete-spam-archive";case"execute_scenario":return"execute-scenario";case"add_a_cc":return"add-cc";case"ticket_import":return"ticket-import";case"delete_status":return"delete-status";case"delete_agent":return"delete-agent";case"add_note":return"add-note";case"forward_ticket":return"forward-ticket"}}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/basic-actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5tDF2ajK",block:'{"symbols":[],"statements":[[7,"span"],[12,"data-test-id",[27,"concat",["activity-",[23,["actionItem"]]],null]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["actionItem"]],"tag-actions"],null]],null,{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.",[23,["actionType"]]],null]],null],false],[0,"\\n    "],[1,[27,"semi-bold",[[27,"concat-with-comma",[[23,["actionContent"]]],null]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"delete-spam-archive"],null]],null,{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.",[23,["actionType"]]],null]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"execute-scenario"],null]],null,{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.",[23,["actionType"]]],null]],null],false],[0,"\\n    "],[1,[27,"semi-bold",[[23,["actionContent","name"]]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"add-cc"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.add_a_cc"],null],false],[0,"\\n    "],[1,[27,"concat-with-comma",[[23,["actionContent"]]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"delete-status"],null]],null,{"statements":[[0,"    "],[1,[27,"html-safe",[[23,["deleteStatus"]]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"delete-agent"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.delete_agent"],null],false],[0,"\\n    "],[1,[27,"app-components/user-link",null,[["user"],[[23,["deletedAgent"]]]]],false],[0,"\\n    "],[1,[27,"t",["tickets.activities.actions.was_deleted"],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"ticket-import"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.ticket_import"],null],false],[0,"\\n    "],[1,[27,"format-time",[[23,["actionContent","imported_at"]],[23,["currentAccount","timeFormat","fullDate"]]],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"add-note"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.conversations.action.private-note"],null],false],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"forward-ticket"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.summary.forward_ticket"],null],false],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/basic-actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{ticketFields:Ember.inject.service(),tagName:"",actionType:Ember.computed.reads("action.type"),actionContent:Ember.computed.reads("action.content"),propertyUpdates:Ember.computed("actionContent",(function(){var e=this.actionContent,t=0;for(var s in e)"custom_fields"!==s&&"invalid_fields"!==s&&t++;return t})),isThankyouContent:Ember.computed("actionContent","isObserverRule",(function(){return Ember.isPresent(Ember.get(this,"actionContent.thank_you_note"))&&this.isObserverRule})),actionItem:Ember.computed("action",(function(){switch(Ember.get(this,"action.type")){case"add_tag":case"remove_tag":case"delete":case"restore":case"spam":case"unspam":case"archive":case"execute_scenario":case"add_a_cc":case"ticket_import":case"delete_agent":case"delete_status":case"add_note":case"forward_ticket":return"basic-actions";case"round_robin":return"round-robin";case"skill_name":return"skill-name";case"add_watcher":return"watcher-actions";case"email_to_group":case"email_to_agent":case"email_to_requester":return"email-to";case"timesheet_create":case"timesheet_delete":case"timesheet_edit":return"timesheet-actions";case"ticket_split_source":case"ticket_split_target":case"ticket_merge_source":case"ticket_merge_target":return"split-merge";case"property_update":return"property-update";case"ticket_linked":case"ticket_unlinked":case"tracker_linked":case"tracker_unlinked":case"tracker_unlink_all":case"child_ticket_linked":case"child_ticket_unlinked":case"parent_ticket_reopened":case"parent_ticket_linked":case"parent_ticket_unlinked":return"associated-ticket-actions"}}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/custom-invalid/component",["exports","freshdesk/mixins/tickets/activities-mixin","@freshdesk/common/utils/time-util"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{moment:Ember.inject.service(),i18n:Ember.inject.service(),currentAccount:Ember.inject.service(),ticketFieldsService:Ember.inject.service("ticket-fields"),tagName:"",customInvalid:Ember.computed("actionContent",(function(){var e=Ember.get(this,"invalid"),t=e?"invalid_fields":"custom_fields",s=e?Ember.get(this,"actionContent.invalid_fields"):Ember.get(this,"actionContent.custom_fields");return this.getCustomOrInvalidFieldsContent(t,s)})),_getFieldProperties:function(e,t,s){var n,i;return t?(n=e.field_name,i=e.value):(n=this.getLabel(e),i=s[e]),{label:n,propertyValue:i,type:this.getType(e)}},getCustomOrInvalidFieldsContent:function(e,t){var s=this,n=[],i=[],a=[],r="invalid_fields"===e;if((r?t:Object.keys(t)).forEach((function(e){var a=s._getFieldProperties(e,r,t),l=a.label,o=a.propertyValue,c=a.type,d=s.fieldString(l,o,c),m=d.defaultStr,u=d.str;m?n.push(u):i.push(u)})),n.length){var l="".concat(this.i18n.t("tickets.activities.set")," ").concat(n.join(""));a.push(l.replace(/,\s*$/,""))}return i.length&&a.push(i.join("").replace(/,\s*$/,"")),a.join(", ")},fieldString:function(e,t,n){var i,a=this.i18nMapping("none"),r=t||a,l=!0;if("*"===r)l=!1,i=this.i18nMapping("property_update.custom_field.modified",e);else if("boolean"==typeof t){l=!1;var o=r===a?"deselected":"selected";i=this.i18nMapping("property_update.custom_field.".concat(o),e)}else if("custom_date_time"===n){var c=s.default.getDateFromString(r,"YYYY-MM-DDTHH:mm:ssZ",!0,Ember.get(this,"moment"));c&&(r=c.format(Ember.get(this,"currentAccount.timeFormat.fullTimeAt"))),i=this.i18nMapping("property_update.as",e,r)}else if("custom_file"===n){l=!1;var d=t?"updated":"deleted";i=this.i18nMapping("property_update.custom_field.".concat(d),e)}else i=this.i18nMapping("property_update.as",e,r);return{defaultStr:l,str:i}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/custom-invalid/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"4il9Qh9j",block:'{"symbols":[],"statements":[[7,"li"],[11,"data-test-id","fields-changes"],[9],[0,"\\n  "],[1,[27,"html-safe",[[23,["customInvalid"]]],null],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/custom-invalid/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/email-to/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{tagName:"",users:Ember.computed("actionType","actionContent",(function(){var e=this.actionContent,t=[],s="email_to_agent"===this.actionType?"agent":"contact",n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;t.push(this.getRecord(s,o))}}catch(c){i=!0,a=c}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return t})),length:Ember.computed("users",(function(){return this.users.length-1}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/email-to/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"AiMa1OdQ",block:'{"symbols":["user","index","user","index"],"statements":[[7,"div"],[12,"data-test-id",[27,"concat",["activity-",[23,["actionType"]]],null]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["actionType"]],"email_to_group"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.email_to_group"],null],false],[0," "],[1,[21,"actionContent"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["actionType"]],"email_to_agent"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.email_to_agent"],null],false],[0,"\\n"],[4,"each",[[23,["users"]]],null,{"statements":[[0,"      "],[1,[27,"app-components/user-link",null,[["user"],[[22,3,[]]]]],false],[0,"\\n"],[4,"if",[[27,"not-eq",[[22,4,[]],[23,["length"]]],null]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","content-seperator preserve-white-space"],[9],[0,","],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[3,4]},null]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.email_to_requester"],null],false],[0,"\\n"],[4,"each",[[23,["users"]]],null,{"statements":[[0,"      "],[1,[27,"app-components/user-link",null,[["user"],[[22,1,[]]]]],false],[0,"\\n"],[4,"if",[[27,"not-eq",[[22,2,[]],[23,["length"]]],null]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","content-seperator preserve-white-space"],[9],[0,","],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"  "]],"parameters":[]}]],"parameters":[]}],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/email-to/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({store:Ember.inject.service(),ticketFields:Ember.inject.service(),tagName:"span",fieldsforSet:["description","subject"],length:Ember.computed("content",(function(){return this.content.length-1})),content:Ember.computed("actionContent",(function(){var e,t,s=[],n=this.actionContent;for(var i in Ember.isPresent(n.thank_you_note)&&delete n.thank_you_note,n)if("status"==i&&(e=n[i]),"custom_fields"!==i&&"invalid_fields"!==i){var a=Ember.get(this,"ticketFields.statusChoices").findBy("value",e);t="status_label"==i&&a?{key:i,value:a.translatedLabel}:{key:i,value:n[i]},s.push(t)}return s}))});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/property-update-item/component",["exports","freshdesk/mixins/tickets/activities-mixin","freshdesk/mixins/fetch-user"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,s.default,{moment:Ember.inject.service(),classNameBindings:["defaultClass"],tagName:"p",defaultClass:"property-update",reqResp:Ember.computed("property","value",(function(){var e=this.value;return this.fetchUser(e,{backgroundReload:!1})})),dueBy:Ember.computed("value",(function(){var e=this.value;return this.moment.moment(e).format(Ember.get(this,"currentAccount.timeFormat.fullTimeAt"))})),typeGroupStatus:Ember.computed("value",(function(){var e=this.value;return e||this.i18nMapping("none")})),sourcePriority:Ember.computed("property","value",(function(){var e=this.property,t=this.value,s=this.getKeys(e);return this.dynamicProperties(s,t)})),internalAgent:Ember.computed("value",(function(){var e=this.value;return e?this.getRecord("agent",e):null}))});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/property-update-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"G3AIZZY4",block:'{"symbols":[],"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["property"]],"requester_id"],null],[27,"eq",[[23,["property"]],"responder_id"],null]],null]],null,{"statements":[[4,"if",[[23,["value"]]],null,{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.",[23,["property"]]],null]],null],false],[1,[27,"app-components/user-link",null,[["user"],[[23,["reqResp"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.none.",[23,["property"]]],null]],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["value"]],"*"],null]],null,{"statements":[[0,"  "],[1,[27,"t",["tickets.activities.actions.property_update.edited"],null],false],[0," "],[1,[27,"semi-bold",[[23,["property"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["property"]],"due_by"],null]],null,{"statements":[[0,"  "],[1,[27,"t",["tickets.activities.actions.due_by"],null],false],[0," "],[1,[27,"semi-bold",[[23,["dueBy"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["property"]],"ticket_type"],null],[27,"eq",[[23,["property"]],"group_name"],null],[27,"eq",[[23,["property"]],"status_label"],null]],null]],null,{"statements":[[0,"  "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.",[23,["property"]]],null]],null],false],[0," "],[1,[27,"semi-bold",[[23,["typeGroupStatus"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["property"]],"source"],null],[27,"eq",[[23,["property"]],"priority"],null]],null]],null,{"statements":[[0,"  "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.",[23,["property"]]],null]],null],false],[0," "],[1,[27,"semi-bold",[[23,["sourcePriority"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["property"]],"product_name"],null]],null,{"statements":[[0,"  "],[1,[27,"t",["tickets.activities.actions.property_update.product"],null],false],[0," "],[1,[27,"semi-bold",[[23,["value"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["property"]],"internal_agent_id"],null]],null,{"statements":[[4,"if",[[23,["internalAgent"]]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.property_update.internal_agent_id"],null],false],[0,"\\n    "],[1,[27,"app-components/user-link",null,[["user"],[[23,["internalAgent"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.none.",[23,["property"]]],null]],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["property"]],"internal_group_name"],null]],null,{"statements":[[4,"if",[[23,["value"]]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.property_update.internal_group_name"],null],false],[0," "],[1,[27,"semi-bold",[[23,["value"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",[[27,"concat",["tickets.activities.actions.property_update.none.",[23,["property"]]],null]],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/property-update-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"KgebO3tV",block:'{"symbols":["action","index"],"statements":[[4,"if",[[23,["content"]]],null,{"statements":[[4,"each",[[23,["content"]]],null,{"statements":[[4,"if",[[27,"and",[[27,"not",[[27,"contains",[[22,1,["key"]],[23,["fieldsforSet"]]],null]],null],[27,"eq",[[22,2,[]],0],null]],null]],null,{"statements":[[0,"      "],[1,[27,"t",["tickets.activities.set"],null],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"not-eq",[[22,1,["key"]],"status"],null]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-details/activity/actions/property-update/property-update-item",null,[["property","value"],[[22,1,["key"]],[22,1,["value"]]]]],false],[0,"\\n      "],[4,"if",[[27,"not",[[27,"eq",[[22,2,[]],[23,["length"]]],null]],null]],null,{"statements":[[0,","]],"parameters":[]},null],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/property-update/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/round-robin/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{tagName:"span","data-test-id":"activity-round-robin",responder:Ember.computed("actionContent",(function(){var e=this.actionContent;return this.getRecord("agent",e.responder_id)}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/round-robin/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Cmki6kLI",block:'{"symbols":["content","action"],"statements":[[1,[27,"t",["tickets.activities.set"],null],false],[0,"\\n"],[4,"each",[[27,"-each-in",[[23,["actionContent"]]],null]],null,{"statements":[[4,"if",[[27,"eq",[[22,2,[]],"skill_name"],null]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.round_robin.skill"],null],false],[0," "],[1,[27,"semi-bold",[[22,1,[]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.property_update.responder_id"],null],false],[0," "],[1,[27,"app-components/user-link",null,[["user"],[[23,["responder"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[1,2]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/round-robin/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/skill-name/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({tagName:"span","data-test-id":"activity-skill-name"});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/skill-name/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"WuumrrUY",block:'{"symbols":[],"statements":[[1,[27,"t",["tickets.activities.set"],null],false],[0,"\\n"],[1,[27,"t",["tickets.activities.actions.round_robin.skill"],null],false],[0," "],[1,[27,"semi-bold",[[23,["actionContent"]]],null],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/skill-name/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/split-merge/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{"data-test-id":"activity-ticket-split",length:Ember.computed("splitMergeContent",(function(){return this.splitMergeContent.length-1})),splitMergeContent:Ember.computed("actionContent",(function(){var e,t=this,s=this.actionContent,n=[];return n.push(s.source_ticket_id||s.target_ticket_id||s.source_ticket_ids),(e=[]).concat.apply(e,n).map((function(e){return t.getRecord("ticket",e)}))}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/split-merge/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"/fL1jy0K",block:'{"symbols":["ticket","index"],"statements":[[1,[27,"t",[[27,"concat",["tickets.activities.actions.",[23,["actionType"]]],null]],null],false],[0,"\\n"],[4,"each",[[23,["splitMergeContent"]]],null,{"statements":[[4,"link-to",["helpdesk.tickets.show",[22,1,["id"]]],[["class"],["user"]],{"statements":[[0,"    "],[1,[22,1,["subject"]],false],[0," (#"],[1,[22,1,["id"]],false],[0,")\\n"]],"parameters":[]},null],[0,"  "],[4,"if",[[27,"not-eq",[[22,2,[]],[23,["length"]]],null]],null,{"statements":[[7,"span"],[11,"class","content-seperator"],[9],[0,","],[10]],"parameters":[]},null],[0,"\\n"]],"parameters":[1,2]},null],[4,"if",[[27,"eq",[[23,["actionType"]],"ticket_merge_target"],null]],null,{"statements":[[0,"  "],[1,[27,"t",["tickets.activities.actions.with_ticket"],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/split-merge/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"LZ/N9j/i",block:'{"symbols":[],"statements":[[4,"if",[[27,"eq",[[23,["actionItem"]],"property-update"],null]],null,{"statements":[[4,"if",[[23,["isThankyouContent"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"data-test-id","text-list__item"],[11,"class","text-list__item"],[9],[0,"\\n"],[4,"if",[[23,["actionContent","thank_you_note"]]],null,{"statements":[[0,"        "],[1,[27,"t",["tickets.activities.actions.freddy.thank_you_note"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"t",["tickets.activities.actions.freddy.not.thank_you_note"],null],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["actionContent","custom_fields"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"data-test-id","text-list__item"],[11,"class","text-list__item"],[9],[1,[27,"module-tickets/ticket-details/activity/actions/custom-invalid",null,[["actionContent"],[[23,["actionContent"]]]]],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["actionContent","invalid_fields"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"data-test-id","text-list__item"],[11,"class","text-list__item"],[9],[1,[27,"module-tickets/ticket-details/activity/actions/custom-invalid",null,[["actionContent","invalid"],[[23,["actionContent"]],true]]],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"gt",[[23,["propertyUpdates"]],0],null]],null,{"statements":[[0,"    "],[7,"li"],[11,"data-test-id","text-list__item"],[11,"class","text-list__item"],[9],[1,[27,"module-tickets/ticket-details/activity/actions/property-update",null,[["actionContent"],[[23,["actionContent"]]]]],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["actionItem"]]],null,{"statements":[[0,"  "],[7,"li"],[11,"data-test-id","text-list__item"],[11,"class","text-list__item"],[9],[0,"\\n    "],[1,[27,"component",[[27,"concat",["module-tickets/ticket-details/activity/actions/",[23,["actionItem"]]],null]],[["actionType","dateTime","actionContent"],[[23,["action","type"]],[23,["dateTime"]],[23,["action","content"]]]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/component",["exports","freshdesk/mixins/tickets/activities-mixin","freshdesk/utils/seconds-to-hhmm"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{moment:Ember.inject.service(),tagName:"span","data-test-id":"activity-timesheet",noTimeSpent:!1,timeSheetActions:Ember.computed("actionType","actionContent",(function(){var e=Ember.get(this,"actionType"),t=Ember.get(this,"actionContent"),s="timesheet_create"===e&&t.timer_running?this.i18nMapping("timer_started"):this.i18nMapping("timesheet_created"),n="timesheet_create"===e?s:this.i18nMapping("timesheet_deleted");return this._getTimeSheetString(n,t)})),timeSheetEdit:Ember.computed("actionContent",(function(){var e=Ember.get(this,"actionContent");return this._getTimeSheetEditContent(e)})),_getTimeSheetEditContent:function(e){if(e.new_values.hasOwnProperty("timer_running")){var t=e.new_values.timer_running?this.i18nMapping("timer_started"):this.i18nMapping("timer_stopped");return this._getTimeSheetString(t,e.new_values)}return{oldString:this._getTimeSheetString("",e.old_values),newString:this._getTimeSheetString("",e.new_values)}},_getTimeSheetString:function(e,t){return 0===t.time_spent&&Ember.set(this,"noTimeSpent",!0),{action:e,timeSpent:(0,s.default)(t.time_spent),billableStatus:t.billable?this.i18nMapping("billable"):this.i18nMapping("non_billable"),userRecord:this.getRecord("agent",t.user_id),executedAt:Ember.get(this,"moment").moment(t.executed_at).format(Ember.get(this,"currentAccount.timeFormat.fullDate"))}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"UlG4991t",block:'{"symbols":[],"statements":[[4,"if",[[27,"or",[[27,"eq",[[23,["actionType"]],"timesheet_create"],null],[27,"eq",[[23,["actionType"]],"timesheet_delete"],null]],null]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item",null,[["timeSheetValues","noTimeSpent","dateTime"],[[23,["timeSheetActions"]],[23,["noTimeSpent"]],[23,["dateTime"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["timeSheetEdit","oldString"]]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.activities.actions.timesheet.edit"],null],false],[0,"\\n    "],[1,[27,"module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item",null,[["timeSheetValues","dateTime"],[[23,["timeSheetEdit","oldString"]],[23,["dateTime"]]]]],false],[0,"\\n    "],[1,[27,"t",["tickets.activities.actions.timesheet.edit.to"],null],false],[0,"\\n    "],[1,[27,"module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item",null,[["timeSheetValues","dateTime"],[[23,["timeSheetEdit","newString"]],[23,["dateTime"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item",null,[["timeSheetValues","dateTime"],[[23,["timeSheetEdit"]],[23,["dateTime"]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({tagName:"span",moment:Ember.inject.service(),noTimeSpent:!1,recordedDate:Ember.computed("dateTime",(function(){return Ember.get(this,"moment").moment(Ember.get(this,"dateTime")).format(Ember.get(this,"currentAccount.timeFormat.fullDate"))})),timeSheetString:Ember.computed("noTimeSpent",(function(){var e="tickets.activities.actions.timesheet";return this.noTimeSpent?e.concat(".noTimeSpent"):e}))});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"NNaxzlRF",block:'{"symbols":[],"statements":[[1,[27,"t",[[23,["timeSheetString"]]],[["action","timeSpent","billableStatus"],[[23,["timeSheetValues","action"]],[23,["timeSheetValues","timeSpent"]],[23,["timeSheetValues","billableStatus"]]]]],false],[0,"\\n"],[1,[27,"app-components/user-link",null,[["user"],[[23,["timeSheetValues","userRecord"]]]]],false],[0,"\\n"],[1,[27,"t",["tickets.activities.actions.timesheet.on"],null],false],[0,"\\n"],[1,[21,"recordedDate"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/timesheet-actions/timesheet-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/watcher-actions/component",["exports","freshdesk/mixins/tickets/activities-mixin"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{tagName:"",userRecords:Ember.computed("actionContent",(function(){var e=this,t=this.actionContent.user_ids,s=new Array;return t.map((function(t){s.push(e.getRecord("agent",t))})),s}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/activity/actions/watcher-actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5FfUMLUx",block:'{"symbols":["user"],"statements":[[7,"span"],[12,"data-test-id",[27,"concat",["activity-",[23,["actionType"]]],null]],[9],[0,"\\n"],[4,"each",[[23,["userRecords"]]],null,{"statements":[[4,"if",[[23,["actionContent","add_watcher"]]],null,{"statements":[[0,"      "],[1,[27,"t",["tickets.activities.actions.add_watcher"],null],false],[0," "],[1,[27,"app-components/user-link",null,[["user"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"t",["tickets.activities.actions.remove_watcher"],null],false],[0," "],[1,[27,"app-components/user-link",null,[["user"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[1]},null],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/actions/watcher-actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/activity/component",["exports","ember-window-mock"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=["new_ticket","other_update","edit_ticket","ticket_merge_source"],n=["observer","business","supervisor","round_robin"],i={business:{feature:{mandatoryFeatures:[],mandatoryLaunchParties:[]},abilities:["manage_dispatch_rules"],ruleType:"ticket_creation"},supervisor:{feature:{mandatoryFeatures:["supervisor"],mandatoryLaunchParties:[]},abilities:["manage_supervisor_rules"],ruleType:"time_triggers"},observer:{feature:{mandatoryFeatures:["create_observer"],mandatoryLaunchParties:[]},abilities:["manage_dispatch_rules"],ruleType:"ticket_updates"}},a=Ember.Component.extend({ticketFields:Ember.inject.service(),classNameBindings:["defaultClass","performedByRequester:activity--requestor","performedBySystem:activity--system"],defaultClass:"ticket-details__item ticket-details__item__activity",attributeBindings:["data-test-activity-id"],"data-test-activity-id":Ember.computed.readOnly("activity.id"),highlightType:Ember.computed.reads("activity.highlightType"),performedByRequester:Ember.computed.reads("activity.performedByRequester"),performedBySystem:Ember.computed.reads("activity.performerIsSystem"),isObserverRule:Ember.computed.equal("activity.performer.system.type","observer"),canEditRule:Ember.computed("activity.performer.system",(function(){var e=Ember.get(this,"activity.performer.system.type"),t=i[e]||{},s=t.feature,n=t.abilities,a=this.currentAccount.mandatesEnabled(s),r=this.currentUser.hasAbilities(n);return a&&r})),showHighlight:Ember.computed("highlightType",(function(){return!s.includes(this.highlightType)})),systemRuleInfo:Ember.computed("activity.performer.system",(function(){var e=Ember.get(this,"activity.performer.system.type");return n.includes(e)})),systemRuleType:"automation",actions:{editAutomationRule:function(e){var s="../admin/automations/".concat(i[e.type].ruleType,"/").concat(e.id,"/edit");t.default.open(s,"_blank")}}});e.default=a}));define("freshdesk/components/module-tickets/ticket-details/activity/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"FU7uhzK2",block:'{"symbols":["action"],"statements":[[7,"div"],[11,"class","ticket-details__item__header conversation-header"],[9],[0,"\\n  "],[7,"div"],[11,"data-test-id","one-userpic"],[11,"class","tkt-details-avatar profilepic mt-6 profilepic--circle profilepic--inline"],[9],[0,"\\n"],[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"      "],[7,"figure"],[11,"class","ticket-source-icon-wrap ticket-source-activity"],[9],[0,"\\n        "],[1,[27,"svg-jar",["system-activities"],[["class"],["system-icon"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"app-components/avatar-user",null,[["user","size"],[[23,["activity","user"]],"medium-secondary"]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n  "],[7,"div"],[11,"class","activity-info"],[9],[0,"\\n    "],[7,"div"],[11,"data-test-activity-performer-info",""],[11,"class","text__content element-inline performer-info"],[9],[0,"\\n"],[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","activity-system-info sender-info"],[9],[0,"\\n          "],[7,"div"],[12,"aria-label",[23,["activity","performer","system","name"]]],[11,"class","system-details hint--rounded hint--top "],[11,"data-test-id","activity-all"],[9],[0,"\\n            "],[7,"div"],[11,"class","ellipsis m0"],[9],[0,"\\n              "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","system-activity"],[9],[0,"\\n                "],[1,[27,"t",["tickets.activities.system"],null],false],[0,"\\n              "],[10],[0,"\\n"],[4,"if",[[23,["systemRuleInfo"]]],null,{"statements":[[4,"if",[[27,"eq",[[23,["activity","performer","system","type"]],"round_robin"],null]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","text--verylightgrey text--small"],[11,"data-test-id","activity-round-robin"],[9],[0,"\\n                    "],[1,[27,"t",["tickets.activities.system.rules.round_robin"],null],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[7,"span"],[11,"class","text--verylightgrey text--small"],[9],[0,"\\n                    "],[1,[27,"t",["tickets.activities.execute"],null],false],[0,"\\n                    "],[7,"span"],[11,"data-test-id","rule-type"],[9],[0,"\\n                      "],[1,[27,"t",[[27,"concat",["tickets.activities.system.rules.",[23,["systemRuleType"]]],null]],null],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n"],[4,"if",[[23,["activity","performer","system","name"]]],null,{"statements":[[0,"                    "],[7,"span"],[11,"data-test-id","rule-name"],[12,"class",[27,"concat",["link-on-hover text--semibold text--small ",[27,"if",[[23,["canEditRule"]],"cursor-pointer"],null]],null]],[12,"onclick",[27,"if",[[23,["canEditRule"]],[27,"action",[[22,0,[]],"editAutomationRule",[23,["activity","performer","system"]]],null]],null]],[9],[0,"\\n                      "],[1,[23,["activity","performer","system","name"]],false],[0,"\\n                    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","sender-info"],[9],[0,"\\n          "],[1,[27,"app-components/contact-popover",null,[["user"],[[23,["activity","user"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"      "],[7,"div"],[11,"class","created-time"],[11,"data-test-id","performed-at"],[9],[0,"\\n        "],[1,[27,"ui-components/time-ago",null,[["dateTime","showHintRight"],[[23,["activity","performedAt"]],true]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["showHighlight"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","conversation-capsule mt-8 mr-4"],[9],[0,"\\n      "],[7,"div"],[11,"class","btn btn--capsule text--xsmall"],[11,"data-test-id","highlight-text"],[11,"data-test-activity-type",""],[9],[0,"\\n        "],[1,[27,"t",[[27,"concat",["tickets.activities.summary.",[23,["highlightType"]]],null]],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[7,"div"],[11,"class","ticket-details__item__content clearfix"],[9],[0,"\\n  "],[7,"div"],[11,"class","text-content-wrapper"],[9],[0,"\\n    "],[7,"div"],[11,"class","col-md-8 text__content"],[11,"data-test-activity-item",""],[9],[0,"\\n      "],[7,"ul"],[11,"class","activity-details text-list"],[11,"data-test-activity-desc",""],[11,"data-test-id","list-of-actions"],[9],[0,"\\n"],[4,"if",[[23,["activity","showNewTicketString"]]],null,{"statements":[[0,"          "],[7,"li"],[11,"data-test-id","new-ticket-info"],[11,"data-test-activity-desc",""],[11,"class","text-list__item"],[9],[0,"\\n            "],[1,[27,"t",["tickets.activities.actions.new_ticket"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[23,["activity","actions"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/activity/actions",null,[["dateTime","isObserverRule","action"],[[23,["activity","performedAt"]],[23,["isObserverRule"]],[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/activity/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/add-child/component",["exports","ember-concurrency","freshdesk/utils/blank-array","freshdesk/constants/ticket"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i="/api/_/ticket_templates",a=Ember.Component.extend({store:Ember.inject.service(),ajax:Ember.inject.service(),i18n:Ember.inject.service(),flashMessages:Ember.inject.service(),classNames:["__module-tickets__ticket-details__add-child"],isFirstScreen:!0,isSelected:!0,selectedParentTemplate:null,templateAvailable:!0,isLoading:Ember.computed.not("getParentTemplates.isIdle"),isChildLoading:Ember.computed.not("getChildTemplates.isIdle"),parentTemplates:(0,s.default)(),childTemplates:(0,s.default)(),selectedChildIds:(0,s.default)(),selectedChildsCount:Ember.computed.reads("selectedChilds.length"),recentTemplates:Ember.computed("parentTemplates",(function(){var e=Ember.get(this,"recentTemplatesIds"),t=Ember.get(this,"parentTemplates"),s=[],n=[];return e.forEach((function(e){var i=t.findBy("id",e);i&&(n.push(i.id),s.push(i))})),this.resetRecentCache(n),s})),allowedChildsCount:Ember.computed("ticket.associatedTicketsCount",(function(){var e=Ember.get(this,"ticket.associatedTicketsCount");return n.MAX_CHILD_COUNT-e})),selectedChilds:Ember.computed("childTemplates.@each.{isSelected}",(function(){return Ember.get(this,"childTemplates").filterBy("isSelected",!0)})),selectedChildsIds:Ember.computed.map("selectedChilds",(function(e){return e.id})),canSelectMoreChilds:Ember.computed("selectedChildsCount","allowedChildsCount",(function(){return Ember.get(this,"selectedChildsCount")<Ember.get(this,"allowedChildsCount")})),recentTemplatesIds:Ember.computed("selectedParentTemplate",(function(){return this.localcache&&this.localcache.getFromCache("recent_parent_templates")||[]})),init:function(){this._super.apply(this,arguments),this.sendAction("modalLoaded"),Ember.get(this,"getParentTemplates").perform()},actions:{showChildTemplates:function(e){this.toggleProperty("isFirstScreen"),Ember.set(this,"selectedParentTemplate",e),Ember.get(this,"getChildTemplates").perform(e.id)},back:function(){this.reloadTemplateList()},create:function(){var e=this,t=Ember.get(this,"ticket"),s={parent_template_id:Ember.get(this,"selectedParentTemplate.id"),child_template_ids:Ember.get(this,"selectedChildsIds")};t.createChildWithTemplate(s).then((function(){return e._handleBulkCreateResponse()}))},changeChildSelection:function(){var e=this,t=Ember.get(this,"childTemplates").map((function(t){return Ember.get(e,"canSelectMoreChilds")?Ember.set(t,"canSelect",!0):Ember.get(t,"isSelected")||Ember.set(t,"canSelect",!1),t}));Ember.set(this,"childTemplates",t)}},_saveAsRecentTemplate:function(){var e=this.localcache.getFromCache("recent_parent_templates")||[],t=Ember.get(this,"selectedParentTemplate.id");(e=e.filter((function(e){return e!==t}))).length<n.MAX_CHILD_COUNT||e.pop(),e.unshift(t),this.localcache&&this.localcache.addToCache("recent_parent_templates",e)},getParentTemplates:(0,t.task)(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={filter:"accessible",type:"only_parent"},e.next=3,Ember.get(this,"ajax").request("".concat(i),{method:"GET",data:t});case 3:s=e.sent,Ember.set(this,"parentTemplates",s.ticket_templates);case 5:case"end":return e.stop()}}),e,this)}))).restartable(),getChildTemplates:(0,t.task)(regeneratorRuntime.mark((function e(t){var s,n,a,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={type:"only_parent"},e.prev=1,e.next=4,Ember.get(this,"ajax").request("".concat(i,"/").concat(t),{method:"GET",data:s});case 4:n=e.sent,a=Ember.get(this,"allowedChildsCount"),r=1,l=n.ticket_template.child_templates.map((function(e){return r<=a?Ember.setProperties(e,{isSelected:!0,canSelect:!0}):Ember.setProperties(e,{isSelected:!1,canSelect:!1}),r++,e})),Ember.set(this,"childTemplates",l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this._failure();case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))).restartable(),_handleBulkCreateResponse:function(){this._saveAsRecentTemplate(),this.updateTicketProperties(),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("tickets.ticket_associations.child.add_using_templates.success")),this.sendAction("close")},updateTicketProperties:function(){var e=Ember.get(this,"ticket"),t={ticket:{id:Ember.get(e,"id"),association_type:1,associated_tickets_count:Ember.get(e,"associatedTicketsCount")+Ember.get(this,"selectedChilds.length")}};Ember.get(this,"store").pushPayload(t)},reloadTemplateList:function(){Ember.set(this,"selectedParentTemplate",null),Ember.get(this,"getParentTemplates").perform(),this.toggleProperty("isFirstScreen")},_failure:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("tickets.ticket_associations.template_list.error")),this.reloadTemplateList()},resetRecentCache:function(e){this.localcache&&this.localcache.addToCache("recent_parent_templates",e)}});e.default=a})),define("freshdesk/components/module-tickets/ticket-details/add-child/template-item/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({tagName:"ul",classNameBindings:["testId"],attributeBindings:["data-test-id","title"],title:Ember.computed.reads("testId"),"data-test-id":Ember.computed.reads("testId")});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/add-child/template-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"UBkfIRVv",block:'{"symbols":["template"],"statements":[[4,"each",[[23,["templateList"]]],null,{"statements":[[0,"  "],[7,"li"],[9],[0,"\\n    "],[1,[27,"svg-jar",["parent"],[["class"],["app-icon app-icon--medium pull-left"]]],false],[0,"\\n"],[4,"if",[[23,["showChildTemplates"]]],null,{"statements":[[0,"      "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["showChildTemplates"]],[22,1,[]]],null]],[11,"class","text--small ticket-subject text--antialias"],[9],[1,[27,"html-safe",[[22,1,["name"]]],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/add-child/template-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/add-child/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"zmgaCPob",block:'{"symbols":["template","index","template"],"statements":[[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n    "],[1,[27,"svg-jar",["add-child"],[["class"],["modal-icons"]]],false],[0,"\\n    "],[7,"span"],[11,"class","ml-10"],[9],[1,[27,"t",["tickets.ticket_associations.child.add_using_templates"],null],false],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"class","text--xsmall text--info inactive subtext"],[9],[1,[27,"t",["tickets.ticket_associations.child.add_using_templates.info_line"],null],false],[10],[0,"\\n"],[10],[0,"\\n\\n"],[4,"if",[[23,["isFirstScreen"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","parent-template-list-container"],[9],[0,"\\n"],[4,"ui-form/select-field",null,[["selected","onchange","searchField","multiple","options","allowCreate","placeholder"],[[23,["selectedParentTemplate"]],[27,"action",[[22,0,[]],"showChildTemplates"],null],"name",false,[23,["parentTemplates"]],false,[27,"t",["tickets.ticket_associations.template_list.filter.placeholder"],null]]],{"statements":[[0,"      "],[1,[27,"svg-jar",["parent"],[["class"],["app-icon app-icon--small pull-left mt-1 mr-10"]]],false],[0,"\\n      "],[7,"span"],[9],[0,"\\n        "],[1,[27,"html-safe",[[22,3,["name"]]],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[3]},null],[0,"\\n"],[4,"if",[[27,"gt",[[23,["recentTemplates","length"]],0],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","recently-used-templates"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/add-child/template-item",null,[["templateList","title","testId","showChildTemplates"],[[23,["recentTemplates"]],[27,"t",["common.recentlabel"],null],"recently-used",[27,"action",[[22,0,[]],"showChildTemplates"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[7,"div"],[11,"class","recently-used-templates"],[9],[0,"\\n"],[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"        "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/add-child/template-item",null,[["templateList","testId","title","showChildTemplates"],[[23,["parentTemplates"]],"all-templates",[27,"t",["tickets.ticket_associations.template_list.all_templates"],null],[27,"action",[[22,0,[]],"showChildTemplates"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","child-templates-list"],[9],[0,"\\n    "],[7,"div"],[11,"class","text__infotext modal_subtext pt-20 pb-20"],[9],[0,"\\n      "],[7,"button"],[11,"class","template-back"],[11,"type","button"],[3,"action",[[22,0,[]],"back"]],[9],[0,"\\n        "],[1,[27,"svg-jar",["back"],[["class"],["modal-icons app-icon--small app-icon--dark pull-left mr-2"]]],false],[0,"\\n        "],[1,[27,"t",["common.back"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"ul"],[9],[0,"\\n      "],[7,"li"],[11,"class","parent-title"],[9],[0,"\\n        "],[1,[27,"svg-jar",["parent"],[["class"],["app-icon app-icon--medium pull-left"]]],false],[0,"\\n        "],[7,"span"],[11,"class","text--small template-title"],[9],[1,[27,"html-safe",[[23,["selectedParentTemplate","name"]]],null],false],[10],[0,"\\n\\n        "],[7,"ul"],[11,"class","child-list"],[9],[0,"\\n"],[4,"if",[[23,["isChildLoading"]]],null,{"statements":[[0,"            "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"each",[[23,["childTemplates"]]],null,{"statements":[[0,"              "],[7,"li"],[9],[0,"\\n                "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","value","disabled","onchange"],[[27,"concat",[[22,1,["name"]],[22,2,[]],[22,1,["id"]]],null],[22,1,["isSelected"]],[27,"not",[[22,1,["canSelect"]]],null],[27,"action",[[22,0,[]],"changeChildSelection"],null]]]],false],[0,"\\n                "],[7,"span"],[12,"class",[28,["text--small text--dark ",[27,"if",[[22,1,["isSelected"]],"","unchecked"],null]]]],[9],[1,[27,"html-safe",[[22,1,["name"]]],null],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[1,2]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","modal-footer form_submission second-footer"],[9],[0,"\\n    "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"type","button"],[3,"action",[[22,0,[]],"back"]],[9],[0,"\\n      "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n    "],[10],[0,"\\n    "],[1,[27,"async-button",null,[["action","default","disableWhen","class"],[[27,"action",[[22,0,[]],"create"],null],[27,"t",["async.button.submit.tracker"],null],[27,"not",[[23,["selectedChildsCount"]]],null],"btn btn--primary"]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/add-child/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/add-time/component",["exports","ember-cp-validations","@freshdesk/common/utils/time-util","freshdesk/mixins/tickets/time-entry","freshdesk/mixins/integrations/time-apps","freshdesk/constants/ticket"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=["setValue_timerAgentId","setValue_timerSetTime","setValue_timerBillable","setValue_timerExecuteAt","setValue_timerNote"],l=Ember.Component.extend(n.default,i.default,{eventSources:Ember.inject.service(),moment:Ember.inject.service(),store:Ember.inject.service(),marketplace:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),timeEntryValidations:Ember.computed("timeEntry.isNew","executedToday",(function(){var e=this;return(0,t.buildValidations)({timeSpentDisp:[(0,t.validator)("presence",{presence:Ember.computed("model.{executedAt,timeSpentDisp}",(function(){if(Ember.get(e,"isAHTEnabled"))return!0;var t=s.default.isToday(Ember.get(this,"model.executedAt"),Ember.get(this,"model.moment"));return Boolean(Ember.get(this,"model.timeSpentDisp"))||!(Ember.get(this,"model.isNew")&&t)}))}),(0,t.validator)("hours-minutes",{isZeroAllowed:!0,invalidMessage:Ember.get(this,"i18n").t("timeentry.invalidMessage"),zeroMessage:Ember.get(this,"i18n").t("timeentry.zeroMessage")})]})})),executedToday:Ember.computed("timeEntry.executedAt",(function(){return s.default.isToday(Ember.get(this,"timeEntry.executedAt"),Ember.get(this,"moment"))})),isAHTEnabled:Ember.computed("currentAccount.accountData.{features.[],launched.[]}",(function(){return this.currentAccount.mandatesEnabled({mandatoryFeatures:a.AHT_MANDATES.features,mandatoryLaunchParties:a.AHT_MANDATES.launchParties})})),hintText:Ember.computed("timeEntry.timeSpentDisp","executedToday","isAHTEnabled",(function(){return Ember.get(this,"timeEntry.isNew")?Ember.get(this,"isAHTEnabled")||Ember.get(this,"timeEntry.timeSpentDisp")||!Ember.get(this,"executedToday")?(Ember.set(this,"saveText",Ember.get(this,"i18n").t("timeentry.save")),Ember.get(this,"i18n").t("ticket.details.timeentry.decimal.hint")):(Ember.set(this,"saveText",Ember.get(this,"i18n").t("timeentry.starttimer")),Ember.get(this,"i18n").t("ticket.details.timeentry.autotimer")):(Ember.set(this,"saveText",Ember.get(this,"i18n").t("timeentry.update")),Ember.get(this,"i18n").t("ticket.details.timeentry.decimal.hint"))})),agents:Ember.computed((function(){return Ember.get(this,"store").peekAll("agent")})),didInsertElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").registerControls("timeEntryInterface")},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"mkpInterface").deregisterControls("timeEntryInterface");for(var e=0;e<r.length;e++)Ember.get(this,"marketplace").off(r[e]);Ember.set(this,"timerAppActivated",!0)},init:function(){this._super.apply(this,arguments),this.initializeTimeEntry();for(var e=0;e<r.length;e++)Ember.get(this,"marketplace").on(r[e],this.setTimeValue.bind(this))},actions:{registerTimeEntryHook:function(e){Ember.get(this,"timeEntryHooks").push(e)},cancel:function(){Ember.get(this,"timeEntry").rollbackAttributes(),this.sendAction("onClose")},save:function(){var e=Ember.get(this,"timeEntry");return e.isNew?this.saveTimeEntry(e):this.updateTimeEntry(e)},onTimeSpentChange:function(e){Ember.set(this,"timeEntry.timeSpentDisp",e)}},updateTimeEntry:function(e){var t=this,s=Ember.get(e,"timeSpentDisp");Ember.set(e,"timeSpent",this.getTimeSpentFromString(s));var n=function(){Ember.get(t,"timeEntryHooks").forEach((function(t){t(e)})),t.flashMessages.success(Ember.get(t,"i18n").t("timeentry.update.success")),t.sendAction("onClose")},i=Ember.get(this,"eventSources").getModelHash(e);return Ember.get(this,"marketplace").publishEvent({event:"ticket.updateTimer",data:i}),Ember.get(e,"hasDirtyAttributes")?e.save().then(n,(function(){Ember.set(e,"agentId","".concat(Ember.get(e,"agentId"))),t.flashMessages.danger(Ember.get(t,"i18n").t("timeentry.failure"))})):n()}});e.default=l})),define("freshdesk/components/module-tickets/ticket-details/add-time/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"RvWhB5TX",block:'{"symbols":["f","app"],"statements":[[1,[27,"marketplace-list",null,[["mkpPlaceholder","context","pageType"],["time_entry_background",[23,["ticket","id"]],"ticket"]]],false],[0,"\\n"],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[1,[27,"svg-jar",["add-timer"],[["class"],["modal-icons"]]],false],[0," "],[1,[27,"if",[[23,["timeEntry","isNew"]],[27,"t",["timer.add-time"],null],[27,"t",["timer.edit-time"],null]],null],false],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","modal-content show"],[9],[0,"\\n"],[4,"ui-form/form-for",[[23,["timeEntry"]],[23,["timeEntryValidations"]]],[["submit"],[[27,"action",[[22,0,[]],"save"],null]]],{"statements":[[0,"    "],[7,"div"],[11,"class","add-time"],[9],[0,"\\n"],[4,"unless",[[23,["mkpInterface","controlData","timerAgentId","hide"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[22,1,["select-field"]],"agentId"],[["placeholder","label","hideDefaultOption","options","optionLabelPath","optionValuePath","disabled"],[[27,"t",["fd.agent"],null],[27,"t",["fd.agent"],null],true,[23,["agents"]],"name","id",[23,["mkpInterface","controlData","timerAgentId","disable"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["mkpInterface","controlData","timerSetTime","hide"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[22,1,["text-field"]],"timeSpentDisp"],[["oninput","label","isRequired","hint","disabled","autofocus"],[[27,"action",[[22,0,[]],"onTimeSpentChange"],null],"HH:MM",[27,"or",[[27,"not",[[23,["executedToday"]]],null],[23,["isAHTEnabled"]]],null],[23,["hintText"]],[23,["mkpInterface","controlData","timerSetTime","disable"]],true]]],false],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["mkpInterface","controlData","timerBillable","hide"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[22,1,["checkbox-field"]],"billable"],[["label","disabled"],[[27,"t",["timer.billable"],null],[23,["mkpInterface","controlData","timerBillable","disable"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["mkpInterface","controlData","timerExecuteAt","hide"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[22,1,["date-field"]],"executedAt"],[["label","format","disabled"],[[27,"t",["fd.on"],null],[23,["currentAccount","timeFormat","date"]],[23,["mkpInterface","controlData","timerExecuteAt","disable"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["mkpInterface","controlData","timerNote","hide"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[22,1,["textarea-field"]],"note"],[["updateOnInput","autoresize","max-rows","label","disabled","resetTimeNote"],[true,true,15,[27,"t",["fd.note"],null],[23,["mkpInterface","controlData","timerNote","disable"]],[23,["resetTimeNote"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[23,["apps"]]],null,{"statements":[[0,"        "],[1,[27,"component",[[27,"concat",["integration-apps/",[22,2,["name"]]],null]],[["app","timeEntry","ticket","isEdit","registerHook"],[[22,2,[]],[23,["timeEntry"]],[23,["ticket"]],[27,"not",[[23,["timeEntry","isNew"]]],null],[27,"action",[[22,0,[]],"registerTimeEntryHook"],null]]]],false],[0,"\\n"]],"parameters":[2]},null],[0,"\\n      "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n        "],[7,"button"],[11,"name","button"],[11,"data-test-addTime","cancel"],[11,"class","btn btn--secondary"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n          "],[1,[27,"t",["common.cancel"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","pull-right"],[11,"data-test-addTime","save"],[9],[0,"\\n          "],[1,[27,"component",[[22,1,["submit"]]],[["default"],[[23,["saveText"]]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[1]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/add-time/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/add-watcher/component",["exports","freshdesk/utils/blank-array","freshdesk/mixins/shortcuts/ticket-details/add-watcher"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(s.default,{store:Ember.inject.service(),shortcutsTooltip:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),tagName:"",truncateLimit:20,scenarioWatchers:!1,currentWatchers:(0,t.default)(),nonWatcherAgents:Ember.computed.setDiff("agentListIds","currentWatchers"),watcherCount:Ember.computed.reads("currentWatchers.length"),userID:Ember.computed((function(){return Ember.get(this.currentUser,"id").toString()})),allAgents:Ember.computed((function(){return Ember.get(this,"store").peekAll("agent")})),agentListIds:Ember.computed.map("allAgents",(function(e){return parseInt(Ember.get(e,"id"))})),agentsWatching:Ember.computed("currentWatchers.[]",{get:function(){var e=Ember.get(this,"allAgents"),t=Ember.get(this,"currentWatchers"),s=Ember.get(this,"agentListIds");return t.map((function(t){var n=s.indexOf(t);return e.objectAt(n)}))}}),searchAbleAgents:Ember.computed("nonWatcherAgents.[]",(function(){var e=Ember.get(this,"allAgents"),t=Ember.get(this,"agentListIds");return Ember.get(this,"nonWatcherAgents").map((function(s){var n=t.indexOf(s);return{id:s,name:Ember.get(Ember.get(e.objectAt(n),"contact"),"name")}}))})),isCurrentAgentWatching:Ember.computed("currentWatchers.[]",(function(){var e=Ember.get(this.currentUser,"id");return Ember.get(this,"currentWatchers").includes(e)})),didUpdateAttrs:function(){var e=this;this._super.apply(this,arguments),Ember.run.later((function(){Ember.get(e,"currentWatchers")&&Ember.set(e,"currentWatchers",[])}))},didReceiveAttrs:function(){var e=this;this._super.apply(this,arguments),Ember.run.later(this,(function(){e.getCurrentWatchers()}),800)},actions:{dummyAction:function(){return!1},removeWatcher:function(){this.unWatch()},addAgent:function(){this.addNewWatcher({id:Ember.get(this.currentUser,"id")})},onChange:function(e){this.addNewWatcher(e)},toggleWatcher:function(){Ember.get(this,"isCurrentAgentWatching")?this.unWatch():this.send("addAgent")}},getCurrentWatchers:function(){Ember.get(this,"ticket").watchers().then(this._getCurrentWatchersCB.bind(this))},_getCurrentWatchersCB:function(e){this.isDestroyed||this.isDestroying||Ember.set(this,"currentWatchers",e.data.watcher_ids)},addNewWatcher:function(e){var t=Ember.get(this,"ticket"),s=Number(e.id);Ember.$(".dropdown-addwatcher .m-spinner-holder").fadeIn(),t.addWatcher({user_id:s}).then(this._addNewWatcherCB.bind(this,s))},_addNewWatcherCB:function(e){var t=Ember.get(this,"currentWatchers");t.pushObject(e),Ember.set(this,"currentWatchers",t),Ember.$(".dropdown-addwatcher .m-spinner-holder").fadeOut()},unWatch:function(){Ember.$(".dropdown-addwatcher .m-spinner-holder").fadeIn(),Ember.get(this,"ticket").unWatch().then(this._unWatchCB.bind(this))},_unWatchCB:function(){var e=Ember.get(this,"currentWatchers"),t=Ember.get(this.currentUser,"id"),s=e.indexOf(t);e.removeAt(s),Ember.set(this,"currentWatchers",e),Ember.$(".dropdown-addwatcher .m-spinner-holder").fadeOut()}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/add-watcher/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"WE7AW8IV",block:'{"symbols":["dropdown","watcher","option"],"statements":[[7,"div"],[11,"class","addwatcher dropdown app-dropdown-group"],[9],[0,"\\n"],[4,"basic-dropdown",null,[["renderInPlace"],[true]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["onFocus"],[[27,"action",[[22,0,[]],[22,1,["actions","open"]]],null]]],{"statements":[[0,"      "],[7,"button"],[11,"data-test-actions","watcher"],[12,"aria-label",[23,["shortcutsTooltip","ticketDetail","watcher"]]],[12,"class",[28,["dropdown-toggle hint--rounded hint--top app-icon-btn watcher-icon ",[27,"if",[[23,["isCurrentAgentWatching"]],"agent-added","agent-removed"],null]," "]]],[9],[0,"\\n        "],[1,[27,"svg-jar",["watcher"],[["class"],["app-icon"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"      "],[7,"ul"],[11,"class","dropdown-menu dropdown-addwatcher"],[11,"aria-labelledby","dropdownMenu1"],[3,"action",[[22,0,[]],"dummyAction"],[["bubbles"],[false]]],[9],[0,"\\n        "],[7,"li"],[11,"class","dropdown-addwatcher__watcherlist"],[9],[0,"\\n          "],[7,"div"],[11,"class","text--semibold"],[9],[0,"\\n            "],[7,"span"],[9],[0,"\\n              "],[1,[27,"t",["ticket.watchers"],null],false],[0,"\\n"],[4,"if",[[23,["watcherCount"]]],null,{"statements":[[0,"                ("],[1,[21,"watcherCount"],false],[0,")\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n"],[4,"unless",[[23,["isCurrentAgentWatching"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","addwatcher__addme text__link text--xsmall text__infotext"],[3,"action",[[22,0,[]],"addAgent"]],[9],[1,[27,"t",["ticket.addme"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n          "],[7,"div"],[11,"class","text--info dropdown-addwatcher_info"],[9],[1,[27,"t",["tickets.add_watcher_info"],null],false],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"li"],[11,"class","dropdown-addwatcher__watcherlist input has-content watcher-selectlist"],[9],[0,"\\n"],[4,"ui-form/select-field",null,[["onchange","searchField","options","value","placeholder","multiple"],[[27,"action",[[22,0,[]],"onChange"],null],"name",[23,["searchAbleAgents"]],[23,["agentValue"]],"Search",false]],{"statements":[[0,"            "],[7,"span"],[11,"class","removewatcher watcherlist cursor-pointer"],[9],[1,[27,"svg-jar",["add"],[["class"],["app-icon app-icon--smallsecondary vertical-align"]]],false],[10],[0,"\\n            "],[7,"span"],[11,"class","watcherlist ml-5"],[9],[0,"\\n              "],[1,[27,"app-components/avatar-user",null,[["user","class"],[[22,3,[]],"app-user-photo--small"]]],false],[0,"\\n            "],[10],[0,"\\n"],[4,"if",[[27,"eq",[[23,["agentInfo","id"]],[22,3,["id"]]],null]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","watcherlist watcher-name"],[9],[0,"("],[1,[27,"t",["tickets.filter.agent.me"],null],false],[0,") "],[1,[27,"html-safe",[[27,"truncate",[[27,"html-escape",[[22,3,["name"]]],null],[23,["truncateLimit"]],true,true,"hint--top hint--medium"],null]],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[11,"class","watcherlist watcher-name"],[9],[1,[27,"html-safe",[[27,"truncate",[[27,"html-escape",[[22,3,["name"]]],null],[23,["truncateLimit"]],true,true,"hint--top hint--medium"],null]],null],false],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[3]},null],[0,"        "],[10],[0,"\\n        "],[7,"div"],[11,"class","existing-watchers"],[9],[0,"\\n"],[4,"each",[[23,["agentsWatching"]]],null,{"statements":[[4,"if",[[27,"eq",[[22,2,["id"]],[23,["userID"]]],null]],null,{"statements":[[0,"              "],[7,"li"],[11,"class","dropdown-addwatcher__watcherlist"],[9],[0,"\\n                "],[7,"span"],[12,"aria-label",[27,"t",["tickets.unwatch"],null]],[11,"class","removewatcher hint--rounded hint--right cursor-pointer"],[3,"action",[[22,0,[]],"removeWatcher"]],[9],[0,"\\n                  "],[1,[27,"svg-jar",["remove"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[9],[0,"\\n                  "],[1,[27,"app-components/avatar-user",null,[["user","size"],[[22,2,["contact"]],"medium"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[11,"class","watchername"],[9],[1,[27,"t",["tickets.filter.agent.me"],null],false],[0," ("],[1,[27,"html-safe",[[27,"truncate",[[27,"html-escape",[[22,2,["contact","name"]]],null],[23,["truncateLimit"]],true,true,"hint--top hint--medium"],null]],null],false],[0,")"],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"li"],[11,"class","dropdown-addwatcher__watcherlist"],[9],[0,"\\n                "],[7,"span"],[11,"class","removewatcher removewatcher-hidden"],[9],[0,"\\n                  "],[1,[27,"svg-jar",["remove"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[9],[0,"\\n                  "],[1,[27,"app-components/avatar-user",null,[["user","size"],[[22,2,["contact"]],"medium"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[11,"class","watchername"],[9],[1,[27,"html-safe",[[27,"truncate",[[27,"html-escape",[[22,2,["contact","name"]]],null],[23,["truncateLimit"]],true,true,"hint--top hint--medium"],null]],null],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[2]},null],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/add-watcher/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/agent-collision/agents-replying/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["agent-collision-reply","pl-16"],maxStringLength:18,actions:{prevent:function(){return!1},open:function(e){this.closeTimer?(Ember.run.cancel(this.closeTimer),this.closeTimer=null):e.actions.open()},closeLater:function(e){var t=this;this.closeTimer=Ember.run.later((function(){t.closeTimer=null,e.actions.close()}),100)}},calculatePosition:function(){return!1}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/agent-collision/agents-replying/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"xYHNno5a",block:'{"symbols":["dd","agent"],"statements":[[4,"if",[[27,"eq",[[23,["agentsReplying","length"]],1],null]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","agent-collision-reply-count"],[9],[0,"\\n    "],[1,[27,"ellipsis-text",[[23,["agentsReplying","firstObject","userName"]],[23,["maxStringLength"]]],null],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"class","text__infotext"],[9],[1,[27,"t",["ticket.details.is_typing"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"gt",[[23,["agentsReplying","length"]],1],null]],null,{"statements":[[4,"basic-dropdown",null,[["verticalPosition","renderInPlace"],["above","true"]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["onMouseDown","onMouseEnter","onMouseLeave","class"],[[27,"action",[[22,0,[]],"prevent"],null],[27,"action",[[22,0,[]],"open"],null],[27,"action",[[22,0,[]],"closeLater"],null],"agent-collision-reply-count"]],{"statements":[[0,"      "],[1,[23,["agentsReplying","length"]],false],[0," "],[1,[27,"t",["fd.agents"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"span"],[11,"class","text__infotext"],[9],[0," "],[1,[27,"t",["ticket.details.are_typing"],null],false],[0," "],[10],[0,"\\n"],[4,"component",[[22,1,["content"]]],[["onMouseEnter","onMouseLeave"],[[27,"action",[[22,0,[]],"open"],null],[27,"action",[[22,0,[]],"closeLater"],null]]],{"statements":[[4,"each",[[23,["agentsReplying"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","agent-collision-reply-options"],[9],[0,"\\n          "],[1,[27,"ellipsis-text",[[22,2,["userName"]],[23,["maxStringLength"]]],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[1]},null]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[27,"gt",[[23,["agentsReplying","length"]],0],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","jumping-dots"],[9],[0,"\\n    "],[7,"span"],[11,"class","jumping-dots__dot"],[9],[10],[0,"\\n    "],[7,"span"],[11,"class","jumping-dots__dot"],[9],[10],[0,"\\n    "],[7,"span"],[11,"class","jumping-dots__dot"],[9],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/agent-collision/agents-replying/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/agent-collision/agents-viewing/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["agent_collision pull-right collision__agents-viewing"]});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/agent-collision/agents-viewing/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Gy6KTeoX",block:'{"symbols":[],"statements":[[1,[27,"module-tickets/shared/collision-dropdown-hover",null,[["agents","icon","testIdentifier","direction","headerText"],[[23,["agentsViewing"]],"eye","agentcollision-viewing","below","ticket.details.currentlyviewing"]]],false],[0,"\\n"],[1,[27,"module-tickets/shared/collision-dropdown-hover",null,[["agents","icon","testIdentifier","direction","headerText"],[[23,["agentsReplying"]],"typing","agentcollision-replying","below","ticket.details.currentlyreplying"]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/agent-collision/agents-viewing/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/auto-refresh/conversation/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/auto-refresh/conversation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"rIUe8UAy",block:'{"symbols":[],"statements":[[4,"ui-components/refresh-notification",null,[["showNotification","notificationButtonClicked"],[[23,["conversationCount"]],[23,["fetchNewConversations"]]]],{"statements":[[0,"  "],[7,"span"],[11,"class","refresh-notification__container__count"],[11,"data-test-id","new-conversation-count"],[9],[1,[21,"conversationCount"],false],[10],[0,"\\n  "],[7,"span"],[11,"class","refresh-notification__container__label"],[9],[0," "],[1,[27,"t",["ticket.details.auto_refresh.new_conversations"],[["count"],[[23,["conversationCount"]]]]],false],[0," "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/auto-refresh/conversation/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/bot-suggested-articles/component",["exports","ember-concurrency"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),currentAccount:Ember.inject.service(),classNames:["article-view"],classNameBindings:["articleFocussed:no-border"],showSolutionArticle:!1,articleData:"",solutionArticle:null,showArticleCord:!1,folderTitle:Ember.computed.reads("article.folder_title"),articleFocussed:Ember.computed("showArticleCord","solutionArticle",(function(){return Ember.get(this,"showArticleCord")&&Ember.isPresent(Ember.get(this,"solutionArticle"))})),isArticleVisible:Ember.computed("solutionArticle",(function(){return 1===Ember.get(this,"solutionArticle.folderVisibility")&&2===Ember.get(this,"solutionArticle.status")})),actions:{showSuggestedArticle:function(){this.send("toggleSuggestedArticle")},toggleSuggestedArticle:function(){this.toggleProperty("showSolutionArticle")},showArticleCard:function(){var e=Ember.get(this,"article.id"),t=Ember.get(this,"store").peekRecord("article",parseInt(e));Ember.isEmpty(t)?Ember.get(this,"fetchArticle").perform():Ember.set(this,"solutionArticle",t),Ember.set(this,"showArticleCord",!0)},closeArticleCard:function(){Ember.set(this,"showArticleCord",!1)},insertData:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"link"===t&&(s='<a href="https://'.concat(Ember.get(this,"currentAccount.fullDomain"),"/support/solutions/articles/").concat(Ember.get(this,"article.id"),'" target="_blank" rel="noopener" data-test-article-title>').concat(Ember.get(this,"article.title"),"</a>")),Ember.get(this,"insertDataToReply")(e,s)}},fetchArticle:(0,t.task)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ember.get(this,"store").queryRecord("article",{ids:Ember.get(this,"article.id"),user_id:Ember.get(this,"currentUser.id"),language_id:Ember.get(this,"currentAccount.portalLanguages.firstObject.id")});case 2:t=e.sent,Ember.set(this,"solutionArticle",t);case 4:case"end":return e.stop()}}),e,this)})))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/bot-suggested-articles/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"TOBE4oi5",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","article-container"],[11,"data-test-article-container",""],[11,"data-test-id","article-container"],[12,"onmouseenter",[27,"action",[[22,0,[]],"showArticleCard"],null]],[12,"onmouseleave",[27,"action",[[22,0,[]],"closeArticleCard"],null]],[9],[0,"\\n  "],[7,"div"],[11,"tabindex","0"],[11,"class","article-list"],[11,"data-test-id","articles-list"],[12,"onclick",[27,"action",[[22,0,[]],"showArticleCard"],null]],[9],[0,"\\n    "],[7,"div"],[12,"class",[28,["text--extra-bold mb-16 ellipsis article-title article-id-",[23,["article","id"]]]]],[9],[0,"\\n      "],[1,[23,["article","title"]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","article-folder ellipsis"],[9],[0,"\\n      "],[1,[27,"svg-jar",["folder"],[["class"],["app-icon app-icon--small folder-icon"]]],false],[0,"\\n      "],[7,"span"],[11,"class","solution-folder__title ellipsis text--normal"],[9],[1,[23,["article","folder_title"]],false],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"if",[[23,["articleFocussed"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"tabindex","0"],[11,"class","show-article-chord"],[11,"data-test-id","show-article-chord"],[9],[0,"\\n      "],[7,"div"],[11,"class","article-header"],[9],[0,"\\n        "],[7,"div"],[12,"class",[28,["article-title mb-10 article-id-",[23,["article","id"]]]]],[9],[0,"\\n          "],[7,"span"],[11,"class","article-topic text--extra-bold"],[11,"data-test-id","article-topic"],[12,"onclick",[27,"action",[[22,0,[]],"showSuggestedArticle"],null]],[9],[1,[27,"truncate",[[23,["article","title"]],120,true],null],false],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","article-folder ellipsis"],[9],[0,"\\n          "],[1,[27,"svg-jar",["folder"],[["class"],["app-icon app-icon--small folder-icon"]]],false],[0,"\\n          "],[7,"span"],[11,"class","solution-folder__title ellipsis text--normal"],[9],[1,[23,["article","folder_title"]],false],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","article-description mb-10"],[9],[0,"\\n        "],[7,"span"],[11,"class","description-text text--normal"],[9],[0,"\\n          "],[1,[27,"truncate",[[23,["solutionArticle","descriptionText"]],150,true],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[27,"gt",[[23,["solutionArticle","descriptionText","length"]],150],null]],null,{"statements":[[0,"          "],[7,"a"],[11,"class","see-more"],[11,"data-test-id","see-more"],[12,"onclick",[27,"action",[[22,0,[]],"showSuggestedArticle"],null]],[9],[1,[27,"t",["fd.see-more"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","action-bar-btn"],[9],[0,"\\n"],[4,"if",[[23,["isArticleVisible"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"data-test-id","link-btn"],[12,"aria-label",[27,"t",["insert-solutions.link-label"],null]],[11,"class","hint--rounded hint--top app-icon-btn app-icon-btn--text view-btn"],[12,"onclick",[27,"action",[[22,0,[]],"insertData",[23,["article","id"]],"link",""],null]],[9],[0,"\\n            "],[1,[27,"svg-jar",["insert-link"],[["class"],["app-icon app-icon--small btn-label preview-icon"]]],false],[0,"\\n            "],[7,"span"],[11,"class","link-btn"],[9],[1,[27,"t",["insert-solutions.insert-link"],null],false],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"button"],[11,"data-test-id","content-btn"],[12,"aria-label",[27,"t",["insert-solutions.content-label"],null]],[11,"class","hint--rounded hint--top app-icon-btn app-icon-btn--text view-btn"],[12,"onclick",[27,"action",[[22,0,[]],"insertData",[23,["article","id"]],"content",[23,["solutionArticle","description"]]],null]],[9],[0,"\\n          "],[1,[27,"svg-jar",["new"],[["class"],["app-icon app-icon--small btn-label preview-icon"]]],false],[0,"\\n          "],[7,"span"],[11,"class","link-btn"],[9],[1,[27,"t",["insert-solutions.insert-content"],null],false],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showSolutionArticle"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","closeOnEscapse"],[[27,"action",[[22,0,[]],"toggleSuggestedArticle"],null],true,true]],{"statements":[[0,"      "],[1,[27,"module-tickets/shared/bot-suggested-article",null,[["article","folderTitle","isArticleVisible","ticket","insertData","toggleSuggestedArticle"],[[23,["solutionArticle"]],[23,["folderTitle"]],[23,["isArticleVisible"]],[23,["ticket"]],[27,"action",[[22,0,[]],"insertData"],null],[27,"action",[[22,0,[]],"toggleSuggestedArticle"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/bot-suggested-articles/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({showSolutionArticle:!1,articleData:"",solutionArticle:null,actions:{closeModel:function(){this.sendAction("close")}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"xD/X0EoK",block:'{"symbols":["article"],"statements":[[4,"if",[[27,"and",[[23,["isBotResponseSuccessful"]],[23,["ticket","botResponse"]]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","ticket-details__bot bot-auto-suggestion mb-6"],[11,"data-test-id","bot-auto-suggestion"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-details__item__header clearfix"],[9],[0,"\\n      "],[7,"div"],[11,"class","freddy-header"],[9],[0,"\\n        "],[7,"div"],[11,"class","avatar--img-container mr-10"],[11,"data-test-id","bot-avatar-image"],[9],[0,"\\n          "],[7,"img"],[11,"class","freddy-img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/freddy/freddy_icon-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.png"],[12,"alt",[27,"t",["bot.profile_settings.choose_avatar"],null]],[9],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","description-subject text--extra-semibold"],[9],[1,[27,"t",["fd.freddy.suggestion"],null],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","model-close"],[11,"data-test-id","model-close"],[12,"onclick",[27,"action",[[22,0,[]],"closeModel"],null]],[9],[1,[27,"svg-jar",["close"],[["class"],["app-icon app-icon--small close-icon"]]],false],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-details__item bot-suggestions mb-0"],[9],[0,"\\n      "],[7,"div"],[11,"class","solution-article__suggestion ml-6 mb-10"],[9],[0,"\\n        "],[1,[27,"svg-jar",["solution-item"],[["class"],["app-icon app-icon--small solution-icon"]]],false],[0,"\\n        "],[7,"span"],[11,"class","solution-article__title"],[9],[1,[27,"t",["fd.solution.article.title"],null],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","suggested-articles"],[9],[0,"\\n"],[4,"each",[[23,["articles"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/bot-auto-suggestion/bot-suggested-articles",null,[["article","ticket","insertDataToReply"],[[22,1,[]],[23,["ticket"]],[23,["insertDataToReply"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/bot-auto-suggestion/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-response/bot-response-details/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({isArticleViewed:Ember.computed.reads("article.customer_feedback.opened"),isArticleUseful:Ember.computed.reads("article.customer_feedback.useful"),isFeedbackPresent:Ember.computed.notEmpty("article.customer_feedback.useful")});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-response/bot-response-details/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"2AcJiuya",block:'{"symbols":[],"statements":[[7,"li"],[11,"class","clearfix"],[11,"data-test-id","articles-list"],[9],[0,"\\n  "],[7,"p"],[11,"class","pull-left"],[9],[0,"\\n    "],[7,"a"],[12,"href",[28,["/a/solutions/articles/",[23,["article","id"]]]]],[11,"target","_blank"],[11,"rel","noopener"],[11,"data-test-article-title",""],[9],[0,"\\n      "],[1,[23,["article","title"]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"p"],[11,"class","status"],[11,"data-test-id","article-status"],[9],[0,"\\n"],[4,"if",[[23,["isArticleViewed"]]],null,{"statements":[[0,"        "],[1,[27,"svg-jar",["eye"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n        "],[7,"span"],[11,"class","text--xsmall bot-suggestion--viewed pr-6"],[11,"data-test-id","bot-suggestion--viewed"],[9],[0,"\\n          "],[1,[27,"t",["ticket.details.bot.suggestion.viewed"],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["isFeedbackPresent"]]],null,{"statements":[[4,"if",[[23,["isArticleUseful"]]],null,{"statements":[[0,"            "],[1,[27,"svg-jar",["thumbs-up"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n            "],[7,"span"],[11,"class","text--xsmall bot-suggestion--helpful"],[11,"data-test-id","bot-suggestion--helpful"],[9],[0,"\\n              "],[1,[27,"t",["ticket.details.bot.suggestion.helpful"],null],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"svg-jar",["thumbs-down"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n            "],[7,"span"],[11,"class","text--xsmall bot-suggestion--not-helpful"],[11,"data-test-id","bot-suggestion--not-helpful"],[9],[0,"\\n              "],[1,[27,"t",["ticket.details.bot.suggestion.not-helpful"],null],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/bot-response/bot-response-details/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-response/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__ticket-details__bot-response"],isTicketClosed:Ember.computed.reads("adviceSuggestResponse.helpful"),requesterName:Ember.computed.reads("ticket.requester.name")});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/bot-response/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ux6OklTD",block:'{"symbols":["article"],"statements":[[7,"div"],[11,"class","ticket-details__item bot-response-details"],[11,"data-test-id","bot-response-container"],[9],[0,"\\n  "],[7,"div"],[11,"class","bot-response-details--header element-flex"],[9],[0,"\\n    "],[7,"div"],[11,"class","avatar--img-container pt-6 pull-left"],[11,"data-test-id","bot-avatar-image"],[9],[0,"\\n      "],[7,"img"],[11,"class","freddy-img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/freddy/freddy_icon-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.png"],[12,"alt",[27,"t",["bot.profile_settings.choose_avatar"],null]],[9],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","heading-detail clearfix"],[9],[0,"\\n      "],[7,"p"],[11,"class","pull-left mr-4"],[9],[0,"\\n        "],[7,"span"],[11,"class","text--semibold"],[9],[1,[27,"t",["fd.freddy"],null],false],[10],[0,"\\n        "],[7,"span"],[11,"class","text--semibold"],[9],[1,[27,"t",["fd.admin.email-bot"],null],false],[10],[0,"\\n        "],[7,"span"],[11,"class","apply-primary"],[9],[1,[27,"t",["tickets.conversations.action.email-reply"],null],false],[0,","],[10],[0,"\\n        "],[7,"span"],[11,"class","bot-response-date-time"],[9],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["adviceSuggestResponse","suggested_at"]]]]],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","to-detail clearfix"],[9],[0,"\\n        "],[7,"p"],[11,"class","response-to text--semibold text-transform--lowercase"],[9],[1,[27,"t",["fd.to"],null],false],[0,":"],[10],[0,"\\n        "],[7,"p"],[11,"class","secondary-detail"],[9],[0,"\\n          "],[1,[23,["ticket","requester","email"]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","bot-reponse-details-content text--default"],[9],[0,"\\n    "],[7,"div"],[11,"data-test-requester-name",""],[9],[0,"\\n      "],[1,[27,"t",["fd.freddy"],null],false],[0,"\\n      "],[1,[27,"t",["ticket.details.bot.response.suggestion"],null],false],[0,"\\n      "],[1,[21,"requesterName"],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"ul"],[11,"class","bot-suggestions clearfix"],[9],[0,"\\n"],[4,"each",[[23,["adviceSuggestResponse","articles"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/bot-response/bot-response-details",null,[["class","article"],["bot-response-list",[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["isTicketClosed"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","ticket-closed text--xsmall"],[11,"data-test-id","ticket-closed-section"],[9],[0,"\\n      "],[7,"span"],[9],[1,[27,"svg-jar",["check-icon"],[["class"],["app-icon--medium success-icon"]]],false],[10],[0,"\\n      "],[7,"span"],[11,"class","ticket-close"],[9],[1,[27,"t",["ticket.details.bot.closed"],null],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/bot-response/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/broadcasted-message/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({manageLightbox:Ember.inject.service(),albumName:"broadcast-message",attributeBindings:["albumName:data-album"],classNames:["ticket-details__item broadcast-message","__module-tickets__ticket-details__broadcasted-message"],showInsertToReply:Ember.computed("ticket.isSocial",(function(){var e={model:Ember.get(this,"ticket"),abilities:["reply_ticket"]};return Ember.get(this,"currentUser").hasPermissions(e)&&!this.ticket.isSocial})),didRender:function(){this._super.apply(this,arguments),this.manageLightbox.removeInlineImages(this.albumName),this.manageLightbox.addInlineImages(this.albumName,this.imageSelector)},init:function(){this._super.apply(this,arguments),this.set("imageSelector","[data-album = '".concat(this.albumName,"'] .text__content img[src]"))},click:function(e){Ember.$(e.target).is("img.inline-image")&&this.manageLightbox.openInlineImage(Ember.$(e.target).attr("src"),this.albumName)}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/broadcasted-message/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"YRjncQOD",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","ticket-details__item__header conversation-header"],[9],[0,"\\n  "],[7,"div"],[11,"class","broadcast-icon-wrapper mt-4 avatar-icon avatar-icon--medium-secondary"],[9],[0,"\\n    "],[1,[27,"svg-jar",["broadcast"],[["class"],["broadcast-icon app-icon--xlarge"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","p0 max-width"],[9],[0,"\\n    "],[7,"div"],[11,"class","mail-details"],[9],[0,"\\n      "],[7,"div"],[11,"class","conversation-info-text clearfix sender-info"],[9],[0,"\\n        "],[7,"span"],[11,"data-test-id","conversation-status"],[11,"class","text--default text--extrabold text--dark"],[9],[0,"\\n          "],[1,[27,"t",["tickets.ticket_associations.link_tickets.broadcasted_message.info"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","created-time"],[9],[0,"\\n        "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["broadcast","created_at"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","ticket-details__item__content clearfix"],[9],[0,"\\n  "],[7,"div"],[11,"data-test-id","broadcast-wrapper"],[12,"class",[28,["ml-15 ticket-note-typography ",[27,"if",[[23,["showInsertToReply"]],"broadcast-body-wrapper"],null]]]],[11,"data-test-conversation","conversation-text"],[9],[0,"\\n    "],[7,"div"],[11,"class","text__content sanitizer-class"],[9],[0,"\\n      "],[1,[27,"html-safe",[[23,["broadcast","body"]]],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n\\n"],[4,"if",[[23,["showInsertToReply"]]],null,{"statements":[[0,"  "],[1,[27,"nucleus-button",null,[["data-test-id","data-test-email-action","class","variant","label","onClick"],["insert-to-reply-btn","reply","insert-message-link text--extrabold text--xsmall text--uppercase max-width","text",[27,"t",["tickets.ticket_associations.link_tickets.broadcasted_message.insert_to_reply"],null],[27,"action",[[22,0,[]],[23,["insertBroadcastToReply"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/broadcasted-message/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/component",["exports","ember-data","freshdesk/constants/integrations/integration","freshdesk/mixins/tickets/ticket-body-converstion","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/mixins/tickets/can-send-reply","freshdesk/mixins/tickets/block-requesters","freshdesk/mixins/integrations/installed-apps","freshdesk/utils/clear-flash-set","freshdesk/constants/flash-messages","freshdesk/mixins/sockets/agent-collision","freshdesk/mixins/sockets/agent-collision-rts","freshdesk/mixins/tickets/bulk-actions-helper","freshdesk/mixins/filter-list/controller/filter-query-methods","freshdesk/mixins/filter-list/ticket-filter-defaults","freshdesk/mixins/tickets/properties","freshdesk/mixins/tickets/wrap-email-notification-font","freshdesk/mixins/marketplace/interface/ticket-actions","freshdesk/mixins/marketplace/interface/editor-actions","freshdesk/mixins/details-sidebar-state","freshdesk/mixins/marketplace/interface/time-entry","freshdesk/mixins/slash-commands/remove-slash","freshdesk/mixins/tickets/service-task","ember-local-storage","freshdesk/utils/blank-array","freshdesk/utils/scan-for-attachment","freshdesk/mixins/inline-manual-topics","freshdesk/mixins/freshsales-integration","freshdesk/utils/camelcase-to-underscore","ember-concurrency","freshdesk/constants/ticket","@freshworks/ember-collaboration-threads/constants/thread","freshdesk/utils/ticket-field","freshdesk/utils/freshservice-integration","freshdesk/constants/application","freshdesk/mixins/components/pciFieldOperations","freshdesk/constants/static-url-list","freshdesk/constants/ticket-details-error-codes","freshdesk/constants/threads/ticket","@freshworks/pubsub-js","@freshdesk/common/constants/pubsub-event-types","freshdesk/classes/ticket-details-slider","freshdesk/utils/custom-objects","freshdesk/constants/custom-objects"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h,f,b,k,g,v,E,y,_,T,C,w,A,x,S,F,P,I,R,D,M,O,N,j,q,L,B,U,V,H){function W(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var z=t.default.PromiseObject,K={queryParams:{collab:void 0,message:void 0}},Q=["twitter","facebook","ecommerce","whatsapp"],Y={description:"ticket_original_request",note:"ticket_note"},J={twitter:"twitterReply",facebook:"facebookReply",ecommerce:"ecommerceReply",whatsapp:"whatsAppReply"},X={features:["collision","average_handling_time_toggle","average_handling_time"],launchParties:["launch_average_handling_time","agent_collision_revamp"]},Z="aht_view",$="aht_start",ee="aht_stop",te=Ember.Component.extend(n.default,i.default,a.default,r.default,l.default,d.default,m.default,u.default,p.default,h.default,f.default,k.default,v.default,E.default,g.default,y.default,A.default,x.default,b.default,_.default,O.default,{i18n:Ember.inject.service(),ajax:Ember.inject.service(),store:Ember.inject.service(),marketplace:Ember.inject.service(),marketplaceAdapter:Ember.inject.service(),heap:Ember.inject.service(),eventSources:Ember.inject.service(),scroller:Ember.inject.service(),integration:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),editorAttachment:Ember.inject.service("editor-attachment"),notifications:Ember.inject.service(),onboarding:Ember.inject.service(),threadSlider:Ember.inject.service(),collabThread:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),navigationAlert:Ember.inject.service(),collabThreadTickets:Ember.inject.service(),fwApplication:Ember.inject.service(),classNames:["__module-tickets__ticket-details"],rightNavView:"",bodyTextForInsert:"",reloadRightNavView:!1,reloadPropertiesView:!1,showSenarios:!1,showRequesterWidgetForm:!1,showAddTimeEntry:!1,reloadTimeEntries:!1,reloadRequesterWidget:!1,showActivities:!1,displaySplitTicket:!1,noteId:null,ticketPresent:!1,displayEditTicket:!1,displayDeleteTicket:!1,updateSuccessFlag:!1,scenarioWatchers:!1,showFailureDetails:!1,ticketEmailFailure:!1,showAttachmentRequired:!1,undoSendReply:null,replySentWithUndo:!1,isUndoSendReply:!1,showOnboardingTip:!1,undoSendTip:!1,undoSendQuote:!0,latestConversationId:null,undoneId:null,solutionArticleSuggest:null,cannedResponseSuggest:null,isEditorOpen:!1,isTicketDetail:!0,editorInstance:null,isCollapseOpen:!1,isCollapsedSlider:Ember.computed.not("isCollapseOpen"),propertyUpdate:0,focusOnError:0,forwardType:null,conversationModel:null,insertBroadcast:!1,showDiscardDraftPopup:!1,hasDraft:!1,draftInlineAttachmentIds:null,timerAppActivated:!0,pageControlsRegistered:!1,refresh:!0,disableSubmitExternal:!1,perPage:50,firstConversationInResponse:null,autoRefreshConversationCount:0,autoRefreshedTime:null,emailErrorNoteData:null,editorData:null,editorStatus:null,positiveIntents:null,adviceSuggestResponse:null,summaryEditor:!1,popUpDisplayed:!1,numberOfPositiveTokens:25,fetchConversationRetryCount:0,undoSendLocalNote:null,qualityManagementFeature:"quality_management_system",replyChannel:null,fromConversation:!1,isAllowEditorOpen:!0,currentScore:null,AHTEventParams:null,AHTTrackViewTimer:!1,contextObjectIdTicket:H.CONTEXT_OBJECT_ID.ticket,AHTHandlelableStatus:(0,C.default)(),suggestedArticle:(0,C.default)(),usefulArticlesLog:(0,C.default)(),scores:(0,C.default)(),interfaceCache:(0,T.storageFor)("ticket-details/interface"),noMarketplace:Ember.computed("currentAccount.features.[]",(function(){return!this.currentAccount.hasFeature("marketplace")})),isFreeOrSprout:Ember.computed.reads("currentAccount.isSproutPlan"),showThpAppsNudge:Ember.computed.and("noMarketplace","isFreeOrSprout","currentUser.isAdmin"),fbSortLocalStorage:(0,T.storageFor)("tickets-list/fbsort"),undoSendCache:(0,T.storageFor)("undosend"),installedApps:Ember.computed.reads("integration.installedApps"),submitDisabled:Ember.computed.not("ticket.hasDirtyAttributes"),showSubmitSuccessMessage:Ember.computed.and("submitDisabled","updateSuccessFlag"),lastConversationId:Ember.computed.reads("ticket.lastConversationId"),conversations:Ember.computed.reads("ticket.conversations"),isNotSocial:Ember.computed.not("ticket.isSocial"),isNotEcommerce:Ember.computed.not("ticket.isEcommerce"),checkForSocial:Ember.computed.reads("ticket.isSocial"),remindAttachment:Ember.computed.and("isNotSocial","isAttachmentReminderAction"),recentlyViewedCache:(0,T.storageFor)("tickets-list/recently-viewed"),hasPopUpDisplayedCache:(0,T.storageFor)("pop-up"),ticketList:Ember.computed.reads("recentlyViewedCache.resourceList"),currentTicket:Ember.computed.reads("ticket.id"),agentsViewingAndReplying:Ember.computed.uniqBy("viewingAgentSockets","userId"),agentsReplying:Ember.computed.uniqBy("replyingAgentSockets","userId"),hideNoteOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideNote"),disableNoteOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableNote"),hideReplyOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideReply"),disableReplyOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableReply"),hideForwardOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideForward"),disableForwardOption:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableForward"),conversationSortOptions:P.CONVERSATIONS_SORT_OPTIONS,isThreadsEnabled:Ember.computed.reads("collabThread.isEnabled"),visibilityChange:null,ahtIFrame:null,entriesFetchError:!1,childTasks:(0,C.default)(),AHTTimeEntries:(0,C.default)(),hasCollisionFeature:Ember.computed("currentAccount",(function(){return this.currentAccount.hasFeature("collision")})),hasAgentCollisionRevampLaunched:Ember.computed("",(function(){return this.currentAccount.launched("agent_collision_revamp")})),showAHTTab:Ember.computed("currentAccount","currentUser","canAccessAHT",(function(){return(!this.currentAccount.hasFeature("hide_aht_timer")||this.currentUser.isAdmin||this.currentUser.isSupervisor||this.currentUser.isAccountAdmin)&&this.canAccessAHT})),threadParent:Ember.computed("ticket.id",(function(){return{id:this.ticket.id,type:q.THREAD_ANCHOR_PARENT.ticket,label:Ember.get(this,"i18n").t("fd.ticket"),reference:this.ticket}})),conversationSortselected:Ember.computed((function(){var e=Ember.get(this,"fbSortLocalStorage.fbsort");return P.CONVERSATIONS_SORT_OPTIONS.filterBy("name",e.name)[0]})),hideEditButtonTd:Ember.computed("mkpInterface.controlData.ticketEditBtn.hide","marketplaceAdapter.controlData.ticketEditBtn.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketEditBtn.hide"):Ember.get(this,"mkpInterface.controlData.ticketEditBtn.hide")})),disableEditButtonTd:Ember.computed("mkpInterface.controlData.ticketEditBtn.disable","marketplaceAdapter.controlData.ticketEditBtn.disable",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketEditBtn.disable"):Ember.get(this,"mkpInterface.controlData.ticketEditBtn.disable")})),requester:Ember.computed.reads("ticket.requester"),validRequester:Ember.computed("requester.{deleted,blocked,spam}",(function(){var e=Ember.getProperties(Ember.get(this,"requester"),"deleted","blocked","spam"),t=e.deleted,s=e.blocked,n=e.spam;return!t&&!s&&!n})),requesterNotAgent:Ember.computed.not("requester.isAgent"),undoSendEnabled:Ember.computed.equal("currentUser.preferences.undo_send",!0),focusMode:Ember.computed.reads("currentUser.focusMode"),showColloboration:Ember.computed.and("currentAccount.collaboration","ticket.isActionable"),ticketId:Ember.computed.readOnly("ticket.id"),isTicketLoading:Ember.computed.not("ticketPresent"),showProprertiesPane:Ember.computed.or("ticket.{archived,isActionable}","isTicketLoading"),source:Ember.computed.reads("ticket.sourceType"),isSocial:Ember.computed.reads("ticket.isSocial"),isDirectMessage:Ember.computed.reads("ticket.isDirectMessage"),isOutboundEmail:Ember.computed.reads("ticket.isOutboundEmail"),userContact:Ember.computed.reads("ticket.userContact"),showServiceTaskWidget:Ember.computed.and("currentAccount.fsmEnabled","isNotTrackerOrRelated"),isContextOverlayShow:Ember.computed.and("solutionArticleModalOpen","isEditorOpen"),isResponseSuggestionEnabled:Ember.computed.or("isSolutionArticleSuggestion","isCannedResponseSuggestion"),isResponseSuggestModal:Ember.computed.or("cannedResponseSuggest","solutionArticleSuggest"),showFreddySuggestionCard:Ember.computed.and("isResponseSuggestionEnabled","isResponseSuggestModal","isNotSocial","isNotEcommerce"),isOverlayPresent:Ember.computed.bool("ticketDetailsSlider.openSliderType"),isContextOverlayOpen:Ember.computed.and("isCollapsedSlider","isOverlayPresent"),ticketAssociation:Ember.computed.reads("ticket.associationType"),hasPermission:Ember.computed.reads("ticket.hasPermission"),fbPost:Ember.computed.reads("ticket.fbPost"),traceBrowserTabChanges:!1,isfbPostTicket:Ember.computed("ticket.isAddPostFbTicket",(function(){return"facebook"===Ember.get(this,"source")&&Ember.get(this,"ticket.isAddPostFbTicket")})),isNotFbPostTicket:Ember.computed.not("isfbPostTicket"),isReverseOrder:Ember.computed("currentUser.latestNotesFirst","isfbPostTicket",(function(){return!Ember.get(this,"isfbPostTicket")&&Ember.get(this,"currentUser.latestNotesFirst")})),canShowSummary:Ember.computed("currentAccount.features",(function(){return Ember.get(this,"currentAccount").hasFeature("ticket_summary")})),occulsionOptions:Ember.computed((function(){return!Ember.get(this,"currentAccount").launched("disable_occlusion_rendering")&&{containerSelector:".ticket-properties-wrapper",shouldRecycle:!1,bufferSize:5}})),ignoreFieldLevelValidations:Ember.computed((function(){return!Ember.get(this,"currentAccount").launched("disable_occlusion_rendering")})),shouldRenderPciField:Ember.computed((function(){var e=Ember.get(this,"currentUser").hasAbility("view_secure_field")||Ember.get(this,"currentUser").hasAbility("edit_secure_field");return Ember.get(this,"currentAccount").hasFeature("secure_fields")&&e})),isFreddyPrediction:Ember.computed("ticket.predictTicketFields",(function(){return Ember.get(this,"ticket.predictTicketFields")||this.currentAccount.hasFeature("triage")})),convoToken:Ember.computed("ticket.collaboration",(function(){var e=Ember.get(this,"ticket.collaboration");return e?this._setCollabObject():e})),showTwitterBlockedFlag:Ember.computed("source","currentAccount.config.social.twitter_app_blocked",(function(){return Ember.get(this,"currentAccount.config.social.twitter_app_blocked")&&Ember.get(this,"ticket.source")===P.TWITTER_SOURCE})),isBotEmailSupport:Ember.computed("currentAccount.features","ticket.source",(function(){return this.currentAccount.hasFeature("email_bot")&&Ember.get(this,"ticket.source")===P.EMAIL_SOURCE})),forwardHeapId:Ember.computed("collabThreadTickets.isForwardThreadingEnabled",(function(){return this.collabThreadTickets.isForwardThreadingEnabled?I.FORWARD_HEAP_DATA.replyBar:null})),isSolutionArticleSuggestion:Ember.computed("currentAccount",{get:function(){var e=Ember.get(this,"currentAccount").hasFeature("agent_articles_suggest"),t=P.FREDDY_ALLOWED_SOURCE.includes(Ember.get(this,"ticket.source"));return e&&t},set:function(e,t){return t}}),isCannedResponseSuggestion:Ember.computed("currentAccount",{get:function(){var e=Ember.get(this,"currentAccount").hasFeature("canned_response_suggest"),t=P.FREDDY_ALLOWED_SOURCE.includes(Ember.get(this,"ticket.source"));return e&&t},set:function(e,t){return t}}),isAttachmentReminderAction:Ember.computed("actionType",(function(){var e=Ember.get(this,"actionType");return P.default.reqActionTypes.includes(e)})),hasTimesheetsFeatureAndAbility:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("timesheets")&&Ember.get(this,"currentUser").hasAbility("view_time_entries")})),sessionReplayEnabled:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("session_replay")&&Ember.get(this,"currentAccount.freshmarketerLinked")})),displayUndoButton:Ember.computed("conversations","conversations.length","ticket.conversations",(function(){return!Ember.get(this,"conversations.lastObject.category")})),agentsViewing:Ember.computed("agentsViewingAndReplying","agentsReplying",(function(){var e=Ember.get(this,"agentsViewingAndReplying"),t=Ember.get(this,"agentsReplying");return e.filter((function(e){return Ember.isEmpty(t.findBy("userId",e.userId))}))})),editTicketData:Ember.computed("ticket.id",(function(){return{ticket:Ember.get(this,"ticket")}})),ticketActionableClass:Ember.computed("ticket.isActionable",(function(){return Ember.get(this,"ticket.isActionable")?"":"ticket-not-actionable"})),priorityTypeLower:Ember.computed("ticket.priorityType",(function(){return Ember.get(this,"ticket.priorityType")?Ember.get(this,"ticket.priorityType").toLowerCase():""})),isHavingTotalConversations:Ember.computed("totalConversationsCount","conversations.length",(function(){return Ember.get(this,"totalConversationsCount")!==Ember.get(this,"conversations.length")})),threadTemplateTasks:Ember.computed("getForwardTemplateTask","getFsIncidentTasks",(function(){var e={};return e[q.THREAD_TYPES.FORWARD_THREAD]=this.getForwardTemplateTask,e[q.THREAD_TYPES.FS_INCIDENT]=this.getFsInstanceTasks,e[q.THREAD_TYPES.FS_REQUEST]=this.getFsInstanceTasks,e})),getFsInstanceTasks:(0,F.task)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.fetchFsInstance)(this.store);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),showLoadMoreForFbPostTicket:Ember.computed.and("isHavingTotalConversations","isfbPostTicket"),showLoadMoreForNormalTicket:Ember.computed.and("isHavingTotalConversations","isNotFbPostTicket"),forwardData:Ember.computed("actionType","forwardTemplate.isFulfilled",(function(){return Ember.get(this,"forwardTemplate")})),allowAddToResponse:Ember.computed("ticket.{isSocial,spam,deleted}",(function(){var e=Ember.get(this,"ticket.isSocial"),t=Ember.get(this,"ticket.spam"),s=Ember.get(this,"ticket.deleted");return!e&&!t&&!s})),forwardTemplate:Ember.computed("actionType","forwardType",(function(){return z.create({promise:this.getForwardMemberAction().then(this._forwardTemplateCB.bind(this))})})),getForwardMemberAction:function(){var e=Ember.get(this,"forwardType")||P.FORWARD_TYPE.latest,t="conversation"===e?"conversationModel":"ticket";return Ember.get(this,t)["get".concat(e,"ForwardTemplate")]()},getForwardTemplateTask:(0,F.task)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getForwardMemberAction().then(this._forwardTemplateCB.bind(this));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),failedEmailsPromise:Ember.computed("conversationModel","ticketEmailFailure","ticket",(function(){var e=Ember.get(this,"ticket"),t=null;return Ember.get(this,"ticketEmailFailure")||(t={note_id:Ember.get(this,"conversationModel.id")}),z.create({promise:e.getEmailFailures(t).then().catch(this._failedEmailsCB.bind(this))})})),replyToForwardData:Ember.computed("actionType",(function(){var e=Ember.get(this,"conversationModel");return z.create({promise:e.getReplyToForwardTemplate().then(this._replyToForwardDataCB.bind(this))})})),showAction:Ember.computed("actionType",(function(){var e=Ember.get(this,"actionType");return Ember.isNone(e)})).readOnly(),endpoint:Ember.computed("actionType",(function(){var e=Ember.getProperties(this,"currentReplyChannel","showOmniChannelReply","isReplyAction","actionType","isOmniSocialReply","isSocialModel"),t=e.currentReplyChannel,s=e.showOmniChannelReply,n=e.isReplyAction,i=e.actionType,a=e.isOmniSocialReply,r=e.isSocialModel,l=Ember.getProperties(Ember.get(this,"ticket"),"sourceType","isEcommerce"),o=l.sourceType,c=l.isEcommerce;return s?a?J[t]:i:n&&(r||c)?J[o]:i})).readOnly(),requesterWidgetEditAllowed:Ember.computed("requesterNotAgent","validRequester",(function(){var e=Ember.getProperties(this,"requesterNotAgent","validRequester"),t=e.requesterNotAgent,s=e.validRequester,n=Ember.get(this,"currentAccount").hasFeature("requester_widget"),i=Ember.get(this,"currentUser").hasAbility("manage_contacts"),a=!Ember.get(this,"ticket.archived");return n&&i&&t&&s&&a})),isAHTValidTicket:Ember.computed("ticket.{spam,deleted,archived}",(function(){var e=Ember.get(this,"ticket"),t=e.spam,s=e.deleted,n=e.archived;return!t&&!s&&!n})),positiveTokens:Ember.computed((function(){for(var e=Ember.get(this,"i18n"),t=Ember.get(this,"numberOfPositiveTokens"),s=[],n=1;n<=t;n++)s.push(e.t("ticket.details.attachment.positive-tokens.".concat(n)));return s})),isEditable:Ember.computed("ticket.id",(function(){this.getAHTTimeEntries();var e={model:Ember.get(this,"ticket"),abilities:Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type"))};return Ember.get(this,"currentUser").hasPermissions(e)})),isReplyWithUndo:Ember.computed("currentAccount","actionType","isOmniSocialReply",(function(){var e=Ember.get(this,"currentAccount").hasFeature("undo_send")||Ember.get(this,"currentAccount").launched("undo_send"),t=Ember.getProperties(this,"isReplyAction","showOmniChannelReply","isSocialModel","isNotEcommerce","isOmniSocialReply"),s=t.isReplyAction,n=t.showOmniChannelReply,i=t.isNotEcommerce,a=t.isSocialModel,r=t.isOmniSocialReply;return e&&s&&(n?!r:!a&&i)})),sortBy:Ember.computed("isReverseOrder",(function(){return Ember.get(this,"isReverseOrder")?["createdAt:desc","id:desc"]:["createdAt","id"]})),showPopUp:Ember.computed((function(){return(Ember.get(this,"currentUser.isAccountAdmin")||Ember.get(this,"currentUser.isAdmin"))&&Ember.get(this,"currentAccount").hasFeature("help_widget")&&Ember.get(this,"currentUser").hasAbility("admin_tasks")})),canAccessAHT:Ember.computed((function(){return this.currentAccount.mandatesEnabled({mandatoryFeatures:X.features,mandatoryLaunchParties:X.launchParties})})),isCustomObjectsEnabled:Ember.computed("currentAccount.features.[]","currentUser.abilities.[]",(function(){return(0,V.hasAllCOMandates)(this.currentAccount,this.currentUser)})),lookupFields:Ember.computed.filter("ticketFieldsService.fields",(function(e){return e.lookup})),init:function(){var e=this;this._super.apply(this,arguments),Ember.get(this,"mkpInterface").registerControls("ticketActions"),this.inlineSliders=P.DETAILS_VIEW_SUPPORTED_INLINE_SLIDERS,this.set("ticketDetailsSlider",U.default.create({navigationAlert:this.navigationAlert})),this.threadSlider.setSlider(this.ticketDetailsSlider),this.threadSliderToggleSubscription=L.default.subscribe(B.THREAD_EVENTS.sliderToggle,(function(t,s){"open"===s.state?e.ticketDetailsSlider.openSlider(e.inlineSliders.threads):e.ticketDetailsSlider.removeSlider(e.inlineSliders.threads)}))},initiateAHT:function(e){this.canAccessAHT&&this.isAHTValidTicket&&this.fetchAHTSettings(e)},fetchAHTSettings:function(e){Ember.get(this,"ajax").request(N.default.ahtMSSettings,{method:"GET"}).then(this.fetchAHTSettingsSuccess.bind(this,e)).catch(this.fetchCallFailure.bind(this))},fetchAHTSettingsSuccess:function(e,t){Ember.setProperties(this,{AHTTrackViewTimer:t.track_viewing_time,AHTHandlelableStatus:t.handleable_values}),this.tabInTabOut(),e&&this.initiateAHTTimers()},_getSavedValue:function(e,t){var s=e.changedAttributes();return s[t]?s[t][0]:e[t]},initiateAHTTimers:function(){var e=this.ticket,t=this.AHTTrackViewTimer,s=this.canAccessAHT,n=this.isAHTValidTicket,i=this.AHTHandlelableStatus;if(s&&n&&e){Ember.set(this,"AHTEventParams",{account_id:this.currentAccount.refId,tracker_id:e.id});var a=e.responderId,r=e.status;e.hasDirtyAttributes&&(a=this._getSavedValue(e,"responderId"),r=this._getSavedValue(e,"status"));var l=i.includes(r.toString());l&&!a&&t?(Ember.setProperties(this,{"AHTEventParams.aht_action":Z,isAHTTimerCalculating:!0}),this.webHookSendToChannel(this.AHTEventParams)):l&&a===Ember.get(this,"currentUser.id")?(Ember.setProperties(this,{"AHTEventParams.aht_action":$,isAHTTimerCalculating:!0}),this.webHookSendToChannel(this.AHTEventParams)):(this.isAHTTimerCalculating&&this.getAHTTimeEntries(!0),Ember.set(this,"isAHTTimerCalculating",!1))}},tabInTabOut:function(){this._browserSwitch=this._onBrowserTabSwitch.bind(this),void 0!==document.hidden&&Ember.setProperties(this,{hidden:"hidden",visibilityChange:"visibilitychange"}),document.addEventListener(Ember.get(this,"visibilityChange"),this._browserSwitch,!1),window.addEventListener("focus",this._browserSwitch),window.addEventListener("blur",this._browserSwitch),Ember.set(this,"traceBrowserTabChanges",!0)},willDestroyElement:function(){this._super.apply(this,arguments),L.default.unsubscribe(this.threadSliderToggleSubscription),Ember.get(this,"mkpInterface").deregisterControls("ticketDetails"),Ember.get(this,"mkpInterface").deregisterControls("ticketActions"),Ember.get(this,"marketplaceAdapter").deregisterControls("ticketDetails"),Ember.get(this,"editorAttachment").clearAttachments(),this.hasCollisionFeature&&(this.hasAgentCollisionRevampLaunched?this.resetAndUnsubscribeChannels(!0):this.closeExistingAgentCollisionSocket()),Ember.get(this,"currentAccount").resetCollabObject("ticket_details"),this.traceBrowserTabChanges&&(document.removeEventListener(Ember.get(this,"visibilityChange"),this._browserSwitch),window.removeEventListener("focus",this._browserSwitch),window.removeEventListener("blur",this._browserSwitch)),this.canAccessAHT&&window.removeEventListener("message",this._ahtHandler)},_onBrowserTabSwitch:function(){this.isAHTTimerCalculating&&!document[Ember.get(this,"hidden")]&&document.hasFocus()?this.initiateAHTTimers():!this.isAHTTimerCalculating||!document[Ember.get(this,"hidden")]&&document.hasFocus()||(Ember.set(this,"AHTEventParams.aht_action",ee),this.webHookSendToChannel(this.AHTEventParams))},ahtHandler:function(e){if("ahtIFrame"===e.data.source){var t=document.getElementById("aht-timer-widget-iframe");Ember.set(this,"ahtIFrame",t.contentWindow),this.fetchAHTTimeEntries(e.data.config)}},fetchAHTTimers:function(){var e=this.ahtAPIConfig.getEntries.url.replace(":id",this.ticket.id);this.store.query("stopwatch",{type:1,url:e}).then(this.getAHTTimeEntriesSuccess.bind(this)).catch(this.getCallFailure.bind(this))},getAHTTimeEntries:function(e){var t=this;this.ahtIFrame&&e?Ember.run.later((function(){t.fetchAHTTimers()}),2e3):this.ahtIFrame&&this.fetchAHTTimers()},didInsertElement:function(){this._super.apply(this,arguments),this.canAccessAHT&&(this._ahtHandler=this.ahtHandler.bind(this),window.addEventListener("message",this._ahtHandler))},fetchAHTTimeEntries:function(e){var t=e.url,s=e.method;Ember.set(this,"ahtAPIConfig",{getEntries:{url:t,method:s}}),this.getAHTTimeEntries(!1)},getAHTTimeEntriesSuccess:function(e){var t=this;this.AHTTimeEntries.clear(),e.forEach((function(e,s){var n;t.AHTTimeEntries.pushObject(e.toJSON()),t.AHTTimeEntries[s].agent=null===(n=e.get("agent"))||void 0===n?void 0:n.toJSON()})),this.postAHTEntriesToIframe()},getCallFailure:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("fd.somethingwentwrongError"))},postAHTEntriesToIframe:function(){var e=this.AHTTimeEntries.map((function(e){var t,s;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?W(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e,{loggedBy:null===(t=e.agent)||void 0===t||null===(s=t.contact)||void 0===s?void 0:s.name})}));this.ahtIFrame&&this.ahtIFrame.postMessage({sourceURL:window.location.origin,source:"ahtTimerEntities",entries:e,billableCopy:this.i18n.t("timer.billable"),totalTimeCopy:this.i18n.t("timer.total-aht-time-tracked")},"*")},rollbackRequester:function(){var e=Ember.get(this,"requester.content"),t=Ember.get(e,"otherPhoneNumbers");e.hasDirtyAttributes&&(e.rollbackAttributes(),t&&t.length&&t.forEach((function(e){Ember.setProperties(e,{inValid:!1,errorMessage:""})})))},actions:{onThreadStart:function(e){var t={threadType:q.THREAD_TYPES.FORWARD_THREAD,parent:this.threadParent,templateTasks:this.threadTemplateTasks};e&&(t=Object.assign(t,e)),this.threadSlider.open(I.THREAD_VIEWS.CREATE,t)},onThreadOpen:function(e){this.threadSlider.open(I.THREAD_VIEWS.DETAIL,{threadId:e,parent:this.threadParent,templateTasks:this.threadTemplateTasks})},hidePopUp:function(){Ember.set(this,"popUpDisplayed",!1)},tipsPrimary:function(){Ember.set(this,"popUpDisplayed",!1),Ember.get(this,"heap").track("Clicked on widget suggestion after ticket response"),window.open("../admin/widgets","_blank")},setPopUpDisplayed:function(){var e=this;!Ember.get(this,"hasPopUpDisplayedCache.on")&&Ember.get(this,"showPopUp")&&Ember.get(this,"store").findAll("help-widget").then((function(t){return e._displayPopUpMessage(t)}))},fetchFbPostConversations:function(e){Ember.get(this,"updateFbConversation").perform(e)},closeModel:function(){this._resetBotSuggestion()},tipDone:function(){var e=this;Ember.run.later((function(){Ember.set(e,"undoSendTip",!1)}),0)},setUndoneNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Ember.set(this,"undoSendReply",e)},openCollab:function(e){if(!Ember.get(this,"collabOpened")||!1===e){Ember.set(this,"collabOpened",e);var t=Ember.get(this,"ticket.id"),s="boolean"!=typeof e||e;Ember.get(this,"notifications").setCollabData({open:s,ticketId:t})}},changeReplyChannel:function(){this.send("showAction","reply")},setReplyChannel:function(e){this.assignCurrentReplyChannel(e),this.send("changeReplyChannel")},saveCollabMcount:function(e){Ember.set(this,"collabMessages",e)},saveCollabUnreadMcount:function(e){Ember.set(this,"collabUnreadMessages",e)},showEditPage:function(){this.toggleProperty("displayEditTicket")},closeOverlay:function(){Ember.get(this,"editTicketData.ticket").rollbackAttributes(),this.toggleProperty("displayEditTicket")},outSideClick:function(){},toggleEmailFailure:function(){this.toggleProperty("showFailureDetails")},deleteTicketConfirmationToggle:function(){this.toggleProperty("displayDeleteTicket")},delete:function(e){var t=this._deleteUrl();Ember.get(this,"ajax").del("".concat(t,"/").concat(e.id),{namespace:M.default.apiNamespace}).then(this._handleDestroyRecordResponse.bind(this,e),this._handleDestroyRecordError.bind(this,e))},undoTicketDelete:function(e){e.restoreTicket().then(this._handleRestoreTicketResponse.bind(this,e),this._handleRestoreTicketError.bind(this,e)).catch(this._handleRestoreTicketFailure.bind(this))},markAsSpam:function(e){Ember.get(this,"ticket").markAsSpam().then(this._handleMarkSpamResolve.bind(this,e))},undoMarkAsSpam:function(e){e.unSpam().then(this._handleUnSpamResolve.bind(this,e),this._handleRestoreTicketError.bind(this,e)).catch(this._handleUnSpamFailure.bind(this))},removeError:function(e){var t=Ember.get(this,"ticketActionError");Ember.isArray(e)?t.removeObjects(e):t.removeObject(e)},discardConversation:function(){var e=Ember.get(this,"hasDraft"),t=Ember.get(this,"actionType");if(Ember.set(this,"isAllowEditorOpen",!0),!e||!("reply"===t))return this.send("hideAction"),void this.setOmniChannelReplyAction(t);Ember.set(this,"showDiscardDraftPopup",!0)},closeConfirmDialogCancel:function(){Ember.set(this,"showAttachmentRequired",!1),Ember.set(this,"disableSubmitExternal",!1)},sendConversation:function(e,t){if(Ember.set(this,"editorData",e),Ember.get(this,"lastConversationId")==9007199254740991-Ember.get(this,"ticket.id"))this._fetchActualNoteIdForTicket();else{if(this._removeAtWhoContainer(e),this.isFontWrapRequired()&&this._wrapEmailNotificationFont(e),Ember.set(this,"disableSubmitExternal",!0),Ember.set(this,"editorStatus",t),!Ember.get(this,"remindAttachment")||!e.body)return this._sendConv();var s=Ember.get(this,"positiveTokens"),n=(0,w.default)(e,s);if(e.attachment_ids.length||!n.isAttachmentRequired)return this._sendConv();Ember.set(this,"positiveIntents",n.positiveIntent),Ember.set(this,"showAttachmentRequired",n.isAttachmentRequired)}},closeConfirmDialog:function(){Ember.set(this,"showAttachmentRequired",!1),this._sendConv()},fetchLatestConversations:function(e){return this._fetchAdditionalConversations(e)},fetchAndScrollToLatestConversations:function(){if(!Ember.get(this,"ticket").isAddPostFbTicket){var e=Ember.get(this,"lastConversationId"),t=this._scrollToLatestConversations.bind(this),s=this._tagLatestConversation.bind(this),n=this._resetAutoRefresh.bind(this);return this._fetchAdditionalConversations(e).then(s).then(t).then(n)}var i=Ember.get(this,"conversationSortselected");Ember.set(this,"autoRefreshConversationCount",0),Ember.get(this,"updateFbConversation").perform(i)},fetchOlderConversations:function(){return this._fetchAdditionalConversations(null,!0).then(this._scrollToConversation.bind(this)).then(this._setAnnotate.bind(this))},insertDataToReply:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s={content:t},n=Ember.get(this,"suggestedArticle").addObject(e);this.send("showAction","reply"),Ember.setProperties(this,{bodyTextForInsert:s,suggestedArticle:n})},insertSolutionArticle:function(e,t){var s=t,n=s.attachments,i=s.language,a=s.id,r=s.text,l=Ember.get(this,"editorAttachment"),o=this.editorInstance?this.editorInstance._getSelectedText():null;r=o||r,e?t="<a href=".concat(t.url,' target="_blank" rel="noopener" data-test-article-title>').concat(r,"</a>"):(t=t.data.description,n&&l.addAttachment(n));var c=Ember.get(this,"suggestedArticle").addObject(Number(a)),d={language:i,article_id:Number(a)},m=Ember.get(this,"usefulArticlesLog").addObject(d);Ember.setProperties(this,{bodyTextForInsert:{content:t},suggestedArticle:c,usefulArticlesLog:m})},insertCannedResponse:function(e){var t=e.attachments,s=e.evaluatedResponse,n=e.isReplaceHtml,i=Ember.get(this,"editorAttachment");n&&i.attachments.length>0&&i.clearAttachments();var a={content:s,isReplaceHtml:n};Ember.isPresent(t)&&i.addAttachment(t),this.set("bodyTextForInsert",a)},openContextOverlayCard:function(e){this.isEditorOpen||Ember.get(this,"actionType")||(this.send("showAction","reply"),this.set("isEditorOpen",!0)),this.setInlineSlider(e)},toggleSolutionArticleSlider:function(e){Ember.set(this,"editorInstance",e),this.setInlineSlider(this.inlineSliders.suggestedSolutions)},toggleCannedResponseSlider:function(){this.setInlineSlider(this.inlineSliders.cannedResponse)},showCollapseOpen:function(e){Ember.set(this,"isCollapseOpen",e)},confirmDiscardDraft:function(){this.send("deleteDraft"),this._resetContextOverlay(),Ember.setProperties(this,{usefulArticlesLog:[]})},openWorkflowOverlay:function(){this.setInlineSlider(this.inlineSliders.workflow)},showAction:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t&&"forward"===e&&Ember.set(this,"forwardType",t),this.collabThreadTickets.isForwardThreadingEnabled&&"forward"===e){var a={threadType:q.THREAD_TYPES.FORWARD_THREAD};return i&&(a.anchor={id:i.id,type:q.THREAD_ANCHOR_PARENT.conversation}),this.actions.onThreadStart.apply(this,[a])}var r=n?P.DEFAULT_REPLY_CHANNEL:Ember.get(this,"currentReplyChannel");this.setOmniChannelReplyAction(e,r),Ember.get(this,"setActionType")(e.camelize()),Ember.set(this,"emailErrorNoteData",s),Ember.set(this,"bodyTextForInsert","");var l=Ember.get(this,"eventSources").getEventNameByAction("ticket",e,t);Ember.get(this,"marketplace").publishEvent({event:l}),Ember.set(this,"isAllowEditorOpen",!1),"inlineReply"===t?Ember.set(this,"fromConversation",!0):(Ember.set(this,"fromConversation",!1),this.scrollToBottom())},attachToResponse:function(e){var t=Ember.get(this,"actionType"),s=Ember.get(this,"summaryEditor");(s||t||Ember.get(this,"currentUser").hasAbility("reply_ticket")&&Ember.get(this,"showTicketReply"))&&(Ember.get(this,"editorAttachment").addAttachment(e),(s||t)&&t!=P.default.action.broadcast||Ember.get(this,"setActionType")("reply"),this.scrollToBottom())},hideAction:function(){this._resetContextOverlay(),Ember.get(this,"setActionType")(null),Ember.set(this,"forwardType",null)},beforeUpdateProperties:function(){Ember.setProperties(this,{updateProperties:!0})},replyToFacebookComment:function(e){Ember.set(this,"noteId",parseInt(e.id)),Ember.get(this,"setActionType")(P.default.action.reply)},emailFailureDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(Ember.set(this,"conversationModel",e),Ember.set(this,"ticketEmailFailure",!1)):Ember.set(this,"ticketEmailFailure",!0),Ember.set(this,"showFailureDetails",!0)},updateProperty:function(){return this.updateProperty()},closeTicket:function(e){var t=Ember.get(this,"ticket"),s=!1;return e&&(s=e.shiftKey||!1),Ember.set(t,"status",P.default.status.closed),t.validate().then(this._closeTicketCB.bind(this,s,t))},toggleOpenEvaluate:function(e){this.setInlineSlider(this.inlineSliders.evaluations),Ember.set(this,"currentScore",e)},merge:function(e){var t=this,s={options:{template:"module-tickets/shared/tickets-merge",closeOnEscapse:!0,showModalClose:!0},data:{reference:"merge",tickets:[e],updateToggleFn:function(e){Ember.get(t,"ticket.id")===e?Ember.get(t,"refreshAction")():Ember.get(t,"router").transitionTo("helpdesk.tickets.show",e)}}};this.overlay.open(s)},showEdit:function(e){var t={options:{template:"module-tickets/ticket-form",showModalClose:!0}};t.data={ticket:e},this.overlay.open(t)},updateDuebyTime:function(){alert("Inside Update Due by Time ")},toggleProp:function(e){var t=this;Ember.run.next((function(){"showRequesterWidgetForm"===e&&t.rollbackRequester(),t.toggleProperty(e)}))},executeScenario:function(e){return Ember.get(this,"ticket").scenarios({scenario_id:new Number(Ember.get(e,"id"))}).then(this._executeScenarioSuccessCB.bind(this),this._executeScenarioFailureCB.bind(this))},showTimeEntryForm:function(e){Ember.set(this,"timeEntry",e),this.toggleProperty("showAddTimeEntry")},deleteTimeEntry:function(e){return e.destroyRecord().then(this._deleteTimeEntryCB.bind(this))},startStopTimer:function(e){return e.toggleTimer().then(this._pushDataToStore.bind(this)).then(this._startStopTimerCB.bind(this))},widgetAction:function(e){"requester-info"==e&&this.toggleProperty("showRequesterWidgetForm")},showhideActivity:function(e){Ember.setProperties(this,{showActivity:e,refreshConverstions:!0})},initiateSplitTicket:function(e){Ember.set(this,"splitConversation",e),Ember.set(this,"displaySplitTicket",!0)},splitTicket:function(){var e=Ember.get(this,"ticket"),t=Ember.get(this,"splitConversation.id");return e.splitTicket({note_id:t}).then(this._splitTicketCB.bind(this)).catch(this._splitTicketErrorCB.bind(this))},initiateForwardNote:function(e){Ember.set(this,"conversationModel",e),this.send("showAction","forward","conversation",null,null,e)},initiateReplyToForwardNote:function(e){Ember.set(this,"conversationModel",e),this.send("showAction","reply_to_forward","conversation")},markUnSpam:function(e){var t=Ember.get(this,"store");e.unSpam().then(this._markUnSpamSuccessCB.bind(this,t,e)).catch(this._markUnSpamFailureCB.bind(this))},restoreTicket:function(e){var t=Ember.get(this,"store");e.restoreTicket().then(this._restoreTicketSuccessCB.bind(this,t,e)).catch(this._restoreTicketFailureCB.bind(this))},deleteTicketForever:function(e){var t=[+Ember.get(e,"id")];e.deleteForever({ids:t}).then(this._deleteTicketForeverSuccessCB.bind(this)).catch(this._deleteTicketForeverFailureCB.bind(this))},removeAttachment:function(e){if(confirm("Are you sure you want to delete this attachment?")){var t=e.attachment,s=e.parentObj,n=Ember.get(this,"store").peekRecord("attachment",Ember.get(t,"id"));Ember.get(n,"isShared")?n.unLink({attachable_id:Number(s.get("id")),attachable_type:s.constructor.modelName}).then(this._removeAttachmentSuccessCB.bind(this,e)).catch(this._removeAttachmentFailureCB.bind(this)):n.destroyRecord().then(this._attachmentDeleteSuccess.bind(this))}},ticketFetchCallback:function(e){Ember.set(this,"ticketPresent",!0),Ember.get(this,"setTitleToken")(e),this._ticketSecondaryRequisiteCallback(e),this.initializePCIFields(),this._makeThreadsActionable(e)},registerControlsCallback:function(){Ember.get(this,"pageControlsRegistered")||(Ember.get(this,"mkpInterface").registerControls("ticketDetails"),Ember.get(this,"mkpInterface").registerControls("globalInterfaceAPIs"),Ember.get(this,"marketplaceAdapter").registerControls("ticketDetails"),Ember.set(this,"pageControlsRegistered",!0))},onConversationDelete:function(e){e&&this.onConvDelete(e),this.decrementProperty("totalConversationsCount")},onTicketChange:function(e){Ember.isNone(e)||(this._resetContextOverlay(),this._resetProps(),Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e,K))},refreshTicketProperties:function(){this.refreshTicketProperties(),this.incrementProperty("propertyUpdate")}},setInlineSlider:function(e){this.ticketDetailsSlider.openSliderType===e&&P.RESET_SLIDER.includes(e)?this.ticketDetailsSlider.removeSlider(e):this.ticketDetailsSlider.openSlider(e)},updateFbConversation:(0,F.task)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=P.CONVERSATIONS_SORT_OPTIONS.filterBy("name",Ember.get(t,"name"))[0].params,e.next=3,Ember.get(this,"fetchConversations").perform(s,Ember.get(this,"ticket.id"),!0);case 3:Ember.setProperties(this,{"fbSortLocalStorage.fbsort":t,conversationSortselected:t,page:0});case 4:case"end":return e.stop()}}),e,this)}))),_displayPopUpMessage:function(e){e.length<=0&&Ember.setProperties(this,{popUpDisplayed:!0,"hasPopUpDisplayedCache.on":!0})},_resetContextOverlay:function(){this.ticketDetailsSlider.openSliderType&&P.RESET_SLIDER.includes(this.ticketDetailsSlider.openSliderType)&&(this.set("isEditorOpen",!1),this.ticketDetailsSlider.removeSlider(this.ticketDetailsSlider.openSliderType))},_setCollabObject:function(){var e=Ember.get(this,"ticket.responderId"),t=Ember.get(this,"ticket.collaboration"),s=Ember.get(this,"ticket.id"),n=Ember.get(this,"ticket.subject"),i=Ember.get(this,"setCollabData"),a=t?t.convo_token:"";if(i)if(Ember.get(this,"currentAccount").hasFeature("freshconnect")){if(Ember.setProperties(this,{"currentAccount.collabObject.token":a,"currentAccount.collabObject.contextTitle":n,"currentAccount.collabObject.annotatableAreas":Y,"currentAccount.collabObject.annotationEnabled":!0}),Ember.get(this,"currentAccount").hasFeature("agent_assist_lite")){var r=Ember.getProperties(this.ticket.requester,"id","name","email"),l=r.id,o=r.name,c=r.email,d={xtrnlTcktId:s,ticketId:s,context:"ticket",page:"ticket_details",FreshdeskTicketStatus:Ember.get(this,"ticket.status"),requesterId:l,requesterName:o,requesterEmail:c};Ember.set(this,"currentAccount.collabObject.agentAssistPayload",JSON.stringify(d))}}else i({id:s,title:n,owned_by:e?String(e):"",convo_token:a});return a},_deleteUrl:function(){return Ember.get(this,"ticket.archived")?"/tickets/archived":"/tickets"},_sendConv:function(){var e=this,t=Ember.get(this,"actionType"),s=t===P.default.action.reply?{article_id:Ember.get(this,"suggestedArticle")}:"",n=Ember.get(this,"editorData"),i=Ember.get(this,"currentAccount").hasFeature("suggested_articles_count");if(t===P.default.action.reply&&i){var a=Ember.get(this,"usefulArticlesLog");a.length&&Ember.set(n,"articles_suggested",a)}var r,l=Ember.get(this,"editorStatus");return Ember.get(this,"model.inlineAttachmentIds")&&Ember.set(n,"inline_attachment_ids",Ember.get(this,"model.inlineAttachmentIds")),Ember.set(this,"ticketActionError",[]),null===(r=l?this.setStatusAndSendConversation(n,l,s):this.saveConversation(n,l,s))?Ember.set(this,"disableSubmitExternal",!1):r.finally((function(){return Ember.set(e,"disableSubmitExternal",!1)})),r},_resetProps:function(){this.assignCurrentReplyChannel()},_saveTagsSuccess:function(e){Ember.get(this,"store").pushPayload(e)},_saveTagsFailure:function(e){var t=e.message,s=e.errors;s.length&&s[0].detail.code&&(t=Ember.get(this,"i18n").t("server.errors.".concat(s[0].detail.code,".flashmessage"),{fieldName:s[0].detail.field})),Ember.get(this,"flashMessages").danger(t)},_handleDestroyRecordResponse:function(e){Ember.get(this,"router").transitionTo("helpdesk.tickets.index"),(0,o.default)(this,"singleDeleteTicket");var t=Ember.get(this,"ticketAssociation")===P.default.associationType.tracker?"ticket.actions.tracker.delete.success":"ticket.actions.delete.success";Ember.get(this,"ticket.archived")?Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t(t)):Ember.get(this,"flashMessages").warning(this.i18n.t(t,{ticketID:e.id}),{sticky:!1,timeout:3e3,setName:"singleDeleteTicket",content:{linkText:Ember.get(this,"i18n").t("flashmessage.undo"),linkAction:this.actions.undoTicketDelete.bind(this,e)}})},_handleDestroyRecordError:function(e){Ember.get(this,"flashMessages").danger(this.i18n.t("ticket.actions.delete.failure",{ticketID:e.id}))},_handleRestoreTicketResponse:function(e){Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.id),Ember.get(this,"flashMessages").add({type:"success",message:this.i18n.t("ticket.actions.undodelete.success",{ticketID:e.id}),timeout:c.default.shorterTimeout})},_handleRestoreTicketError:function(e){Ember.get(this,"flashMessages").add({type:"danger",message:this.i18n.t("ticket.actions.undodelete.fail",{ticketID:e.id}),timeout:c.default.shorterTimeout})},_handleMarkSpamResolve:function(e){var t=this;Ember.get(this,"router").transitionTo("helpdesk.tickets.index"),(0,o.default)(this,"singleSpamTicket");var s=this.i18n.t("ticket.actions.markspam.success");Ember.get(this,"flashMessages").warning(s,{setName:"singleSpamTicket",content:{linkText:Ember.get(this,"i18n").t("flashmessage.undo"),linkAction:this.actions.undoMarkAsSpam.bind(this,e)}}),Ember.run.later((function(){return t.showBlockUsersFlash([e])}),c.default.timeUntilSuccessiveFlash)},_handleUnSpamResolve:function(e){Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.id),Ember.set(e,"spam",!1),Ember.get(this,"flashMessages").add({type:"success",message:this.i18n.t("ticket.actions.undospam.success",{ticketID:e.id}),timeout:c.default.shorterTimeout})},_handleUnSpamRejection:function(e){Ember.get(this,"flashMessages").add({type:"danger",message:this.i18n.t("ticket.actions.undospam.fail",{ticketID:e.id}),timeout:c.default.shorterTimeout})},_handleRestoreTicketFailure:function(e){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.spam.restore.error",{reason:e.message}))},_handleUnSpamFailure:function(e){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.unspam.error",{reason:e.message}))},showDraft:function(){Ember.get(this,"setActionType")("reply"),this.scrollToBottom()},isFontWrapRequired:function(){var e=Ember.get(this,"showOmniChannelReply")?Ember.get(this,"currentReplyChannel"):Ember.get(this,"ticket.sourceType");return!(Q.includes(e)&&Ember.get(this,"isReplyAction"))},setOmniChannelReplyAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e===P.default.action.reply&&this.assignCurrentReplyChannel(t)},assignCurrentReplyChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Ember.get(this,"currentAccount.isOmniChannelBundle")&&Ember.set(this,"replyChannel",e)},scrollToBottom:function(){var e=document.querySelector("#scroll-to-bottom");Ember.get(this,"scroller").scrollVertical(e,{duration:300,auto:!0,offset:Ember.get(this,"isReverseOrder")?-100:0})},_scrollToNote:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=document.querySelectorAll("[data-album = 'note_".concat(e,"']"));Ember.isPresent(n)?Ember.get(this,"scroller").scrollVertical(n,{offset:s||P.default.conversationScrollOffset}):t&&this._fetchAdditionalConversations().then(this._scrollToExpandedNote.bind(this,e,s))},_scrollToExpandedNote:function(e,t){var s=this;Ember.run.next((function(){s._scrollToNote(e,!1,t)}))},_ticketPropertiesUpdateSuccess:function(e,t){var s=this;(e.status||e.responderId)&&this.initiateAHTTimers();var n=Ember.get(this,"i18n").t("ticket.details.update.success");Ember.set(this,"staleTicketProperties",!1),Ember.set(this,"autoRefreshedTime",null),Ember.get(this,"flashMessages").success(n),(e.groupId||e.responderId)&&this._checkTicketAccess(e)&&this.router.transitionTo("helpdesk.tickets.index"),this._reloadTimeEntries(e),this._coWidgetRefreshHandler(t),this.toggleProperty("updateSuccessFlag"),Ember.get(this,"isFreddyPrediction")&&Ember.set(this,"reloadPropertiesView",!0),Ember.run.later((function(){s.isDestroyed||s.isDestroying||s.toggleProperty("updateSuccessFlag")}),1500),this.incrementProperty("propertyUpdate")},_coWidgetRefreshHandler:function(e){if(this.isCustomObjectsEnabled){var t=Ember.get(this,"fwApplication.coApp"),s=Ember.get(this,"ticketId");(0,V.checkChangesFieldsAndRefresh)(Ember.get(this,"lookupFields"),Object.keys(e),t,H.CONTEXT_OBJECT_ID.ticket,s,H.WIDGET_TYPE.forward)}},_checkTicketAccess:function(e){var t=Ember.get(this,"currentUser.ticketScope");if(t===P.default.agentScope.individual&&e.responderId){var s=Ember.get(this,"currentUser.id");return e.responderId[1]!==s}return!(t!==P.default.agentScope.group||!e.groupId)&&-1===Ember.get(this,"currentUser.groupIds").indexOf(e.groupId[1])},_reloadTimeEntries:function(e){var t=e.status,s=P.default.status,n=s.closed,i=s.resolved;t&&[n,i].includes(t[1])&&Ember.get(this,"hasTimesheetsFeatureAndAbility")&&Ember.get(this,"findTimeEntries").perform()},_ticketPropertiesUpdateFailure:function(e){Ember.get(this,"flashMessages").danger(e.message)},_attachmentDeleteSuccess:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("tickets.attachment.deleted"))},_attachmentUnlinkSuccess:function(e){var t=e.attachment,s=e.parentObj,n=Ember.get(t,"id"),i=Ember.get(s,"attachments"),a=i.findBy("id",n);i.removeObject(a),this._attachmentDeleteSuccess()},_attachmentDeleteFailure:function(e){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("tickets.attachment.deleted.error",{reason:e.message}))},_showFreshtipsOnReplySubmit:function(e){e===P.default.action.reply&&Ember.get(this,"displayPopUp")&&this.send("setPopUpDisplayed")},_submitTicketSuccess:function(e,t,s,n,i,a){var r=this,l=a?a.article_id:null,o=!1,c=this.currentUserPrivileges.hasUpdateTicketStatusPrivilege(Ember.get(this,"ticket.type"));if(this._showFreshtipsOnReplySubmit(t),i&&c&&("reply"!==Ember.get(this,"endpoint")&&this.setStatus(i),o=!0),t===P.default.action.reply&&"reply"===Ember.get(this,"endpoint")&&e.conversation&&e.conversation.ticket){var d=Ember.get(this,"ticket").changedAttributes(),m=this.ticket.changedCustomFields;Ember.get(this,"ticket").rollbackAttributes(),e.meta&&e.meta.vault_token&&(e.conversation.ticket.vault_token=e.meta.vault_token),Ember.get(this,"store").pushPayload("ticket",{ticket:e.conversation.ticket}),delete e.conversation.ticket;var u={event:"ticket.propertiesUpdated",data:{changedAttributes:d}};Ember.get(this,"marketplace").publishEvent(u).then(this._updatePropertyCBTktSaveSuccess(d,m)).catch((function(e){return r._mkpPublishEventError(e)}))}if(Ember.get(this,"isReplyWithUndo")){var p=e.conversation;if(Ember.set(this,"undoneId",n),Ember.get(this,"undoSendCache.showTip")){var h=null,f=Ember.get(this,"store").peekRecord("conversation",n);null!=f&&(h=Ember.get(f,"ticket.content.id"));var b=p.user_id,k=p.created_at,g=f?f.data:{userId:null,createdAt:null},v=g.userId,E=g.createdAt,y=!1;if(null!=k&&null!=E)new Date(k).getTime()-E.getTime()<3e5&&p.ticket_id.toString()==h&&(y=!0);if(b==v&&!Ember.get(this,"undoSendEnabled")&&y)Ember.setProperties(this,{undoSendTip:!0,latestConversationId:p.id,"undoSendCache.showTip":!1}),Ember.get(this,"heap").track("Undo suggestion popped up")}Ember.get(this,"undoSendEnabled")&&!o&&Ember.setProperties(this,{latestConversationId:p.id,undoSendLocalNote:e})}else Ember.set(this,"latestConversationId",null);this._pushConversationsToStore(e),this.incrementProperty("totalConversationsCount"),Ember.set(this,"hasDraft",!1),this.send("hideAction"),Ember.get(this,"ticket").incrementCounter(),Ember.set(this,"usefulArticlesLog",[]),this.setOmniChannelReplyAction(t),this._sendBotResponseFeedback(l,t),n&&this.send("fetchLatestConversations",n),this._resetAutoRefresh(),Ember.set(this,"fetchConversationRetryCount",0),this._resetContextOverlay(),this.send("removeError","trafficCop"),this.send("removeError","undoEnqueued"),this.send("removeError","undoAgentEnqueued")},_sendBotResponseFeedback:function(e,t){if(Ember.isPresent(e)&&t===P.default.action.reply&&Ember.get(this,"currentAccount").hasFeature("agent_articles_suggest")){var s=e.map((function(e){return{id:e,agent_feedback:!0}}));Ember.get(this,"ticket").updateBotResponse({articles:s}).then(this._botResponseUpdated.bind(this))}},_botResponseUpdated:function(e){if(e)return Ember.set(this,"suggestedArticle",[]),Ember.get(this,"store").pushPayload("botResponse",{botResponse:e.bot_response})},_submitTicketFailure:function(e){if(e.errors.any(this.isSignalRed))return this.actions.fetchAndScrollToLatestConversations.call(this);e.errors[0]&&"unresolved_child"===e.errors[0].detail.code?Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t(j.ERROR_CODES[e.errors[0].detail.code])):e.errors.any(this.isUndoEnqueued)?this.send("showError","undoEnqueued"):e.errors.any(this.isUndoAgentEnqueued)?this.send("showError","undoAgentEnqueued"):e.errors.any(this.isFaceBookUserBlocked)?Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.facebook_user_blocked")):e.errors.any(this.isEbayReplyLimit)?Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.ebay_reply_limit")):e.errors.any(this.isTwitterBlocked)?Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.twitter_app_blocked")):e.errors.any(this.isNotesLimitExceeded)?Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.notes_limit_exceeded")):Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.submitfailure"))},_ticketSecondaryRequisiteCallback:function(e){var t=this,s=this.editorAttachment,n=this.hasCollisionFeature,i=this.hasAgentCollisionRevampLaunched,a=this.isRelatedTicket,r=this.isChildTicket,l=this.isBotEmailSupport,o=this.isSolutionArticleSuggestion,c=this.isCannedResponseSuggestion;Ember.get(this,"queryParams.thread")||this.ticketDetailsSlider.resetAllSliders(),s.clearAttachments(),this._checkQueryParams(e),Ember.get(e,"isTwitter")&&this.fetchAllTwitterHandles(),this._fetchWhatsAppChannelApps(e),n&&i?(this.initializeRTSConnection(e),this.initiateAHT()):n&&this.initializeCollisionSocket(),(a||r)&&this.getPrimeTicketDetails(),this._autoOpenDraft(e),l&&Ember.get(this,"botResponseData").perform(),o&&Ember.get(this,"fetchSolutionArticleSuggest").perform(),c&&Ember.get(this,"fetchCannedResponseSuggest").perform(),Ember.run.next((function(){var e=Ember.get(t,"openConversationBox");if(e){var s="forward"==e?"latest":null;t.send("showAction",e,s)}}))},_checkQueryParams:function(e){if(Ember.get(this,"queryParams.createServiceTask")&&(Ember.tryInvoke(this,"updateQueryParam",["createServiceTask",!1]),this._triggerServiceTaskSlider(e)),Ember.get(this,"queryParams.thread")){var t=Ember.get(this,"queryParams.thread");Ember.tryInvoke(this,"updateQueryParam",["thread",t]),this.threadSlider.open(I.THREAD_VIEWS.DETAIL,{threadId:t,parent:this.threadParent,templateTasks:this.threadTemplateTasks})}},botResponseData:(0,F.task)(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"ticket.id"),e.next=3,Ember.get(this,"ajax").request("".concat(N.default.emailBotArticleFetch).concat(t).concat("/suggestion")).catch(this._fetchApiFailure.bind(this));case 3:(s=e.sent)&&Ember.isPresent(s.suggestion)?Ember.setProperties(this,{adviceSuggestResponse:s.suggestion,isBotSupportProvided:!0}):Ember.set(this,"isBotSupportProvided",!1);case 5:case"end":return e.stop()}}),e,this)}))).restartable(),fetchSolutionArticleSuggest:(0,F.task)(regeneratorRuntime.mark((function e(){var t,s,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ember.get(this,"ticket").getBotResponse().catch(this._fetchApiFailure.bind(this));case 2:if(t=e.sent,!Ember.isPresent(t)){e.next=10;break}return s=t.bot_response.articles,n=s.map((function(e){return e.id.toString()})).join(","),e.next=8,this.store.query("article",{context:"insertSolutions",ids:n,user_id:Ember.get(this,"ticket.requesterId"),language:Ember.get(this,"currentAccount.portalData.language")}).catch(this._fetchApiFailure.bind(this));case 8:i=e.sent,Ember.set(this,"solutionArticleSuggest",{solutionArticles:i,count:s.length});case 10:case"end":return e.stop()}}),e,this)}))).restartable(),fetchCannedResponseSuggest:(0,F.task)(regeneratorRuntime.mark((function e(){var t,s,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(N.default.cannedResponseSuggest).concat(Ember.get(this,"ticket.id")),e.next=3,Ember.get(this,"ajax").request(t).catch(this._fetchApiFailure.bind(this));case 3:if(s=e.sent,!Ember.isPresent(s)){e.next=11;break}return n=s.canned_responses,i=n.map((function(e){return e.id.toString()})).join(","),e.next=9,this.store.query("cannedResponse",{ids:i}).catch(this._fetchApiFailure.bind(this));case 9:a=e.sent,Ember.set(this,"cannedResponseSuggest",{cannedResponse:a,count:a.length});case 11:case"end":return e.stop()}}),e,this)}))).restartable(),_fetchApiFailure:function(){return null},_triggerServiceTaskSlider:function(e){Ember.get(this,"showServiceTaskWidget")&&!Ember.get(this,"isChildTicket")&&((Ember.get(e,"associatedTicketsCount")||0)<P.MAX_CHILD_COUNT&&this.send("associateTickets","createServiceTask"))},fetchCallFailure:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("fd.somethingwentwrongError"))},_fetchAdditionalConversations:function(e,t){var s=Ember.isEmpty(e);s&&this.incrementProperty("page");var n=Ember.getProperties(this,"orderType","page","perPage"),i=n.orderType,a=n.perPage,r=n.page,l=null,o={};return l=Ember.get(this,"isfbPostTicket")?(o=this._constructFBParams(s,t,r)).fbParams:s?{page:r}:{sinceId:e},Ember.get(this,"fetchConversations").perform(Object.assign({orderType:i,perPage:a},l),null,o.isFbSortChanged)},_constructFBParams:function(e,t,s){var n,i=Ember.get(this,"fbSortLocalStorage.fbsort"),a=e?50:3,r=Ember.get(this,"page")<2,l=!!(!e||t&&r);n=e||t?s:1,e||Ember.set(this,"page",0);var o=i.params;return{fbParams:{orderBy:o.orderBy,orderType:o.orderType,parent:o.parent,perPage:a,page:n},isFbSortChanged:l}},_setAnnotate:function(){Ember.set(this,"currentAccount.collabObject.annotate",!0)},_scrollToConversation:function(){var e=this,t=Ember.get(this,"conversations.canonicalState"),s=(this.isReverseOrder?t:t.reverse()).find((function(t){return!e.element.querySelector('[data-album="note_'.concat(t.id,'"]'))}));return this._scrollToNote(null==s?void 0:s.id,!0,-200),Ember.RSVP.Promise.resolve()},_pushConversationsToStore:function(e){return Ember.get(this,"store").pushPayload(e),e&&e.meta&&(Ember.set(this,"totalConversationsCount",e.meta.count),e.meta.ner_data&&Ember.set(this,"nerData",e.meta.ner_data)),e},_autoOpenDraft:function(e){var t=!Ember.get(this,"ticket.archived");Ember.get(this,"currentUser").hasAbility("reply_ticket")&&t&&this.getTicketDraft(e).then(this._autoOpenDraftSuccessCB.bind(this),this._autoScrollToBottomforResponder.bind(this))},_fetchWhatsAppChannelApps:function(e){this.currentAccount.hasFeature("whatsapp_channel")&&e.isWhatsapp&&Ember.isEmpty(this.store.peekAll("channel").firstObject)&&this.fetchChannelApp()},_fieldErrorFlashMessage:function(){var e=this,t=Ember.get(this,"ticket"),s=Ember.get(this,"i18n").t("common.ticket"),n=Ember.get(t,"associationType")===P.default.associationType.parent,i=Ember.get(t,"errors.messages"),a=Ember.get(t,"ticketFields.fields"),r={};a.forEach((function(e){r[e.name]=e.label})),i&&(i.forEach((function(t){var i=t.field,a=t.message,l=t.code;if(n)j.ERROR_CODES[l]&&(a=Ember.get(e,"i18n").t(j.ERROR_CODES[l]));else{var o=(0,R.constructErrorKey)(t);o&&(a=Ember.get(e,"i18n").t("".concat(o,".flashmessage"),{fieldName:r[i.split(".").lastObject],entity:s}))}Ember.get(e,"flashMessages").danger(a)})),this.incrementProperty("focusOnError"),t._internalModel.clearErrorMessages())},_tagLatestConversation:function(e){var t=e.conversations;if(Ember.get(this,"fetchConversationRetryCount")>2)this.showTrafficCopError();else if(!Ember.get(this,"editorData.private")&&t&&0!==t.length||Ember.get(this,"checkForSocialChannel")){this.showTrafficCopError();var s=Ember.get(t,"lastObject.id");Ember.set(this,"fetchConversationRetryCount",0),Ember.set(this,"firstConversationInResponse",s.toString()),Ember.get(this,"undoSendEnabled")&&Ember.set(this,"ticket.lastConversationId",Ember.get(t,"firstObject.id"))}else Ember.get(this,"editorData.private")||this.incrementProperty("fetchConversationRetryCount"),this._fetchActualNoteIdForTicket()},_fetchActualNoteIdForTicket:function(){var e=Ember.get(this,"conversations.canonicalState")||[],t=e.length>1?e[1].id:0,s=Ember.get(this,"orderType"),n=Ember.get(this,"perPage");Ember.get(this,"ticket").getConversations((0,S.default)({sinceId:t,orderType:s,perPage:n,include:"requester"})).then(this._fetchActualNoteIdOnDiscrepencySuccess.bind(this)).catch(this._fetchActualNoteIdOnDiscrepencyError.bind(this))},_fetchActualNoteIdOnDiscrepencySuccess:function(e){var t=e.conversations,s=t&&t.length>0?t[0].id:0;Ember.set(this,"ticket.lastConversationId",s);var n=Ember.get(this,"editorData"),i=Ember.get(this,"editorStatus");this.send("sendConversation",n,i)},_fetchActualNoteIdOnDiscrepencyError:function(){this.showTrafficCopError()},_scrollToLatestConversations:function(){var e=this;Ember.run.next((function(){var t=e.element.querySelector("#ticket-action-error");t&&Ember.get(e,"scroller").scrollVertical(t,{offset:Ember.get(e,"isReverseOrder")?-180:0})}))},_failedEmailsCB:function(e){Ember.get(this,"flashMessages").danger(e.message),this.toggleEmailFailure()},_resetAutoRefresh:function(){Ember.set(this,"autoRefreshConversationCount",0)},_forwardTemplateCB:function(e){return this._agentReplyTemplateCB(e)},_replyToForwardDataCB:function(e){return e.data.body="".concat(e.data.template).concat(e.data.signature),e.data},_ticketDraftCB:function(e){return e.data.inline_attachment_ids?Ember.set(this,"draftInlineAttachmentIds",e.data.inline_attachment_ids.map(Number)):Ember.set(this,"draftInlineAttachmentIds",[]),e.data},_agentReplyTemplateCB:function(e){var t=Ember.get(this,"mkpInterface"),s="".concat(e.data.template).concat(e.data.signature),n=Ember.get(this,"actionType"),i=Ember.get(t,"controlData.replyNote.".concat(n,"Text"));return i&&(s=i,Ember.set(t,"controlData.replyNote.".concat(n,"Text"),null)),e.data.body=s,this.isReplyAction&&Ember.set(this,"draftInlineAttachmentIds",[]),e.data},_executeScenarioSuccessCB:function(e){var t;Ember.get(this,"store").pushPayload("ticket",e);for(var s=e.meta,n=0;n<s.activities.length;n++)"add_comment"==s.activities[n].name?t=!0:"add_watcher"==s.activities[n].name&&Ember.set(this,"scenarioWatchers",!0);if(t){var i=Ember.get(this,"lastConversationId");this.send("fetchLatestConversations",i)}Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.details.executescenario.success"))},_executeScenarioFailureCB:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.executescenario.error"))},_deleteTimeEntryCB:function(){Ember.get(this,"ticket").incrementCounter()},_startStopTimerCB:function(){Ember.get(this,"ticket").incrementCounter()},_splitTicketCB:function(e){Ember.set(this,"displaySplitTicket",!1),Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.ticket.id),Ember.get(this,"refreshAction")(),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("tickets.activities.summary.ticket_split"))},_splitTicketErrorCB:function(){this.set("displaySplitTicket",!1),this.flashMessages.danger(this.i18n.t("fd.somethingwentwrongError"))},_deleteTicketForeverSuccessCB:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.actions.delete.success")),this.router.transitionTo("helpdesk.tickets.index")},_deleteTicketForeverFailureCB:function(e){this.flashMessages.danger(Ember.get(this,"i18n").t("ticket.actions.delete.failure",{reason:e.message}))},_markUnSpamSuccessCB:function(e,t){var s={ticket:{id:t.id,spam:!1,can_be_associated:!0}};e.pushPayload(s),Ember.set(this,"reloadPropertiesView",!0),this.flashMessages.success(Ember.get(this,"i18n").t("ticket.actions.undospam.success")),this._makeThreadsActionable(t),this.initiateAHT(!0)},onTicketChange:function(e){Ember.isNone(e)||(this._resetProps(),Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e,K))},_markUnSpamFailureCB:function(e){this.flashMessages.danger(Ember.get(this,"i18n").t("ticket.actions.undospam.fail",{reason:e.message}))},_restoreTicketSuccessCB:function(e,t){var s={ticket:{id:t.id,deleted:!1,can_be_associated:!0}};e.pushPayload(s),Ember.set(this,"reloadPropertiesView",!0),this.flashMessages.success(Ember.get(this,"i18n").t("ticket.actions.undodelete.success")),this._makeThreadsActionable(t),this.initiateAHT(!0)},_makeThreadsActionable:function(e){this.isThreadsEnabled&&this.collabThread.setActionable(e.isActionable)},_restoreTicketFailureCB:function(e){this.flashMessages.danger(Ember.get(this,"i18n").t("ticket.actions.undodelete.fail",{reason:e.message}))},_removeAttachmentSuccessCB:function(e){this._attachmentUnlinkSuccess(e)},_removeAttachmentFailureCB:function(e){this._attachmentDeleteFailure(e)},_autoOpenDraftSuccessCB:function(e){e.body?(Ember.set(this,"hasDraft",!0),this.assignCurrentReplyChannel(P.DEFAULT_REPLY_CHANNEL),this.showDraft(e)):Ember.get(this,"isReverseOrder")||this._autoScrollToBottomforResponder()},_publishTimerEvent:function(e){if(e.data){var t=e.data.timer_running?"ticket.startTimer":"ticket.stopTimer";Ember.get(this,"marketplace").publishEvent({event:t,data:e.data})}},_pushDataToStore:function(e){if(e.data){var t=Ember.get(this,"store"),s=t.normalize("time-entry",e.data);t.push(s),this._publishTimerEvent(e)}},_autoScrollToBottomforResponder:function(){var e=Ember.get(this,"currentUser.id"),t=Ember.get(this,"ticket.responderId");Ember.get(this,"queryParams.note")?this._scrollToNote(Ember.get(this,"queryParams.note"),!0):e===t&&this._scrollToNote(Ember.get(this,"ticket.lastConversationId"),!0)},setAsClosedAndSendConversation:function(e,t,s){var n=Ember.get(this,"ticket");return Ember.set(n,"status",t),t&&Ember.get(this,"actionType")===P.default.action.reply&&"reply"===Ember.get(this,"endpoint")&&(e.ticket=Ember.get(this,"ticket").serialize()),n.validate().then(this._setAsClosedAndSendConversationCB.bind(this,e,t,s))},_setAsClosedAndSendConversationCB:function(e,t,s,n){var i=n.validations,a=Ember.get(i,"isValid"),r=t===P.default.status.closed||t===P.default.status.resolved;if(a)return this.saveConversation(e,t,s).then(this._redirectInactiveToList.bind(this,r,a));Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.action.sendSetError.".concat(r?"inactive":"active"))),Ember.set(this,"startTicketValidation",!0),this.incrementProperty("focusOnError")},_redirectInactiveToList:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=this;t&&e&&Ember.isEmpty(Ember.get(this,"ticketActionError"))&&(Ember.get(this,"focusMode")?Ember.run.later((function(){s.isDestroyed||s.isDestroying||s.goToNextTicket()}),2e3):Ember.run.later((function(){Ember.get(s,"router").transitionTo("helpdesk.tickets")}),2e3))},setStatus:function(e){var t=Ember.get(this,"ticket");return Ember.set(t,"status",e),this.updateProperty()},setStatusAndSendConversation:function(e,t,s){return this.setAsClosedAndSendConversation(e,t,s)},showTrafficCopError:function(){Ember.set(this,"latestConversationId",null),this.send("showError","trafficCop")},_closeTicketCB:function(e,t,s){var n=s.validations;if(Ember.get(n,"isValid"))return Ember.set(t,"skipCloseNotification",e),t.save().then(this._closeTicketCBNestedSuccessCB.bind(this),this._closeTicketCBNestedFailureCB.bind(this));var i="".concat(Ember.get(this,"i18n").t("ticket.details.closeerror.title")," ").concat(Ember.get(this,"i18n").t("ticket.details.closeerror.description"));Ember.get(this,"flashMessages").warning(i),Ember.set(this,"startTicketValidation",!0),this.incrementProperty("focusOnError")},_closeTicketCBNestedSuccessCB:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.closed")),Ember.get(this,"focusMode")?this.goToNextTicket():Ember.get(this,"router").transitionTo("helpdesk.tickets.index")},_closeTicketCBNestedFailureCB:function(e){var t=Ember.get(this,"i18n").t("ticket.close.error"),s=Ember.get(e,"errors");Ember.isEmpty(s)||s.forEach((function(e){t=e.detail.message,"status"===e.detail.field&&(t=j.ERROR_CODES[e.detail.code]&&Ember.get(this,"i18n").t(j.ERROR_CODES[e.detail.code])||t)})),Ember.get(this,"flashMessages").danger(t)},_updatePropertyCBTktSaveSuccess:function(e,t){return this._ticketPropertiesUpdateSuccess.bind(this)(e,t),!!this.shouldUpdatePciField()&&this.updatePciValues()},_updatePropertyCBTktSaveFailure:function(){this._fieldErrorFlashMessage()},goToNextTicket:function(){var e=Ember.get(this,"ticketList"),t=Ember.get(this,"currentTicket"),s=Ember.get(this,"ticketList").indexOf(t)+1;s<=0?Ember.get(this,"router").transitionTo("helpdesk.tickets.index"):s>=e.length?this.send("onPageChange",1):this.send("onTicketChange",e[s])},findTimeEntries:(0,F.task)(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={per_page:Ember.get(this,"perPage")},e.next=4,Ember.get(this,"ticket").getAllTimeEntries(t);case 4:s=e.sent,Ember.get(this,"store").pushPayload(s),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),failureEvaluations:function(){this.flashMessages.danger(this.i18n.t("quality-management.scores.fetch.failure"))},getEvaluations:(0,F.task)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.query("score",{entity_id:this.ticket.id}).catch(this.failureEvaluations.bind(this));case 2:t=e.sent,Ember.set(this,"scores",t);case 4:case"end":return e.stop()}}),e,this)}))),appViewEntity:s.default.displayOptions.ticket});e.default=te})),define("freshdesk/components/module-tickets/ticket-details/conversation-banners/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={success:"tick-icon",warning:"alert-icon"},s=Ember.Component.extend({attributeBindings:["role","data-test-id"],defaultClass:"__module-tickets__ticket-details__conversation-banners",classNameBindings:["defaultClass","isSuccess:success:warning"],"data-test-id":"conversation-banners",isActionNone:Ember.computed.none("flashMessageAction"),type:"success",isSuccess:Ember.computed.equal("type","success"),role:Ember.computed("isActionNone",(function(){return Ember.get(this,"isActionNone")?"comment":"button"})),icon:Ember.computed("type",(function(){return t[Ember.get(this,"type")]})),click:function(){this.flashMessageAction&&this.flashMessageAction()}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/conversation-banners/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"llU5pzK/",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","info-message"],[9],[0,"\\n  "],[1,[27,"svg-jar",[[23,["icon"]]],[["class"],[[27,"if",[[23,["isSuccess"]],"app-icon--green","app-icon--red"],null]]]],false],[0,"\\n"],[4,"if",[[23,["primaryText"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","message ml-12 text--semibold"],[11,"data-test-id","conversation-banner-primary-message"],[9],[1,[27,"html-safe",[[23,["primaryText"]]],null],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["secondaryText"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","message ml-6 text--normal"],[11,"data-test-id","conversation-banner-secondary-message"],[9],[1,[21,"secondaryText"],false],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"],[4,"if",[[23,["actionText"]]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","message__action"],[11,"data-test-id","conversation-banner-action"],[9],[1,[21,"actionText"],false],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/conversation-banners/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/conversation/component",["exports","freshdesk/mixins/bubble-action","freshdesk/mixins/tickets/collapsible-email","freshdesk/mixins/anchor-link","freshdesk/utils/blank-array","freshdesk/utils/tickets/conversation","freshdesk/mixins/check-model-modified","freshdesk/mixins/integrations/attachment-apps","ember-local-storage","freshdesk/utils/camelcase-to-underscore","ember-concurrency","freshdesk/constants/conversation","@freshworks/ember-collaboration-threads/constants/thread","freshdesk/utils/tickets/ticket-conversation-item","freshdesk/constants/threads/ticket"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=Ember.Component.extend(n.default,t.default,s.default,l.default,r.default,{navigationAlert:Ember.inject.service("navigation-alert"),store:Ember.inject.service(),ajax:Ember.inject.service(),heap:Ember.inject.service(),currentUser:Ember.inject.service(),currentAccount:Ember.inject.service(),i18n:Ember.inject.service(),flashMessages:Ember.inject.service(),manageLightbox:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),collabThreadTickets:Ember.inject.service(),classNames:["__module-tickets__ticket-details__conversation"],collapsedWidthOffset:.58,quickReply:!1,attributeBindings:["albumName:data-album","data-test-id"],defaultClass:"ticket-details__item","data-test-id":"conversation-wrapper",classNameBindings:["defaultClass","isEditing:ticket-details__editnote","isAgent::ticket-details__requestor","collapseConv:activities-conversation","showPrivateIndicator:ticket-details__privatenote","isBroadcastNote:broadcast-message","isDeletedAndInActivity:activities-conversation__deleted","isAutoResponseOrInActivityAndNotEditing:show-activities-conversation","isAutomationEmailReply:ticket-details__automation-email"],isEditing:!1,enableBtnAction:!1,displayDeleteConversation:!1,displayToLength:1,displayCCLength:1,displayBCCLength:1,displayUndo:!1,undoSendTip:!1,tipSuccess:null,showOnboardingTip:!1,threadsLoaded:!1,latestConversationId:null,retriesForFirstNote:0,undoneId:null,anchorLinkContainer:".ticket-note-typography a",notQuickReply:Ember.computed.not("quickReply"),isNotArchived:Ember.computed.not("conversation.ticket.archived"),allowRemoveAttachment:Ember.computed.and("notQuickReply","isNotArchived"),showAddToResponse:Ember.computed.and("allowAddToResponse","notQuickReply","isNotArchived"),dynamicAttachmentsIds:(0,i.default)(),undoSendCache:(0,o.storageFor)("undosend"),helpdeskName:Ember.computed.reads("currentAccount.helpdeskName"),conversationCategory:Ember.computed.reads("conversation.category"),ccEmails:Ember.computed.reads("conversation.ccEmails"),toEmails:Ember.computed.reads("conversation.toEmails"),bccEmails:Ember.computed.reads("conversation.bccEmails"),threadLimitPerTicketExceeded:Ember.computed.gte("threadsCount",u.THREAD_LIMITS[u.ENTITIES.TICKET]),threadLimitPerConversationExceeded:Ember.computed.gte("threads.length",u.THREAD_LIMITS[u.ENTITIES.CONVERSATION]),conversationId:Ember.computed.readOnly("conversation.id"),isIncoming:Ember.computed.reads("conversation.incoming"),isSocialIncoming:Ember.computed.and("isSocial","isIncoming","isCustomerResponse"),notIsSocialIncoming:Ember.computed.not("isSocialIncoming"),isCustomerResponse:Ember.computed.equal("category","customer_response"),isAgent:Ember.computed.or("conversation.user.{isAgent,deletedAgent}"),surveyList:Ember.computed.reads("conversation.surveyResult.surveyList"),surveyName:Ember.computed.reads("conversation.surveyResult.surveyName"),isAutoResponse:Ember.computed.and("currentAccount.showAutoRespondedNoteInTicketDetails","conversation.autoResponse"),isNotEditing:Ember.computed.not("isEditing"),isAutoResponseOrInActivityAndNotEditing:Ember.computed.and("isAutoResponseOrInActivity","isNotEditing"),isNotAutoResponse:Ember.computed.not("isAutoResponse"),isAutoResponseOrInActivity:Ember.computed.or("isInActivity","isAutoResponse"),collapseConv:Ember.computed.reads("isAutoResponseOrInActivity"),hideNoteEdit:Ember.computed.reads("mkpInterface.controlData.noteEditBtn.hide"),addedAttachments:Ember.computed.setDiff("dynamicAttachmentsIds","attachmentInternalList"),removedAttachments:Ember.computed.setDiff("attachmentInternalList","dynamicAttachmentsIds"),quotedContent:Ember.computed.or("conversation.{hasQuotedText,quotedContent}"),showButton:Ember.computed.and("isNotReplyToForwardConversation","quotedContent","showQuotedText"),source:Ember.computed.reads("conversation.sourceType"),category:Ember.computed.readOnly("conversation.categoryType"),isSocial:Ember.computed.reads("conversation.isSocial"),isDirectMessage:Ember.computed.reads("conversation.isDirectMessage"),showQuotedText:Ember.computed.not("mkpInterface.controlData.deleteQuotedText.hide"),isPrivate:Ember.computed.reads("conversation.private"),isDeletedAndInActivity:Ember.computed.and("isInActivity","conversation.deleted"),notDeletedAndInActivity:Ember.computed.not("isDeletedAndInActivity"),showAttachments:Ember.computed.and("attachments.length","notDeletedAndInActivity"),hideCollabContent:Ember.computed.or("isEditing","isSurveyNote","isDeletedAndInActivity"),isReplyToForwardConversation:Ember.computed.equal("category","reply_to_forward"),isNotReplyToForwardConversation:Ember.computed.not("isReplyToForwardConversation"),isThirdPartyResponseConversation:Ember.computed.equal("category","third_party_response"),isReplyToForward:Ember.computed.or("isReplyToForwardConversation","isThirdPartyResponseConversation"),EligibleForReplyToForwardAction:Ember.computed.or("isReplyToForward","isForwardConversation"),isNote:Ember.computed.or("conversation.{isNote,isAutomationRule}"),isPrivateNote:Ember.computed.and("isNote","isPrivate","notBroadcastNote","notIsSocialIncoming"),isBroadcastNote:Ember.computed.equal("conversation.categoryType","broadcast"),notBroadcastNote:Ember.computed.not("isBroadcastNote"),showPrivateIndicator:Ember.computed.and("isPrivate","notBroadcastNote","notIsSocialIncoming"),showToEmails:Ember.computed.or("isPrivateNote","isPublicNote"),isAutomationEmailReply:Ember.computed.reads("conversation.automationEmailReply"),notAnAgent:Ember.computed.not("isAgent"),customerRepliedToFbCommentOrCustomerDmFromFb:Ember.computed.or("conversation.replyToFbComment","conversation.dmFromFb"),customerDmFromFb:Ember.computed.and("conversation.dmFromFb","notAnAgent"),isSurveyNote:Ember.computed.reads("conversation.isFeedback"),hideActions:Ember.computed.or("quickReply","isInActivity","isBroadcastNote","isSurveyNote","noActions","isAutomationEmailReply"),actionsList:Ember.computed.or("canSendFacebookReply","displayForward","displayReplyToForward","canEditConversation","canSplitConversation","canDeleteConversation","canHavePrivateThread"),noActions:Ember.computed.not("actionsList"),isForwardConversation:Ember.computed.or("conversation.{isForwardEmail,isAutomationRuleForward}"),isAutomatedNote:Ember.computed.or("conversation.{isAutomationRule,isAutomationRuleForward}"),normalAttachments:Ember.computed.reads("conversation.attachments"),cloudAttachments:Ember.computed.alias("conversation.cloudFiles"),attachments:Ember.computed.union("normalAttachments","cloudAttachments"),noteUserIsAgent:Ember.computed.reads("conversation.user.isAgent"),canHavePrivateThread:Ember.computed.reads("collabThreadTickets.isPrivateThreadingEnabled"),recordingInprogress:Ember.computed.equal("conversation.freshcallerCall.recordingStatus",1),recordingComplete:Ember.computed.equal("conversation.freshcallerCall.recordingStatus",2),isNewConversationWithUndo:Ember.computed.and("latestConversationId","currentUser.preferences.undo_send"),hasPrivateThread:Ember.computed.bool("privateThread"),privateThreadId:Ember.computed.reads("privateThread.id"),notPrivatePublicNote:Ember.computed.not("showToEmails"),toEmailContent:Ember.computed.or("toEmails","conversation.ticket.isEcommerce"),isEmailContentPresent:Ember.computed.and("notPrivatePublicNote","toEmailContent"),anyEmailPresent:Ember.computed.or("isEmailContentPresent","ccEmails","bccEmails"),hideConversationActionIcons:Ember.computed.or("hideActions","displayUndo","isInActivity"),showConversationActionIcons:Ember.computed.not("hideConversationActionIcons"),conversationExpanded:Ember.computed.not("collapseConv"),isAutoResponseAndExpanded:Ember.computed.and("isAutoResponse","conversationExpanded"),actionIconsVisible:Ember.computed.or("isNotAutoResponse","isAutoResponseAndExpanded"),showConversationActions:Ember.computed.and("showConversationActionIcons","actionIconsVisible"),isNotCustomerReply:Ember.computed.or("showPrivateIndicator","isAgent"),showHorizontalDivider:Ember.computed.and("isNotCustomerReply","threads"),compareNoteId:Ember.computed("conversationId","nerData.note_id",(function(){return parseInt(Ember.get(this,"conversationId"))===Ember.get(this,"nerData.note_id")})),isNotified:Ember.computed("showToEmails","toEmails",(function(){return Ember.get(this,"showToEmails")&&Ember.get(this,"toEmails").length>0})),showLastEditInfo:Ember.computed("isEditing,conversation.lastEditedUserId,conversation.lastEditedAt",(function(){return!Ember.get(this,"isEditing")&&null!=Ember.get(this,"conversation.lastEditedUserId")&&null!=Ember.get(this,"conversation.lastEditedAt")})),attachmentInternalList:Ember.computed.map("conversation.attachments",(function(e){return parseInt(Ember.get(e,"id"))})),isPublicNote:Ember.computed("isPrivate",(function(){return Ember.get(this,"conversation.isNote")&&!Ember.get(this,"isPrivate")})),areAnyConversationsHidden:Ember.computed("totalConversationsCount","visibleConversationsCount",(function(){return this.totalConversationsCount-this.visibleConversationsCount>0})),canSendFacebookReply:Ember.computed("conversation",(function(){var e=Ember.get(this,"customerRepliedToFbCommentOrCustomerDmFromFb")&&Ember.get(this,"notAnAgent");return Ember.get(this,"conversation.fbPost.can_comment?")&&!e})),canHaveAnchoredThreads:Ember.computed("collabThreadTickets.isAnchoredThreadsEnabled","canHavePrivateThread",(function(){return this.collabThreadTickets.isAnchoredThreadsEnabled&&this.canHavePrivateThread&&!this.isThreadNote})),isThreadNote:Ember.computed("conversation.threadId",(function(){return!!this.conversation.threadId})),forwardHeapId:Ember.computed("collabThreadTickets.isForwardThreadingEnabled",(function(){return this.collabThreadTickets.isForwardThreadingEnabled?u.FORWARD_HEAP_DATA.inline:null})),privateThread:Ember.computed("threads.[]",(function(){if(this.threads&&this.threads.length)return this.threads.find((function(e){return e.type===u.TICKET_THREAD_TYPES.PRIVATE}))})),disableStartThreadIcon:Ember.computed("threadLimitPerTicketExceeded","hasPrivateThread","threadLimitPerConversationExceeded",(function(){return!this.hasPrivateThread&&(this.threadLimitPerTicketExceeded||this.threadLimitPerConversationExceeded)})),startThreadIconToolTip:Ember.computed("threadLimitPerTicketExceeded","hasPrivateThread","threadLimitPerConversationExceeded",(function(){var e,t=this,s=this;return u.START_THREAD_ICON_TOOLTIP.some((function(n){if(s[n.property])return e=n.count?t.i18n.t(n.translationKey,{count:n.count,type:t.i18n.t(n.typeKey)}):t.i18n.t(n.translationKey)})),e||this.i18n.t("threads.start_thread")})),startThreadIconHeapId:Ember.computed("hasPrivateThread",(function(){return this.hasPrivateThread?u.THREAD_HEAP_ATTRS.viewPrivateThread:u.THREAD_HEAP_ATTRS.newPrivateThread})),albumName:Ember.computed("conversationId",(function(){return"note_".concat(Ember.get(this,"conversationId"))})),imageSelector:Ember.computed("albumName",(function(){return"[data-album = '".concat(this.albumName,"'] .text__content img[src]")})),outgoingFailure:Ember.computed("conversation.{outgoingFailures,sourceType}",(function(){var e=Ember.get(this,"conversation.sourceType"),t=Ember.get(this,"conversation.outgoingFailures");return t&&t[e]?e===m.default.sourceTypes.twitter&&t[e].code===m.default.outgoingFailureCodes.twitterHandleNameChanged?Ember.get(this,"i18n").t("ticket.conversation.twitterHandleNameChanged"):e===m.default.sourceTypes.twitter&&t[e].code===m.default.outgoingFailureCodes.twitterHandleNameDeleted?Ember.get(this,"i18n").t("ticket.conversation.twitterHandleNameDeleted"):e===m.default.sourceTypes.facebook&&t[e].error_code===m.default.outgoingFailureCodes.facebookPrivacyFailure&&t[e].error_subcode===m.default.outgoingFailureSubCodes.facebookPrivacyFailure?Ember.get(this,"i18n").t("ticket.conversation.facebookPrivacyFailure"):t[e].code===m.default.outgoingFailureCodes.surveyFailure?Ember.get(this,"i18n").t("ticket.conversation.outgoingSurveyFailure"):Ember.get(this,"i18n").t("ticket.conversation.outgoingFailure"):null})),displayForward:Ember.computed("source","isEditing","isForwardConversation","collabThreadTickets.isForwardThreadingEnabled",(function(){var e=Ember.get(this,"conversation.isFeedback"),t=Ember.get(this,"isEditing"),s=Ember.get(this,"isPrivate"),n=Ember.get(this,"isForwardConversation"),i=Ember.get(this,"currentUser").hasAbility("forward_ticket");return!t&&(!s||this.collabThreadTickets.isForwardThreadingEnabled)&&!e&&i&&!n})),displayReplyToForward:Ember.computed("source,isEditing,EligibleForReplyToForwardAction",(function(){var e=Ember.get(this,"conversation.isFeedback"),t=Ember.get(this,"isEditing"),s=Ember.get(this,"EligibleForReplyToForwardAction");return!t&&!e&&s&&!this.isThreadNote})),canEditConversation:Ember.computed("source,isEditing,noteUserIsAgent,isReplyToForwardConversation",(function(){var e=Ember.get(this,"currentUser").hasAbility("editNote")||Ember.get(this,"currentUser.id")==Ember.get(this,"conversation.userId"),t=Ember.get(this,"conversation.isNote"),s=Ember.get(this,"isEditing"),n=Ember.get(this,"noteUserIsAgent"),i=Ember.get(this,"isReplyToForwardConversation");return!s&&e&&t&&n&&!i})),canDeleteConversation:Ember.computed((function(){var e=Ember.get(this,"isEditing"),t=Ember.get(this,"currentUser").hasAbility("edit_conversation");return Ember.get(this,"noteUserIsAgent")&&!e&&t&&!this.isThreadNote})),canSplitConversation:Ember.computed("source,conversation,isEditing","threads.[]",(function(){var e=Ember.get(this,"conversation.isFeedback"),t=Ember.get(this,"currentUser").hasAbility("merge_or_split_ticket"),s=Ember.get(this,"conversation.incoming"),n=Ember.get(this,"isEditing"),i=!Ember.get(this,"noteUserIsAgent"),a=Ember.get(this,"isPrivate"),r=i||Ember.get(this,"conversation.ticket.requesterId")==Ember.get(this,"conversation.userId"),l=!Ember.get(this,"conversation.fbPost")||Ember.get(this,"canSendFacebookReply"),o=Ember.get(this,"customerRepliedToFbCommentOrCustomerDmFromFb")&&Ember.get(this,"notAnAgent"),c=!Ember.get(this,"conversation.user.blocked");return!this.conversation.isWhatsAppSource&&!n&&!(this.threads&&this.threads.length)&&!e&&c&&t&&s&&!o&&(!a||i)&&r&&l})),conversationIcon:Ember.computed("conversation.sourceType",(function(){return(0,a.getAnchorIcon)(Ember.get(this,"conversation"))})),isConversationActionable:Ember.computed("conversation",(function(){var e=Ember.get(this,"conversation.ticket.isActionable"),t=Ember.get(this,"currentUser.id")===Ember.get(this,"conversation.userId"),s=Ember.get(this,"isPrivate"),n=Ember.get(this,"ticket.hasPermission");return e&&(n||s&&t)})),statusString:Ember.computed("conversation",(function(){return(0,a.getStatusString)(this.getProperties("conversation","isNote","isPrivateNote","isBroadcastNote","isAutoResponse","isAutomationEmailReply"),this.i18n)})),conversationShortInfo:Ember.computed("conversation.surveyResult.agent","isPublicNote","surveyName",(function(){if(Ember.get(this,"conversation.isFeedback")){var e=Ember.get(this,"conversation.surveyResult.agent.name");return void 0!==e?Ember.get(this,"i18n").t("tickets.conversation.survey-response.agent-name",{surveyName:Ember.get(this,"surveyName"),agentName:e}):Ember.get(this,"i18n").t("tickets.conversation.survey-response",{surveyName:Ember.get(this,"surveyName")})}return null})),performedBySystem:Ember.computed("conversation","isAutomatedNote",(function(){var e=Ember.get(this,"conversation.userId");return Ember.isEmpty(e)&&Ember.get(this,"isAutomatedNote")})),didRender:function(){this._super.apply(this,arguments),Ember.get(this,"isEditing")||(this.manageLightbox.removeInlineImages(this.albumName),this.manageLightbox.addInlineImages(this.albumName,this.imageSelector),(0,p.attachWrapper)(this.element))},didInsertElement:function(){this._super.apply(this,arguments),this.sanitizeAnchors()},init:function(){this._super.apply(this,arguments),this.newConversationUndo(),this.collabThreadTickets.isAnchoredThreadsEnabled&&this.fetchThreadsListenOnce.perform()},actions:{messageFailureAction:function(){this.emailFailureDetails(Ember.get(this,"conversation"))},onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},attachToResponse:function(e){Ember.get(this,"attachToResponse")(e)},initiateSplitTicket:function(e){this.bubbleAction("initiateSplitTicket",e)},initiateForwardNote:function(e){this.bubbleAction("initiateForwardNote",e)},initiateReplyToForwardNote:function(e){this.bubbleAction("initiateReplyToForwardNote",e)},initiateDelete:function(){this.toggleProperty("displayDeleteConversation")},delete:function(){var e=this._deleteSuccess.bind(this),t=this._deleteFailue.bind(this);Ember.get(this,"conversation").destroyRecord().then(e).catch(t)},removeAttachment:function(e){var t={parentObj:Ember.get(this,"conversation"),attachment:e};this.bubbleAction("removeAttachment",t)},initiateEdit:function(){Ember.get(this,"navAlertFeatureOn")&&this.initNavAlertRelatedAttrsInComponent(Ember.get(this,"conversation.content")),this.send("doToggleSet")},initiateThread:function(e){return this.hasPrivateThread?this.onThreadOpen(this.privateThreadId):this.onThreadStart({threadType:h.THREAD_TYPES.PRIVATE_THREAD,anchor:{id:e.id,type:h.THREAD_ANCHOR_PARENT.conversation}})},noteUpdate:function(){var e=this,t=Ember.get(this,"conversation");this.setCloudFiles(t);var s=Ember.get(this,"addedAttachments"),n=Ember.get(this,"removedAttachments"),i=Ember.get(this,"store"),a=[];(n.length>0&&n.forEach((function(e){var t=i.peekRecord("attachment",e);a.push(t.destroyRecord())})),Ember.setProperties(t,{attachmentIds:s}),Ember.get(t,"inlineAttachmentIds")&&Ember.set(t,"inline_attachment_ids",Ember.get(t,"inlineAttachmentIds")),Ember.get(t,"hasDirtyAttributes"))&&(a.length?Ember.RSVP.Promise.all(a).then((function(){t.save().then(e._noteUpdateCB.bind(e))})):t.save().then(this._noteUpdateCB.bind(this)))},discard:function(){Ember.get(this,"conversation").rollbackAttributes(),this.clearCloudAttachments(),this.send("doToggleSet")},contentChanged:function(e,t){Ember.set(this,"conversation.body",e),Ember.set(this,"enableBtnAction",!0),Ember.get(this,"navAlertFeatureOn")&&this.setNavAlertOnChange(Ember.get(this,"conversation"),t)},doToggleSet:function(){this.toggleProperty("isEditing")},replyToFacebookComment:function(){var e=Ember.get(this,"conversation");this.attrs.replyToFacebookComment(e)},undoSend:function(){var e={created_at:Ember.get(this,"conversation").data.createdAt};Ember.get(this,"heap").track("Undo send clicked");var t=this._openReplyEditor.bind(this),s=this._undoErrorFunction.bind(this);Ember.get(this,"ticket").undoSend(e).then(t).catch(s)},tipsPrimary:function(){var e=this._tipSuccessFunction.bind(this),t=this._tipFailureFunction.bind(this);Ember.get(this,"ajax").request("/api/_/agents/enable_undo_send",{method:"POST"}).then(e).catch(t)}},fetchThreadsListenOnce:(0,d.task)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fetchThreads){e.next=3;break}return e.next=3,(0,d.waitForProperty)(this,"fetchThreads.isIdle");case 3:this.set("threadsLoaded",!0);case 4:case"end":return e.stop()}}),e,this)}))),_tipSuccessFunction:function(){var e=Ember.get(this,"currentUser.id");null!=Ember.get(this,"store").peekRecord("agent",e)&&Ember.set(this,"currentUser.preferences.undo_send",!0),Ember.get(this,"heap").track("Undo enabled from suggestion"),Ember.set(this,"tipSuccess",!0)},_tipFailureFunction:function(){Ember.set(this,"tipSuccess",!1)},_undoErrorFunction:function(e){var t="403"==e.errors[0].status?Ember.get(this,"i18n").t("tickets.undo-send.noaccess"):Ember.get(this,"i18n").t("tickets.undo-send.failure");Ember.get(this,"flashMessages").danger(t)},_openReplyEditor:function(){var e=Ember.get(this,"conversation"),t=Ember.get(this,"store").peekRecord("conversation",e.id);null!=t&&t.unloadRecord(),this.sendAction("setUndoneNote",Ember.get(this,"undoSendLocalNote")),Ember.set(this,"conversation",null),this.sendAction("showAction","reply",{isTrusted:!0},null,!0)},click:function(e){"img"===e.target.nodeName.toLowerCase()&&e.target.classList.contains("inline-image")&&this.manageLightbox.openInlineImage(e.target.src,this.albumName);var t=this.element.querySelector(".ticket-details__conversation__content"),s=Ember.getProperties(this,"isAutoResponseOrInActivityAndNotEditing","isDeletedAndInActivity"),n=s.isAutoResponseOrInActivityAndNotEditing,i=s.isDeletedAndInActivity;!n||i||e.target.classList.contains("email-failure-count")||t.contains(e.target)||this.toggleProperty("collapseConv")},_deleteSuccess:function(){this.onConversationDelete(this.conversation.id),this.manageLightbox.removeAlbum(this.albumName),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.conversation.delete.success"))},_deleteFailue:function(e){var t=Ember.get(this,"i18n").t("ticket.conversation.delete.error"),s=e.message;Ember.get(this,"flashMessages").danger(t+s)},_noteUpdateCB:function(){Ember.get(this,"conversation.inlineAttachmentIds")&&Ember.set(this,"conversation.inlineAttachmentIds",[]),Ember.get(this,"navigationAlert").resetAllValuesForComponent(Ember.get(this,"navigationObjectId")),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.conversation.update.success")),this.send("doToggleSet"),this.clearCloudAttachments()},_setNoteId:function(){var e=this._setNoteIdSuccess.bind(this),t=this._setNoteIdError.bind(this),s=Ember.get(this,"undoneId");Ember.get(this,"ticket").getConversations((0,c.default)({sinceId:s,orderType:"desc",perPage:50,include:"requester"})).then(e).catch(t)},_setNoteIdSuccess:function(e){if(e.conversations&&e.conversations[0]){var t=Ember.get(this,"conversation");this.isDestroyed||this.isDestroying||(Ember.set(this,"ticket.lastConversationId",e.conversations[0].id),Ember.set(this,"latestConversationId",null)),null!=t&&t.unloadRecord(),Ember.get(this,"store").pushPayload(e)}},_setNoteIdError:function(e){e&&"403"===Ember.get(e,"errors.firstObject.status")||(this.incrementProperty("retriesForFirstNote"),Ember.get(this,"retriesForFirstNote")<3&&this._setNoteId())},newConversationUndo:function(){var e=this;Ember.get(this,"isNewConversationWithUndo")&&(Ember.get(this,"conversationCategory")||(Ember.run.later((function(){Ember.get(e,"conversation")&&e._setNoteId()}),23e3),this.toggleProperty("displayUndo"),Ember.set(this,"conversation.hasQuotedText",!1),Ember.run.later((function(){e.isDestroyed||e.isDestroying||Ember.get(e,"conversation")&&e.toggleProperty("displayUndo")}),1e4))),Ember.get(this,"undoSendTip")&&null!=Ember.get(this,"latestConversationId")&&(this.toggleProperty("showOnboardingTip"),this.sendAction("tipDone"))}});e.default=f})),define("freshdesk/components/module-tickets/ticket-details/conversation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"gVyQeCSD",block:'{"symbols":["survey"],"statements":[[4,"if",[[27,"and",[[27,"not",[[23,["isReverseOrder"]]],null],[27,"not",[[23,["areAnyConversationsHidden"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"data-test-id","top_separation_line"],[11,"class","separation-line-top"],[9],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["displayUndo"]],[23,["displayUndoButton"]]],null]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/conversation-banners",null,[["flashMessageAction","primaryText","actionText"],[[27,"action",[[22,0,[]],"undoSend"],null],[27,"t",["tickets.reply.successmessage"],null],[27,"t",["tickets.reply.undosend"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["conversation","emailFailureCount"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/conversation-banners",null,[["flashMessageAction","type","primaryText","secondaryText","actionText"],[[27,"action",[[22,0,[]],"messageFailureAction"],null],"warning",[27,"t",["tickets.email-failure.status"],null],[27,"t",["tickets.email-failure.count-label"],[["count"],[[23,["conversation","emailFailureCount"]]]]],[27,"t",["tickets.email-failure.action"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["outgoingFailure"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/conversation-banners",null,[["type","primaryText"],["warning",[23,["outgoingFailure"]]]]],false],[0,"\\n"]],"parameters":[]},null],[7,"div"],[11,"class","ticket-details__item__header conversation-header clearfix"],[12,"data-test-id",[27,"concat",["conversation-",[23,["conversation","id"]]],null]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["conversationIcon"]],[27,"not",[[23,["collapseConv"]]],null]],null]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","app-icon-convo-wrap"],[9],[0,"\\n      "],[7,"span"],[11,"data-test-note-icon",""],[11,"class","app-icon"],[9],[0,"\\n        "],[1,[27,"svg-jar",[[23,["conversationIcon"]]],[["class"],["app-icon app-icon-convo app-icon--small app-icon--topalign"]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div"],[11,"class","tkt-details-avatar mt-4"],[9],[0,"\\n"],[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"      "],[7,"figure"],[11,"class","ticket-source-icon-wrap ticket-source-activity"],[9],[0,"\\n        "],[1,[27,"svg-jar",["system-activities"],[["class"],["system-icon app-icon--white"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"app-components/avatar-user",null,[["user","size","inline"],[[23,["conversation","user"]],"medium-secondary",true]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n  "],[7,"div"],[11,"class","p0 max-width"],[9],[0,"\\n    "],[7,"div"],[11,"class","mail-details"],[9],[0,"\\n      "],[7,"div"],[11,"class","element-flex text__content conversation-info-text clearfix sender-info"],[9],[0,"\\n"],[4,"if",[[23,["performedBySystem"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","user"],[9],[1,[21,"helpdeskName"],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"app-components/contact-popover",null,[["user"],[[23,["conversation","user"]]]]],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[7,"span"],[11,"data-test-id","conversation-status"],[11,"class","text--default text--dark pl-3"],[9],[1,[21,"statusString"],false],[10],[0,"\\n"],[4,"if",[[23,["isAutomationEmailReply"]]],null,{"statements":[[0,"          "],[1,[27,"app-components/automation-rule-link",null,[["automationTypeId","automationId","automation"],[[23,["conversation","automationTypeId"]],[23,["conversation","automationId"]],[23,["conversation","automation"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"],[4,"if",[[27,"and",[[27,"not",[[23,["displayUndo"]]],null],[27,"not",[[23,["isEditing"]]],null]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","created-time"],[11,"data-test-id","undo-send-date"],[9],[0,"\\n          "],[1,[27,"ui-components/time-ago",null,[["dateTime","displayInFull","showHintRight"],[[23,["conversation","createdAt"]],[27,"not",[[23,["quickReply"]]],null],true]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["displayUndo"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","conversation-dotted-loader"],[11,"data-test-id","conversation-dotted-loader"],[9],[0,"\\n          "],[1,[21,"ui-components/doted-preloader"],false],[0,"\\n        "],[10],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","pull-right ticket-details-action-wrapper"],[9],[0,"\\n"],[4,"if",[[23,["isConversationActionable"]]],null,{"statements":[[4,"if",[[23,["showConversationActions"]]],null,{"statements":[[0,"          "],[7,"div"],[12,"class",[28,["ticket-actions-container ",[27,"if",[[23,["isAutoResponseAndExpanded"]],"with-expand-collapse-icon"],null]]]],[11,"data-test-id","ticket-actions-container"],[9],[0,"\\n"],[4,"if",[[23,["canSendFacebookReply"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","reply",true,"hint--rounded hint--top ticket-actions","reply",[27,"t",["tickets.action.reply_to_forward"],null],[27,"action",[[22,0,[]],"replyToFacebookComment"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["displayForward"]],[27,"not",[[23,["hideForwardOption"]]],null]],null]],null,{"statements":[[0,"              "],[5,"nucleus-button",[[11,"class","hint--rounded hint--top ticket-actions"],[11,"data-test-conversation-actions","forward"],[12,"data-heap-id",[21,"forwardHeapId"]]],[["@ariaLabel","@variant","@iconOnly","@icon","@size","@onClick"],[[27,"t",["tickets.action.forward"],null],"text",true,"forward","small",[27,"action",[[22,0,[]],"initiateForwardNote",[23,["conversation"]]],null]]]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayReplyToForward"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","reply",true,"hint--rounded hint--top ticket-actions","reply_to_forward",[27,"t",["tickets.action.reply_to_forward"],null],[27,"action",[[22,0,[]],"initiateReplyToForwardNote",[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["canEditConversation"]],[27,"not",[[23,["hideNoteEdit"]]],null]],null]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","edit-new",true,"hint--rounded hint--top ticket-actions","edit",[27,"t",["fd.edit"],null],[27,"action",[[22,0,[]],"initiateEdit",[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["canHavePrivateThread"]],[27,"not",[[23,["isForwardConversation"]]],null]],null]],null,{"statements":[[0,"              "],[5,"nucleus-button",[[12,"class",[27,"concat",["hint--rounded ticket-actions ",[27,"if",[[23,["disableStartThreadIcon"]],"hint--left","hint--top"],null]],null]],[11,"data-test-conversation-actions","start-thread"],[12,"data-heap-id",[21,"startThreadIconHeapId"]]],[["@variant","@size","@icon","@iconOnly","@disabled","@ariaLabel","@onClick"],["text","small","comment",true,[21,"disableStartThreadIcon"],[21,"startThreadIconToolTip"],[27,"action",[[22,0,[]],"initiateThread",[23,["conversation"]]],null]]]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canSplitConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","split",true,"hint--rounded hint--top ticket-actions","split",[27,"t",["tickets.action.split_ticket"],null],[27,"action",[[22,0,[]],"initiateSplitTicket",[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canDeleteConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","delete",true,"hint--rounded hint--top ticket-actions ticket-actions__delete","delete",[27,"t",["fd.delete"],null],[27,"action",[[22,0,[]],"initiateDelete"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["isDeletedAndInActivity"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","conversation-capsule mt-8 mr-4"],[9],[0,"\\n      "],[7,"span"],[11,"class","btn btn--capsule text--xsmall"],[11,"data-test-id","conversation-deleted"],[9],[0,"\\n        "],[1,[27,"t",["tickets.deleted"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isAutoResponseOrInActivity"]]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["collapse-content-icon ",[27,"unless",[[23,["collapseConv"]],"rotate-icon"],null]]]],[9],[0,"\\n      "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--regular app-icon--muted-black mt-6"]]],false],[0,"\\n    "],[10],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"],[7,"div"],[11,"class","ticket-details__item__content"],[9],[0,"\\n  "],[7,"div"],[12,"class",[28,["element-flex flex-direction--column ",[27,"if",[[23,["conversationIcon"]],"convo-with-icon"],null]]]],[9],[0,"\\n    "],[7,"div"],[12,"class",[28,["ml-15 ",[27,"if",[[23,["anyEmailPresent"]],"mb-14"],null]]]],[9],[0,"\\n"],[4,"unless",[[23,["showToEmails"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","emails-wrapper"],[11,"data-test-id","to-emails"],[9],[0,"\\n"],[4,"if",[[23,["toEmails"]]],null,{"statements":[[0,"            "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","displayLength","text","type","primaryEmailClass"],[[23,["toEmails"]],"emails-wrapper-container",[23,["displayToLength"]],[27,"if",[[23,["isForwardConversation"]],[27,"t",["fd.forwardedto"],null],[27,"t",["fd.to"],null]],null],[27,"t",["fd.to"],null],"display-email--primary"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["conversation","ticket","isEcommerce"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","info-left text--xsmall"],[9],[0,"\\n              "],[7,"span"],[11,"class","text-transform--capatalize text--semibold"],[9],[0,"\\n                "],[1,[27,"t",["fd.to"],null],false],[0,":\\n              "],[10],[0,"\\n              "],[7,"span"],[11,"class","text-transform--lowercase"],[9],[0,"\\n                "],[1,[23,["conversation","ticket","requesterName"]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ccEmails"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","emails-wrapper"],[11,"data-test-id","cc-emails"],[9],[0,"\\n          "],[1,[27,"ui-components/emails-info",null,[["emails","displayLength","wrapperElementId","text","type"],[[23,["ccEmails"]],[23,["displayCCLength"]],"emails-wrapper-container",[27,"t",["fd.cc"],null],[27,"t",["fd.cc"],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["bccEmails"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["mr-12 ",[27,"if",[[27,"not",[[27,"and",[[23,["toEmails"]],[23,["ccEmails"]]],null]],null],"pull-left","clear-both"],null]]]],[11,"data-test-id","bcc-emails"],[9],[0,"\\n          "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","displayLength","text","type"],[[23,["bccEmails"]],"emails-wrapper-container",[23,["displayBCCLength"]],[27,"t",["fd.bcc"],null],[27,"t",["fd.bcc"],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"],[4,"if",[[23,["isNotified"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","conversation-info"],[9],[0,"\\n        "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","displayLength","text","type","onContainerResize","onContainerDestroy","isNotify"],[[23,["toEmails"]],"emails-wrapper-container",[23,["displayToLength"]],[27,"t",["fd.notifiedto"],null],[27,"t",["fd.to"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["ticketDetailsHeight"]]],null]],[["value"],["height"]]],[27,"action",[[22,0,[]],[27,"mut",[[23,["ticketDetailsHeight"]]],null],0],null],true]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["conversationShortInfo"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","conversation-info text--dark text--xsmall"],[12,"data-test-id",[28,["conversation-short-info-",[23,["conversation","id"]]]]],[9],[0,"\\n        "],[1,[27,"html-safe",[[23,["conversationShortInfo"]]],null],false],[0,"\\n      "],[10],[0,"\\n    "]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[23,["showLastEditInfo"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","secondary-info text--xsmall text--dark pl-16 mb-14"],[9],[0,"\\n        "],[1,[27,"t",["tickets.conversation.last-edit-info"],null],false],[0,"\\n        "],[1,[27,"app-components/user-link",null,[["user"],[[23,["conversation","lastEditedUser"]]]]],false],[0,",\\n        "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["conversation","lastEditedAt"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"div"],[12,"class",[28,["ticket-details__conversation__content cursor-auto text__content ",[27,"if",[[23,["collapseConv"]],"conversation-collapse"],null]]]],[11,"data-test-id","conversation-content"],[9],[0,"\\n      "],[7,"div"],[11,"class","text-content-wrapper sanitizer-class"],[9],[0,"\\n"],[4,"if",[[23,["isDeletedAndInActivity"]]],null,{"statements":[[0,"          "],[7,"ul"],[11,"class","activity-details text-list"],[9],[0,"\\n            "],[7,"li"],[11,"class","text-list__item"],[9],[0,"\\n              "],[7,"span"],[11,"class","text--semibold text--dark"],[9],[1,[27,"t",["tickets.deleted"],null],false],[10],[0,"\\n              "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["conversation","updatedAt"]]]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["isSurveyNote"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","text__content"],[9],[0,"\\n"],[4,"each",[[23,["surveyList"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","survey-holder"],[9],[0,"\\n                "],[7,"div"],[11,"class","survey-holder_title title-small"],[11,"data-test-survey-label",""],[9],[1,[22,1,["label"]],false],[10],[0,"\\n                "],[7,"div"],[11,"class","survey-holder_status text--default text--semibold"],[11,"data-test-survey-result",""],[9],[0,"\\n                  "],[7,"div"],[12,"class",[28,["survey-holder_feelIcon ",[22,1,["spec","className"]]]]],[9],[10],[0,"\\n                  "],[1,[27,"html-safe",[[22,1,["value"]]],null],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[23,["conversation","bodyText"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","survey-comments"],[11,"data-test-survey-comments",""],[9],[0,"\\n                "],[7,"div"],[11,"class","survey-comments_desc title title-small text--semibold"],[9],[0,"\\n                  "],[1,[27,"t",["conversation.comments"],null],false],[0,"\\n                "],[10],[0,"\\n                "],[1,[27,"html-safe",[[23,["conversation","body"]]],null],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["hideCollabContent"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-note-typography clearfix"],[11,"data-test-conversation","conversation-text"],[9],[0,"\\n"],[4,"if",[[27,"hasfeature",["freshconnect"],null]],null,{"statements":[[0,"              "],[7,"div"],[12,"class",[27,"concat",["ticket_note ",[27,"if",[[27,"and",[[23,["nerData"]],[23,["compareNoteId"]]],null],"ner-api-active"],null]],null]],[12,"data-note-id",[21,"conversationId"]],[9],[4,"if",[[23,["compareNoteId"]]],null,{"statements":[[1,[27,"app-components/beautify-ner",null,[["body","nerData","ticket","apps"],[[23,["conversation","body"]],[23,["nerData"]],[23,["conversation","ticket"]],[23,["installedApps"]]]]],false]],"parameters":[]},{"statements":[[1,[27,"html-safe",[[23,["conversation","emailContent"]]],null],false]],"parameters":[]}],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"collab-context",null,[["class","data-note-id","openSidebar"],[[27,"concat",["ticket_note ",[27,"if",[[27,"and",[[23,["nerData"]],[23,["compareNoteId"]]],null],"ner-api-active"],null]],null],[23,["conversationId"]],[23,["openCollab"]]]],{"statements":[[4,"if",[[23,["compareNoteId"]]],null,{"statements":[[1,[27,"app-components/beautify-ner",null,[["body","nerData","ticket","apps"],[[23,["conversation","body"]],[23,["nerData"]],[23,["conversation","ticket"]],[23,["installedApps"]]]]],false]],"parameters":[]},{"statements":[[1,[27,"html-safe",[[23,["conversation","emailContent"]]],null],false]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showButton"]]],null,{"statements":[[0,"          "],[1,[27,"app-components/quoted-content",null,[["model"],[[23,["conversation"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[23,["showOnboardingTip"]],[27,"not",[[27,"and",[[23,["currentAccount","isCollaboratorEnabled"]],[23,["currentUser","isCollaborator"]]],null]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"ui-components/fresh-tips",null,[["icon","title","body","primaryText","tipsPrimary","tipSuccess","secondaryText","position","exitPosition","successText","successTextSecondary","failureText","failureTextSecondary"],["freshtips-bulb",[27,"t",["fd.onboarding.undosend.successtitle"],null],[27,"t",["fd.onboarding.undosend.successbody"],null],[27,"t",["fd.onboarding.undosend.primarytext"],null],[27,"action",[[22,0,[]],"tipsPrimary"],null],[23,["tipSuccess"]],[27,"t",["fd.onboarding.undosend.secondarytext"],null],"bottom-right","exit-bottom-right",[27,"t",["fd.onboarding.undosend.successtext"],null],[27,"t",["fd.onboarding.undosend.successsecondarytext"],null],[27,"t",["fd.onboarding.undosend.failuretext"],null],[27,"t",["fd.onboarding.undosend.failuresecondarytext"],null]]]],false],[0,"\\n\\n"]],"parameters":[]},null],[0,"\\n"],[4,"unless",[[23,["isEditing"]]],null,{"statements":[[4,"if",[[23,["showAttachments"]]],null,{"statements":[[0,"            "],[1,[27,"app-components/attachment-thumb",null,[["attachments","cloudAttachments","attachmentsCount","albumName","allowRemove","allowAddToResponse","attachToResponse"],[[23,["conversation","attachments"]],[23,["cloudAttachments"]],[23,["attachments","length"]],[23,["albumName"]],[23,["allowRemoveAttachment"]],[23,["showAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[23,["conversation","freshfoneCall"]],[27,"not",[[23,["isDeletedAndInActivity"]]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/phone-recording",null,[["url","playerId","data-test-conversation-actions"],[[23,["conversation","freshfoneCall","recording","attachment_url"]],[23,["conversation","freshfoneCall","id"]],"phone-recording"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"if",[[23,["conversation","freshcallerCall"]]],null,{"statements":[[4,"if",[[23,["recordingInprogress"]]],null,{"statements":[[0,"      "],[7,"br"],[9],[10],[1,[27,"t",["tickets.conversation.call.recording-inprogress"],null],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["recordingComplete"]],[27,"not",[[23,["isDeletedAndInActivity"]]],null]],null]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-details/phone-recording",null,[["url","data-test-conversation-actions","playerId"],[[23,["conversation","freshcallerCall","recordingUrl"]],"phone-recording",[23,["conversation","freshcallerCall","fcCallId"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["isEditing"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","edit-not-editor"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["update","contentChanged","value","placeholder","externalAttachments","inlineSubmission","autofocus","showFooter","onInsertAttachment","customClass","onSubmitConversation","onEscape","skipFirstSendAction","isValidMkpPlaceholder","cloudAttachments","model","wrapDefaultFont","fixedFormattingToolbar"],[[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"action",[[22,0,[]],"contentChanged"],null],[23,["conversation","body"]],"Add note",[23,["conversation","attachments"]],true,true,true,[27,"action",[[22,0,[]],"onInsertAttachment"],null],"editor-edit-note",[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"action",[[22,0,[]],"checkAndProceedToDiscard"],null],false,true,[23,["cloudAttachments"]],[23,["conversation"]],true,true]],{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n          "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"checkAndProceedToDiscard"],null]],[11,"class","btn btn--secondary"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n          "],[1,[27,"async-button",null,[["action","default","pending","class"],[[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"t",["form.update"],null],[27,"t",["form.updating"],null],"btn btn--primary"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[4,"if",[[23,["displayDeleteConversation"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close","danger"],[[27,"t",["conversation.delete.title"],null],[27,"t",["conversation.delete.savelabel"],null],[27,"action",[[22,0,[]],"delete"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["displayDeleteConversation"]]],null]],null],true]],{"statements":[[0,"    "],[1,[27,"t",["conversation.delete.message"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["isThreadNote"]]],null,{"statements":[[0,"  "],[7,"hr"],[11,"class","threads-divider center"],[9],[10],[0,"\\n  "],[1,[27,"collab-threads/tickets/thread-link",null,[["parent","threadId","templateTasks"],[[23,["threadParent"]],[23,["conversation","threadId"]],[23,["threadTemplateTasks"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["canHaveAnchoredThreads"]]],null,{"statements":[[4,"if",[[23,["threadsLoaded"]]],null,{"statements":[[0,"    "],[7,"hr"],[12,"class",[27,"if",[[23,["showHorizontalDivider"]],"threads-divider center","hide"],null]],[11,"data-test-id","thread-divider"],[9],[10],[0,"\\n    "],[1,[27,"collab-threads/tickets/anchored-threads",null,[["parent","anchor","threads","isAgent","templateTasks"],[[23,["threadParent"]],[27,"hash",null,[["id","private"],[[23,["conversation","id"]],[23,["conversation","private"]]]]],[23,["threads"]],[23,["isAgent"]],[23,["threadTemplateTasks"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","threads-loader"],[11,"data-test-id","threads-loader"],[9],[0,"\\n      "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["anchored-threads"]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"not",[[23,["isThreadNote"]]],null]],null,{"statements":[[4,"unless",[[23,["areAnyConversationsHidden"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","separation-line-bottom pb-8"],[9],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}],[0,"\\n\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/conversation/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/ticket-details/conversation/threaded/component",["exports","freshdesk/mixins/tickets/collapsible-email","freshdesk/mixins/anchor-link","freshdesk/utils/blank-array","freshdesk/mixins/check-model-modified","freshdesk/mixins/integrations/attachment-apps","freshdesk/utils/tickets/ticket-conversation-item"],(function(e,t,s,n,i,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=Ember.Component.extend(s.default,t.default,a.default,i.default,{store:Ember.inject.service(),currentUser:Ember.inject.service(),i18n:Ember.inject.service(),flashMessages:Ember.inject.service(),manageLightbox:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["__module-tickets__ticket-details__conversation__threaded"],collapsedWidthOffset:.58,quickReply:!1,attributeBindings:["albumName:data-album","data-test-id"],defaultClass:"ticket-details__item","data-test-id":"conversation-wrapper",classNameBindings:["defaultClass","isAgent::ticket-details__requestor"],isEditing:!1,displayDeleteConversation:!1,anchorLinkContainer:".ticket-note-typography a",isNotArchived:Ember.computed.not("conversation.ticket.archived"),allowRemoveAttachment:Ember.computed.reads("isNotArchived"),showAddToResponse:Ember.computed.and("allowAddToResponse","isNotArchived"),dynamicAttachmentsIds:(0,n.default)(),conversationId:Ember.computed.readOnly("conversation.id"),isIncoming:Ember.computed.reads("conversation.incoming"),isSocialIncoming:Ember.computed.and("isSocial","isIncoming","isCustomerResponse"),notIsSocialIncoming:Ember.computed.not("isSocialIncoming"),isCustomerResponse:Ember.computed.equal("category","customer_response"),isAgent:Ember.computed.or("conversation.user.{isAgent,deletedAgent}"),source:Ember.computed.reads("conversation.sourceType"),category:Ember.computed.readOnly("conversation.categoryType"),isSocial:Ember.computed.reads("conversation.isSocial"),isDirectMessage:Ember.computed.reads("conversation.isDirectMessage"),isPrivate:Ember.computed.reads("conversation.private"),isReplyToForwardConversation:Ember.computed.equal("category","reply_to_forward"),isThirdPartyResponseConversation:Ember.computed.equal("category","third_party_response"),isReplyToForward:Ember.computed.or("isReplyToForwardConversation","isThirdPartyResponseConversation"),notAnAgent:Ember.computed.not("isAgent"),customerRepliedToFbComment:Ember.computed.and("conversation.replyToFbComment","notAnAgent"),customerDmFromFb:Ember.computed.and("conversation.dmFromFb","notAnAgent"),hideActions:Ember.computed.or("quickReply","isInActivity","customerRepliedToFbComment","customerDmFromFb","noActions"),actionsList:Ember.computed.or("canSendFacebookReply","displayForward","canSplitConversation","canDeleteConversation"),noActions:Ember.computed.not("actionsList"),isForwardConversation:Ember.computed.or("conversation.{isForwardEmail,isAutomationRuleForward}"),isAutomatedNote:Ember.computed.or("conversation.{isAutomationRule,isAutomationRuleForward}"),normalAttachments:Ember.computed.reads("conversation.attachments"),cloudAttachments:Ember.computed.alias("conversation.cloudFiles"),attachments:Ember.computed.union("normalAttachments","cloudAttachments"),noteUserIsAgent:Ember.computed.reads("conversation.user.isAgent"),canSendFacebookReply:Ember.computed("conversation",(function(){return Ember.get(this,"conversation.fbPost.can_comment?")})),albumName:Ember.computed("conversationId",(function(){return"note_".concat(Ember.get(this,"conversationId"))})),imageSelector:Ember.computed("albumName",(function(){return"[data-album = '".concat(this.albumName,"'] .text__content img[src]")})),outgoingFailure:Ember.computed("conversation.outgoingFailures",(function(){return Ember.get(this,"conversation.outgoingFailures")?Ember.get(this,"i18n").t("ticket.conversation.outgoingFailure"):null})),displayForward:Ember.computed("source,isForwardConversation",(function(){var e=Ember.get(this,"isPrivate"),t=Ember.get(this,"isForwardConversation"),s=Ember.get(this,"currentUser").hasAbility("forward_ticket");return!e&&s&&!t})),canDeleteConversation:Ember.computed((function(){var e=Ember.get(this,"currentUser").hasAbility("edit_conversation");return Ember.get(this,"noteUserIsAgent")&&e})),canSplitConversation:Ember.computed("source,conversation",(function(){var e=Ember.get(this,"currentUser").hasAbility("merge_or_split_ticket"),t=Ember.get(this,"conversation.incoming"),s=!Ember.get(this,"noteUserIsAgent"),n=Ember.get(this,"isPrivate"),i=s||Ember.get(this,"conversation.ticket.requesterId")===Ember.get(this,"conversation.userId"),a=!Ember.get(this,"conversation.fbPost")||Ember.get(this,"canSendFacebookReply");return!Ember.get(this,"conversation.user.blocked")&&e&&t&&(!n||s)&&i&&a})),isConversationActionable:Ember.computed("conversation",(function(){var e=Ember.get(this,"ticket.isActionable"),t=Ember.get(this,"currentUser.id")===Ember.get(this,"conversation.userId"),s=Ember.get(this,"isPrivate"),n=Ember.get(this,"ticket.hasPermission");return e&&(n||s&&t)})),didRender:function(){this._super.apply(this,arguments),this.manageLightbox.removeInlineImages(this.albumName),this.manageLightbox.addInlineImages(this.albumName,this.imageSelector),(0,r.attachWrapper)(this.element)},didInsertElement:function(){this._super.apply(this,arguments),this.sanitizeAnchors()},actions:{onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},attachToResponse:function(e){Ember.get(this,"attachToResponse")(e)},initiateDelete:function(){this.toggleProperty("displayDeleteConversation")},delete:function(){var e=this._deleteSuccess.bind(this),t=this._deleteFailure.bind(this);Ember.get(this,"conversation").destroyRecord().then(e).catch(t)},removeAttachment:function(e){this.removeAttachment({parentObj:Ember.get(this,"conversation"),attachment:e})}},click:function(e){"img"===e.target.nodeName.toLowerCase()&&e.target.classList.contains("inline-image")&&this.manageLightbox.openInlineImage(e.target.src,this.albumName)},_deleteSuccess:function(){this.sendAction("onConversationDelete"),this.manageLightbox.removeAlbum(this.albumName),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.conversation.delete.success"))},_deleteFailure:function(e){var t=Ember.get(this,"i18n").t("ticket.conversation.delete.error"),s=e.message;Ember.get(this,"flashMessages").danger(t+s)}});e.default=l})),define("freshdesk/components/module-tickets/ticket-details/conversation/threaded/parent/component",["exports","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/utils/blank-object"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{childConversations:(0,s.default)(),shouldShowChildConversations:Ember.computed.bool("showChildConversations"),childConversationsCount:Ember.computed.reads("conversation.childCount"),isloading:!0,showInternalSocialEditor:!1,isCommentReply:!1,perPage:50,orderType:"desc",page:0,canSendFacebookReply:Ember.computed("conversation",(function(){return Ember.get(this,"conversation.fbPost.can_comment?")})),isHavingTotalConversations:Ember.computed("childConversations.[]",(function(){return Ember.get(this,"childConversationsCount")===Ember.get(this,"childConversations.length")})),init:function(){this._super.apply(this,arguments),Ember.get(this,"childConversationsCount")&&Ember.get(this,"shouldShowChildConversations")?this.fetchConversations():this.toggleProperty("isloading")},_setChildConversations:function(e){var t,s=e.childConv,n=e.meta;Ember.get(this,"page")>1?(t=Ember.get(this,"childConversations").concat(s),Ember.set(this,"childConversations",t)):Ember.set(this,"childConversations",s),Ember.set(this,"childConversationsCount",n.count),this.toggleProperty("isloading")},fetchConversations:function(e){Ember.get(this,"fetchChildConversations").perform(Ember.get(this,"conversation"),Ember.get(this,"ticket"),e).then(this._setChildConversations.bind(this))},actions:{replyToParentComment:function(){Ember.setProperties(this,{showInternalSocialEditor:!0,shouldShowChildConversations:!0}),!Ember.get(this,"childConversations.length")&&Ember.get(this,"childConversationsCount")&&(this.toggleProperty("isloading"),this.fetchConversations());var e=Ember.get(this,"conversation");this.replyToFacebookComment(e),this.showAction("reply","inlineReply")},sendConversation:function(e,t){return Ember.set(this,"noteId",parseInt(Ember.get(this,"conversation.id"))),this.toggleProperty("showInternalSocialEditor"),this.sendConversation(e,t)},discardConversation:function(){this.toggleProperty("showInternalSocialEditor"),this.discardConversation()},toggleChildConversations:function(){this.toggleProperty("shouldShowChildConversations"),Ember.get(this,"childConversations.length")||(this.toggleProperty("isloading"),this.fetchConversations())},fetchMoreConversation:function(){this.toggleProperty("isloading"),this.incrementProperty("page");var e=Ember.getProperties(this,"orderType","page","perPage"),t={orderType:e.orderType,perPage:e.perPage,page:e.page};this.fetchConversations(t)}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/conversation/threaded/parent/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"SRNiCryf",block:'{"symbols":["childConversation"],"statements":[[7,"div"],[11,"class","parent-conversation mb-8"],[9],[0,"\\n  "],[1,[27,"module-tickets/ticket-details/conversation/threaded",null,[["conversation","childConversationsCount","type","isInActivity","onConversationDelete","ticket","replyToFacebookComment","allowAddToResponse","attachToResponse","navAlertFeatureOn","showAction","hideForwardOption","threadTemplateTasks","initiateSplitTicket","initiateForwardNote","removeAttachment","toggleChildConversations","replyToParentComment","shouldShowChildConversations"],[[23,["conversation"]],[23,["childConversationsCount"]],"parent",false,[23,["onConversationDelete"]],[23,["ticket"]],[23,["replyToFacebookComment"]],[23,["allowAddToResponse"]],[23,["attachToResponse"]],true,[23,["showAction"]],[23,["hideForwardOption"]],[23,["threadTemplateTasks"]],[23,["initiateSplitTicket"]],[23,["initiateForwardNote"]],[23,["removeAttachment"]],[27,"action",[[22,0,[]],"toggleChildConversations"],null],[27,"action",[[22,0,[]],"replyToParentComment"],null],[23,["shouldShowChildConversations"]]]]],false],[0,"\\n"],[4,"if",[[23,["isloading"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","loader-wrapper"],[9],[0,"\\n      "],[1,[27,"ui-components/gravity-loader",null,[["isLoading","class","data-test-id"],[true,"child-conversation loading-conversation","conversation-loading"]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["shouldShowChildConversations"]],[23,["childConversationsCount"]]],null]],null,{"statements":[[4,"each",[[23,["childConversations"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","child-conversation thread-left pt-8"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/conversation/threaded",null,[["conversation","type","isInActivity","onConversationDelete","ticket","allowAddToResponse","attachToResponse","navAlertFeatureOn","threadTemplateTasks","showAction","hideForwardOption","initiateForwardNote","removeAttachment"],[[22,1,[]],"child",false,[23,["onConversationDelete"]],[23,["ticket"]],[23,["allowAddToResponse"]],[23,["attachToResponse"]],true,[23,["threadTemplateTasks"]],[23,["showAction"]],[23,["hideForwardOption"]],[23,["initiateForwardNote"]],[23,["removeAttachment"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[1]},null],[4,"if",[[27,"and",[[27,"not",[[23,["isHavingTotalConversations"]]],null],[23,["shouldShowChildConversations"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","threading-line conversations-count pt-4"],[9],[0,"\\n        "],[1,[27,"nucleus-button",null,[["label","variant","size","data-test-id","onClick"],[[27,"t",["tickets.conversations.threaded.child.conversations.show.more"],[["count"],[[23,["childConversationsCount"]]]]],"link","small",[27,"concat",["fetch-more-conversation-",[23,["conversation","id"]]],null],[27,"action",[[22,0,[]],"fetchMoreConversation"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[23,["canSendFacebookReply"]]],null,{"statements":[[4,"if",[[23,["showInternalSocialEditor"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","threading-line pt-20"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/facebook-reply",null,[["ticket","conversation","bodyTextForInsert","disableSubmitExternal","insertBroadcast","broadcastedMessage","externalAttachments","draftInlineAttachmentIds","sendConversation","discardConversation","onEditorFocus","onEditorBlur","showError","removeError","onContainerResize","onContainerDestroy","agentsReplying","navAlertFeatureOn","toggleSolutionArticleSlider","solutionArticleSuggest","toggleCannedResponseSlider","isTicketDetail","cannedResponseSuggest","showOmniChannelReply"],[[23,["ticket"]],[23,["conversation"]],[23,["bodyTextForInsert"]],false,false,false,false,false,[27,"action",[[22,0,[]],"sendConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[27,"action",[[22,0,[]],"onEditorFocus"],null],[27,"action",[[22,0,[]],"onEditorBlur"],null],[27,"action",[[22,0,[]],"showError"],null],[23,["removeError"]],[27,"action",[[22,0,[]],[27,"mut",[[23,["ticketActionsHeight"]]],null]],[["value"],["height"]]],[27,"action",[[22,0,[]],[27,"mut",[[23,["ticketActionsHeight"]]],null],0],null],[23,["agentsReplying"]],true,[27,"action",[[22,0,[]],[23,["toggleSolutionArticleSlider"]]],null],[23,["solutionArticleSuggest","solutionArticles"]],[27,"action",[[22,0,[]],[23,["toggleCannedResponseSlider"]]],null],true,[23,["cannedResponseSuggest","cannedResponse"]],false]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["isAllowEditorOpen"]],[23,["childConversationsCount"]],[23,["shouldShowChildConversations"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","reply-to-fb thread-left"],[9],[0,"\\n"],[4,"nucleus-button",null,[["variant","block","customClass","data-test-fb-conversation-actions","ariaLabel","onClick"],["secondary","true","reply-to-fb--button","reply",[27,"t",["tickets.action.reply_to_forward"],null],[27,"action",[[22,0,[]],"replyToParentComment"],null]]],{"statements":[[0,"          "],[7,"span"],[11,"class","reply-to-fb--button-content"],[9],[0,"\\n            "],[1,[27,"app-components/avatar-user",null,[["user","size","inline"],[[23,["currentUser","record","contact"]],"small",true]]],false],[0,"\\n            "],[7,"span"],[11,"class","pl-18 pt-4 reply-to-fb--button-content--text"],[9],[1,[27,"t",["fd.omnichannel-reply.facebook.reply.to.comment"],[["requesterName"],[[23,["conversation","user","name"]]]]],false],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/conversation/threaded/parent/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/conversation/threaded/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"55NajSeR",block:'{"symbols":[],"statements":[[4,"if",[[23,["outgoingFailure"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/conversation-banners",null,[["type","primaryText"],["warning",[23,["outgoingFailure"]]]]],false],[0,"\\n"]],"parameters":[]},null],[7,"div"],[11,"class","ticket-details__conversations__threaded element-flex"],[12,"data-test-id",[27,"concat",["conversation-",[23,["conversation","id"]]],null]],[9],[0,"\\n  "],[7,"div"],[11,"class","tkt-details-avatar pl-16 pt-15"],[9],[0,"\\n    "],[1,[27,"app-components/avatar-user",null,[["user","size","inline"],[[23,["conversation","user"]],"medium-secondary",true]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","pt-12 max-width thread-top"],[9],[0,"\\n    "],[7,"div"],[11,"class","mail-details"],[9],[0,"\\n      "],[7,"div"],[11,"class","text__content conversation-info-text clearfix"],[9],[0,"\\n        "],[1,[27,"app-components/contact-popover",null,[["user"],[[23,["conversation","user"]]]]],false],[0,"\\n        "],[7,"div"],[11,"class","created-time pl-2"],[11,"data-test-id","send-date"],[9],[0,"\\n          "],[1,[27,"ui-components/time-ago",null,[["dateTime","displayInFull"],[[23,["conversation","createdAt"]],[27,"not",[[23,["quickReply"]]],null]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","text__content"],[9],[0,"\\n        "],[7,"div"],[11,"class","text-content-wrapper sanitizer-class"],[9],[0,"\\n          "],[7,"div"],[11,"class","ticket-note-typography clearfix"],[11,"data-test-conversation","conversation-text"],[9],[1,[27,"html-safe",[[23,["conversation","emailContent"]]],null],false],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["isConversationActionable"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","pull-right ticket-details-action-wrapper"],[9],[0,"\\n"],[4,"unless",[[23,["hideActions"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-actions-container"],[11,"data-test-id","ticket-actions-container"],[9],[0,"\\n"],[4,"if",[[23,["canSendFacebookReply"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","reply",true,"hint--rounded hint--top ticket-actions","reply",[27,"t",["tickets.action.reply_to_forward"],null],[27,"action",[[22,0,[]],[23,["replyToParentComment"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["displayForward"]],[27,"not",[[23,["hideForwardOption"]]],null]],null]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","forward",true,"hint--rounded hint--top ticket-actions","forward",[27,"t",["tickets.action.forward"],null],[27,"action",[[22,0,[]],[23,["initiateForwardNote"]],[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canSplitConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","split",true,"hint--rounded hint--top ticket-actions","split",[27,"t",["tickets.action.split_ticket"],null],[27,"action",[[22,0,[]],[23,["initiateSplitTicket"]],[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canDeleteConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","delete",true,"hint--rounded hint--top ticket-actions ticket-actions__delete","delete",[27,"t",["fd.delete"],null],[27,"action",[[22,0,[]],"initiateDelete"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["attachments"]]],null,{"statements":[[0,"      "],[1,[27,"app-components/attachment-thumb",null,[["attachments","cloudAttachments","attachmentsCount","albumName","allowRemove","allowAddToResponse","attachToResponse"],[[23,["conversation","attachments"]],[23,["cloudAttachments"]],[23,["attachments","length"]],[23,["albumName"]],[23,["allowRemoveAttachment"]],[23,["showAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"],[4,"if",[[23,["childConversationsCount"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[27,"concat",[[27,"if",[[27,"and",[[23,["shouldShowChildConversations"]],[27,"eq",[[23,["type"]],"parent"],null]],null],"threading-line "],null],"conversations-count pt-4"],null]],[9],[0,"\\n"],[4,"if",[[23,["shouldShowChildConversations"]]],null,{"statements":[[0,"      "],[1,[27,"nucleus-button",null,[["label","variant","size","data-test-id","onClick"],[[27,"t",["tickets.conversations.threaded.child.conversations.hide"],null],"link","small",[27,"concat",["hide-child-conversation-",[23,["conversation","id"]]],null],[27,"action",[[22,0,[]],[23,["toggleChildConversations"]]],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"nucleus-button",null,[["label","variant","size","data-test-id","icon","iconSize","onClick"],[[27,"t",["tickets.conversations.threaded.child.conversations.count"],[["count"],[[23,["childConversationsCount"]]]]],"link","small",[27,"concat",["link-child-conversation-",[23,["conversation","id"]]],null],"chat-online","small",[27,"action",[[22,0,[]],[23,["toggleChildConversations"]]],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[7,"div"],[12,"class",[27,"concat",[[27,"if",[[27,"and",[[23,["shouldShowChildConversations"]],[27,"eq",[[23,["type"]],"parent"],null]],null],"threading-line "],null],"separation-line-bottom pb-8 thread-bottom"],null]],[9],[10],[0,"\\n"],[4,"if",[[23,["displayDeleteConversation"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close","danger"],[[27,"t",["conversation.delete.title"],null],[27,"t",["conversation.delete.savelabel"],null],[27,"action",[[22,0,[]],"delete"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["displayDeleteConversation"]]],null]],null],true]],{"statements":[[0,"    "],[1,[27,"t",["conversation.delete.message"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/conversation/threaded/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/description/component",["exports","freshdesk/mixins/bubble-action","freshdesk/mixins/tickets/collapsible-email","freshdesk/constants/ticket","freshdesk/mixins/anchor-link","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/utils/tickets/ticket-conversation-item","@freshworks/ember-collaboration-threads/constants/thread"],(function(e,t,s,n,i,a,r,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=Ember.Component.extend(i.default,t.default,s.default,a.default,{store:Ember.inject.service(),currentUser:Ember.inject.service(),manageLightbox:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),currentAccount:Ember.inject.service("current-account"),collabThreadTickets:Ember.inject.service(),attributeBindings:["albumName:data-album"],classNames:["requestor-wrap","__module-tickets__ticket-details__description"],collapsedWidthOffset:.58,quickReply:!1,displayToLength:1,displayCCLength:1,anchorLinkContainer:".ticket-note-typography a",isNotArchived:Ember.computed.not("ticket.archived"),notQuickReply:Ember.computed.not("quickReply"),allowRemoveAttachment:Ember.computed.and("notQuickReply","isNotArchived"),showAddToResponse:Ember.computed.and("allowAddToResponse","notQuickReply","isNotArchived"),toEmails:Ember.computed.reads("ticket.toEmails"),ccEmails:Ember.computed.reads("ticket.ccEmails"),createdBy:Ember.computed.reads("ticket.meta.createdAgent"),ticketId:Ember.computed.readOnly("ticket.id"),isActionable:Ember.computed.readOnly("ticket.isActionable"),meta:Ember.computed.reads("ticket.meta"),userAgent:Ember.computed.reads("ticket.meta.userAgent"),isSprout:Ember.computed.reads("currentAccount.isSprout"),recentSurvey:Ember.computed.reads("ticket.surveyResult.recentSurvey"),collapseDesc:Ember.computed.reads("isInActivity"),isOutboundEmail:Ember.computed.equal("ticket.sourceType",n.default.sourceType.outboundEmail),normalAttachments:Ember.computed.reads("ticket.attachments"),cloudAttachments:Ember.computed.reads("ticket.cloudFiles"),attachments:Ember.computed.union("normalAttachments","cloudAttachments"),isCollapsedInActivity:Ember.computed.and("collapseDesc","isInActivity"),isNotOutboundEmail:Ember.computed.not("ticket.isOutboundEmail"),showCreatedBy:Ember.computed.and("isNotOutboundEmail","createdBy.name","isReverseOrder"),isServiceTask:Ember.computed.equal("ticket.type",n.default.serviceTaskType),albumName:Ember.computed("ticketId",(function(){return"ticket_".concat(this.ticketId)})),imageSelector:Ember.computed("albumName",(function(){return"[data-album = '".concat(this.albumName,"'] .text__content img[src]")})),showMoreOptions:Ember.computed("ticketId","isActionable",(function(){var e={model:Ember.get(this,"ticket"),abilities:["forward_ticket"]};return!this.quickReply&&(this.currentUser.hasPermissions(e)||this.isEditable)&&Ember.get(this,"ticket.isActionable")})),fromEmail:Ember.computed("toEmails",(function(){return this.toEmails[0]})),ticketDescription:Ember.computed("ticket.description",(function(){var e=this;return Ember.run.later((function(){e.manageLightbox.removeInlineImages(e.albumName),e.manageLightbox.addInlineImages(e.albumName,e.imageSelector)})),(0,r.addWrapperByDOMParser)(Ember.get(this,"ticket.description"))})),forwardHeapId:Ember.computed("collabThreadTickets.isForwardThreadingEnabled",(function(){return this.collabThreadTickets.isForwardThreadingEnabled?l.FORWARD_HEAP_DATA.inline:null})),didInsertElement:function(){this._super.apply(this,arguments),this.sanitizeAnchors()},actions:{removeAttachment:function(e){var t={parentObj:this.ticket,attachment:e};this.bubbleAction("removeAttachment",t)},editTicket:function(){this.disableEditButtonTd||this.sendAction("initiateEditPage")},attachToResponse:function(e){this.attachToResponse(e)},saveTags:function(e){this.saveTags(e)}},click:function(e){Ember.$(e.target).is("img.inline-image")&&this.manageLightbox.openInlineImage(Ember.$(e.target).attr("src"),this.albumName),this.isInActivity&&!e.target.classList.contains("email-failure-count")&&this.toggleProperty("collapseDesc")}});e.default=o})),define("freshdesk/components/module-tickets/ticket-details/description/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"FX6wYFZv",block:'{"symbols":[],"statements":[[7,"div"],[11,"data-test-id","ticket-description"],[12,"class",[28,["ticket-details__item ",[27,"if",[[23,["isInActivity"]],"show-activities-description"],null]," ",[27,"unless",[[23,["quickReply"]],"ticket-description"],null]," ticket-details__requestor ",[27,"if",[[23,["isCollapsedInActivity"]],"activities-description"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["ticket","emailFailureCount"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/conversation-banners",null,[["flashMessageAction","type","primaryText","secondaryText","actionText"],[[27,"action",[[22,0,[]],[23,["emailFailureDetails"]]],null],"warning",[27,"t",["tickets.email-failure.status"],null],[27,"t",["tickets.email-failure.count-label"],[["count"],[[23,["ticket","emailFailureCount"]]]]],[27,"t",["tickets.email-failure.action"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div"],[11,"class","ticket-details__item__header clearfix"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["ticket","sourceIcon"]],[27,"not",[[23,["isCollapsedInActivity"]]],null]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","app-icon-convo-wrap"],[9],[0,"\\n        "],[7,"span"],[11,"data-test-note-icon",""],[11,"class","app-icon"],[9],[0,"\\n          "],[1,[27,"svg-jar",[[23,["ticket","sourceIcon"]]],[["class","data-test-id"],["app-icon app-icon-convo app-icon--small app-icon--topalign",[27,"concat",["app-icon--",[23,["ticket","sourceIcon"]]],null]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"div"],[11,"class","tkt-details-avatar mt-4"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user","size","inline"],[[23,["ticket","requester"]],"medium-secondary",true]]],false],[0,"\\n"],[4,"if",[[23,["recentSurvey"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"aria-label",[23,["recentSurvey","value"]]],[11,"class","ticket-surveyresult-icon hint--rounded hint--right"],[9],[0,"\\n          "],[1,[27,"svg-jar",[[23,["recentSurvey","spec","svgName"]]],[["class"],["app-icon app-icon--medium"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","desc-info element-flex"],[9],[0,"\\n      "],[7,"div"],[11,"class","mail-details"],[9],[0,"\\n        "],[7,"div"],[11,"class","text__content text--default clearfix"],[11,"id","emails-wrapper-container"],[9],[0,"\\n          "],[7,"div"],[11,"class","sender-info"],[9],[0,"\\n            "],[1,[27,"app-components/contact-popover",null,[["user","outboundEmail","showVerified"],[[23,["ticket","userContact"]],[23,["isOutboundEmail"]],[27,"not",[[23,["isOutboundEmail"]]],null]]]],false],[0,"\\n"],[4,"if",[[23,["isOutboundEmail"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","text--default text--dark"],[9],[0," "],[1,[27,"t",["ticket.details.description.compose-email"],null],false],[10],[0,"\\n              "],[7,"span"],[11,"class","text--default text--dark"],[9],[0,"\\n"],[4,"if",[[23,["ticket","senderEmail"]]],null,{"statements":[[0,"                  "],[1,[23,["ticket","senderEmail"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[23,["ticket","requester","email"]],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[11,"class","text--default text--dark"],[9],[1,[21,"ticketSourceText"],false],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n          "],[7,"div"],[11,"class","created-time"],[9],[0,"\\n"],[4,"if",[[23,["showCreatedBy"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","created-by"],[9],[0,"\\n                "],[7,"span"],[11,"class","text--verylightgrey mr-2"],[9],[0,"\\n                  "],[1,[27,"t",["fd.createdby"],null],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[11,"class","text--dark text--semibold"],[9],[0,"\\n                  "],[1,[27,"app-components/user-link",null,[["user"],[[23,["createdBy"]]]]],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[7,"span"],[12,"class",[28,["created-at ",[27,"if",[[23,["showCreatedBy"]],"show-separator"],null]]]],[9],[0,"\\n              "],[1,[27,"ui-components/time-ago",null,[["dateTime","displayInFull","class","showHintRight"],[[23,["ticket","createdAt"]],[27,"not",[[23,["quickReply"]]],null],[27,"if",[[23,["showCreatedBy"]],"ml-15"],null],true]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["showMoreOptions"]],[23,["ticket","isActionable"]]],null]],null,{"statements":[[0,"      "],[7,"div"],[12,"class",[28,["ticket-actions-container ",[27,"if",[[23,["isInActivity"]],"hide"],null]]]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["isEditable"]],[27,"not",[[23,["hideEditButtonTd"]]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","ariaLabel","data-test-id","onClick"],["text","small","edit-new",true,"hint--rounded hint--top ticket-actions",[27,"t",["fd.edit"],null],"edit_ticket",[27,"action",[[22,0,[]],"editTicket"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"hasabilities",["forward_ticket"],null],[27,"not",[[23,["hideForwardOption"]]],null]],null]],null,{"statements":[[0,"          "],[5,"nucleus-button",[[11,"class","hint--rounded hint--top ticket-actions"],[11,"data-test-conversation-actions","forward"],[12,"data-heap-id",[21,"forwardHeapId"]]],[["@ariaLabel","@variant","@iconOnly","@icon","@size","@onClick"],[[27,"t",["tickets.action.forward"],null],"text",true,"forward","small",[27,"action",[[22,0,[]],[23,["showAction"]],"forward","description"],null]]]],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["isInActivity"]]],null,{"statements":[[0,"      "],[7,"div"],[12,"class",[28,["collapse-content-icon ",[27,"unless",[[23,["collapseDesc"]],"rotate-icon"],null]]]],[9],[0,"\\n        "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--regular app-icon--muted-black mt-6"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-details__item__content element-flex flex-direction--column desc-text ticket-note-typography clearfix"],[9],[0,"\\n    "],[7,"div"],[12,"class",[27,"if",[[27,"or",[[23,["isOutBoundEmail"]],[23,["ticket","toEmails"]],[23,["ticket","ticketCcEmails"]]],null],"ml-15 mb-14"],null]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["isOutboundEmail"]],[23,["ticket","toEmails"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","element-flex"],[9],[0,"\\n          "],[7,"span"],[11,"class","text--dark text--xsmall text-transform--lowercase mr-2"],[9],[0,"\\n            "],[7,"span"],[11,"class"," text--semibold"],[9],[1,[27,"t",["fd.from"],null],false],[0,":"],[10],[0,"\\n            "],[1,[21,"fromEmail"],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","emails-wrapper"],[9],[0,"\\n"],[4,"if",[[23,["ticket","toEmails"]]],null,{"statements":[[0,"            "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","displayLength","type","text","primaryEmailClass"],[[23,["ticket","toEmails"]],"emails-wrapper-container",[23,["displayToLength"]],[27,"t",["fd.to"],null],[27,"t",["fd.to"],null],"display-email--primary"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["ticket","ticketCcEmails"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","emails-wrapper"],[9],[0,"\\n          "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","displayLength","text","type"],[[23,["ticket","ticketCcEmails"]],"emails-wrapper-container",[23,["displayCCLength"]],[27,"t",["fd.cc"],null],[27,"t",["fd.cc"],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ticket","ticketBccEmails"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","emails-wrapper"],[11,"data-test-id","bcc-emails-wrapper"],[9],[0,"\\n          "],[1,[27,"ui-components/emails-info",null,[["emails","wrapperElementId","text","type"],[[23,["ticket","ticketBccEmails"]],"emails-wrapper-container",[27,"t",["fd.bcc"],null],[27,"t",["fd.bcc"],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","text__content"],[9],[0,"\\n      "],[7,"div"],[11,"class","text-content-wrapper sanitizer-class"],[9],[0,"\\n        "],[7,"input"],[12,"data-collab-convo-id",[23,["ticket","id"]]],[11,"type","hidden"],[9],[10],[0,"\\n"],[4,"if",[[27,"hasfeature",["freshconnect"],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"id","ticket_original_request"],[9],[1,[27,"html-safe",[[23,["ticketDescription"]]],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"collab-context",null,[["id","openSidebar"],["ticket_original_request",[23,["openCollab"]]]],{"statements":[[1,[27,"html-safe",[[23,["ticketDescription"]]],null],false]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[23,["ticket","socialLink"]]],null,{"statements":[[4,"nucleus-button",null,[["class"],["nucleus-button nucleus-button--secondary social-link"]],{"statements":[[0,"            "],[7,"a"],[12,"href",[23,["ticket","socialLink"]]],[11,"data-test-id","social-link"],[11,"rel","noopener"],[11,"target","_blank"],[11,"class","link-no-underline"],[9],[0,"\\n              "],[1,[27,"svg-jar",["open-in-new-tab"],[["aria-label","class"],[[27,"t",["common.open-new-tab"],null],"app-icon app-icon--regular"]]],false],[0,"\\n              "],[1,[27,"t",[[27,"concat",["ticket.social.viewon.",[23,["ticket","sourceType"]]],null]],null],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["ticket","freshfoneCall"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/phone-recording",null,[["url","playerId"],[[23,["ticket","freshfoneCall","recording","attachment_url"]],[23,["ticket","freshfoneCall","id"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["attachments"]]],null,{"statements":[[0,"          "],[1,[27,"app-components/attachment-thumb",null,[["attachments","cloudAttachments","attachmentsCount","albumName","allowRemove","allowAddToResponse","attachToResponse"],[[23,["ticket","attachments"]],[23,["cloudAttachments"]],[23,["attachments","length"]],[23,["albumName"]],[23,["allowRemoveAttachment"]],[23,["showAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["ticket","ticketTopic"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","forum-ticket"],[9],[0,"\\n      "],[7,"div"],[11,"class","forum-ticket_caption text--xsmall text--semibold text--antialias"],[9],[1,[27,"t",["tickets.forum_ticket_caption"],null],false],[0,":"],[10],[0,"\\n"],[4,"if",[[27,"hasabilities",["view_forums"],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","forum-ticket_content text--default"],[9],[0,"\\n"],[4,"link-to",["helpdesk.forums.topics",[23,["ticket","ticketTopic","id"]]],null,{"statements":[[0,"            "],[1,[23,["ticket","ticketTopic","title"]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[9],[1,[23,["ticket","ticketTopic","title"]],false],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"hasfeature",["customer_journey"],null],[23,["ticket","articles"]]],null]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/meta-info/seen-articles",null,[["articles","requester"],[[23,["ticket","articles"]],[23,["ticket","requester"]]]]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/description/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/email-failure-count/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["clear-both"]});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/email-failure-count/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"05RMPUGk",block:'{"symbols":[],"statements":[[7,"span"],[11,"class","pull-left email-failure-status text--xsmall"],[11,"data-test-id","email-failure-status"],[9],[0,"\\n  "],[1,[27,"t",["tickets.email-failure.status"],null],false],[0,"\\n"],[10],[0,"\\n"],[7,"a"],[11,"data-test-id","email-failure-count"],[11,"class","email-failure-count pull-left ml-4 text--xsmall"],[11,"role","button"],[12,"onclick",[27,"action",[[22,0,[]],[23,["emailFailureDetails"]],[23,["conversation"]]],null]],[9],[0,"\\n  "],[1,[27,"t",["tickets.email-failure.count-label"],[["count"],[[23,["emailFailureCount"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/email-failure-count/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/email-failure/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({toEmailFailures:Ember.computed.reads("failedEmailsPromise.content.data.to_list"),ccEmailFailures:Ember.computed.reads("failedEmailsPromise.content.data.cc_list"),isFailureDataLoaded:Ember.computed.reads("failedEmailsPromise.isFulfilled")});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/email-failure/email-failure-item/component",["exports","freshdesk/constants/ticket-details-error-codes"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({classNames:["__module-tickets__ticket-details__email-failure__email-failure-item"],bouncedAndDroppedError:Ember.computed("failureEmail.type",(function(){return t.EMAIL_ERROR_CODES.includes(this.failureEmail.type)})),actions:{showAction:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.sendAction("showAction",e,s,t),this.sendAction("toggleEmailFailure")}}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/email-failure/email-failure-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"JiWPI96/",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","error-email"],[9],[0,"\\n  "],[7,"div"],[11,"class","error-email-info"],[9],[0,"\\n    "],[7,"span"],[11,"class","text__infotext email-type"],[9],[1,[21,"emailLabel"],false],[10],[0,"\\n    "],[7,"span"],[11,"class","failure-email pl-5"],[9],[1,[23,["failureEmail","email"]],false],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","error-email-warning"],[9],[0,"\\n    "],[1,[27,"t",[[27,"if",[[23,["bouncedAndDroppedError"]],"fd.error",[27,"concat",["email-failure.",[23,["failureEmail","type"]],".summary_error_text"],null]],null]],null],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","error-email-text text__infotext"],[9],[0,"\\n"],[4,"if",[[27,"or",[[27,"eq",[[23,["failureEmail","type"]],"dropped"],null],[27,"eq",[[23,["failureEmail","type"]],"dropped_unsubscribed"],null]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","col-md-10 p0"],[9],[0,"\\n"],[4,"if",[[27,"hasabilities",["view_admin"],null]],null,{"statements":[[0,"          "],[1,[27,"t",[[27,"concat",["email-failure.",[23,["failureEmail","type"]],".help_text.admin"],null]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"t",[[27,"concat",["email-failure.",[23,["failureEmail","type"]],".help_text.agent"],null]],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","col-md-2 pull-right p0"],[9],[0,"\\n"],[4,"if",[[27,"not",[[27,"hasabilities",["view_admin"],null]],null]],null,{"statements":[[0,"          "],[7,"button"],[12,"aria-label",[27,"t",["email-failure.add-note"],null]],[11,"class","ml-20 hint--rounded hint--top-left app-icon-btn app-icon-btn--transparent"],[12,"onclick",[27,"action",[[22,0,[]],"showAction","notes",[23,["failureEmail","email"]]],null]],[9],[0,"\\n            "],[1,[27,"svg-jar",["addnote"],[["class"],["add-note-admin"]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"t",[[27,"concat",["email-failure.",[23,["failureEmail","type"]],".help_text"],null]],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/email-failure/email-failure-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/email-failure/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"7nGvdDju",block:'{"symbols":["failureEmail","failureEmail"],"statements":[[4,"app-components/modal-dialog",null,[["close","outSideClick","showModalClose","closeOnEscapse"],[[23,["toggleEmailFailure"]],[23,["toggleEmailFailure"]],true,true]],{"statements":[[0,"  "],[7,"div"],[11,"class","email-failures"],[9],[0,"\\n"],[4,"if",[[23,["isFailureDataLoaded"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","modal-header-email"],[9],[0,"\\n        "],[7,"h4"],[11,"class","modal-title text--xlarge email-failure-status"],[9],[0,"\\n          "],[1,[27,"svg-jar",["email-failure"],[["class"],["modal-icons app-icon--xlarge app-icon--warning"]]],false],[0,"\\n          "],[1,[27,"t",["email-failure.status"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"],[4,"each",[[23,["toEmailFailures"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/email-failure/email-failure-item",null,[["failureEmail","emailLabel","showAction","toggleEmailFailure"],[[22,2,[]],"To:",[23,["showAction"]],[23,["toggleEmailFailure"]]]]],false],[0,"\\n"]],"parameters":[2]},null],[4,"each",[[23,["ccEmailFailures"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/email-failure/email-failure-item",null,[["failureEmail","emailLabel","showAction","toggleEmailFailure"],[[22,1,[]],"Cc:",[23,["showAction"]],[23,["toggleEmailFailure"]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},{"statements":[[0,"      "],[1,[21,"ui-components/page-loading"],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/email-failure/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/freddy-predicted-fields/component",["exports","freshdesk/utils/freddy-field-prediction"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),classNames:["freddy-property-prediction","mt-14"],attributeBindings:["data-test-id"],"data-test-id":"freddy-property-prediction",isNestedFieldSuggest:!1,isApplybtnDisable:Ember.computed("botSuggestion.@each.isSelected","isNestedFieldSuggest",(function(){var e=Ember.get(this,"botSuggestion").filterBy("isSelected",!0),t=Ember.get(this,"botSuggestion").filterBy("isDisabled",!0).filterBy("nestedField");return Ember.isPresent(t)?t.every((function(e){return e.nestedField.filterBy("isDisabled",!1).every((function(e){return!e.isSelected}))})):Ember.isEmpty(e)})),actions:{applyFreddyProperty:function(e){var s=this,n=this.botSuggestion,i=this.ticket;n.forEach((function(e){var n={ticket:i,fieldData:e};e.isSelected?(0,t.fieldSelect)(s,n):(0,t.fieldDeselect)(s,n),e.nestedField&&s._setNestedFieldValue(e.nestedField)})),e.actions.close()},toggleNestedField:function(e,t,s){var n=e.nestedField;Ember.isPresent(n)&&(Ember.isEmpty(s)&&!e.isSelected?n.forEach((function(e){Ember.set(e,"isSelected",!1)})):Ember.isPresent(s)&&(this.toggleProperty("isNestedFieldSuggest"),this._setNestedToggleValue(e,t,n,s)))}},_setNestedToggleValue:function(e,t,s,n){if(n.isSelected){if(Ember.set(e,"isSelected",!0),t>0)for(var i=t-1;i>=0;i--)Ember.set(s[i],"isSelected",!0)}else if(s.length>1)for(var a=t+1;a<s.length;a++)Ember.set(s[a],"isSelected",!1)},_setNestedFieldValue:function(e){var s=this;e.forEach((function(e){var n={ticket:s.ticket,fieldData:e};e.isSelected?(0,t.fieldSelect)(s,n):(0,t.fieldDeselect)(s,n)}))}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/freddy-predicted-fields/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"nwWMqe2w",block:'{"symbols":["dropdown","option","nestedField","index"],"statements":[[4,"basic-dropdown",null,[["class","matchTriggerWidth","renderInPlace"],["freddy-property-prediction",true,false]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["tabindex","class","data-test-id"],["0","freddy-predicted-property trigger-shortcuts","freddy-predicted-property"]],{"statements":[[0,"    "],[7,"div"],[11,"class","btn-group dropup show"],[9],[0,"\\n"],[4,"nucleus-button",null,[["icon","customClass","iconSize","size","variant","data-test-id","ariaLabel"],["freddy-field-suggestion","freddy-property-suggestions text--small","medium","small","text","dropdown-actions-btn",[27,"t",["fd.freddy.suggestion"],null]]],{"statements":[[0,"        "],[7,"span"],[11,"class","divider ml-4 mr-6"],[9],[10],[0,"\\n        "],[7,"span"],[11,"class","suggestion-title text--xsmall mt-2 ellipsis"],[9],[0,"\\n          "],[1,[27,"t",["fd.freddy.suggestion"],[["count"],[[23,["botSuggestion","length"]]]]],false],[0,"\\n        "],[10],[0,"\\n        "],[1,[27,"svg-jar",[[27,"if",[[22,1,["isOpen"]],"uparrow","downarrow"],null]],[["class"],["accordion-arrow float-right mt-2 app-icon--small"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,1,["content"]]],[["class"],["bs-dropdown actions-dropdown freddy-property-predict"]],{"statements":[[0,"    "],[7,"ul"],[11,"class","dropdown-menu dropdown-normal app-dropdown"],[9],[0,"\\n      "],[7,"div"],[11,"class","freddy-property-predict--header text--xsmall text--extra-bold pb-8 pa-16"],[9],[0,"\\n        "],[7,"span"],[11,"class","freddy-property-predict--heading"],[9],[1,[27,"t",["fd.suggestion.apply"],null],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","freddy-property-predict--list"],[9],[0,"\\n"],[4,"each",[[23,["botSuggestion"]]],null,{"statements":[[0,"          "],[7,"li"],[11,"class","dropdown-normal__item suggested-property-field mb-16"],[11,"data-test-id","suggested-property-field"],[9],[0,"\\n            "],[7,"div"],[11,"class","property-field--label-element element-flex"],[9],[0,"\\n              "],[1,[27,"ui-form/custom-checkbox",null,[["disabled","customClass","checked","testId","onchange"],[[22,2,["isDisabled"]],"element-inline-flex mb-8",[22,2,["isSelected"]],[27,"concat",["suggested-property-",[22,2,["label"]]],null],[27,"action",[[22,0,[]],"toggleNestedField",[22,2,[]]],null]]]],false],[0,"\\n              "],[7,"span"],[12,"class",[28,["property-field property-field--label text--xsmall ellipsis ",[27,"if",[[22,2,["isDisabled"]],"disabled","enabled"],null]]]],[9],[1,[22,2,["label"]],false],[10],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","property-field--value-element element-flex"],[9],[0,"\\n              "],[7,"span"],[12,"class",[28,["property-field property-field--label text--default text--extra-bold ellipsis ",[27,"if",[[22,2,["isDisabled"]],"disabled","enabled"],null]]]],[9],[0,"\\n                "],[1,[22,2,["valueLabel"]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"],[4,"if",[[22,2,["nestedField"]]],null,{"statements":[[4,"each",[[22,2,["nestedField"]]],null,{"statements":[[0,"              "],[7,"li"],[12,"class",[28,["dropdown-normal__item suggested-property-field suggested-property-field--nested suggested-property-field--",[27,"if",[[27,"eq",[[22,4,[]],0],null],"nested-first","nested-other"],null]," mb-16 ml-16"]]],[11,"data-test-id","nestedfield-property"],[9],[0,"\\n                "],[7,"div"],[11,"class","property-field--label-element element-flex"],[9],[0,"\\n                  "],[1,[27,"ui-form/custom-checkbox",null,[["disabled","customClass","checked","onchange","testId"],[[22,3,["isDisabled"]],"element-inline-flex mb-8",[22,3,["isSelected"]],[27,"action",[[22,0,[]],"toggleNestedField",[22,2,[]],[22,4,[]],[22,3,[]]],null],[27,"concat",["nestedfield-property--",[22,3,["label"]]],null]]]],false],[0,"\\n                  "],[7,"span"],[12,"class",[28,["property-field property-field--label text--xsmall ellipsis ",[27,"if",[[22,3,["isDisabled"]],"disabled","enabled"],null]]]],[9],[1,[22,3,["label"]],false],[10],[0,"\\n                "],[10],[0,"\\n                "],[7,"div"],[11,"class","property-field--value-element element-flex"],[9],[0,"\\n                  "],[7,"span"],[12,"class",[28,["property-field property-field--label text--default text--extra-bold ellipsis ",[27,"if",[[22,3,["isDisabled"]],"disabled","enabled"],null]]]],[9],[0,"\\n                    "],[1,[22,3,["valueLabel"]],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[3,4]},null]],"parameters":[]},null]],"parameters":[2]},null],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","freddy-property-predict--footer text--right"],[9],[0,"\\n        "],[1,[27,"nucleus-button",null,[["label","data-test-id","variant","onClick"],[[27,"t",["common.cancel"],null],"cancel-btn","secondary",[27,"action",[[22,0,[]],[22,1,["actions","close"]]],null]]]],false],[0,"\\n        "],[1,[27,"nucleus-button",null,[["data-test-id","disabled","label","onClick"],["freddy-save-btn",[23,["isApplybtnDisable"]],[27,"t",["fd.apply"],null],[27,"action",[[22,0,[]],"applyFreddyProperty",[22,1,[]]],null]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/freddy-predicted-fields/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/inline-slider/component",["exports","freshdesk/constants/ticket"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({init:function(){this._super.apply(this,arguments),this.set("sliderTypes",t.SLIDER_TYPES)},actions:{onClose:function(e){return this.get("queryParams.thread")&&Ember.tryInvoke(this,"updateQueryParam",["thread",void 0]),this.ticketDetailsSlider.removeSlider(e)},onMinimize:function(e){return this.ticketDetailsSlider.changeSliderState(e,t.DETAILS_VIEW_SLIDER_ACTIONS.MINIMIZE)},onMaximize:function(e){return this.ticketDetailsSlider.changeSliderState(e,t.DETAILS_VIEW_SLIDER_ACTIONS.EXPAND)},onContentChange:function(e,t){return this.ticketDetailsSlider.setSliderDirty(e,t)}}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/inline-slider/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"1je7tS6c",block:'{"symbols":["sliderType","slider","sliderType","slider","sliderType","slider","sliderType","sliderType","minimized","threadSlider","&default"],"statements":[[7,"div"],[11,"class","module-tickets__inline-slider"],[9],[0,"\\n"],[4,"let",[[23,["sliderTypes","threads","name"]],[23,["ticketDetailsSlider","sliders","threads","minimized"]]],null,{"statements":[[4,"let",[[27,"get",[[23,["ticketDetailsSlider","sliders"]],[22,8,[]]],null]],null,{"statements":[[4,"if",[[22,10,[]]],null,{"statements":[[0,"        "],[1,[27,"collab-threads/thread-slider",null,[["minimized","onMinimize","onMaximize","onContentChange","onClose","threadsCount","sliderId"],[[22,9,[]],[27,"action",[[22,0,[]],"onMinimize",[22,8,[]]],null],[27,"action",[[22,0,[]],"onMaximize",[22,8,[]]],null],[27,"action",[[22,0,[]],"onContentChange",[22,8,[]]],null],[27,"action",[[22,0,[]],"onClose",[22,8,[]]],null],[23,["threadsCount"]],[22,10,["sliderId"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[10]},null]],"parameters":[8,9]},null],[4,"let",[[23,["sliderTypes","workflow","name"]]],null,{"statements":[[4,"if",[[27,"get",[[23,["ticketDetailsSlider","sliders"]],[23,["sliderTypes","workflow","name"]]],null]],null,{"statements":[[0,"      "],[14,11,[[27,"hash",null,[["workflows"],[[27,"component",["module-tickets/ticket-details/workflows"],[["onClose"],[[27,"action",[[22,0,[]],"onClose",[22,7,[]]],null]]]]]]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[7]},null],[4,"let",[[23,["sliderTypes","suggestedSolutions","name"]]],null,{"statements":[[4,"if",[[27,"get",[[23,["ticketDetailsSlider","sliders"]],[22,5,[]]],null]],null,{"statements":[[4,"ui-components/inline-slider",null,null,{"statements":[[0,"        "],[1,[27,"component",[[22,6,["header"]]],[["showCloseButton","onClose"],[true,[27,"action",[[22,0,[]],"onClose",[22,5,[]]],null]]]],false],[0,"\\n"],[4,"component",[[22,6,["body"]]],null,{"statements":[[0,"          "],[14,11,[[27,"hash",null,[["searchSolutions"],[[27,"component",["app-components/search-solutions"],null]]]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[6]},null]],"parameters":[]},null]],"parameters":[5]},null],[4,"let",[[23,["sliderTypes","cannedResponse","name"]]],null,{"statements":[[4,"if",[[27,"get",[[23,["ticketDetailsSlider","sliders"]],[22,3,[]]],null]],null,{"statements":[[4,"ui-components/inline-slider",null,null,{"statements":[[0,"        "],[1,[27,"component",[[22,4,["header"]]],[["showCloseButton","onClose"],[true,[27,"action",[[22,0,[]],"onClose",[22,3,[]]],null]]]],false],[0,"\\n"],[4,"component",[[22,4,["body"]]],null,{"statements":[[0,"          "],[14,11,[[27,"hash",null,[["cannedResponse"],[[27,"component",["app-components/canned-response"],null]]]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[4]},null]],"parameters":[]},null]],"parameters":[3]},null],[4,"let",[[23,["sliderTypes","evaluations","name"]]],null,{"statements":[[4,"if",[[27,"get",[[23,["ticketDetailsSlider","sliders"]],[22,1,[]]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","slider-evaluations"],[9],[0,"\\n"],[4,"ui-components/inline-slider",null,null,{"statements":[[0,"          "],[1,[27,"component",[[22,2,["header"]]],[["showCloseButton","onClose"],[true,[27,"action",[[22,0,[]],"onClose",[22,1,[]]],null]]]],false],[0,"\\n"],[4,"component",[[22,2,["body"]]],null,{"statements":[[0,"            "],[14,11,[[27,"hash",null,[["evaluations"],[[27,"component",["module-tickets/ticket-details/widgets/evaluations/add-edit"],[["slider","onClose"],[[22,2,[]],[27,"action",[[22,0,[]],"onClose",[22,1,[]]],null]]]]]]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/inline-slider/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/meta-info/component",["exports","freshdesk/utils/get-icons"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=window.UAParser,n=Ember.Component.extend({classNameBindings:["defaultClass"],defaultClass:"dropdown app-dropdown-group",visitorOs:Ember.computed.reads("meta.visitorOs"),ipAddress:Ember.computed.reads("meta.ipAddress"),classNames:["ticket-created-info","tag","tag--status","tag--closed","meta-info","pt-4","pb-4"],attributeBindings:["data-test-id"],"data-test-id":"meta-tag",parser:Ember.computed("userAgent",(function(){return(new s).setUA(this.userAgent)})),browserName:Ember.computed("parser",(function(){var e=this.parser;return this._getNameAndVersion(e.getBrowser())})),browserIcon:Ember.computed("browserName",(function(){var e=this.browserName,s=this._getName(e);return(0,t.default)(s)===s?"browser":(0,t.default)(s)})),osName:Ember.computed("parser",(function(){var e=this.parser,t=this.visitorOs;return t||this._getNameAndVersion(e.getOS())})),osIcon:Ember.computed("osName",(function(){var e=this.osName,s=this._getName(e);return(0,t.default)(s)===s?"os":(0,t.default)(s)})),location:Ember.computed("meta.location",(function(){return Ember.get(this,"meta.location").replace(/,/g,", ")})),referrer:Ember.computed("meta.referrer",(function(){var e=Ember.get(this,"meta.referrer"),t=e.replace(/^.*\/\/[^\/]+/,"").split("/");return t[1]&&!t[2]?e="/".concat(t[1]):t[1]&&t[2]&&(e="/".concat(t[1],"/").concat(t[2])),e})),_getNameAndVersion:function(e){return"".concat(e.name," ").concat(e.version)},_getName:function(e){return e.split(" ")[0]}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/meta-info/seen-articles/component",["exports","freshdesk/helpers/truncate"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({store:Ember.inject.service(),i18n:Ember.inject.service(),currentUser:Ember.inject.service(),classNames:["__module-tickets__ticket-details__meta-info__seen-articles"],classNameBindings:["count:hide-articles","hasArticles:seen-articles"],defaultArticlesDisplay:3,hasArticles:Ember.computed.gt("articles.length",0),count:Ember.computed("articles",(function(){var e=0,t=Ember.get(this,"articles");return Ember.get(t,"length")>3&&(e=Ember.get(t,"length")-3),e})),hasViewSol:Ember.computed("currentUser",(function(){return Ember.get(this,"currentUser").hasAbility("view_solutions")})),infoMessageTxt:Ember.computed("requester",(function(){var e=Ember.get(this,"requester.name"),s=Ember.get(this,"i18n").t("ticket.details.meta-info.seen-articles.msg",{requester:(0,t.truncate)([e,15,!0])});return Ember.String.htmlSafe(s)})),actions:{showAll:function(){Ember.set(this,"count",0)}}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/meta-info/seen-articles/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5L+bUwcY",block:'{"symbols":["article","index"],"statements":[[4,"if",[[23,["articles","length"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"data-test-id","seen-articles-info"],[11,"class","article-message text--semibold text--xsmall"],[9],[1,[21,"infoMessageTxt"],false],[10],[0,"\\n"],[4,"each",[[23,["articles"]]],null,{"statements":[[4,"if",[[23,["hasViewSol"]]],null,{"statements":[[0,"      "],[7,"div"],[12,"class",[28,["article-item text--default ",[27,"if",[[27,"gte",[[22,2,[]],[23,["defaultArticlesDisplay"]]],null],"hide-article"],null]]]],[9],[0,"\\n        "],[1,[27,"svg-jar",["solution-item"],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0," "],[7,"a"],[12,"href",[27,"generate-url",["solutions/articles/",[22,1,["id"]]],null]],[11,"target","_blank"],[9],[1,[22,1,["title"]],false],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[12,"class",[28,["article-item text--default ",[27,"if",[[27,"gte",[[22,2,[]],[23,["defaultArticlesDisplay"]]],null],"hide-article"],null]]]],[9],[0,"\\n        "],[1,[27,"svg-jar",["solution-item"],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0," "],[7,"a"],[12,"href",[28,["/support/solutions/articles/",[22,1,["id"]]]]],[11,"target","_blank"],[9],[1,[22,1,["title"]],false],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[1,2]},null],[4,"if",[[23,["count"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"data-test-articles-more",""],[11,"class","show-more cursor-pointer app--link text--xsmall"],[3,"action",[[22,0,[]],"showAll"]],[9],[0,"\\n      "],[1,[27,"t",["ticket.details.meta-info.seen-articles.more"],[["count"],[[23,["count"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/meta-info/seen-articles/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/meta-info/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"O4QhYSKX",block:'{"symbols":[],"statements":[[1,[27,"svg-jar",[[23,["browserIcon"]]],[["class","data-test-id"],["app-icon meta-icon app-icon--small app-icon--topalign app-icon--dark mb-3","meta-info-browser-icon"]]],false],[0,"\\n"],[7,"span"],[11,"class","text__content "],[11,"data-test-id","meta-info-browser-text"],[9],[0,"\\n  "],[1,[21,"browserName"],false],[0,"\\n"],[10],[0,"\\n\\n\\n"],[7,"span"],[11,"class","separator-line separator--before"],[9],[0,"\\n  "],[1,[27,"svg-jar",[[23,["osIcon"]]],[["class","data-test-id"],[" meta-icon app-icon app-icon--small app-icon--topalign app-icon--dark mb-3 ml-15","meta-info-os-icon"]]],false],[0,"\\n"],[10],[0,"\\n"],[7,"span"],[11,"class","text__content "],[11,"data-test-id","meta-info-os-text"],[9],[0,"\\n  "],[1,[21,"osName"],false],[0,"\\n"],[10],[0,"\\n\\n"],[4,"if",[[23,["meta","referrer"]]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","separator-line separator--before"],[9],[0,"  \\n    "],[1,[27,"svg-jar",["refererurl"],[["class","data-test-id"],["meta-icon app-icon app-icon--small app-icon--topalign app-icon--dark mb-3 ml-15","meta-info-referrer-icon"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"a"],[12,"aria-label",[23,["meta","referrer"]]],[11,"class","hint--rounded hint--bottom-right hint--large"],[11,"data-test-id","meta-info-referrer-text"],[12,"href",[23,["meta","referrer"]]],[11,"rel","noopener"],[11,"target","_blank"],[9],[0,"\\n    "],[1,[27,"truncate",[[23,["referrer"]],50,true],null],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["ipAddress"]]],null,{"statements":[[0,"  "],[1,[27,"svg-jar",["ipaddress"],[["class","data-test-id"],[" meta-icon  app-icon app-icon--small app-icon--topalign app-icon--dark mb-3","meta-info-ipAddress-icon"]]],false],[0,"\\n  "],[7,"span"],[11,"class","text__content "],[11,"data-test-id","meta-info-ipAddress-text"],[9],[0,"\\n    "],[1,[21,"ipAddress"],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["meta","location"]]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","separator-line separator--before"],[9],[0,"  \\n    "],[1,[27,"svg-jar",["location"],[["class","data-test-id"],[" meta-icon  app-icon app-icon--small app-icon--topalign app-icon--dark mb-3 ml-15","meta-info-location-icon"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"class","text__content"],[11,"data-test-id","meta-info-location-text"],[9],[0,"\\n    "],[1,[21,"location"],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["ticketForm","title"]]],null,{"statements":[[0,"  "],[7,"span"],[11,"class","separator-line separator--before"],[9],[0,"  \\n    "],[1,[27,"svg-jar",["ticket-forms-icon"],[["class","data-test-id"],[" meta-icon app-icon app-icon--small app-icon--topalign app-icon--transparent mb-3 ml-15","meta-info-ticket-form-icon"]]],false],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["meta","widgetSource"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","text__content"],[11,"data-test-id","meta-info-widget-ticket-form-title"],[9],[0,"\\n      "],[1,[23,["ticketForm","title"]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"a"],[12,"aria-label",[23,["meta","portalUrl"]]],[11,"class","hint--rounded hint--bottom-right hint--large"],[11,"data-test-id","meta-info-ticket-form-title"],[12,"href",[23,["meta","portalUrl"]]],[11,"rel","noopener"],[11,"target","_blank"],[9],[0,"\\n      "],[1,[23,["ticketForm","title"]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/meta-info/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/mini-list/component",["exports","freshdesk/utils/ticket-colors","freshdesk/mixins/tickets/ticket-status"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(s.default,{store:Ember.inject.service(),tagName:"",isNotActive:Ember.computed.not("ticket.ticketActive"),ticketPriorityBorder:Ember.computed("prioritySelect",(function(){return(0,t.priorityBased)(Ember.get(this,"ticket.priority"))})),ticket:Ember.computed("ticketId",(function(){var e=this.ticketId;return this.store.peekRecord("ticket",e)})),newTicketCheck:Ember.computed.reads("newTicket","isOutBoundEmail",(function(){var e=this.newTicket,t=this.isOutBoundEmail;return e&&!t})),actions:{goToTicket:function(e){this.router.transitionTo("helpdesk.tickets.show",e.id),this.onClickCB(this.dropdown)}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/mini-list/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"0u5rCywR",block:'{"symbols":[],"statements":[[7,"div"],[12,"onclick",[27,"action",[[22,0,[]],"goToTicket",[23,["ticket"]]],null]],[12,"data-ticket-id",[23,["ticket","id"]]],[12,"class",[28,["tickets__list dropdown-recent-ticket__item ",[27,"if",[[27,"eq",[[23,["ticketId"]],[23,["selectedId"]]],null]," dropdown-recent-ticket__item--selected"],null]," row-fluid clearfix ",[27,"if",[[23,["isNotActive"]],"dropdown-recent-ticket__item--inactive-data"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","list-check-wrap"],[9],[0,"\\n    "],[7,"div"],[11,"data-test-id","user-pic"],[11,"class","app-user-photo pull-left"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user","size"],[[23,["ticket","requester"]],"medium"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","list-content-wrap"],[9],[0,"\\n    "],[7,"div"],[11,"data-test-id","status-line"],[11,"class","ticket-tag-wrap clearfix"],[9],[0,"\\n      "],[1,[27,"app-components/ticket-status",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"data-test-id","subject-line"],[12,"class",[27,"if",[[23,["newTicketCheck"]],"new-ticket"],null]],[9],[0,"\\n"],[4,"link-to",["helpdesk.tickets.show",[23,["ticket","id"]]],[["class"],["mini-list-subject"]],{"statements":[[0,"        "],[1,[27,"truncate",[[23,["ticket","subject"]],40,true],null],false],[0," "],[7,"span"],[11,"class","text__infotext"],[9],[0," #"],[1,[23,["ticket","id"]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"span"],[11,"class","list-priority text--verysmall"],[9],[0,"\\n        "],[7,"span"],[12,"class",[21,"ticketPriorityBorder"]],[9],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"p"],[11,"data-test-id","other-details"],[11,"class","text__content text__infotext"],[9],[0,"\\n      "],[7,"span"],[9],[0,"\\n        "],[1,[27,"svg-jar",[[23,["ticket","sourceIcon"]]],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0,"\\n        "],[1,[27,"t",["fd.from"],null],false],[0," :"],[7,"span"],[11,"class","text--dark"],[9],[0," "],[1,[23,["ticket","requester","name"]],false],[10],[0,"\\n"],[4,"if",[[23,["ticket","company","name"]]],null,{"statements":[[0,"          ( "],[1,[23,["ticket","company","name"]],false],[0," )\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[7,"span"],[9],[0,"\\n        "],[1,[27,"app-components/ticket-currentstate-info",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/mini-list/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/phone-recording/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({hifi:Ember.inject.service(),freshcaller:Ember.inject.service(),moment:Ember.inject.service(),soundObject:null,totalDuration:Ember.computed("soundObject",(function(){return this.secondsToMinutes(Ember.get(this,"soundObject.duration"))})),initialState:Ember.computed("remainingTime",(function(){return"00:00"===Ember.get(this,"remainingTime")&&!Ember.get(this,"soundObject.isPlaying")})),remainingTime:Ember.computed("soundObject.position",(function(){var e=Ember.get(this,"soundObject.position"),t=Ember.get(this,"soundObject.duration");return e?this.secondsToMinutes(t-e):"00:00"})),seekStyle:Ember.computed("soundObject.position",(function(){var e="".concat(100*(Ember.get(this,"soundObject.position")-0)/(Ember.get(this,"soundObject.duration")-0),"% 100%");return"background-size:".concat(e)})),init:function(){this._super.apply(this,arguments)},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"soundObject")&&(Ember.get(this,"soundObject").rewind(Ember.get(this,"soundObject.duration")),Ember.get(this,"soundObject").pause())},actions:{togglePlay:function(){var e=Ember.get(this,"url");Ember.get(this,"soundObject")?this.play():Ember.isPresent(e)&&this.loadSoundObjectFromUrl(e)},seek:function(e){Ember.set(this,"soundObject.position",e.target.value)}},secondsToMinutes:function(e){var t=moment.duration(e,"milliseconds"),s=Math.floor(t.asMinutes()),n=Math.floor(t.asSeconds()-60*s);return s=s<10?"0".concat(s):s,n=n<10?"0".concat(n):n,"".concat(s,":").concat(n)},play:function(){var e=Ember.get(this,"soundObject");this.isDestroyed||(e.isPlaying?e.pause():e.play())},loadSoundObjectFromUrl:function(e){Ember.get(this,"hifi").load(e).then(this._setSoundObject.bind(this)).catch(this._handleSoundLoadError.bind(this))},_setSoundObject:function(e){this.isDestroyed||(Ember.set(this,"soundObject",e.sound),this.play())},_handleSoundLoadError:function(e){throw e}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/phone-recording/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5LoqEfM1",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","phone-audio clearfix"],[9],[0,"\\n  "],[7,"div"],[11,"class","phone-audio__left"],[9],[0,"\\n    "],[7,"div"],[11,"class","btn btn--primary play-button text-center cursor-pointer"],[3,"action",[[22,0,[]],"togglePlay"]],[9],[0,"\\n      "],[1,[27,"svg-jar",[[27,"if",[[23,["soundObject","isPlaying"]],"pause","play"],null]],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["initialState"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","phone-audio__right text__infotext text--dark"],[9],[0,"\\n      "],[1,[27,"t",["tickets.phonerecording"],null],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","phone-audio__right"],[9],[0,"\\n      "],[7,"div"],[11,"class","pull-left"],[9],[0,"\\n        "],[7,"input"],[12,"style",[27,"html-safe",[[23,["seekStyle"]]],null]],[12,"value",[23,["soundObject","_position"]]],[11,"min","0"],[12,"max",[23,["soundObject","duration"]]],[12,"oninput",[27,"action",[[22,0,[]],"seek"],null]],[12,"id",[21,"playerId"]],[11,"step","1"],[11,"type","range"],[9],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","text-right text__infotext pull-left phone-remaining-time text--xsmall"],[9],[0,"\\n        "],[1,[27,"concat",["- ",[23,["remainingTime"]]],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/phone-recording/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/properties/component",["exports","freshdesk/mixins/tickets/form","freshdesk/mixins/shortcuts/ticket-details/properties","freshdesk/mixins/marketplace/interface/ticket-properties","freshdesk/mixins/tickets/clearSetOptionsInterfaceAPI","freshdesk/constants/component-map/custom-fields","freshdesk/utils/custom-form","freshdesk/constants/ticket-form","freshdesk/constants/ticket"],(function(e,t,s,n,i,a,r,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,d,m=(c=o.default.nonTicketFieldSuggestions,d=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var s=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(o){i=!0,a=o}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return s}}(c,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),u=m[0],p=m[1],h=Ember.Component.extend(s.default,t.default,n.default,i.default,{i18n:Ember.inject.service(),store:Ember.inject.service(),eventSources:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["__module-tickets__ticket-details__properties"],ticket:null,detailsSortPriority:["position"],scrollOffset:-10,internalGroupAgentFNames:["internalGroupId","internalAgentId"],mkpInterfacePage:"ticketDetails",detailFields:Ember.computed.filterBy("ticketFields","hiddenInDetails",!1),fields:Ember.computed.sort("detailFields","detailsSortPriority"),isTagHidden:Ember.computed.reads("mkpInterface.controlData.tag.hide"),mkpTagDisabled:Ember.computed.reads("mkpInterface.controlData.tag.disable"),currentStatus:Ember.computed.reads("ticket.status"),isTicketActionable:Ember.computed.reads("ticket.isActionable"),suggestedProperty:Ember.computed.mapBy("botSuggestion","name"),hasMultipleCompanies:Ember.computed("ticket.{requester,company}",(function(){var e=Ember.get(this,"ticket.requester.otherCompanies");if(e&&e.length>0)return!0;var t=parseInt(Ember.get(this,"ticket.company.id"),10),s=parseInt(Ember.get(this,"ticket.requester.company.id"),10);return!(!t||!s||t===s)})),groupBotSuggestion:Ember.computed("botSuggestion",(function(){return(Ember.get(this,"botSuggestion")||[]).findBy("name",u)})),agentBotSuggestion:Ember.computed("botSuggestion",(function(){return(Ember.get(this,"botSuggestion")||[]).findBy("name",p)})),isTagsDisabled:Ember.computed("mkpTagDisabled","currentUser.abilities","isTicketActionable",(function(){var e={model:Ember.get(this,"ticket")};e.abilities=Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type"));var t=Ember.get(this,"currentUser").hasPermissions(e);return t?Ember.get(this,"mkpTagDisabled")||!Ember.get(this,"isTicketActionable"):!t})),submitDisabled:Ember.computed("ticket.{hasDirtyAttributes,isCustomFieldsChanged}",(function(){return!(Ember.get(this,"ticket.hasDirtyAttributes")||Ember.get(this,"ticket.isCustomFieldsChanged"))})),formType:Ember.computed("ticket.type","currentAccount.fsmEnabled",(function(){var e=Ember.get(this,"ticket.type");return Ember.get(this,"currentAccount.fsmEnabled")&&e===o.default.serviceTaskType?"displayServiceTask":void 0})),formSchema:Ember.computed("formType",(function(){var e=Ember.get(this,"formType");return l.default[e]})),assignToLabel:Ember.computed("formSchema.assignToLabel",(function(){var e=Ember.get(this,"formSchema.assignToLabel");return e?Ember.get(this,"i18n").t(e):Ember.get(this,"i18n").t("ticket.assignto")})),customTemplate:Ember.computed("ticket.type","formType",(function(){return r.default.renderCustomForm(Ember.get(this,"formType"),Ember.get(this,"ticket.type"))})),priority:Ember.computed("ticket.priority","mkpInterface.controlData.dropDownOptionsUpdated",(function(){var e=Ember.get(this,"mkpInterface.controlData.mkpFieldChange");if(e&&e.priority){var t=e.priority,s=Ember.get(this,"ticket.priority");return s&&t.includes(s)?s:null}return Ember.get(this,"ticket.priority")})),ignoreFieldLevelValidation:Ember.computed("ignoreFieldLevelValidations",(function(){return Ember.get(this,"ignoreFieldLevelValidations")&&!Ember.get(this,"customTemplate")})),groupValue:Ember.computed("ticket.group","allGroups",{get:function(){if(Ember.get(this,"allGroups")&&Ember.get(this,"ticket.group")&&Ember.get(this,"allGroups").findBy("id",Ember.get(Ember.get(this,"ticket.group"),"id")))return Ember.get(this,"ticket.group")},set:function(e,t){return t}}),displaySkillField:Ember.computed("groupValue",(function(){var e=Ember.get(this,"groupValue");if(Ember.isPresent(e)){var t=Ember.getProperties(e,"skillBasedRoundRobinEnabled","sbrrByOmnirouteEnabled"),s=t.skillBasedRoundRobinEnabled,n=t.sbrrByOmnirouteEnabled;return s||n}return!1})),disableSkillField:Ember.computed((function(){return!Ember.get(this,"currentUser").hasAbility("editTicketSkill")})),agentValue:Ember.computed("ticket.responder","allAgents",{get:function(){if(Ember.get(this,"allAgents")&&Ember.get(this,"ticket.responder")&&Ember.get(this,"allAgents").findBy("id",Ember.get(Ember.get(this,"ticket.responder"),"id")))return Ember.get(this,"ticket.responder")},set:function(e,t){return t}}),disabled:Ember.computed("currentUser.abilities","isTicketActionable",(function(){var e={model:Ember.get(this,"ticket")};return e.abilities=Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type")),!(Ember.get(this,"currentUser").hasPermissions(e)&&Ember.get(this,"isTicketActionable"))})),hasFeatureSharedOwnership:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("shared_ownership")})),hasFeatureSplitAssignTo:Ember.computed((function(){return Ember.get(this,"currentAccount").launched("group_agent_split")})),actions:{setAgentAndGroup:function(e,t){this._saveAgentAndGroupModel(Ember.get(this,"ticket"),e,t,"responderId","groupId")},setInternalAgentAndGroup:function(e,t){Ember.setProperties(this,{selectedinternalGroup:t,selectedinternalAgent:e}),this._saveAgentAndGroupModel(Ember.get(this,"ticket"),e,t,"internalAgentId","internalGroupId")},setPriority:function(e){var t=this.getAttr("ticket");Ember.get(this,"eventSources").publishFieldChange(Ember.get(this,"ticket.priority"),e,"ticket","priority"),Ember.setProperties(t,{priority:e})},onEnterKeyTrigger:function(){document.querySelector(".ticket-properties .async-button").click()},onFieldChange:function(e,t,s,n){a.customFieldTypes.includes(s)&&Ember.set(this,"ticket.isCustomFieldsChanged",!0),"customFields.cf_fsm_appointment_start_time"===t&&this.computeAppointmentEndTime(e),("nested_field"===s||Ember.get(n,"hasSections"))&&this.debounceOcclusionUpdate()},setVerticalCollectionAPI:function(e){Ember.set(this,"verticalCollectionAPI",e);var t=Ember.get(this,"setVerticalCollectionAPI");t&&t(e)},getPciValue:function(e,t){var s=Ember.get(this,"getPciValue");s&&s(e,t)},beforeFormDestroy:function(){var e=this;Ember.get(this,"formFields")&&Ember.get(this,"formFields").forEach((function(t){e.deleteInterfaceAPIValues(Ember.get(t,"name"))}))}},willDestroy:function(){this._super.apply(this,arguments),Ember.get(this,"ticket").rollbackAttributes()}});h.reopenClass({positionalParams:["ticket"]});var f=h;e.default=f})),define("freshdesk/components/module-tickets/ticket-details/properties/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"mIHvhgUb",block:'{"symbols":["form","field","field","field"],"statements":[[7,"div"],[11,"class","ticket-properties-wrapper panes-shadow"],[9],[0,"\\n  "],[7,"div"],[11,"class","requestor-filter"],[9],[0,"\\n    "],[7,"div"],[11,"class","form-wrap--ticket-details"],[9],[0,"\\n"],[4,"if",[[23,["refresh"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/status-cards",null,[["isEditable","ticket","statusUpdate"],[[23,["isEditable"]],[23,["ticket"]],[23,["statusUpdate"]]]]],false],[0,"\\n        "],[7,"div"],[12,"class",[28,["ticket-sidebar-sticky ",[27,"if",[[23,["botSuggestion"]],"bot-suggested"],null]]]],[9],[0,"\\n          "],[7,"div"],[11,"class","text--uppercase sticky-text panes-shadow"],[9],[0,"\\n            "],[1,[27,"t",["tickets.details.properties"],null],false],[0,"\\n"],[4,"if",[[23,["staleTicketProperties"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","pull-right mb-6"],[9],[0,"\\n                "],[7,"span"],[11,"class","app-icon-btn ticket-sidebar-sticky__refresh-link"],[12,"onclick",[27,"action",[[22,0,[]],[23,["refreshTicketProperties"]]],null]],[9],[0,"\\n                  "],[1,[27,"svg-jar",["autorefresh"],[["class"],["app-icon--small ticket-sidebar-sticky__refresh-btn"]]],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["ticketPropertiesRefresh"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","pull-right mb-6"],[9],[0,"\\n                "],[1,[27,"svg-jar",["autorefresh"],[["class"],["app-icon--normal ticket-sidebar-sticky__refresh-icon"]]],false],[0,"\\n              "],[10],[0,"\\n            "]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["botSuggestion"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/ticket-details/freddy-predicted-fields",null,[["ticket","botSuggestion"],[[23,["ticket"]],[23,["botSuggestion"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n          "],[7,"div"],[12,"class",[28,["ticket-sidebar-sticky__refresh-text ",[27,"if",[[23,["ticketPropertiesRefresh"]],"ticket-sidebar-sticky__refresh-updating"],null]]]],[9],[0,"\\n            "],[7,"span"],[11,"class","ticket-sidebar-sticky__refresh-text__update"],[9],[0,"\\n"],[4,"if",[[23,["staleTicketProperties"]]],null,{"statements":[[0,"                "],[1,[27,"t",["ticket.details.ticket_propertied_modified_message"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["ticketPropertiesRefresh"]]],null,{"statements":[[0,"                "],[1,[27,"t",["ticket.details.updating"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["autoRefreshedTime"]]],null,{"statements":[[0,"                "],[1,[27,"t",["ticket.details.updated"],null],false],[0,"\\n              "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[27,"not",[[23,["isTagHidden"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-tags"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--xsmall text--semibold pb-4 element-inline"],[9],[1,[27,"t",["ticket.fields.ticket_tags"],null],false],[10],[0,"\\n            "],[1,[27,"app-components/app-tags/create-tag",null,[["tags","onAddFocus","shouldSaveAuto","disableTags","renderInPlace"],[[23,["ticket","tags"]],false,false,[23,["isTagsDisabled"]],false]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"ui-form/form-for",[[23,["ticket"]],[23,["rules"]]],[["startValidate","focusOnError","scrollOffset","occulsionEnabled","formFields","hasMultipleCompanies","ignoreFieldLevelValidation","onEnterKeyTrigger","beforeFormDestroy","disabled"],[[23,["startTicketValidation"]],[23,["focusOnError"]],[23,["scrollOffset"]],[27,"if",[[23,["occulsionOptions"]],true],null],[23,["formFields"]],[23,["hasMultipleCompanies"]],[27,"and",[[23,["ignoreFieldLevelValidation"]],[27,"not",[[23,["customTemplate"]]],null]],null],[27,"action",[[22,0,[]],"onEnterKeyTrigger"],null],[27,"action",[[22,0,[]],"beforeFormDestroy"],null],[23,["disabled"]]]],{"statements":[[4,"if",[[23,["customTemplate"]]],null,{"statements":[[4,"module-tickets/ticket-form/custom-form",null,[["formFields","formType","ticketType"],[[23,["formFields"]],[23,["formType"]],[23,["ticket","type"]]]],{"statements":[[0,"              "],[15,"helpdesk/tickets/ticket-details/ticket-properties-fields",[1,4]],[0,"\\n"]],"parameters":[4]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["occulsionOptions"]]],null,{"statements":[[4,"app-components/vertical-collection-options",null,[["occulsionRenderOptions","options","setVerticalCollectionAPI"],[[23,["occulsionOptions"]],[23,["formFields"]],[27,"action",[[22,0,[]],"setVerticalCollectionAPI"],null]]],{"statements":[[0,"              "],[7,"div"],[9],[0,"\\n"],[4,"unless",[[22,3,["belongsToSection"]]],null,{"statements":[[0,"                  "],[15,"helpdesk/tickets/ticket-details/ticket-properties-fields",[1,3]],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[3]},null]],"parameters":[]},{"statements":[[4,"each",[[23,["formFields"]]],null,{"statements":[[4,"unless",[[22,2,["belongsToSection"]]],null,{"statements":[[0,"                "],[15,"helpdesk/tickets/ticket-details/ticket-properties-fields",[1,2]],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[0,"          "]],"parameters":[]}]],"parameters":[]}]],"parameters":[1]},null]],"parameters":[]},{"statements":[[0,"        "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","property-submit panes-shadow"],[9],[0,"\\n      "],[1,[27,"async-button",null,[["data-test-id","disableWhen","action","default","pending","fulfilled","class"],["ticket-properties-btn",[23,["submitDisabled"]],[27,"action",[[22,0,[]],[23,["updateProperty"]]],null],[27,"t",["ticket.submit.update"],null],[27,"t",["ticket.submit.updating"],null],[27,"if",[[23,["showSubmitSuccessMessage"]],[27,"t",["ticket.submit.updated"],null]],null],"ticket-details-submit btn btn--primary btn--block"]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":true}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/properties/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/recent-sessions/component",["exports","ember-data"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t.default.PromiseObject,n=Ember.Component.extend({isSessionsLoaded:Ember.computed.readOnly("recentSessions.isFulfilled"),isSessionsPending:Ember.computed.readOnly("recentSessions.isPending"),hasSessions:Ember.computed.and("recentSessions.{isFulfilled,sessions.length}"),recentSessions:Ember.computed("ticket",(function(){return s.create({promise:Ember.get(this,"ticket").getSessions()})}))});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/recent-sessions/session-item/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/recent-sessions/session-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"jTmoCC+a",block:'{"symbols":[],"statements":[[7,"li"],[11,"class","contacts__widget_feed"],[11,"data-test-list-item","recent-session-item"],[9],[0,"\\n  "],[7,"div"],[11,"class","contacts__activity"],[9],[0,"\\n    "],[1,[27,"svg-jar",["play-button-red"],[["class"],["app-icon app-icon--small contacts__activity__icon"]]],false],[0,"\\n    "],[7,"div"],[11,"class","contacts__ticket"],[9],[0,"\\n      "],[7,"a"],[12,"href",[27,"href-to",["helpdesk.tickets.recent_sessions.show",[23,["session","id"]]],null]],[11,"target","_blank"],[11,"rel","noopener"],[9],[1,[27,"moment-format",[[23,["session","recorded_on"]],"MMM DD, YYYY, hh:mm A"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","contacts__status text--xsmall text--antialias"],[9],[0,"\\n        "],[7,"span"],[11,"class","text__infotext"],[9],[0,"\\n          "],[1,[27,"t",["fd.tickets.session-replay.duration"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[1,[23,["session","duration"]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/recent-sessions/session-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/recent-sessions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"3dKiPxWv",block:'{"symbols":["session"],"statements":[[7,"div"],[11,"data-test-id","recent-sessions"],[9],[0,"\\n"],[4,"if",[[23,["isSessionsLoaded"]]],null,{"statements":[[4,"if",[[23,["hasSessions"]]],null,{"statements":[[0,"      "],[7,"ul"],[11,"class","contacts__feedlist"],[9],[0,"\\n"],[4,"each",[[23,["recentSessions","content","sessions"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/recent-sessions/session-item",null,[["session"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","text-center"],[9],[1,[27,"t",["fd.nodata"],null],false],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isSessionsPending"]]],null,{"statements":[[0,"    "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",["ticket.details.recent-sessions.loading.error"],null],false],[0,"\\n  "]],"parameters":[]}]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/recent-sessions/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/ticket-details/requester-widget/component",["exports","ember-cp-validations","freshdesk/constants/component-map/contact-fields","freshdesk/constants/component-map/company-fields","freshdesk/mixins/construct-validation","freshdesk/utils/custom-fields/serialize-data","freshdesk/utils/date-util","freshdesk/utils/contact-unique-field-helpers","freshdesk/utils/marketplace-fields","freshdesk/utils/tickets/requester-widget","freshdesk/constants/marketplace","freshdesk/constants/contacts/contact-form","freshdesk/constants/validations/contact-model-validation","freshdesk/constants/validations/ucr-contact-model-validation","freshdesk/utils/other-phone"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=["default_twitter_profile_status","default_twitter_followers_count"],b=d.default.context,k=m.default.maximumOtherPhoneCount,g=Ember.Component.extend(i.default,{lazyLoader:Ember.inject.service(),store:Ember.inject.service(),moment:Ember.inject.service(),i18n:Ember.inject.service("i18n"),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["__module-tickets__ticket-details__requester-widget"],showCompanyFields:!1,startValidate:!1,showCompanyError:!1,scrollOffset:-250,showMergeReviewForm:!1,maximumOtherPhoneCount:k,hasCompany:Ember.computed.notEmpty("ticket.companyId"),sortedContactWidgetFields:Ember.computed.sort("contactWidgetFields","sortField"),sortedCompanyWidgetFields:Ember.computed.sort("companyWidgetFields","sortField"),requester:Ember.computed("contactFormFields",(function(){var e=Ember.get(this,"ticket.requester.content"),t=Ember.get(this,"contactRules");return Ember.set(e,"shouldValidate",{customFields:{}}),e.reopen(t)})),deletedCompany:Ember.computed((function(){return Ember.get(this,"hasCompany")&&!Ember.get(this,"ticket.company.content")})),newCompany:Ember.computed((function(){return Ember.get(this,"store").createRecord("company",{customFields:{}})})),company:Ember.computed((function(){return Ember.get(this,"hasCompany")?Ember.get(this,"ticket.company.content"):Ember.get(this,"newCompany")})),companyModel:Ember.computed("company","companyFormFields",(function(){var e=Ember.get(this,"company");if(e){var t=Ember.get(this,"companyRules");return Ember.set(e,"shouldValidate",{customFields:{}}),e.reopen(t)}})),sortField:Ember.computed((function(){return["widgetPosition"]})),defaultContactFields:Ember.computed((function(){return["default_name","default_job_title"]})),defaultCompanyFields:Ember.computed((function(){return["default_name"]})),toggleText:Ember.computed("showCompanyFields",(function(){if(Ember.get(this,"showCompanyFields"))return Ember.get(this,"i18n").t("ticket.details.requester-widget.hide-company");var e=Ember.get(this,"hasCompany")?"show-company":"add-company";return Ember.get(this,"i18n").t("ticket.details.requester-widget.".concat(e))})),contactFields:Ember.computed((function(){return Ember.get(this,"store").findAll("contact-field")})),companyFields:Ember.computed((function(){return Ember.get(this,"store").findAll("company-field")})),contactWidgetFields:Ember.computed("contactFields.[]",(function(){var e=Ember.getProperties(this,"contactFields","defaultContactFields"),t=e.contactFields,s=e.defaultContactFields;return this._processFields(t,s,b.contact)})),companyWidgetFields:Ember.computed("companyFields.[]",(function(){var e=Ember.getProperties(this,"companyFields","defaultCompanyFields"),t=e.companyFields,s=e.defaultCompanyFields;return this._processFields(t,s,b.company)})),contactFormFields:Ember.computed.map("sortedContactWidgetFields",(function(e){var t=s.default[Ember.get(e,"type")];return t&&(Ember.set(e,"optionValuePath","value"),t.isUnique&&Ember.setProperties(e,(0,l.uniqueFieldConfig)()),"custom-component"===t.type&&(Ember.set(e,"componentName",t.componentName),Ember.set(e,"options",t.options)),"select-field"===t.type?Ember.set(e,"componentType","select-box"):"textarea-field"==t.type?Ember.set(e,"componentType","text-area"):Ember.set(e,"componentType",t.type)),e})),companyFormFields:Ember.computed.map("sortedCompanyWidgetFields",(function(e){var t=n.default[Ember.get(e,"type")];return t&&(Ember.set(e,"optionValuePath","value"),"select-field"===t.type?Ember.set(e,"componentType","select-box"):"textarea-field"==t.type?Ember.set(e,"componentType","text-area"):Ember.set(e,"componentType",t.type)),e})),contactRules:Ember.computed("contactFormFields",(function(){var e=Ember.get(this,"contactFieldRules");if(Object.keys(e).length){var s=this.currentAccount.launched("ucr_write"),n=u.default,i=p.default;e=(0,h.getValidationRule)(s,e,n,i)}return(0,t.buildValidations)(e)})),contactFieldRules:Ember.computed("contactFormFields",(function(){var e=this,t={},s=Ember.get(this,"contactFormFields");return s&&(s.forEach((function(s){var n=Ember.get(s,"fieldName");"allEmails"===n?t.email={validators:e.customEmailValidation(s,"email")}:t[n]={validators:e.constructValidations(s,n)}})),this._setConfict(!1)),t})),companyRules:Ember.computed("companyFormFields",(function(){var e=Ember.get(this,"companyFieldRules");return(0,t.buildValidations)(e)})),companyFieldRules:Ember.computed("companyFormFields",(function(){var e=this,t={},s=Ember.get(this,"companyFormFields");return s&&s.forEach((function(s){var n=Ember.get(s,"fieldName");t[n]={validators:e.constructValidations(s,n)}})),t})),disableEmailField:Ember.computed("requester.email",(function(){var e=Ember.get(this,"requester"),t=e.changedAttributes();return null!==Ember.get(e,"email")&&!t.email})),willDestroy:function(){this._super.apply(this,arguments),this._setConfict(!1)},_setConfict:function(e){this.contactFormFields.forEach((function(t){var s=Ember.get(t,"fieldName"),n=Ember.get(t,"isUnique");("allEmails"===s||n)&&Ember.set(t,"hasError",e)}))},_processFields:function(e,t,s){var n=Ember.get(this,"mkpInterface");return e.reduce((function(e,i){var a=(0,c.requesterWidgetVisibleField)(i,t),r=(0,o.processMkpRequesterWidgetField)(i,n,s),l=r.hide,d=r.disable;return!l&&a&&(Ember.set(i,"disable",d),e.push(i)),e}),[])},init:function(){this._super.apply(this,arguments),this._loadInitialField()},_loadInitialField:function(){var e=Ember.get(this,"requester").otherPhoneNumbers;e&&!e.length&&e.createFragment()},hasOtherPhoneError:!1,actions:{submit:function(){if(!Ember.get(this,"hasOtherPhoneError")){var e=Ember.get(this,"ticket"),t=Ember.get(this,"requester"),s=Ember.get(this,"companyModel"),n=this._fetchFieldsData(Ember.get(this,"sortedContactWidgetFields"),t,f),i={},a=!0;if(Ember.get(this,"showCompanyFields")&&(s.validate(),a=Ember.get(this,"company.validations.isValid"),i=this._fetchFieldsData(Ember.get(this,"sortedCompanyWidgetFields"),s,["default_name"]),!Ember.get(this,"hasCompany"))){var r=Ember.get(this,"company.name");r?i.name=r:(Ember.setProperties(this,{showCompanyError:!0,companyError:Ember.get(this,"i18n").t("field.mandatory.message")}),a=!1)}a&&e.updateRequester({contact:n,company:i}).then(this._handleUpdateRequesterResponse.bind(this,e)).catch(this._handleUpdateRequesterFailure.bind(this))}},errorFieldFocus:function(){},cancel:function(){var e=Ember.get(this,"requester"),t=Ember.get(this,"companyModel");e.rollbackAttributes(),t&&t.rollbackAttributes(),this.sendAction("onClose")},toggleCompanyFields:function(){this.toggleProperty("showCompanyFields")},onChange:function(e){if(Ember.set(this,"showCompanyError",!1),e.isNew){var t=Ember.get(this,"newCompany");Ember.set(t,"name",e.value),this._assignCompany(t),Ember.set(this,"companyHint",Ember.get(this,"i18n").t("ticket.company.association.new"))}else Ember.set(this,"selectedCompany",e),Ember.get(this,"store").findRecord("company",e.id).then(this._assignCompany.bind(this)),Ember.set(this,"companyHint",Ember.get(this,"i18n").t("ticket.company.association"))},conflictAction:function(e,t,s){var n=this;(this.requester.rollbackAttributes(),this.companyModel&&this.companyModel.rollbackAttributes(),s)?Ember.get(this,"lazyLoader").loadBundleForRoute("contacts").then((function(){Ember.setProperties(n,(0,l.componentConflictActionProps)([t,n.requester],e))})):(Ember.get(this,"router").transitionTo("helpdesk.contacts.show",t.id),this.onClose())},closeMerge:function(e){return e?Ember.get(this,"store").findRecord("contact",e,{reload:!0}).then(this._updateRequester.bind(this)):this.onClose()},changeMultiSelection:function(e,t){!t.filter((function(e){return e.inValid})).length&&Ember.set(this,"hasOtherPhoneError",!1),e(t)},onOtherPhoneFocusOut:function(e,t,s){(0,h.updateOtherPhone)(e,t,s,this._setOtherPhoneError.bind(this))}},_setOtherPhoneError:function(e){Ember.set(this,"hasOtherPhoneError",e)},_updateRequester:function(e){return Ember.get(this,"store").pushPayload({ticket:{id:Ember.get(this,"ticket").id,requester_id:e.id}}),Ember.set(this,"ticket.requester.content",e),this.attrs.reloadRequesterWidget(),this.onClose()},_handleUpdateRequesterResponse:function(e,t){if(Ember.get(this,"store").pushPayload(t.requester),t.requester.company&&!Ember.get(this,"hasCompany")){var s=Ember.get(this,"store").peekRecord("company",t.requester.company.id);Ember.get(this,"store").pushPayload({ticket:{id:e.id,company_id:t.requester.company.id}}),Ember.set(this,"ticket.company.content",s),Ember.set(this,"ticket.requester.company.content",s)}this.attrs.reloadRequesterWidget(),this.sendAction("onClose"),this.flashMessages.success(Ember.get(this,"i18n").t("contacts.success.update"))},_handleUpdateRequesterFailure:function(){this.flashMessages.danger(Ember.get(this,"i18n").t("ticket.details.requester-widget.failure"))},_assignCompany:function(e){Ember.set(this,"company",e)},_fetchFieldsData:function(e,t,s){var n=this,i={};return e.forEach((function(e){if(!s.includes(Ember.get(e,"type"))){var l=Ember.get(e,"name");if(Ember.get(e,"isDefault")){var o=Ember.get(t,l.camelize());"renewal_date"===l&&o instanceof Date&&!isNaN(o)?i[l]=r.default.getSerializedDate(o,n.moment):i[l]="other_phone_numbers"!==l||o?o:[]}else i.custom_fields||(i.custom_fields={}),i.custom_fields[l]=(0,a.parseCFValueByType)(Ember.get(e,"type"),Ember.get(t,"customFields.".concat(l)))}})),i}});e.default=g})),define("freshdesk/components/module-tickets/ticket-details/requester-widget/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"gMdotn/P",block:'{"symbols":["form","field","option","field","value","customValidation","onchange","selectionField","validation"],"statements":[[4,"if",[[23,["showMergeReviewForm"]]],null,{"statements":[[0,"  "],[1,[27,"module-contacts/quick-merge",null,[["data","conflictField","wrapperClass","close","backToForm","preventTransition"],[[23,["conflictData"]],[23,["conflictField"]],"modal-content show",[27,"action",[[22,0,[]],"closeMerge"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["showMergeReviewForm"]]],null],false],null],true]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n    "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[1,[27,"svg-jar",["edit-contact"],[["class"],["modal-icons"]]],false],[0," "],[1,[27,"t",["ticket.details.edit-requester-widget"],null],false],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","modal-content show"],[9],[0,"\\n"],[4,"ui-form/form-for",[[23,["requester"]],[23,["contactRules"]]],[["scrollOffset","submit","onValidationFailed"],[[23,["scrollOffset"]],[27,"action",[[22,0,[]],"submit"],null],"errorFieldFocus"]],{"statements":[[4,"each",[[23,["contactFormFields"]]],null,{"statements":[[4,"if",[[27,"eq",[[22,4,["type"]],"default_email"],null]],null,{"statements":[[0,"          "],[1,[27,"ui-form/text-field",null,[["label","placeholder","disabled","model","valuePath","autocomplete","form"],[[27,"t",["ticket.requester.email"],null],[27,"t",["ticket.requester.email"],null],[27,"or",[[22,4,["disable"]],[23,["disableEmailField"]]],null],[23,["requester"]],"email","off",[22,1,["form"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["type"]],"default_twitter_profile_status"],null]],null,{"statements":[[4,"if",[[23,["requester","twitterProfileStatus"]]],null,{"statements":[[0,"            "],[1,[27,"ui-form/text-field",null,[["label","disabled","value"],[[27,"t",["contactfields.twitter_profile_status"],null],true,[23,["requester","twitterProfileStatus"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["type"]],"default_twitter_followers_count"],null]],null,{"statements":[[4,"if",[[23,["requester","twitterFollowersCount"]]],null,{"statements":[[0,"            "],[1,[27,"ui-form/text-field",null,[["label","disabled","value"],[[27,"t",["contactfields.twitter_followers_count"],null],true,[23,["requester","twitterFollowersCount"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["type"]],"default_other_phone_numbers"],null]],null,{"statements":[[4,"ui-form/custom-component",null,[["model","form","valuePath"],[[23,["requester"]],[22,1,["form"]],[22,4,["fieldName"]]]],{"statements":[[4,"ui-components/multi-selection-field",null,[["value","fieldName","translatedLabel","model","form","validationAttribute","onchange","maximumCount","disabled","addAnotherLabel","maxLimitError","hasLabelField","hidePrimaryState"],[[22,5,[]],"other_phone_numbers",[22,4,["label"]],[23,["requester"]],[22,1,["form"]],"other_phone_numbers",[27,"action",[[22,0,[]],"changeMultiSelection",[22,7,[]]],null],[23,["maximumOtherPhoneCount"]],[22,4,["disable"]],[27,"if",[[27,"eq",[[22,5,["length"]],0],null],[27,"t",["contacts.company.associate-other-phone"],null],[27,"t",["contacts.otherphonenumbers.add-other-phone-label"],null]],null],[27,"t",["contact.maxerror.other-phone-numbers"],null],true,true]],{"statements":[[0,"              "],[7,"div"],[12,"class",[28,["col-sm-11 flex-1 multifield-validation-",[27,"if",[[27,"or",[[22,8,["inValid"]],[22,8,["errorMessage"]],[22,9,["showError"]],[27,"and",[[23,["startValidate"]],[22,8,["errorMessage"]]],null]],null],"enabled"],null]]]],[11,"data-test-id","other-phone"],[9],[0,"\\n                "],[7,"div"],[11,"class","row multified-field-inner"],[9],[0,"\\n                  "],[7,"div"],[11,"class","col-sm-8 multified-field-col"],[9],[0,"\\n                    "],[1,[27,"input",null,[["type","class","data-test-id","id","placeholder","disabled","value","focus-out"],["text","other-phone-input","otherphone-test-id",[22,8,["dataId"]],[27,"t",["common.label.enter-phone-number"],null],[22,4,["disable"]],[22,8,["value"]],[27,"action",[[22,0,[]],"onOtherPhoneFocusOut",[22,5,[]],[22,8,[]],[22,7,[]]],null]]]],false],[0,"\\n                  "],[10],[0,"\\n                  "],[7,"div"],[11,"class","col-sm-4 pl-0 multified-field-col"],[11,"data-test-id","multi-selection-label-field"],[9],[0,"\\n                    "],[1,[27,"component",[[22,1,["select-field"]]],[["placeholderText","options","optionLabelPath","optionValuePath","value","onchange"],["common.label.choose-a-label",[22,4,["choices"]],"label","value",[22,8,["label"]],[27,"action",[[22,0,[]],[27,"mut",[[22,8,["label"]]],null]],null]]]],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"],[4,"if",[[27,"and",[[27,"not",[[22,9,["showError"]]],null],[22,8,["inValid"]],[22,8,["errorMessage"]]],null]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","help-block invalid-email"],[11,"data-test-id","other-phone-error"],[9],[0,"\\n                    "],[1,[27,"t",[[22,8,["errorMessage"]]],null],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[8,9]},null]],"parameters":[5,6,7]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["name"]],"tags"],null]],null,{"statements":[[0,"          "],[1,[27,"ui-components/multi-select",null,[["renderInPlace","selected","class","closeOnSelect","autofocus","initiallyOpened","loadingMessage","validateTag","showCreate","label","data-test-field","customFdLabel","disabled"],[true,[23,["requester","tags"]],"input multi-select",true,false,false,"",true,[27,"hasabilities",["create_tags"],null],[27,"t",["contactfields.tags"],null],"contact",[27,"t",[[27,"concat",["contactfields.",[22,4,["name"]]],null]],null],[22,4,["disable"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["componentType"]],"custom-component"],null]],null,{"statements":[[0,"          "],[1,[27,"ui-form/custom-component",[[22,4,["fieldName"]]],[["options","model","componentName","form","disabled"],[[22,4,["options"]],[23,["requester"]],[22,4,["componentName"]],[22,1,["form"]],[22,4,["disable"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,4,["componentType"]],"lookup-field"],null]],null,{"statements":[[0,"          "],[1,[27,"ui-form/lookup-field",[[22,4,["fieldName"]]],[["field","model","lookupFieldRecordId","isRequired","hasValidation"],[[22,4,[]],[23,["requester"]],[27,"get",[[23,["requester"]],[22,4,["fieldName"]]],null],false,false]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"component",[[27,"concat",["ui-form/",[22,4,["componentType"]]],null],[22,4,["fieldName"]]],[["model","label","placeholder","options","optionLabelPath","optionValuePath","form","disabled"],[[23,["requester"]],[22,4,["label"]],[22,4,["label"]],[22,4,["choices"]],"label",[22,4,["optionValuePath"]],[22,1,["form"]],[22,4,["disable"]]]]],false],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[27,"and",[[22,4,["showConflict"]],[27,"eq",[[22,4,["errorData","type"]],"conflict"],null]],null]],null,{"statements":[[0,"          "],[1,[27,"app-components/conflict-card",null,[["userId","fieldName","dataTestId","isNew","conflictAction","onDismiss"],[[22,4,["errorData","userId"]],[22,4,["errorData","fieldName"]],[27,"concat",["app-card-",[22,4,["errorData","fieldName"]]],null],false,[27,"action",[[22,0,[]],"conflictAction",[22,4,["errorData","fieldName"]]],null],[27,"action",[[22,0,[]],[27,"mut",[[22,4,["showConflict"]]],null]],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[4]},null],[4,"unless",[[23,["deletedCompany"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"role","button"],[11,"class","requester-widget-expand text__content text--semibold"],[12,"onclick",[27,"action",[[22,0,[]],"toggleCompanyFields"],null]],[11,"data-test-id","requester-widget-company"],[9],[0,"\\n          "],[1,[21,"toggleText"],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["showCompanyFields"]]],null,{"statements":[[4,"each",[[23,["companyFormFields"]]],null,{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"default_name"],null]],null,{"statements":[[0,"              "],[7,"div"],[12,"class",[28,["input ",[27,"unless",[[23,["hasCompany"]],"required"],null]," ",[27,"if",[[23,["showCompanyError"]],"requester-company-error"],null]]]],[11,"data-test-field","company-name"],[9],[0,"\\n                "],[7,"label"],[11,"class","label-field"],[9],[1,[27,"t",["companyfields.name"],null],false],[10],[0,"\\n"],[4,"if",[[23,["hasCompany"]]],null,{"statements":[[0,"                  "],[7,"div"],[11,"class","requester-widget-disabled-field"],[9],[0,"\\n                    "],[7,"span"],[11,"class","text__infotext text--semibold"],[9],[1,[23,["company","name"]],false],[10],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-form/remote-select-field",null,[["showError","error","form","customFdLabel","data-test-id","selected","onchange","fieldType","searchField","url","allowInvalid","hint"],[[23,["showCompanyError"]],[23,["companyError"]],[22,1,["form"]],[22,2,["label"]],"requester-company-name",[23,["selectedCompany"]],[27,"action",[[22,0,[]],"onChange"],null],"companies","value","/search/autocomplete/companies",false,[23,["companyHint"]]]],{"statements":[[0,"                    "],[1,[22,3,["value"]],false],[0,"\\n"]],"parameters":[3]},null]],"parameters":[]}],[0,"              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"hasabilities",["manage_companies"],null]],null,{"statements":[[4,"if",[[27,"eq",[[22,2,["componentType"]],"lookup-field"],null]],null,{"statements":[[0,"                "],[1,[27,"ui-form/lookup-field",[[22,2,["fieldName"]]],[["field","model","lookupFieldRecordId","isRequired","hasValidation"],[[22,2,[]],[23,["companyModel"]],[27,"get",[[23,["companyModel"]],[22,2,["fieldName"]]],null],false,false]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"component",[[27,"concat",["ui-form/",[22,2,["componentType"]]],null],[22,2,["fieldName"]]],[["model","label","placeholder","options","optionLabelPath","optionValuePath","form","data-test-field","disabled"],[[23,["companyModel"]],[22,2,["label"]],[22,2,["label"]],[22,2,["choices"]],"label",[22,2,["optionValuePath"]],[22,1,["form"]],[27,"concat",["company-",[22,2,["name"]]],null],[22,2,["disable"]]]]],false],[0,"\\n"]],"parameters":[]}],[0,"            "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[]},null],[0,"      "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n        "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"data-test-id","cancel-button"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n          "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n          "],[1,[27,"component",[[22,1,["submit"]]],[["data-test-id"],["submit"]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/requester-widget/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/status-cards/component",["exports","freshdesk/constants/ticket","freshdesk/mixins/marketplace/interface/ticket-properties-info","freshdesk/mixins/tickets/service-task"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend(s.default,n.default,{moment:Ember.inject.service(),store:Ember.inject.service(),i18n:Ember.inject.service(),currentAccount:Ember.inject.service(),classNames:["__module-tickets__ticket-details__status-cards"],blinkText:!1,firstResponseOverdue:Ember.computed.reads("ticket.frDueBy"),resolutionDue:Ember.computed.reads("ticket.dueBy"),nextResponseDue:Ember.computed.reads("ticket.nrDueBy"),minDate:Ember.computed.or("ticket.{frDueBy,createdAt}"),firstResponse:Ember.computed.notEmpty("ticket.stats.firstRespondedAt"),isResolved:Ember.computed.equal("ticketStatusClone.value",t.default.status.resolved),isClosed:Ember.computed.equal("ticketStatusClone.value",t.default.status.closed),isClosureStatus:Ember.computed.or("isResolved","isClosed"),isOpen:Ember.computed.equal("ticketStatusClone.value",t.default.status.open),slaStatus:Ember.computed.reads("ticketStatusClone.stop_sla_timer"),showResolutionDue:Ember.computed.not("slaStatus"),hasSla:Ember.computed.reads("currentAccount.hasSla"),ticketStatusClone:Ember.computed("statusUpdate",(function(){return Ember.get(this,"ticket.statusChoice")})),ticketStatus:Ember.computed("statusUpdate",(function(){if(Ember.get(this,"isResolved")){var e="tickets.sla_status.".concat(Ember.get(this,"resolutionStatus"));return Ember.get(this,"i18n").t(e)}return Ember.get(this,"ticket.statusChoice.translatedLabel")})),resolutionStatus:Ember.computed("ticket.{stats,dueBy}",(function(){return Ember.get(this,"ticket.stats.statusUpdatedAt")<=Ember.get(this,"ticket.dueBy")?"resolved_on_time":"resolved_late"})),showFirstResponse:Ember.computed("firstResponse","currentAccount.features","slaStatus",(function(){return!Ember.get(this,"firstResponse")&&!Ember.get(this,"slaStatus")&&!Ember.get(this,"currentAccount").hasFeature("hide_first_response_due")})),showNextResponse:Ember.computed("currentAccount.features","showResolutionDue","nextResponseDue",(function(){return Ember.get(this,"currentAccount").hasFeature("next_response_sla")&&Ember.get(this,"showResolutionDue")&&null!==Ember.get(this,"nextResponseDue")})),responseDue:Ember.computed("showFirstResponse","showNextResponse",(function(){var e=Ember.get(this,"showFirstResponse"),t=Ember.get(this,"showNextResponse");return e?{show:e,time:Ember.get(this,"firstResponseOverdue"),state:Ember.get(this,"frDueState"),label:"fd.frdue",testId:"first-response-due"}:{show:t,time:Ember.get(this,"nextResponseDue"),state:Ember.get(this,"nrDueState"),label:"fd.nrdue",testId:"next-response-due"}})),statusTime:Ember.computed("closureTimeStamp",(function(){var e=this.moment.moment(Ember.get(this,"closureTimeStamp")),t=Ember.get(this,"isClosureStatus");if(e.diff(moment.now(),"days")>=-7)return t?e.fromNow():Ember.get(this,"i18n").t("tickets.sla_status.since.time",{time:e.fromNow()});var s,n=Ember.get(this,"resolutionStatus");return s=t?"resolved_on_time"==n?"tickets.sla_status.by.time":"tickets.sla_status.on.time":"tickets.sla_status.since.time",Ember.get(this,"i18n").t(s,{time:e.format("DD MMM YYYY, hh:mm a")})})),closureTimeStamp:Ember.computed("ticket.stats",(function(){var e=t.default.status,s=e.closed,n=e.resolved,i=Ember.get(this,"ticket.statusChoice");if(i){var a=i.value;return a===s?Ember.get(this,"ticket.stats.closedAt"):a===n?Ember.get(this,"ticket.stats.resolvedAt"):Ember.get(this,"ticket.stats.statusUpdatedAt")}})),frDueState:Ember.computed("firstResponseOverdue",(function(){var e=moment(Ember.get(this,"firstResponseOverdue")).valueOf();return this._getStatus(e)})),resDueState:Ember.computed("resolutionDue",(function(){var e=moment(Ember.get(this,"resolutionDue")).valueOf();return this._getStatus(e)})),nrDueState:Ember.computed("nextResponseDue",(function(){var e=moment(Ember.get(this,"nextResponseDue")).valueOf();return this._getStatus(e)})),actions:{changeDuebyTime:function(e){if(""!==e){var t=Ember.get(this,"moment").moment(e).locale("en").utc().format();return Ember.get(this,"ticket").updateTicket({due_by:t}).then(this._changeDuebyTimeSuccessCB.bind(this),this._changeDuebyTimeFailureCB.bind(this))}}},_getStatus:function(e){var t=Ember.get(this,"moment").moment().valueOf();return t>e-36e5&&t<e?"critical":t>e?"overdue":"safe"},_changeDuebyTimeSuccessCB:function(e){var t=this;return Ember.set(this,"blinkText",!0),Ember.run.later((function(){Ember.set(t,"blinkText",!1)}),600),Ember.get(this,"store").pushPayload(e)},_changeDuebyTimeFailureCB:function(){return this.flashMessages.danger(Ember.get(this,"i18n").t("ticket.duebytime.update.error"))}});e.default=i})),define("freshdesk/components/module-tickets/ticket-details/status-cards/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"zR1YkBI3",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","status-cards-container"],[9],[0,"\\n  "],[7,"p"],[11,"class","text--normal text--xxmedium mb-0"],[11,"data-test-id","ticket-status"],[9],[0,"\\n    "],[1,[21,"ticketStatus"],false],[0,"\\n  "],[10],[0,"\\n"],[4,"unless",[[23,["isOpen"]]],null,{"statements":[[0,"    "],[7,"p"],[11,"class","mb-0 mt-4 text--default"],[11,"data-test-id","closure-timestamp"],[9],[0,"\\n      "],[1,[21,"statusTime"],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["isServiceTask"]],[23,["isOpen"]]],null]],null,{"statements":[[4,"if",[[23,["appointmentEndTime"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","status-card text--default"],[11,"data-test-id","status-card"],[9],[0,"\\n        "],[7,"p"],[12,"class",[27,"concat",["status-title text--semibold text--xsmall ",[23,["appointmentState"]]],null]],[11,"data-test-id","service-task-title"],[9],[0,"\\n          "],[1,[27,"t",["tickets.details.servicetask.appointment"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"span"],[11,"data-test-id","appointment-time"],[9],[0,"\\n          "],[1,[27,"t",["fd.by"],null],false],[0," "],[1,[27,"moment-format",[[23,["appointmentEndTime"]],"ddd, DD MMM YYYY, hh:mm A"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["hasSla"]],[27,"not",[[23,["isClosureStatus"]]],null],[27,"not",[[23,["isServiceTask"]]],null]],null]],null,{"statements":[[4,"if",[[23,["responseDue","show"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","status-card text--default"],[11,"data-test-id","status-card"],[9],[0,"\\n          "],[7,"p"],[12,"class",[27,"concat",["status-title text--semibold text--xsmall ",[23,["responseDue","state"]]],null]],[11,"data-test-id","status-title"],[9],[0,"\\n            "],[1,[27,"t",[[23,["responseDue","label"]]],null],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"span"],[12,"data-test-id",[27,"concat",[[23,["responseDue","testId"]]],null]],[9],[0,"\\n            "],[1,[27,"t",["fd.by"],null],false],[0," "],[1,[27,"moment-format",[[23,["responseDue","time"]],"ddd, DD MMM YYYY, hh:mm A"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showResolutionDue"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","status-card text--default"],[11,"data-test-id","status-card"],[9],[0,"\\n          "],[7,"p"],[12,"class",[27,"concat",["status-title text--semibold text--xsmall ",[23,["resDueState"]]],null]],[11,"data-test-id","status-title"],[9],[0,"\\n            "],[7,"span"],[12,"class",[27,"if",[[23,["blinkText"]],"blink-text"],null]],[9],[1,[27,"t",["fd.resdue"],null],false],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["isEditable"]],[27,"not",[[23,["hideTicketDueBy"]]],null],[27,"not",[[23,["ticketStatusClone","stop_sla_timer"]]],null]],null]],null,{"statements":[[4,"app-components/menu-date-picker",null,[["dateSelectAction","defaultDate","positionLeft","minDate","maxDate","renderInPlace"],[[27,"action",[[22,0,[]],"changeDuebyTime"],null],[23,["resolutionDue"]],true,[23,["minDate"]],[23,["maxDate"]],false]],{"statements":[[0,"                "],[7,"span"],[11,"class","date-edit btn--text-transparent"],[9],[0,"\\n                  "],[7,"span"],[12,"class",[28,["text--xsmall ",[27,"if",[[23,["blinkText"]],"blink-text"],null]]]],[11,"data-test-id","edit-button"],[9],[1,[27,"t",["ticket.editduedate"],null],false],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"          "],[10],[0,"\\n          "],[7,"span"],[11,"data-test-id","resolution-due"],[12,"class",[27,"if",[[23,["blinkText"]],"blink-text"],null]],[9],[0,"\\n            "],[1,[27,"t",["fd.by"],null],false],[0," "],[1,[27,"moment-format",[[23,["resolutionDue"]],"ddd, DD MMM YYYY, hh:mm A"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/status-cards/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/summary/component",["exports","ember-data","freshdesk/mixins/tickets/ticket-conversation-send"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t.default.PromiseObject,i=Ember.Component.extend(s.default,{classNames:"__module-tickets__ticket-details__summary",store:Ember.inject.service(),ticketId:Ember.computed.reads("ticket.id"),summaryNote:Ember.computed.reads("ticket.summary.content"),collapseDesc:Ember.computed.reads("isInActivity"),isActionable:Ember.computed.readOnly("ticket.isActionable"),summaryPromise:Ember.computed("ticketId",(function(){return n.create({promise:Ember.get(this,"ticket").getSummary().then(this.pushToPayload.bind(this))})})),pushToPayload:function(e){if(e){var t={};return t.summary=e.ticket_summary,Ember.get(this,"store").pushPayload(t)}return e},actions:{toggleSummary:function(){this.toggleProperty("summaryEditor")},removeAttachment:function(e){this.removeAttachment({parentObj:this.ticket,attachment:e})}}});e.default=i})),define("freshdesk/components/module-tickets/ticket-details/summary/summary-details/component",["exports","freshdesk/mixins/bubble-action","freshdesk/mixins/anchor-link","freshdesk/utils/blank-array"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend(s.default,t.default,{store:Ember.inject.service(),manageLightbox:Ember.inject.service(),classNames:["__module-tickets__ticket-details__summary__summary-details","summary","ticket-details__item"],attributeBindings:["albumName:data-album"],classNameBindings:["collapseDesc:activities-description"],isEditing:!1,enableBtnAction:!1,displayDeleteConversation:!1,anchorLinkContainer:".ticket-note-typography a",allowRemoveAttachment:!0,dynamicAttachmentsIds:(0,n.default)(),conversationId:Ember.computed.readOnly("conversation.id"),isAgent:Ember.computed.or("conversation.user.{isAgent,deletedAgent}"),addedAttachments:Ember.computed.setDiff("dynamicAttachmentsIds","attachmentInternalList"),removedAttachments:Ember.computed.setDiff("attachmentInternalList","dynamicAttachmentsIds"),noteUserIsAgent:Ember.computed.reads("conversation.user.isAgent"),showLastEditInfo:Ember.computed("isEditing,conversation.lastEditedUserId,conversation.lastEditedAt",(function(){return!Ember.get(this,"isEditing")&&null!=Ember.get(this,"conversation.lastEditedUserId")&&null!=Ember.get(this,"conversation.lastEditedAt")})),attachmentInternalList:Ember.computed.map("conversation.attachments",(function(e){return parseInt(Ember.get(e,"id"))})),albumName:Ember.computed("conversationId",(function(){return"note_".concat(Ember.get(this,"conversationId"))})),imageSelector:Ember.computed("albumName",(function(){return"[data-album = '".concat(this.albumName,"'] .text__content img[src]")})),canEditConversation:Ember.computed("isEditing,noteUserIsAgent",(function(){var e=Ember.get(this,"currentUser").hasAbility("editNote")||Ember.get(this,"currentUser.id")==Ember.get(this,"conversation.userId"),t=Ember.get(this,"isEditing"),s=Ember.get(this,"noteUserIsAgent");return!t&&e&&s})),canDeleteConversation:Ember.computed((function(){var e=Ember.get(this,"isEditing"),t=Ember.get(this,"currentUser").hasAbility("edit_conversation");return Ember.get(this,"noteUserIsAgent")&&!e&&t})),canPerformAction:Ember.computed("canEditConversation","canDeleteConversation","ticket",(function(){return Ember.get(this,"ticket.isActionable")&&(Ember.get(this,"canEditConversation")||Ember.get(this,"canDeleteConversation"))})),didRender:function(){this._super.apply(this,arguments),Ember.get(this,"isEditing")||(this.manageLightbox.removeInlineImages(this.albumName),this.manageLightbox.addInlineImages(this.albumName,this.imageSelector))},didInsertElement:function(){this._super.apply(this,arguments),this.sanitizeAnchors()},actions:{attachToResponse:function(e){Ember.get(this,"attachToResponse")(e)},initiateEdit:function(){this.send("doToggleSet")},initiateDelete:function(){this.toggleProperty("displayDeleteConversation")},doToggleSet:function(){this.toggleProperty("isEditing")},contentChanged:function(e){Ember.set(this,"conversation.body",e),Ember.set(this,"enableBtnAction",!0)},onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},removeAttachment:function(e){this.bubbleAction("removeAttachment",e)},noteUpdate:function(){var e=Ember.get(this,"conversation"),t=Ember.get(this,"addedAttachments"),s=Ember.get(this,"removedAttachments"),n=Ember.get(this,"store"),i=[],a=Ember.get(this,"ticket");s.length>0&&s.forEach((function(e){var t=n.peekRecord("attachment",e);i.push(t.destroyRecord())})),Ember.setProperties(e,{attachmentIds:t});var r={body:Ember.get(this,"conversation.body"),attachment_ids:t};if(Ember.get(e,"inlineAttachmentIds")&&Ember.set(r,"inline_attachment_ids",Ember.get(e,"inlineAttachmentIds")),Ember.get(e,"hasDirtyAttributes"))if(i.length){var l=Ember.RSVP.Promise.all(i),o=this._noteUpdateCB.bind(this);l.then((function(){a.updateSummary(r).then(o)}))}else Ember.get(this,"ticket").updateSummary(r).then(this._noteUpdateCB.bind(this))},cancel:function(){Ember.get(this,"conversation").rollbackAttributes(),this.send("doToggleSet")},delete:function(){var e=this._deleteSuccess.bind(this),t=this._deleteFailure.bind(this);Ember.get(this,"conversation").unloadRecord(),Ember.get(this,"ticket").deleteSummary().then(e).catch(t)}},click:function(e){"img"===e.target.nodeName.toLowerCase()&&e.target.classList.contains("inline-image")&&this.manageLightbox.openInlineImage(e.target.src,this.albumName)},_deleteSuccess:function(){this.manageLightbox.removeAlbum(this.albumName),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("ticket.summary.delete.success"))},_deleteFailure:function(e){var t=Ember.get(this,"i18n").t("ticket.summary.delete.error"),s=e.message;Ember.get(this,"flashMessages").danger(t+s)},_noteUpdateCB:function(e){Ember.get(this,"conversation.inlineAttachmentIds")&&Ember.set(this,"conversation.inlineAttachmentIds",[]);var t={};t.summary=e.ticket_summary,Ember.get(this,"store").pushPayload(t),this.send("doToggleSet")}});e.default=i})),define("freshdesk/components/module-tickets/ticket-details/summary/summary-details/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"KFbQq/Zn",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","summary-details"],[9],[0,"\\n  "],[7,"div"],[12,"class",[28,["summary-content ",[27,"if",[[23,["isEditing"]],"edit-summary"],null]]]],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-details__item__header conversation-header clearfix"],[9],[0,"\\n      "],[7,"div"],[11,"class","container p0"],[9],[0,"\\n        "],[7,"div"],[11,"class","pl-0"],[9],[0,"\\n          "],[7,"div"],[11,"class","summary-heading"],[9],[0,"\\n            "],[7,"span"],[11,"class","app-icon--xxlarge summary-icon"],[9],[0,"\\n              "],[1,[27,"svg-jar",["summary"],[["class"],["app-icon--regular app-icon--white mb-2"]]],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[9],[0,"\\n              "],[7,"span"],[11,"class","summary-details-text pl-15 text--xxsmall"],[9],[0,"\\n                "],[1,[27,"t",["tickets.action.summary"],null],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","text__content position--relative text__infotext text--italic text--small ml-6"],[9],[0,"\\n                "],[7,"span"],[11,"class","created-by"],[9],[0,"\\n                  "],[7,"span"],[11,"class","pl-10 pr-3"],[9],[1,[27,"t",["fd.createdby"],null],false],[0," "],[10],[0,"\\n                  "],[7,"span"],[11,"data-test-id","summary-added-by"],[9],[0,"\\n                    "],[1,[27,"app-components/user-link",null,[["user","class"],[[23,["conversation","user"]],"pull-left"]]],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"],[4,"unless",[[23,["isEditing"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","created-at show-separator text__infotext mr-4"],[9],[0,"\\n                    "],[1,[27,"ui-components/time-ago",null,[["dateTime","data-test-id","class","showHintRight"],[[23,["conversation","createdAt"]],"summary-created-at","ml-15",true]]],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["showLastEditInfo"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","text__infotext text--italic secondary-info"],[9],[0,"\\n            "],[1,[27,"t",["tickets.conversation.last-edit-info"],null],false],[0,"\\n            "],[7,"span"],[11,"data-test-id","summary-last-edited-by"],[9],[0,"\\n              "],[1,[27,"app-components/user-link",null,[["user"],[[23,["conversation","lastEditedUser"]]]]],false],[0,"\\n            "],[10],[0,"\\n            "],[1,[27,"ui-components/time-ago",null,[["dateTime","data-test-id","showHintRight"],[[23,["conversation","lastEditedAt"]],"summary-edited-at",true]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-details-action-wrapper"],[9],[0,"\\n"],[4,"if",[[23,["canPerformAction"]]],null,{"statements":[[4,"unless",[[23,["isInActivity"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-actions-container"],[11,"data-test-id","ticket-actions-container"],[9],[0,"\\n"],[4,"if",[[23,["canEditConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","edit-new",true,"hint--rounded hint--top ticket-actions","edit-summary",[27,"t",["fd.edit"],null],[27,"action",[[22,0,[]],"initiateEdit",[23,["conversation"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canDeleteConversation"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["variant","size","icon","iconOnly","customClass","data-test-conversation-actions","ariaLabel","onClick"],["text","small","delete",true,"hint--rounded hint--top ticket-actions ticket-actions__delete","delete",[27,"t",["fd.delete"],null],[27,"action",[[22,0,[]],"initiateDelete"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-details__item__content mt-8"],[9],[0,"\\n      "],[7,"div"],[11,"class","text__content sanitizer-class"],[9],[0,"\\n"],[4,"unless",[[27,"or",[[23,["isEditing"]],[27,"and",[[23,["collapseDesc"]],[23,["isInActivity"]]],null]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-note-typography summary-data"],[11,"data-test-conversation","conversation-text"],[9],[0,"\\n"],[4,"if",[[27,"hasfeature",["freshconnect"],null]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","ticket_note"],[12,"data-note-id",[21,"conversationId"]],[9],[1,[27,"html-safe",[[23,["conversation","body"]]],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"collab-context",null,[["class","data-note-id","openSidebar"],["ticket_note",[23,["conversationId"]],[23,["openCollab"]]]],{"statements":[[1,[27,"html-safe",[[23,["conversation","body"]]],null],false]],"parameters":[]},null]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"],[4,"if",[[23,["isEditing"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","edit-not-editor"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["cancel","update","contentChanged","value","placeholder","externalAttachments","inlineSubmission","autofocus","showFooter","onInsertAttachment","showSolution","showCannedResponse","showCannedResponseTip","customClass","onSubmitConversation","onEscape","skipFirstSendAction","model","fixedFormattingToolbar"],[[27,"action",[[22,0,[]],"cancel"],null],[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"action",[[22,0,[]],"contentChanged"],null],[23,["conversation","body"]],[27,"t",["summary.add_summary"],null],[23,["conversation","attachments"]],true,true,true,[27,"action",[[22,0,[]],"onInsertAttachment"],null],true,true,true,"editor-edit-note",[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"action",[[22,0,[]],"cancel"],null],false,[23,["conversation"]],true]],{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n              "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"cancel"],null]],[11,"class","btn btn--secondary"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n              "],[1,[27,"async-button",null,[["action","default","pending","class"],[[27,"action",[[22,0,[]],"noteUpdate"],null],[27,"t",["form.update"],null],[27,"t",["form.updating"],null],"btn btn--primary"]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"],[4,"unless",[[27,"or",[[23,["isEditing"]],[27,"and",[[23,["collapseDesc"]],[23,["isInActivity"]]],null]],null]],null,{"statements":[[4,"if",[[23,["conversation","attachments"]]],null,{"statements":[[0,"    "],[1,[27,"app-components/attachment-thumb",null,[["attachments","albumName","allowRemove","allowAddToResponse","attachToResponse"],[[23,["conversation","attachments"]],[23,["albumName"]],[23,["allowRemoveAttachment"]],[23,["allowAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["displayDeleteConversation"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close","danger"],[[27,"t",["summary.delete.title"],null],[27,"t",["summary.delete.savelabel"],null],[27,"action",[[22,0,[]],"delete"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["displayDeleteConversation"]]],null]],null],true]],{"statements":[[0,"    "],[1,[27,"t",["summary.delete.message"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/summary/summary-details/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/summary/summary-editor/component",["exports","freshdesk/utils/object-filter","freshdesk/mixins/tickets/editor-attachment"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(s.default,{store:Ember.inject.service(),eventSources:Ember.inject.service(),classNames:["__module-tickets__ticket-details__summary__summary-editor"],bodyText:Ember.computed.reads("noteModel.body"),hasBodyText:Ember.computed.bool("bodyText.length"),noteModel:Ember.computed((function(){return Ember.Object.create()})),actions:{discardConversation:function(){this.clearAttachments(),this.sendAction("toggleSummary")},sendConversation:function(){var e=Ember.get(this,"noteModel"),s=(0,t.default)(e,["body","user_id","attachment_ids","attachments"]);return this.clearAttachments(),this._sendConversation(s)},onSubmitConversation:function(){document.getElementById("send-and-set").disabled||this.send("sendConversation")},onInsertAttachment:function(e){Ember.set(this,"noteModel.attachment_ids",e)},contentChanged:function(e){Ember.set(this,"noteModel.body",e)}},_sendConversation:function(e){var t=Ember.get(this,"ticket"),s=this._submitSummaryFailure.bind(this);return Ember.get(t,"inlineAttachmentIds")&&Ember.set(e,"inline_attachment_ids",Ember.get(t,"inlineAttachmentIds")),t.updateSummary(e).then(this._submitSummaryCB.bind(this)).catch(s)},_submitSummaryCB:function(e){Ember.get(this,"ticket.inlineAttachmentIds")&&Ember.set(this,"ticket.inlineAttachmentIds",[]);var t={};return t.summary=e.ticket_summary,Ember.get(this,"store").pushPayload(t),this.sendAction("toggleSummary"),e},_submitSummaryFailure:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.submitfailure"))}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/summary/summary-editor/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"qKCRb8mg",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","summary element-flex ticket-action"],[9],[0,"\\n  "],[7,"div"],[11,"class","summary-heading"],[9],[0,"\\n    "],[7,"span"],[11,"class","app-icon--xxlarge summary-icon"],[9],[0,"\\n      "],[1,[27,"svg-jar",["summary"],[["class"],["app-icon--regular app-icon--white mb-2"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__editor  max-width ml-15 border border-radius--medium"],[11,"data-test-id","adding-summary"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["placeholder","value","ticket","attachmentValue","onInsertAttachment","onRemoveAttachment","showCannedResponse","showCannedResponseTip","showSolution","showAttachments","isSurveyEnabled","contentChanged","isLoading","autofocus","showFooter","source","skipFirstSendAction","shortcutenabled","onSubmitConversation","onEscape","model","fixedFormattingToolbar"],["",[23,["bodyText"]],[23,["ticket"]],[23,["computedAttachments"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],true,true,true,true,false,[27,"action",[[22,0,[]],"contentChanged"],null],false,true,true,"summary",false,true,[27,"action",[[22,0,[]],"onSubmitConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[23,["ticket"]],true]],{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n        "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn btn--secondary"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","label","pendingLabel","disableSubmit","onSend","data-test-id","ticket"],[false,[27,"t",["summary.save"],null],[27,"t",["common.saving"],null],[27,"not",[[23,["hasBodyText"]]],null],[27,"action",[[22,0,[]],"sendConversation"],null],"save-summary",[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/summary/summary-editor/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/summary/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"+Bnm8Yr4",block:'{"symbols":[],"statements":[[4,"if",[[23,["summaryPromise","isPending"]]],null,{"statements":[[0,"  "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["single-loader"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["summaryNote"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/summary/summary-details",null,[["conversation","isInActivity","ticket","openCollab","allowAddToResponse","attachToResponse","collapseDesc"],[[23,["summaryNote"]],[23,["isInActivity"]],[23,["ticket"]],[23,["openCollab"]],[23,["allowAddToResponse"]],[23,["attachToResponse"]],[23,["collapseDesc"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isActionable"]]],null,{"statements":[[4,"if",[[23,["summaryEditor"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-details/summary/summary-editor",null,[["ticket","externalAttachments","onEditorFocus","onEditorBlur","toggleSummary"],[[23,["ticket"]],[23,["externalAttachments"]],[27,"action",[[22,0,[]],"onEditorFocus"],null],[27,"action",[[22,0,[]],"onEditorBlur"],null],[27,"action",[[22,0,[]],"toggleSummary"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"nucleus-button",null,[["variant","customClass","onClick","data-test-id"],["text","summary add-summary-btn",[27,"action",[[22,0,[]],"toggleSummary"],null],"add-summary-btn"]],{"statements":[[0,"        "],[7,"div"],[11,"class","summary-heading"],[9],[0,"\\n          "],[7,"span"],[11,"class","app-icon--xxlarge summary-icon"],[9],[0,"\\n            "],[1,[27,"svg-jar",["summary"],[["class"],["app-icon--regular app-icon--white"]]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","summary-description"],[9],[0,"\\n            "],[7,"span"],[11,"class","summary-text pl-12"],[11,"data-test-id","add-summary"],[9],[0,"\\n              "],[1,[27,"t",["tickets.action.addsummary"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/summary/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"lV8qPv3D",block:'{"symbols":["actionsRenderHash","wrapper","slider","sideBar","widgetsRenderHash","sidebarAppsRenderHash","integrationAppsRenderHash","app","requesterAppsRenderHash","descriptionRenderHash","propertiesRenderHash","summaryAppRenderHash","conversation","conversation","option","activityRenderHash","summaryAppRenderHash","appsRenderHash"],"statements":[[4,"page-layout/page-wrapper",null,[["id","contentSidebarEnabled","class"],["ticket-details",[23,["showProprertiesPane"]],[27,"concat",["ticket-details content-widget-wrap",[27,"if",[[23,["isContextOverlayOpen"]]," sidebar-present"],null]],null]]],{"statements":[[4,"component",[[22,2,["content-widget"]]],null,{"statements":[[4,"component",[[22,2,["content-left"]]],[["class"],[[23,["ticketActionableClass"]]]],{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","queryParams","renderCallback"],[0,[23,["ticket","id"]],"fetchTicket",[23,["fetchTicket"]],[23,["queryParams"]],[27,"action",[[22,0,[]],"ticketFetchCallback"],null]]],{"statements":[[4,"component",[[22,10,["loader-state"]]],null,{"statements":[[0,"          "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["description-card"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"div"],[11,"class","tickets-conversation-pane max-width pull-left"],[9],[0,"\\n"],[4,"component",[[22,10,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[4,[23,["ticket","id"]],"ticketBackgroundApps",false]],{"statements":[[4,"component",[[22,18,["render-content"]]],null,{"statements":[[0,"                "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","context","pageType"],["ticket_background",[23,["ticket","id"]],"ticket"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[18]},null],[0,"            "],[1,[27,"module-tickets/ticket-details/top-navigation",null,[["ticket","openWorkflowOverlay","showAction","closeTicket","showEdit","delete","hasTimesheetsFeatureAndAbility","markAsSpam","merge","showTimeEntryForm","showExecuteSenario","showhideActivity","associateTicketsSlider","markUnSpam","restoreTicket","deleteTicketForever","onTicketChange","agentsViewing","agentsReplying","showTicketReply","expandCollab","totalCollabMessages","unreadCollabMessages","threadsCount","scenarioWatchers","isEditable","setReplyChannel","replyOptions","showOmniChannelReply","hideEditButtonTd","disableEditButtonTd","currentReplyChannel","threadTemplateTasks","initiateEditPage"],[[23,["ticket"]],[27,"action",[[22,0,[]],"openWorkflowOverlay"],null],[27,"action",[[22,0,[]],"showAction"],null],[27,"action",[[22,0,[]],"closeTicket"],null],[27,"action",[[22,0,[]],"showEdit"],null],[27,"action",[[22,0,[]],"delete"],null],[23,["hasTimesheetsFeatureAndAbility"]],[27,"action",[[22,0,[]],"markAsSpam"],null],[27,"action",[[22,0,[]],"merge"],null],[27,"action",[[22,0,[]],"showTimeEntryForm"],null],[27,"action",[[22,0,[]],"toggleProp","showSenarios"],null],[27,"action",[[22,0,[]],"showhideActivity"],null],[27,"action",[[22,0,[]],"associateTickets"],null],[27,"action",[[22,0,[]],"markUnSpam"],null],[27,"action",[[22,0,[]],"restoreTicket"],null],[27,"action",[[22,0,[]],"deleteTicketForever"],null],[27,"action",[[22,0,[]],"onTicketChange"],null],[23,["agentsViewing"]],[23,["agentsReplying"]],[23,["showTicketReply"]],"openCollab",[23,["collabMessages"]],[23,["collabUnreadMessages"]],[23,["threadsCount"]],[23,["scenarioWatchers"]],[23,["isEditable"]],[27,"action",[[22,0,[]],"changeReplyChannel"],null],[23,["replyOptions"]],[23,["showOmniChannelReply"]],[23,["hideEditButtonTd"]],[23,["disableEditButtonTd"]],[23,["currentReplyChannel"]],[23,["threadTemplateTasks"]],[27,"action",[[22,0,[]],"showEditPage"],null]]]],false],[0,"\\n\\n"],[4,"if",[[23,["isReverseOrder"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"id","scroll-to-bottom"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n            "],[1,[27,"module-tickets/ticket-details/auto-refresh/conversation",null,[["ticket","conversationCount","fetchNewConversations"],[[23,["ticket"]],[23,["autoRefreshConversationCount"]],[27,"action",[[22,0,[]],"fetchAndScrollToLatestConversations"],null]]]],false],[0,"\\n\\n            "],[1,[27,"module-tickets/ticket-details/ticket-header",null,[["ticket","markAsSpam","isReverseOrder"],[[23,["ticket"]],[27,"action",[[22,0,[]],"markAsSpam"],null],[23,["isReverseOrder"]]]]],false],[0,"\\n\\n            "],[7,"div"],[11,"class","ticket-details-wrapper"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["canShowSummary"]],[23,["ticket","isActionable"]],[27,"not",[[23,["isReverseOrder"]]],null]],null]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[1,[23,["ticket","id"]],"ticketSummaryApp",false]],{"statements":[[4,"component",[[22,17,["render-content"]]],null,{"statements":[[0,"                    "],[1,[27,"module-tickets/ticket-details/summary",null,[["ticket","summaryEditor","isInActivity","openCollab","allowAddToResponse","attachToResponse","removeAttachment","isReverseOrder"],[[23,["ticket"]],[23,["summaryEditor"]],[23,["showActivity"]],[27,"action",[[22,0,[]],"openCollab"],null],[23,["allowAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null],[27,"action",[[22,0,[]],"removeAttachment"],null],[23,["isReverseOrder"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[17]},null]],"parameters":[]},null],[0,"\\n              "],[7,"div"],[12,"class",[27,"if",[[23,["isReverseOrder"]],"reverse-order"],null]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["ticket","isActionable"]],[23,["isReverseOrder"]]],null]],null,{"statements":[[0,"                  "],[7,"div"],[9],[0,"\\n"],[0,"                    "],[15,"application/ticket-details/ticket-action-buttons",[2,10]],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                "],[7,"div"],[9],[0,"\\n                  "],[1,[27,"module-tickets/ticket-details/description",null,[["ticket","convoToken","ticketFields","initiateEditPage","showAction","isInActivity","hideForwardOption","openCollab","ticketSourceText","allowAddToResponse","attachToResponse","emailFailureDetails","isEditable","hideEditButtonTd","disableEditButtonTd","userContact","isReverseOrder"],[[23,["ticket"]],[23,["convoToken"]],[23,["ticketFields"]],[27,"action",[[22,0,[]],"showEditPage"],null],[27,"action",[[22,0,[]],"showAction"],null],[23,["showActivity"]],[23,["hideForwardOption"]],[27,"action",[[22,0,[]],"openCollab"],null],[23,["ticket","sourceLabel"]],[23,["allowAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null],[27,"action",[[22,0,[]],"emailFailureDetails"],null],[23,["isEditable"]],[23,["hideEditButtonTd"]],[23,["disableEditButtonTd"]],[23,["userContact"]],[23,["isReverseOrder"]]]]],false],[0,"\\n                "],[10],[0,"\\n\\n"],[4,"if",[[27,"and",[[23,["isBotEmailSupport"]],[23,["isBotSupportProvided"]]],null]],null,{"statements":[[0,"                  "],[1,[27,"module-tickets/ticket-details/bot-response",null,[["adviceSuggestResponse","ticket"],[[23,["adviceSuggestResponse"]],[23,["ticket"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n\\n"],[4,"if",[[23,["showActivity"]]],null,{"statements":[[0,"                  "],[7,"div"],[9],[0,"\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","showInlineLoader","triggerOutOfOrder"],[1,[23,["ticket","id"]],"fetchActivities",[23,["fetchActivities"]],true,[23,["refreshConverstions"]]]],{"statements":[[4,"component",[[22,16,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[0,"                        "],[1,[27,"module-tickets/ticket-details/activities-pagination",null,[["items","ticket","totalCount","ticketFields","fetchNextActivity","isReverseOrder","emailFailureDetails"],[[23,["ticket","activities"]],[23,["ticket"]],[23,["totalActivitiesCount"]],[23,["ticketFields"]],[23,["fetchActivities"]],[23,["isReverseOrder"]],[27,"action",[[22,0,[]],"emailFailureDetails"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,16,["loader-state"]]],null,{"statements":[[0,"                        "],[1,[27,"ui-components/inline-loader",null,[["loaderClass"],["ticket-loading"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[16]},null],[0,"                  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["showLoadMoreForNormalTicket"]]],null,{"statements":[[0,"                    "],[1,[27,"ui-components/load-more-with-count",null,[["loadMoreAction","itemsCount","moreLabel","count"],[[27,"action",[[22,0,[]],"fetchOlderConversations"],null],[23,["conversations","length"]],[27,"t",["tickets.view_more_conversations"],null],[23,["totalConversationsCount"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[7,"div"],[9],[0,"\\n"],[4,"if",[[23,["isfbPostTicket"]]],null,{"statements":[[4,"if",[[27,"gt",[[23,["conversations","length"]],1],null]],null,{"statements":[[0,"                        "],[7,"div"],[11,"class","dropdown-container"],[11,"data-test-id","fb-sort-dropdown-container"],[9],[0,"\\n                          "],[7,"div"],[11,"class","text__content drop-small__select dropdown-wapper"],[9],[0,"\\n"],[4,"power-select",null,[["options","selected","searchEnabled","onchange"],[[23,["conversationSortOptions"]],[23,["conversationSortselected"]],false,[27,"action",[[22,0,[]],"fetchFbPostConversations"],null]]],{"statements":[[0,"                              "],[1,[22,15,["name"]],false],[0,"\\n"]],"parameters":[15]},null],[0,"                          "],[10],[0,"\\n                          "],[7,"div"],[11,"class","dropdown-seperator"],[9],[10],[0,"\\n                        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"each",[[23,["ticket","conversations"]]],null,{"statements":[[4,"if",[[27,"not",[[22,14,["deleted"]]],null]],null,{"statements":[[4,"if",[[27,"eq",[[23,["firstConversationInResponse"]],[22,14,["id"]]],null]],null,{"statements":[[0,"                            "],[7,"div"],[11,"class","conversation-divider"],[11,"id","new-conversations"],[9],[0,"\\n                              "],[7,"span"],[9],[0," "],[1,[27,"t",["ticket.details.new_conversations"],null],false],[0," "],[10],[0,"\\n                            "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"eq",["facebook",[22,14,["sourceType"]]],null]],null,{"statements":[[0,"                            "],[1,[27,"module-tickets/ticket-details/conversation/threaded/parent",null,[["conversation","fetchChildConversations","onConversationDelete","ticket","replyToFacebookComment","allowAddToResponse","attachToResponse","navAlertFeatureOn","showAction","installedApps","hideForwardOption","agentsReplying","solutionArticleSuggest","cannedResponseSuggest","isAllowEditorOpen","threadTemplateTasks","toggleCannedResponseSlider","toggleSolutionArticleSlider","initiateSplitTicket","initiateForwardNote","removeAttachment","sendConversation","discardConversation","removeError","showChildConversations","fbLastConversationId"],[[22,14,[]],[23,["fetchChildConversations"]],[27,"action",[[22,0,[]],"onConversationDelete"],null],[23,["ticket"]],[27,"action",[[22,0,[]],"replyToFacebookComment"],null],[23,["allowAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null],true,[27,"action",[[22,0,[]],"showAction"],null],[23,["installedApps"]],[23,["hideForwardOption"]],[23,["agentsReplying"]],[23,["solutionArticleSuggest"]],[23,["cannedResponseSuggest"]],[23,["isAllowEditorOpen"]],[23,["threadTemplateTasks"]],[27,"action",[[22,0,[]],"toggleCannedResponseSlider"],null],[27,"action",[[22,0,[]],"toggleSolutionArticleSlider"],null],[27,"action",[[22,0,[]],"initiateSplitTicket"],null],[27,"action",[[22,0,[]],"initiateForwardNote"],null],[27,"action",[[22,0,[]],"removeAttachment"],null],[27,"action",[[22,0,[]],"sendConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[27,"action",[[22,0,[]],"removeError"],null],[23,["showChildConversations"]],[23,["fbLastConversationId"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[15,"helpdesk/tickets/ticket-details/conversation-card",[2,10,14]],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[14]},null]],"parameters":[]},{"statements":[[4,"each",[[27,"sort-by",[[23,["sortBy"]],[23,["ticket","conversations"]]],null]],null,{"statements":[[4,"if",[[27,"not",[[22,13,["deleted"]]],null]],null,{"statements":[[4,"if",[[27,"eq",[[23,["firstConversationInResponse"]],[22,13,["id"]]],null]],null,{"statements":[[0,"                            "],[7,"div"],[11,"class","conversation-divider"],[11,"id","new-conversations"],[9],[0,"\\n                              "],[7,"span"],[9],[0," "],[1,[27,"t",["ticket.details.new_conversations"],null],false],[0," "],[10],[0,"\\n                            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                          "],[15,"helpdesk/tickets/ticket-details/conversation-card",[2,10,13]],[0,"\\n"]],"parameters":[]},null]],"parameters":[13]},null]],"parameters":[]}],[0,"                  "],[10],[0,"\\n"],[4,"if",[[23,["showLoadMoreForFbPostTicket"]]],null,{"statements":[[0,"                    "],[1,[27,"ui-components/load-more-with-count",null,[["loadMoreAction","itemsCount","moreLabel","count"],[[27,"action",[[22,0,[]],"fetchOlderConversations"],null],[23,["conversations","length"]],[27,"t",["tickets.view_more_conversations"],null],[23,["totalConversationsCount"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["showBroadcastedMessage"]]],null,{"statements":[[0,"                  "],[7,"div"],[9],[0,"\\n                    "],[1,[27,"module-tickets/ticket-details/broadcasted-message",null,[["ticket","broadcast","insertBroadcastToReply"],[[23,["ticket"]],[23,["broadcastedMessage"]],[27,"action",[[22,0,[]],"insertBroadcastToReply"],null]]]],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n\\n                "],[1,[27,"interactivity-beacon",null,[["routeInteractive","model"],[true,[23,["ticket"]]]]],false],[0,"\\n"],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[4,"if",[[23,["showFreddySuggestionCard"]]],null,{"statements":[[0,"                    "],[7,"div"],[11,"class","ticket-details--response-suggest response-suggest element-flex pa-16 mb-20"],[11,"data-test-id","freddy-suggest-modal"],[9],[0,"\\n                      "],[7,"span"],[11,"class","response-suggest--icon element-flex align-items--center mr-16"],[9],[0,"\\n                        "],[1,[27,"svg-jar",["freddy-field-suggestion"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n                      "],[10],[0,"\\n                      "],[7,"div"],[11,"class","response-suggest--content"],[9],[0,"\\n                        "],[7,"p"],[11,"class","response-suggest--title text--medium text--bold"],[9],[0,"\\n                          "],[1,[27,"t",["fd.freddy.title"],null],false],[0,"\\n                        "],[10],[0,"\\n                        "],[7,"div"],[11,"class","response-suggest--response-data text--normal text--xsmall"],[9],[0,"\\n"],[4,"if",[[23,["solutionArticleSuggest"]]],null,{"statements":[[0,"                            "],[7,"button"],[11,"data-test-id","response-suggest--solution-article"],[12,"onclick",[27,"action",[[22,0,[]],"openContextOverlayCard",[23,["inlineSliders","suggestedSolutions"]]],null]],[9],[0,"\\n                              "],[1,[23,["solutionArticleSuggest","count"]],false],[0," "],[1,[27,"t",["insert-solutions.title"],null],false],[0,"\\n                            "],[10],[0,"\\n"],[4,"if",[[23,["cannedResponseSuggest"]]],null,{"statements":[[0,"                              |\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["cannedResponseSuggest"]]],null,{"statements":[[0,"                            "],[7,"button"],[11,"class","response-suggest--canned-response"],[11,"data-test-id","freddy-responsesuggest-btn"],[12,"onclick",[27,"action",[[22,0,[]],"openContextOverlayCard",[23,["inlineSliders","cannedResponse"]]],null]],[9],[0,"\\n                              "],[1,[23,["cannedResponseSuggest","count"]],false],[0," "],[1,[27,"t",["ticket.cannedresponse.label"],null],false],[0,"\\n                            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                        "],[10],[0,"\\n                      "],[10],[0,"\\n                    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["canShowSummary"]],[23,["ticket","isActionable"]],[23,["isReverseOrder"]]],null]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[1,[23,["ticket","id"]],"ticketSummaryApp",false]],{"statements":[[4,"component",[[22,12,["render-content"]]],null,{"statements":[[0,"                        "],[1,[27,"module-tickets/ticket-details/summary",null,[["ticket","summaryEditor","isInActivity","openCollab","allowAddToResponse","attachToResponse","removeAttachment","isReverseOrder"],[[23,["ticket"]],[23,["summaryEditor"]],[23,["showActivity"]],[27,"action",[[22,0,[]],"openCollab"],null],[23,["allowAddToResponse"]],[27,"action",[[22,0,[]],"attachToResponse"],null],[27,"action",[[22,0,[]],"removeAttachment"],null],[23,["isReverseOrder"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[12]},null]],"parameters":[]},null],[0,"                  "],[7,"div"],[9],[0,"\\n"],[0,"                    "],[15,"application/ticket-details/ticket-actions",[2,10]],[0,"\\n"],[4,"unless",[[23,["isReverseOrder"]]],null,{"statements":[[0,"                      "],[7,"div"],[11,"id","scroll-to-bottom"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"],[4,"if",[[23,["showProprertiesPane"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","pull-left"],[9],[0,"\\n            "],[7,"div"],[11,"class","ticket-properties pull-left"],[9],[0,"\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender","fetchDataTask","renderCallback","triggerOutOfOrder"],[1,[23,["ticket","id"]],"renderTicketProperty",[23,["isFreddyPrediction"]],[23,["fetchBotSuggestion"]],[27,"action",[[22,0,[]],"registerControlsCallback"],null],[23,["reloadPropertiesView"]]]],{"statements":[[4,"component",[[22,11,["loader-state"]]],null,{"statements":[[0,"                  "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["list-card"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,11,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[0,"                  "],[1,[27,"module-tickets/ticket-details/properties",[[23,["ticket"]]],[["startTicketValidation","ticketFields","isEditable","refresh","botSuggestion","focusOnError","staleTicketProperties","ticketPropertiesRefresh","autoRefreshedTime","refreshTicketProperties","reloadRightNavView","showSubmitSuccessMessage","statusUpdate","shouldRenderPciField","getPciValue","pciModel","occulsionOptions","setVerticalCollectionAPI","ignoreFieldLevelValidations","updateProperty"],[[23,["startTicketValidation"]],[23,["ticketFields"]],[27,"haspermissions",null,[["model","abilities"],[[23,["ticket"]],"edit_ticket_properties"]]],[23,["refresh"]],[27,"if",[[23,["isFreddyPrediction"]],[22,11,["content"]]],null],[23,["focusOnError"]],[23,["staleTicketProperties"]],[23,["ticketPropertiesRefresh"]],[23,["autoRefreshedTime"]],[27,"action",[[22,0,[]],"refreshTicketProperties"],null],[23,["reloadRightNavView"]],[23,["showSubmitSuccessMessage"]],[23,["propertyUpdate"]],[23,["shouldRenderPciField"]],[27,"action",[[22,0,[]],"getPciValue"],null],[23,["pciModel"]],[23,["occulsionOptions"]],[27,"action",[[22,0,[]],[27,"mut",[[23,["verticalCollectionAPI"]],[23,["collection"]]],null]],null],[23,["ignoreFieldLevelValidations"]],[27,"action",[[22,0,[]],"updateProperty"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[11]},null],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[10]},null]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,2,["sidebar"]]],[["class","isSidebarExpanded"],["multiple-widget-slider",[23,["isSidebarExpanded"]]]],{"statements":[[4,"app-components/widget-sidebar",null,[["ticket","widgetAction","showHideSidebar","isEditable","disableCollapseBtn","showCollapseOpen","showExpandCollapseBtn","widgetsExpanded"],[[23,["ticket"]],[27,"action",[[22,0,[]],"widgetAction"],null],[22,2,["showHideSidebar"]],[23,["hasPermission"]],[23,["isOverlayPresent"]],[27,"action",[[22,0,[]],"showCollapseOpen"],null],[23,["ticketPresent"]],[23,["isSidebarExpanded"]]]],{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[2,[23,["ticket","id"]],"renderTicketWidgets",false]],{"statements":[[4,"component",[[22,5,["loader-state"]]],null,{"statements":[[0,"          "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["requester-card"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,5,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon","isActionEnabled","actionLabel","minimized"],["requester-info",[27,"t",["tickets.requester.info"],null],"info",[23,["requesterWidgetEditAllowed"]],[27,"t",["fd.edit"],null],false]],{"statements":[[0,"            "],[1,[27,"module-tickets/ticket-details/widgets/requester-info",null,[["ticket","isRequesterWidget","isVisible","renderPriority","reload"],[[23,["ticket"]],true,true,3,[23,["reloadRequesterWidget"]]]]],false],[0,"\\n\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[3,[23,["ticket","id"]],"ticketRequesterApps",false]],{"statements":[[4,"component",[[22,9,["render-content"]]],null,{"statements":[[0,"                "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","context","pageType","renderMkpApp"],["ticket_requester_info",[23,["ticket","id"]],"ticket",[23,["renderMkpApp"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[9]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[4,"if",[[23,["isCustomObjectsEnabled"]]],null,{"statements":[[0,"              "],[1,[27,"custom-objects/widgets",null,[["sideBar","contextObjectId","contextRecordId"],[[22,4,[]],[23,["contextObjectIdTicket"]],[23,["ticket","id"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["sessionReplayEnabled"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon","minimized"],["recent-sessions",[27,"t",["fd.recent_sessions"],null],"session-replay-drawer",true]],{"statements":[[0,"                "],[1,[27,"module-tickets/ticket-details/recent-sessions",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"hasfeature",["link_tickets"],null],[23,["isNotParentOrChild"]]],null]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["link-tickets",[27,"t",["tickets.ticket_associations.link_tickets.title"],null],"insert-link"]],{"statements":[[0,"                "],[1,[27,"module-tickets/ticket-details/widgets/associate-tickets",null,[["ticket","associateTicketsSlider","primeTicketDetails","linkTickets"],[[23,["ticket"]],[27,"action",[[22,0,[]],"associateTickets"],null],[23,["primeTicketDetails"]],true]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["showParentChildWidget"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["add-child-tickets",[27,"t",["tickets.ticket_associations.parent_child.title"],null],"parent-child"]],{"statements":[[0,"                "],[1,[27,"module-tickets/ticket-details/widgets/associate-tickets",null,[["ticket","associateTicketsSlider","primeTicketDetails","addChild"],[[23,["ticket"]],[27,"action",[[22,0,[]],"associateTickets"],null],[23,["primeTicketDetails"]],true]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["showServiceTaskWidget"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["add-service-tasks",[27,"t",["tickets.ticket_associations.service_task.title"],null],"service-task"]],{"statements":[[0,"                "],[1,[27,"module-tickets/ticket-details/widgets/service-task",null,[["ticket","associateTicketsSlider","primeTicketDetails"],[[23,["ticket"]],[27,"action",[[22,0,[]],"associateTickets"],null],[23,["primeTicketDetails"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["showAHTTab"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["aht-time-entries",[27,"t",["ticket.ticket-handling-time"],null],"average-handling-time"]],{"statements":[[0,"                "],[7,"iframe"],[11,"width","228"],[11,"id","aht-timer-widget-iframe"],[11,"class","widget-aht-timer"],[11,"data-test-id","aht-timer"],[12,"title",[27,"t",["ticket.ticket-handling-time"],null]],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/aht/aht-time-entries-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.html"],[9],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["hasTimesheetsFeatureAndAbility"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["time-entries",[27,"t",["timer.title"],null],"add-timer"]],{"statements":[[4,"if",[[23,["refresh"]]],null,{"statements":[[0,"                  "],[1,[27,"module-tickets/ticket-details/widgets/time-entries",null,[["ticket","showTimeEntryForm","timerAppActivated","deleteTimeEntry","startStopTimer","reload"],[[23,["ticket"]],[27,"action",[[22,0,[]],"showTimeEntryForm"],null],[23,["timerAppActivated"]],[27,"action",[[22,0,[]],"deleteTimeEntry"],null],[27,"action",[[22,0,[]],"startStopTimer"],null],[23,["reloadTimeEntries"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},null],[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["todo-list",[27,"t",["fd.todo"],null],"todo"]],{"statements":[[0,"              "],[1,[27,"app-components/to-do",null,[["modelObj","isTodoActionable","type","autofocus","placeholder"],[[23,["ticket"]],[23,["hasPermission"]],"ticket",true,[27,"t",["dashboard.todo-placeholder"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"hasfeature",[[23,["qualityManagementFeature"]]],null]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon"],["evaluate-agent",[27,"t",["fd.admin.quality-management"],null],"quality_management"]],{"statements":[[4,"if",[[23,["refresh"]]],null,{"statements":[[0,"                  "],[1,[27,"module-tickets/ticket-details/widgets/evaluations",null,[["ticket","scores","getEvaluations","openSlider"],[[23,["ticket"]],[23,["scores"]],[23,["getEvaluations"]],[27,"action",[[22,0,[]],"toggleOpenEvaluate"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["showThpAppsNudge"]]],null,{"statements":[[4,"component",[[22,4,["addWidget"]]],[["widgetId","label","icon","minimized"],["thp-apps-nudge","apps","new-admin-apps",false]],{"statements":[[0,"                "],[1,[21,"module-tickets/ticket-details/widgets/thp-apps-nudge"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[3,[23,["ticket","id"]],"ticketIntegrationApps",false]],{"statements":[[4,"component",[[22,7,["render-content"]]],null,{"statements":[[4,"each",[[23,["installedApps"]]],null,{"statements":[[4,"if",[[27,"and",[[27,"is-falcon-ready",[[22,8,["name"]]],null],[27,"view-integ-apps",[[22,8,["displayOption"]],[23,["integAppViewOption"]]],null]],null]],null,{"statements":[[0,"                    "],[1,[27,"integration-apps",null,[["appDetails","requester","ticket","sideBar"],[[22,8,[]],[23,["ticket","requester"]],[23,["ticket"]],[22,4,[]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[8]},null]],"parameters":[]},null]],"parameters":[7]},null],[0,"\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[3,[23,["ticket","id"]],"ticketSideBarApps",false]],{"statements":[[4,"component",[[22,6,["render-content"]]],null,{"statements":[[0,"                "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","sideBar","context","pageType"],["ticket_sidebar",[22,4,[]],[23,["ticket","id"]],"ticket"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[6]},null]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[5]},null]],"parameters":[4]},null]],"parameters":[]},null],[4,"if",[[23,["ticketDetailsSlider","hasSliders"]]],null,{"statements":[[4,"module-tickets/ticket-details/inline-slider",null,[["ticketDetailsSlider","threadsCount","updateQueryParam","queryParams"],[[23,["ticketDetailsSlider"]],[23,["threadsCount"]],[23,["updateQueryParam"]],[23,["queryParams"]]]],{"statements":[[0,"      "],[1,[27,"component",[[22,3,["workflows"]]],[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n      "],[1,[27,"component",[[22,3,["searchSolutions"]]],[["ticket","isTicketDetail","solutionArticleSuggest","addLink","addContent","showLanguage","displayPopUp"],[[23,["ticket"]],[23,["isTicketDetail"]],[23,["solutionArticleSuggest","solutionArticles"]],[27,"action",[[22,0,[]],"insertSolutionArticle",true],null],[27,"action",[[22,0,[]],"insertSolutionArticle",false],null],true,[23,["displayPopUp"]]]]],false],[0,"\\n\\n      "],[1,[27,"component",[[22,3,["cannedResponse"]]],[["ticket","isTicketDetail","cannedResponseSuggest","insertCannedResponse","showTip"],[[23,["ticket"]],[23,["isTicketDetail"]],[23,["cannedResponseSuggest","cannedResponse"]],[27,"action",[[22,0,[]],"insertCannedResponse"],null],true]]],false],[0,"\\n      "],[1,[27,"component",[[22,3,["evaluations"]]],[["scoreId","agentId","ticketId","ticket","scores"],[[23,["currentScore","id"]],[23,["ticket","responderId"]],[23,["ticket","id"]],[23,["ticket"]],[23,["scores"]]]]],false],[0,"\\n"]],"parameters":[3]},null]],"parameters":[]},null]],"parameters":[2]},null],[0,"\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[1,[23,["ticket","id"]],"renderTicketmodals",false]],{"statements":[[4,"component",[[22,1,["render-content"]]],null,{"statements":[[0,"    "],[15,"application/ticket-details/show-scenerios",[1]],[0,"\\n"],[0,"    "],[15,"application/ticket-details/add-time",[1]],[0,"\\n"],[0,"    "],[15,"application/ticket-details/requester-widget",[1]],[0,"\\n"],[4,"nucleus-confirm-dialog",null,[["title","open","isDismissible","size","onSubmit","onClose","submitTitle"],[[27,"t",["tickets.action.split_ticket"],null],[23,["displaySplitTicket"]],true,"medium",[27,"action",[[22,0,[]],"splitTicket"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["displaySplitTicket"]]],null]],null],[27,"t",["tickets.action.split"],null]]],{"statements":[[0,"      "],[1,[27,"t",["confirmations.split_ticket"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showDiscardDraftPopup"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","cancelLabel","save","close"],[[27,"t",["confirmations.discard_draft.title"],null],[27,"t",["fd.yes"],null],[27,"t",["fd.no"],null],[27,"action",[[22,0,[]],"confirmDiscardDraft"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["showDiscardDraftPopup"]]],null]],null]]],{"statements":[[0,"        "],[1,[27,"t",["confirmations.discard_draft"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["displayDeleteTicket"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close"],[[27,"t",["ticket.actions.delete.confirmation.title"],null],[27,"t",["ticket.actions.delete.confirmation.savelabel"],null],[27,"action",[[22,0,[]],"delete",[23,["ticket"]]],null],[27,"action",[[22,0,[]],"deleteTicketConfirmationToggle"],null]]],{"statements":[[0,"        "],[1,[27,"t",["ticket.actions.delete.confirmation.message"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n\\n"],[4,"if",[[23,["displayEditTicket"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","outSideClick","closeOnEscapse","showModalClose"],[[27,"action",[[22,0,[]],"closeOverlay"],null],[27,"action",[[22,0,[]],"outSideClick"],null],false,true]],{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-content"],[11,"id","edit-ticket-page"],[9],[0,"\\n          "],[1,[27,"module-tickets/ticket-form",null,[["data","close","showCcField","allowContactCreate","editTicket","refreshAction"],[[23,["editTicketData"]],[27,"action",[[22,0,[]],"closeOverlay"],null],false,true,true,[23,["refreshAction"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showFailureDetails"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-details/email-failure",null,[["ticket","toggleEmailFailure","showAction","failedEmailsPromise"],[[23,["ticket"]],[27,"action",[[22,0,[]],"toggleEmailFailure"],null],[27,"action",[[22,0,[]],"showAction"],null],[23,["failedEmailsPromise"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showAttachmentRequired"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["cancelDataTestId","confirmDataTestId","title","saveLabel","cancelLabel","save","close"],["attachment-reminder-cancel","attachment-reminder-confirm",[27,"t",["ticket.details.attachment.title"],null],[27,"t",["ticket.details.attachment.confirm"],null],[27,"t",["ticket.details.attachment.cancel"],null],[27,"action",[[22,0,[]],"closeConfirmDialog"],null],[27,"action",[[22,0,[]],"closeConfirmDialogCancel"],null]]],{"statements":[[0,"        "],[1,[27,"html-safe",[[27,"t",["ticket.details.attachment.content"],[["intents"],[[23,["positiveIntents"]]]]]],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[1,[27,"app-components/inline-manual-triggers",null,[["imTriggerClass"],["ticket-details-im"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[0,"\\n"],[4,"if",[[23,["popUpDisplayed"]]],null,{"statements":[[0,"  "],[1,[27,"ui-components/fresh-tips",null,[["data-test-id","id","icon","title","body","primaryText","tipsPrimary","tipSuccess","secondaryText","tipsSecondary","position","exitPosition"],["pop-up","insert-solutions-popup","freshtips-bulb",[27,"t",["fd.help-widget.pop-up.title"],null],[27,"t",["fd.help-widget.pop-up.body"],null],[27,"t",["fd.help-widget.pop-up.primaryText"],null],[27,"action",[[22,0,[]],"tipsPrimary"],null],[23,["popUpDisplayed"]],[27,"t",["fd.help-widget.pop-up.secondaryText"],null],[27,"action",[[22,0,[]],"hidePopUp"],null],"bottom-right","exit-bottom-right"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":true}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/broadcast/component",["exports","freshdesk/mixins/tickets/ticket-action"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{showSubmit:Ember.computed.reads("ticket.notActionable"),relatedTicketsCount:Ember.computed.reads("ticket.associatedTicketsCount"),bodyText:Ember.computed.reads("noteModel.body"),hasBodyText:Ember.computed.bool("bodyText.length"),hasAttachments:Ember.computed.notEmpty("noteModel.attachment_ids"),enableBrodcast:Ember.computed.or("hasAttachments","hasBodyText"),scrollToAttachment:Ember.computed.not("currentUser.latestNotesFirst"),noteModel:Ember.computed((function(){return Ember.Object.create()})),actions:{discardConversation:function(){this.sendAction("discardConversation")},sendBroadcast:function(){var e=Ember.get(this,"noteModel"),t=[];return t.push(this._sendConversation(e)),Ember.RSVP.Promise.all(t.compact())},contentChanged:function(e){Ember.set(this,"noteModel.body",e)},toggleSolutionArticleSlider:function(){Ember.get(this,"toggleSolutionArticleSlider")()},toggleCannedResponseSlider:function(){Ember.get(this,"toggleCannedResponseSlider")()}},_sendConversation:function(e){return Ember.get(this,"ticket.inlineAttachmentIds")&&Ember.set(e,"inline_attachment_ids",Ember.get(this,"ticket.inlineAttachmentIds")),Ember.get(this,"sendConversation")(e)}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/broadcast/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"TXZT7VV/",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields ticket-action__header"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","ticket","onChange"],["broadcast",[23,["ticket"]],[27,"action",[[22,0,[]],"onChange"],null]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__notetype"],[9],[0,"\\n      "],[7,"span"],[11,"class","text--small muted"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.related_list.label"],[["count"],[[23,["relatedTicketsCount"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-action__editor"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["placeholder","value","ticket","showCannedResponse","showSolution","showAttachments","contentChanged","isLoading","showFooter","autofocus","fixedHeight","source","scrollToAttachment","model","wrapDefaultFont","fixedFormattingToolbar","toggleSolutionArticleSlider","solutionArticleSuggest","isTicketDetail","bodyTextForInsert","cannedResponseSuggest","toggleCannedResponseSlider"],["",[23,["bodyText"]],[23,["ticket"]],true,true,false,[27,"action",[[22,0,[]],"contentChanged"],null],[23,["isLoading"]],true,true,332,"broadcast",[23,["scrollToAttachment"]],[23,["ticket"]],true,true,[27,"action",[[22,0,[]],"toggleSolutionArticleSlider"],null],[23,["solutionArticleSuggest"]],[23,["isTicketDetail"]],[23,["bodyTextForInsert"]],[23,["cannedResponseSuggest"]],[27,"action",[[22,0,[]],"toggleCannedResponseSlider"],null]]],{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n        "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn btn--secondary vertical-align"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","label","pendingLabel","disableSubmit","onSend","ticket"],[false,[27,"t",["tickets.action.broadcast"],null],[27,"t",["tickets.action.broadcasting"],null],[27,"not",[[23,["enableBrodcast"]]],null],[27,"action",[[22,0,[]],"sendBroadcast"],null],[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/broadcast/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/ecommerce-reply/component",["exports","freshdesk/utils/object-filter","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/tickets/editor-attachment","freshdesk/mixins/shortcuts/ticket-details/ticket-editor"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend(s.default,i.default,n.default,{quickReply:!1,showAttachmentBtn:!0,bodyText:Ember.computed.alias("replyModel.body"),hasBodyText:Ember.computed.bool("bodyText.length"),replyModel:Ember.computed((function(){var e=Ember.get(this,"currentUser.id");return Ember.Object.create({agent_id:e,body:null,articles_suggested:[]})})),actions:{discardConversation:function(){this.sendAction("discardConversation")},onInsertAttachment:function(e){this._onInsertAttachment(e)},sendConversation:function(e){var s=Ember.get(this,"replyModel"),n=(0,t.default)(s,["agent_id","body","attachment_ids","articles_suggested"]);return this._sendConversation(n,e)}},_onInsertAttachment:function(e){Ember.get(this,"replyModel")&&Ember.set(this,"replyModel.attachment_ids",e)},_sendConversation:function(e,t){return Ember.get(this,"sendConversation")(e,t)}});e.default=a})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/ecommerce-reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"DPbkPAf5",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","ticket","onChange","quickReply"],["reply",[23,["ticket"]],[27,"action",[[22,0,[]],"onChange"],null],[23,["quickReply"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__ecommerce"],[9],[0,"\\n      "],[1,[27,"svg-jar",["ecommerce"],[["class"],["app-icon--small app-icon--topalign"]]],false],[0,"\\n      "],[7,"span"],[9],[1,[23,["ticket","ebayAccountName"]],false],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-action__fields"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field text__infotext ticket-action__label mt-2"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__email ticket-action__requester"],[9],[1,[23,["ticket","requesterName"]],false],[10],[0,"\\n  "],[10],[0,"\\n  "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n"],[4,"ui-form/editor/social-editor",null,[["value","ticket","showAttachmentBtn","onInsertAttachment","onRemoveAttachment","updateArticlesSuggested","solutionArticleSuggest","cannedResponseSuggest"],[[23,["bodyText"]],[23,["ticket"]],[23,["showAttachmentBtn"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[27,"action",[[22,0,[]],"updateArticlesSuggested"],null],[23,["solutionArticleSuggest"]],[23,["cannedResponseSuggest"]]]],{"statements":[[0,"    "],[7,"div"],[9],[0,"\\n      "],[7,"button"],[11,"data-test-id","discard-draft-ecommerce"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn discard-draft app-icon-btn"],[9],[0,"\\n        "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","reply-btn"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","disableSubmit","onSend","ticket"],[[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["hasBodyText"]]],null],[27,"action",[[22,0,[]],"sendConversation"],null],[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/ecommerce-reply/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/facebook-reply/component",["exports","freshdesk/utils/object-filter","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/shortcuts/ticket-details/ticket-editor","freshdesk/constants/ticket","freshdesk/mixins/tickets/editor-attachment"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=["trafficCop"],l=Ember.Component.extend(s.default,n.default,a.default,{quickReply:!1,bodyText:Ember.computed.alias("replyModel.body"),hasBodyText:Ember.computed.bool("bodyText.length"),attachments:Ember.computed.alias("replyModel.attachment_ids"),fbMessageType:Ember.computed.alias("ticket.fbPost.msg_type"),replyToText:Ember.computed("ticket.requesterName",(function(){return Ember.get(this,"conversation")?"fd.omnichannel-reply.facebook.replying.to.comment":"dm"===Ember.get(this,"selectedMessageType")?"fd.omnichannel-reply.facebook.replying.to.dm":"fd.omnichannel-reply.facebook.replying.to.post"})),replyModel:Ember.computed((function(){var e=Ember.get(this.currentUser,"id"),t=Ember.get(this,"fbMessageType");return Ember.Object.create({agent_id:e,body:null,attachment_ids:[],msg_type:t,articles_suggested:[]})})),hasAttachment:Ember.computed.bool("attachments.length"),selectedMessageType:Ember.computed((function(){return"dm"===Ember.get(this,"fbMessageType")?"dm":"post"})),attachmentConfig:Ember.computed((function(){return"dm"===Ember.get(this,"selectedMessageType")?i.default.facebook.dm.attachment:i.default.facebook.post.attachment})),canShowSurveys:Ember.computed("selectedMessageType",(function(){return"dm"===Ember.get(this,"selectedMessageType")})),requesterName:Ember.computed("ticket.requesterName","conversation.user",(function(){return Ember.get(this,"conversation")?Ember.get(this,"conversation.user.name"):Ember.get(this,"ticket.requesterName")})),willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"showOmniChannelReply")&&Ember.get(this,"removeError")(r)},actions:{updateSurveyMonkey:function(e){Ember.set(this,"replyModel.include_surveymonkey_link",Number(e))},discardConversation:function(){this.sendAction("discardConversation")},sendConversation:function(e){var s=this,n=[],i=Ember.get(this,"replyModel"),a=["agent_id","note_id","send_survey","include_surveymonkey_link","msg_type"];if("dm"==Ember.get(this,"selectedMessageType"))Ember.get(this,"hasBodyText")&&n.push((0,t.default)(i,[].concat(a,["body","articles_suggested"]))),Ember.get(this,"hasAttachment")&&n.push((0,t.default)(i,[].concat(a,["attachment_ids"])));else if("post"==Ember.get(this,"selectedMessageType")){var r=[];Ember.get(this,"hasBodyText")&&(r.push("body"),r.push("articles_suggested")),Ember.get(this,"hasAttachment")&&r.push("attachment_ids"),n.push((0,t.default)(i,[].concat(a,r)))}var l=[],o=0;return l.push(this._sendConversation(n[o],e)),l[o].then((function(){return o++,null!=n[o]&&l.push(s._sendConversation(n[o],e)),Ember.RSVP.Promise.all(l.compact())}))},onInsertAttachment:function(e){this._onInsertAttachment(e)}},_sendConversation:function(e,t){return Ember.get(this,"sendConversation")(e,t)},_onInsertAttachment:function(e){Ember.get(this,"replyModel")&&Ember.set(this,"replyModel.attachment_ids",e)}});e.default=l})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/facebook-reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"c4XAzxwS",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[11,"data-test-id","facebook-reply"],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields facebook-reply"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["size","user"],["small",[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__email ticket-action__requester mt-5"],[9],[0,"\\n      "],[1,[27,"svg-jar",["facebook"],[["class"],["app-icon--normal app-icon--topalign fb-icon float-left"]]],false],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field text__infotext ticket-action__label pl-6 mt-2"],[9],[0,"\\n        "],[7,"div"],[9],[0,"\\n          "],[1,[27,"html-safe",[[27,"t",[[23,["replyToText"]]],[["requesterName"],[[27,"ellipsis-text",[[23,["requesterName"]],15],null]]]]],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__fbpagename mt-6"],[9],[0,"\\n      "],[7,"div"],[9],[0,"\\n        "],[7,"span"],[11,"class","pr-8 social-editor-fb-from"],[9],[1,[27,"t",["fd.from"],null],false],[0," :"],[10],[0,"\\n        "],[7,"span"],[11,"class","fb-pagename"],[9],[1,[27,"ellipsis-text",[[23,["ticket","facebookPageName"]],15],null],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n"],[4,"ui-form/editor/social-editor",null,[["value","ticket","showAttachmentBtn","attachmentConfig","onInsertAttachment","onRemoveAttachment","sourceType","messageType","installedApps","canShowSurveys","updateSurveyMonkey","cannedResponseSuggest","updateArticlesSuggested","solutionArticleSuggest"],[[23,["bodyText"]],[23,["ticket"]],true,[23,["attachmentConfig"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],"facebook",[23,["fbMessageType"]],[23,["installedApps"]],[23,["canShowSurveys"]],[27,"action",[[22,0,[]],"updateSurveyMonkey"],null],[23,["cannedResponseSuggest"]],[27,"action",[[22,0,[]],"updateArticlesSuggested"],null],[23,["solutionArticleSuggest"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","reply-btn-wrapper"],[9],[0,"\\n      "],[7,"button"],[11,"data-test-id","discard-draft-facebook"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn discard-draft app-icon-btn"],[9],[0,"\\n        "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","reply-btn"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["buttonClass","canSetStatus","disableSubmit","onSend"],["btn--facebook",[27,"not",[[23,["quickReply"]]],null],[27,"and",[[27,"not",[[23,["hasBodyText"]]],null],[27,"not",[[23,["hasAttachment"]]],null]],null],[27,"action",[[22,0,[]],"sendConversation"],null]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/facebook-reply/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/forward/component",["exports","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/check-model-modified","freshdesk/mixins/tickets/collapsible-email","freshdesk/utils/object-filter","freshdesk/mixins/tickets/editor-attachment","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/shortcuts/ticket-details/ticket-editor","freshdesk/mixins/slash-commands/config","freshdesk/utils/delete-keys-from-object","@freshdesk/tickets/utils/normalized-quoted-data"],(function(e,t,s,n,i,a,r,l,o,c,d,m){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=Ember.Component.extend(t.default,s.default,i.default,r.default,l.default,n.default,o.default,c.default,{marketplace:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),marketplaceAdapter:Ember.inject.service(),navigationAlert:Ember.inject.service("navigation-alert"),eventSources:Ember.inject.service(),showCc:!1,showBcc:!1,displayLength:null,quotedData:null,maxCount:50,isSlashCommandShown:!1,isFocusCc:!1,isFocusBcc:!1,fromModified:!1,textForAction:"tickets.action.forward",textForActionPending:"tickets.action.forwarding",conversationType:"forward",hasAttachments:Ember.computed.notEmpty("forwardModel.attachment_ids"),enableForward:Ember.computed.or("hasBodyText","hasAttachments"),bodyText:Ember.computed.reads("forwardModel.body"),attachmentValue:Ember.computed.reads("forwardModel.attachments"),hasBodyText:Ember.computed.bool("bodyText.length"),hasToEmails:Ember.computed.bool("forwardModel.to_emails.length"),autofocusEditor:Ember.computed.bool("selectedTo.length"),autofocusEmail:Ember.computed.not("autofocusEditor"),showCcField:Ember.computed.or("showCc","hasCc"),showBccField:Ember.computed.or("showBcc","hasBcc"),selectedCcEmails:Ember.computed.mapBy("filteredCcEmail","email"),selectedBccEmails:Ember.computed.mapBy("filteredBccEmail","email"),selectedToEmails:Ember.computed.mapBy("filteredToEmail","email"),deleteQuotedText:Ember.computed.readOnly("mkpInterface.controlData.deleteQuotedText.click"),mkpAttachmentHidden:Ember.computed("mkpInterface.controlData.ticketAttachments.hide","marketplaceAdapter.controlData.ticketAttachments.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketAttachments.hide"):Ember.get(this,"mkpInterface.controlData.ticketAttachments.hide")})),showSubmit:Ember.computed.reads("ticket.notActionable"),showCollapsedEmail:Ember.computed.bool("selectedTo.length"),enableBtnAction:Ember.computed.and("enableForward","hasToEmails"),cloudAttachments:Ember.computed.alias("forwardedCloudFiles"),scrollToAttachment:Ember.computed.not("currentUser.latestNotesFirst"),forwardModel:Ember.computed("model.content","mkpInterface.controlData.{cc.value,bcc.value,to.value}","mkpFromEmail",(function(){var e=Ember.get(this,"model.content");if(!e)return e;var t=Ember.get(this,"mkpFromEmail.replyEmail")||Ember.get(this,"mkpFromEmail.reply_email");t&&!this.fromModified&&Ember.set(e,"from_email",t);var s=Ember.get(this,"mkpInterface.controlData.bcc.value");if(s){var n=s.map((function(e){return Ember.get(e,"email")}));e.bcc_emails=n}var i=Ember.get(this,"mkpInterface.controlData.cc.value");if(i){var a=i.map((function(e){return Ember.get(e,"email")}));e.cc_emails=a}var r=Ember.get(this,"mkpInterface.controlData.to.value");if(r){var l=r.map((function(e){return Ember.get(e,"email")}));e.to_emails=l}return e})),quotedText:Ember.computed("forwardModel.quoted_text","deleteQuotedText",(function(){if(!Ember.get(this,"deleteQuotedText"))return Ember.get(this,"forwardModel.quoted_text")})),forwardQuotedData:Ember.computed("quotedData","forwardModel.{quoted_text,body}",(function(){var e=Ember.getProperties(this,"quotedText","quotedData","conversationType"),t=e.quotedText,s=e.quotedData,n=e.conversationType;return(0,m.default)(t,Ember.get(this,"forwardModel.body"),s,n)})),forwardedCloudFiles:Ember.computed.map("forwardModel.cloud_files",(function(e){var t={};return this.cloudFileAttrs.forEach((function(s){return t[s]=e[s.decamelize()]})),this.store.createRecord("cloudFile",t)})),isLoading:Ember.computed("model.isPending",(function(){var e=this.model,t=Ember.get(e,"isPending");return!t&&this.navAlertFeatureOn&&this.initNavAlertRelatedAttrsInComponent(Ember.get(e,"content")),t})),filteredCcEmail:Ember.computed("selectedCc.[]",(function(){var e=Ember.get(this,"selectedCc");return this.getValidEmail(e)})),filteredBccEmail:Ember.computed("selectedBcc.[]",(function(){var e=this.selectedBcc;return this.getValidEmail(e)})),filteredToEmail:Ember.computed("selectedTo.[]",(function(){var e=this.selectedTo;return this.getValidEmail(e)})),selectedCc:Ember.computed("model.isPending","mkpInterface.controlData.cc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.cc.value");return e||[]},set:function(e,t){return t}}),_selectedBcc:Ember.computed.map("forwardModel.bcc_emails",(function(e){return{email:e,details:e}})),selectedBcc:Ember.computed("model.isPending","mkpInterface.controlData.bcc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.bcc.value");return e||this._selectedBcc},set:function(e,t){return t}}),selectedTo:Ember.computed("model.isPending","mkpInterface.controlData.to.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.to.value");return e&&this.forwardModel?e:[]},set:function(e,t){return t}}),hasCc:Ember.computed("selectedCc",(function(){return Boolean(Ember.get(this,"selectedCc.length"))})),hasBcc:Ember.computed("selectedBcc",(function(){return Boolean(Ember.get(this,"selectedBcc.length"))})),init:function(){this._super.apply(this,arguments),this.marketplace.on("fromUpdated",this.fromUpdated.bind(this)),this.marketplace.on("activeEmailConfigUpdated",this.activeEmailConfigUpdated.bind(this)),this.activeEmailConfigTask.perform()},willDestroyElement:function(){this._super.apply(this,arguments),this.marketplace.off("activeEmailConfigUpdated"),this.marketplace.off("fromUpdated")},actions:{contentChanged:function(e,t){Ember.set(this,"forwardModel.body",e),this.navAlertFeatureOn&&this.setNavAlertOnChange(this.forwardModel,t)},toggleSolutionArticleSlider:function(){Ember.get(this,"toggleSolutionArticleSlider")()},toggleCannedResponseSlider:function(){Ember.get(this,"toggleCannedResponseSlider")()},discard:function(){this.clearAttachments(),this.discardConversation()},sendConversation:function(e){var t=this;if(this.checkMinToError())return new Ember.RSVP.Promise((function(e){e({error:!0})}));var s=this.forwardModel;Ember.get(this,"mkpAttachmentHidden")&&Ember.set(s,"attachment_ids",[]),Ember.setProperties(s,{cc_emails:this.selectedCcEmails,bcc_emails:this.selectedBccEmails});this.setCloudFiles(s);var n=(0,a.default)(s,["body","full_text","include_quoted_text","include_original_attachments","attachment_ids","cloud_files","from_email","to_emails","cc_emails","bcc_emails"]);if(n.include_original_attachments=!1,!n.from_email){var i=Ember.get(this,"defaultFromEmail.replyEmail");n.from_email=i}n.body=Ember.get(this,"forwardQuotedData.bodyText"),Ember.get(this,"forwardQuotedData.quoteRemoved")?n.include_quoted_text=!1:n.full_text=Ember.get(this,"forwardQuotedData.fullText");this.events.publish("submitForward",{eventName:"submitForward"}),this.clearAttachments();var r=Object.assign({},n);r=(0,d.default)(r,["include_surveymonkey_link","send_survey","cloud_files"]);var l=[];return l.push(this.marketplace.publishEvent({event:"ticket.forward",data:r}).then((function(){return t._sendConversation(n,e)})).catch((function(e){return t._mkpPublishEventError(e)}))),Ember.RSVP.Promise.all(l.compact())},discardConversation:function(){this.isSlashCommandShown||this.send("checkAndProceedToDiscard")},onSubmitConversation:function(e){document.getElementById("send-and-set").disabled||(this.send("sendConversation"),this.disableEditor())},onInsertAttachment:function(e){Ember.get(this,"model.then")&&this.model.then(this._onInsertAttachment.bind(this,e))},clearCc:function(){Ember.set(this,"forwardModel.cc_emails",[]),Ember.set(this,"showCc",!1),Ember.set(this,"selectedCc",[]),Ember.set(this,"mkpInterface.controlData.cc.value",[])},clearBcc:function(){Ember.set(this,"forwardModel.bcc_emails",[]),Ember.set(this,"showBcc",!1),Ember.set(this,"selectedBcc",[]),Ember.set(this,"mkpInterface.controlData.bcc.value",[])},togglecc:function(){Ember.setProperties(this,{showCc:!0,isFocusCc:!0})},togglebcc:function(){Ember.set(this,"showBcc",!0),Ember.set(this,"isFocusBcc",!0)},onEditorFocus:function(){var e=this.selectedToEmails;Ember.isEmpty(e)?Ember.set(this,"showCollapsedEmail",!1):Ember.set(this,"showCollapsedEmail",!0)},onClickCollapsedEmail:function(){Ember.set(this,"showCollapsedEmail",!1)},onChange:function(e){this.clearAttachments(),this.sendAction("changeAction",e.id)},onChangeFrom:function(e){var t=Ember.get(e,"replyEmail")||Ember.get(e,"reply_email");Ember.setProperties(this,{fromEmail:e,fromModified:!0,"forwardModel.from_email":t})},onChangeTo:function(e){Ember.set(this,"selectedTo",e);var t=this.selectedToEmails;Ember.set(this,"forwardModel.to_emails",t),Ember.set(this,"showCollapsedEmail",!1),this.checkMaxEmailError()},onChangeCc:function(e){Ember.set(this,"selectedCc",e);var t=this.selectedCcEmails;Ember.set(this,"forwardModel.cc_emails",t),this.checkMaxEmailError()},onChangeBcc:function(e){Ember.set(this,"selectedBcc",e);var t=this.selectedBccEmails;Ember.set(this,"forwardModel.bcc_emails",t),this.checkMaxEmailError()},getQuoted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ember.set(this,"quotedData",e)}},willDestroy:function(){this._super.apply(this,arguments),this.marketplace.off("fromUpdated")},checkMinToError:function(){return 0===Ember.get(this,"selectedTo.length")?(this.sendAction("showError","minToError"),!0):(this.sendAction("removeError","minToError"),!1)},checkMaxEmailError:function(){var e=Ember.get(this,"selectedTo.length"),t=Ember.get(this,"selectedCc.length"),s=Ember.get(this,"selectedBcc.length"),n=this.maxCount;e>n||t>n||s>n?this.sendAction("showError","maxEmail"):this.sendAction("removeError","maxEmail")},getValidEmail:function(e){var t=this.maxCount;return e.slice(0,t).filter((function(e){return void 0===e.valid||!0===e.valid}))},_sendConversation:function(e,t){return this.clearCloudAttachments(),this.navigationAlert.resetAllValuesForComponent(this.navigationObjectId),this.sendConversation(e,t)},_mkpPublishEventError:function(e){return this.eventSources.errorHandler("marketplace.errors.tickets.forward",e)},_onInsertAttachment:function(e){this.forwardModel&&Ember.set(this,"forwardModel.attachment_ids",e)}});e.default=u})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/forward/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"v69MOTrO",block:'{"symbols":["option","email","option","email","option","email"],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[9],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-action__fields ticket-action__header"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","isContentChanged","navigationObjectId","ticket","onChange"],[[23,["conversationType"]],[23,["isContentChanged"]],[23,["navigationObjectId"]],[23,["ticket"]],[27,"action",[[22,0,[]],"onChange"],null]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[12,"class",[28,["ticket-action__field ticket-action__from ",[27,"if",[[23,["mkpInterface","controlData","from","hide"]],"hide"],null]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__label text__infotext"],[9],[1,[27,"t",["fd.from"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__email ticket-action__from-email ellipsis"],[9],[0,"\\n"],[4,"if",[[23,["emailConfigLoaded"]]],null,{"statements":[[4,"if",[[27,"gt",[[23,["customGlobalEmailConfig","length"]],1],null]],null,{"statements":[[0,"            "],[1,[27,"app-components/from-email",null,[["disabled","isEditor","fromOptions","selectedEmailConfig","onchange"],[[23,["mkpInterface","controlData","from","disable"]],true,[23,["customGlobalEmailConfig"]],[23,["filteredSelectedEmail"]],[27,"action",[[22,0,[]],"onChangeFrom"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__fromemail"],[9],[0,"\\n              "],[7,"span"],[11,"class","from-email-name"],[9],[1,[27,"if",[[23,["showAgent"]],[23,["agentName"]],[23,["customGlobalEmailConfig","firstObject","name"]]],null],false],[10],[0,"\\n              "],[7,"span"],[11,"class","from-email"],[9],[0,"("],[1,[23,["customGlobalEmailConfig","firstObject","replyEmail"]],false],[0,")"],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"ui-components/toggle-view",null,[["showDefault"],[false]],{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["ticket-action__email--collapsed ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","to","hide"]],"hide"],null]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__email mt-4"],[11,"id","collapsed-email"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/collapsed-email",null,[["onClick","wrapperId","displayLength","cc","bcc","to"],[[27,"action",[[22,0,[]],"onClickCollapsedEmail"],null],"ticket-action",[23,["displayLength"]],[23,["selectedCcEmails"]],[23,["selectedBccEmails"]],[23,["selectedToEmails"]]]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__copyemail"],[12,"onclick",[27,"action",[[22,0,[]],"onClickCollapsedEmail"],null]],[9],[0,"\\n        "],[7,"span"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]],[9],[0,"\\n          "],[7,"span"],[11,"class","cc-count"],[9],[4,"if",[[23,["selectedCc","length"]]],null,{"statements":[[1,[23,["selectedCc","length"]],false]],"parameters":[]},null],[10],[0,"\\n          "],[1,[27,"t",["fd.cc"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"span"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]],[9],[0,"\\n          "],[7,"span"],[11,"class","bcc-count"],[9],[4,"if",[[23,["selectedBcc","length"]]],null,{"statements":[[1,[23,["selectedBcc","length"]],false]],"parameters":[]},null],[10],[0,"\\n          "],[1,[27,"t",["fd.bcc"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","to","hide"]],"hide"],null]]]],[11,"data-test-forward-to",""],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","to","disable"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedTo"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","display__email"],[9],[1,[22,6,["details"]],false],[10],[0,"\\n"]],"parameters":[6]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-form/remote-select-field",null,[["selected","tabindex","customFdLabel","onchange","multiple","maxcount","isSelectOnTab","allowCreate","autofocus","autoFocusDelay","url"],[[23,["selectedTo"]],"1",[27,"t",["fd.to"],null],[27,"action",[[22,0,[]],"onChangeTo"],null],true,[23,["maxCount"]],true,true,[23,["autofocusEmail"]],200,"/search/autocomplete/requesters"]],{"statements":[[0,"            "],[1,[22,5,["details"]],false],[0,"\\n"]],"parameters":[5]},null]],"parameters":[]}],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__fwdcopyemail"],[9],[0,"\\n"],[4,"if",[[27,"not",[[23,["showCcField"]]],null]],null,{"statements":[[0,"          "],[7,"span"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]],[11,"data-test-cc-btn",""],[12,"onclick",[27,"action",[[22,0,[]],"togglecc"],null]],[9],[0,"\\n            "],[1,[27,"t",["fd.cc"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"not",[[23,["showBccField"]]],null]],null,{"statements":[[0,"          "],[7,"span"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]],[11,"data-test-bcc-btn",""],[12,"onclick",[27,"action",[[22,0,[]],"togglebcc"],null]],[9],[0,"\\n            "],[1,[27,"t",["fd.bcc"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"if",[[27,"or",[[23,["showCcField"]],[23,["showBccField"]]],null]],null,{"statements":[[4,"if",[[23,["showCcField"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]]]],[11,"data-test-cc",""],[9],[0,"\\n          "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["fd.cc"],null],false],[0,": "],[10],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","cc","disable"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n              "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedCc"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","display__email"],[9],[1,[22,4,["details"]],false],[10],[0,"\\n"]],"parameters":[4]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"ui-form/remote-select-field",null,[["selected","tabindex","customFdLabel","onchange","multiple","allowCreate","isSelectOnTab","maxcount","autofocus","autoFocusDelay","url"],[[23,["selectedCc"]],"1",[27,"t",["fd.cc"],null],[27,"action",[[22,0,[]],"onChangeCc"],null],true,true,true,[23,["maxCount"]],[23,["isFocusCc"]],200,"/search/autocomplete/requesters"]],{"statements":[[0,"                "],[1,[22,3,["details"]],false],[0,"\\n"]],"parameters":[3]},null],[0,"            "],[10],[0,"\\n"],[4,"if",[[23,["selectedCc","length"]]],null,{"statements":[[0,"              "],[7,"div"],[12,"class",[28,["ticket-action__field ticket-action__clear ",[27,"if",[[23,["mkpInterface","controlData","cc","disable"]],"hide"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"clearCc"],null]],[9],[1,[27,"t",["fd.clearcc"],null],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showBccField"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]]]],[11,"data-test-bcc",""],[9],[0,"\\n          "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["fd.bcc"],null],false],[0,": "],[10],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","bcc","disable"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n              "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedBcc"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","display__email"],[9],[1,[22,2,["details"]],false],[10],[0,"\\n"]],"parameters":[2]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"ui-form/remote-select-field",null,[["selected","tabindex","customFdLabel","onchange","maxcount","isSelectOnTab","multiple","allowCreate","autofocus","autoFocusDelay","url"],[[23,["selectedBcc"]],"1",[27,"t",["fd.bcc"],null],[27,"action",[[22,0,[]],"onChangeBcc"],null],[23,["maxCount"]],true,true,true,[23,["isFocusBcc"]],200,"/search/autocomplete/requesters"]],{"statements":[[0,"                "],[1,[22,1,["details"]],false],[0,"\\n"]],"parameters":[1]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["selectedBcc","length"]]],null,{"statements":[[0,"            "],[7,"div"],[12,"class",[28,["ticket-action__field ticket-action__clear ",[27,"if",[[23,["mkpInterface","controlData","bcc","disable"]],"hide"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"clearBcc"],null]],[9],[1,[27,"t",["fd.clearbcc"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}],[0,"\\n  "],[7,"div"],[11,"class","ticket__editor-forward"],[11,"data-test-id","ticket-editor-forward"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["placeholder","value","shortcutenabled","ticket","onFocus","attachmentValue","cloudAttachments","onInsertAttachment","onRemoveAttachment","quotedText","showCannedResponse","showCannedResponseTip","showCannedForm","showSolution","contentChanged","isLoading","getQuoted","showFooter","autofocus","fixedHeight","source","scrollToAttachment","onSubmitConversation","onEscape","isSlashCommandShown","enableSlashCommands","isValidMkpPlaceholder","model","wrapDefaultFont","fixedFormattingToolbar","isTicketDetail","bodyTextForInsert","toggleSolutionArticleSlider","solutionArticleSuggest","cannedResponseSuggest","toggleCannedResponseSlider"],["",[23,["bodyText"]],[23,["enableBtnAction"]],[23,["ticket"]],[27,"action",[[22,0,[]],"onEditorFocus"],null],[23,["computedAttachments"]],[23,["cloudAttachments"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["quotedText"]],true,true,true,true,[27,"action",[[22,0,[]],"contentChanged"],null],[23,["isLoading"]],[27,"action",[[22,0,[]],"getQuoted"],null],true,false,332,"forward",[23,["scrollToAttachment"]],[27,"action",[[22,0,[]],"onSubmitConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[23,["isSlashCommandShown"]],true,true,[23,["model"]],true,true,[23,["isTicketDetail"]],[23,["bodyTextForInsert"]],[27,"action",[[22,0,[]],"toggleSolutionArticleSlider"],null],[23,["solutionArticleSuggest"]],[23,["cannedResponseSuggest"]],[27,"action",[[22,0,[]],"toggleCannedResponseSlider"],null]]],{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n        "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"checkAndProceedToDiscard"],null]],[11,"class","btn btn--secondary vertical-align"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","label","pendingLabel","disableSubmit","externalPending","onSend","ticket"],[[27,"eq",[[23,["conversationType"]],"forward"],null],[27,"t",[[23,["textForAction"]]],null],[27,"t",[[23,["textForActionPending"]]],null],[27,"or",[[27,"not",[[23,["enableBtnAction"]]],null],[23,["disableSubmitExternal"]]],null],[23,["disableSubmitExternal"]],[27,"action",[[22,0,[]],"sendConversation"],null],[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/forward/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/body-content/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["add-collaborator__modal-body"]});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/body-content/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"WC5pgYPH",block:'{"symbols":[],"statements":[[7,"p"],[9],[1,[27,"t",[[23,["description"]]],null],false],[10],[0,"\\n"],[7,"div"],[11,"class","element-flex align-items--center agent-info"],[9],[0,"\\n  "],[1,[27,"app-components/avatar-user",null,[["tagName","user","showVerified","size","inline","class"],["div",[23,["taggingEmail"]],false,"medium",true,"mr-6"]]],false],[0,"\\n  "],[7,"p"],[11,"class","text--medium mb-0 email"],[9],[1,[23,["taggingEmail","email"]],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/body-content/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/component",["exports","freshdesk/constants/application","@freshdesk/common/utils/error-handler","freshdesk/constants/ticket","freshdesk/constants/agent"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend({tagName:"",store:Ember.inject.service("store"),currentUser:Ember.inject.service("currentUser"),currentAccount:Ember.inject.service("current-account"),flashMessages:Ember.inject.service(),ajax:Ember.inject.service(),heap:Ember.inject.service(),showConvertContactToCollabModal:!1,contactId:null,actions:{addToFreshdesk:function(){var e=this.taggingEmail,t=e.email,s=e.name,a=this.currentAccount.portalData.language||this.currentAccount.language,r=this.currentAccount.timeZone;return this.store.createRecord("helpdesk-agent",{email:t,name:s,language:a,timeZone:r,occasional:!1,type:i.AGENT_TYPES.COLLABORATOR,ticketScope:n.default.agentScope.individual}).save().then(this._addCollaboratorSuccess.bind(this)).catch(this._addCollaboratorFailure.bind(this))},convertContact:function(){var e="".concat(t.default.apiNamespace,"/contacts/").concat(this.contactId,"/make_agent"),s={type:i.AGENT_TYPES.COLLABORATOR,occasional:!1};return this.ajax.put(e,{data:JSON.stringify(s)}).then(this._convertContactSuccess.bind(this)).catch(this._convertContactFailure.bind(this))}},_addCollaboratorSuccess:function(e){Ember.setProperties(e,{id:e.id,contact:{name:e.name,email:e.email,id:e.id}}),this.addNewCollaborator(e),Ember.set(this,"showAddCollaboratorModal",!1),this._pushAndAddItem(e),Ember.get(this,"heap").track(i.HEAP_CUSTOM_EVENTS.collabNewFromTagging),this.flashMessages.success(this.i18n.t("add_collaborator.success.message",{name:e.name.capitalize()}))},_addCollaboratorFailure:function(e){var t=this.i18n.t("contacts.agents.collaborator_agent");s.default.isErrorFieldMatch(e,"email")?Ember.setProperties(this,{showAddCollaboratorModal:!1,showConvertContactToCollabModal:!0,contactId:e.errors[0].additional_info.user_id}):s.default.throwMessageForKeys(this,e,"code",{agentType:t})},_convertContactSuccess:function(e){var t=e.data.agent,s=this.i18n.t("contacts.agents.collaborator_agent");t.contact={name:e.data.name,email:e.data.email,id:t.id},Ember.set(this,"showConvertContactToCollabModal",!1),this._pushAndAddItem(t),Ember.get(this,"heap").track(i.HEAP_CUSTOM_EVENTS.collabContactToAgentFromTagging),this.flashMessages.success(this.i18n.t("contacts.actions.convertagentsuccess",{agentType:s}))},_convertContactFailure:function(e){var t=this.i18n.t("contacts.agents.collaborator_agent"),n=this.i18n.t("contacts.agents.collaborator");s.default.throwMessageForKeys(this,e.payload,"code",{agentType:t,agent:n},"contact.make-agent.error")},_pushAndAddItem:function(e){this.store.pushPayload({agent:e}),this.atCommandsObj.addItemToSelected(e)}});e.default=a})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"fzeZgpIt",block:'{"symbols":[],"statements":[[4,"nucleus-confirm-dialog",null,[["size","onClose","onSubmit","open","submitTitle","title","data-test-id"],["medium",[27,"action",[[22,0,[]],[27,"toggle",["showAddCollaboratorModal",[22,0,[]]],null]],null],[27,"action",[[22,0,[]],"addToFreshdesk"],null],[23,["showAddCollaboratorModal"]],[27,"t",["add_collaborators.modal.btn.add_to_freshdesk"],null],[27,"t",["add_collaborator.modal.title"],null],"add-collaborator-modal"]],{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/ticket-actions/invite-collaborator/body-content",null,[["taggingEmail","description"],[[23,["taggingEmail"]],"add_collaborator.modal.description"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"nucleus-confirm-dialog",null,[["size","onClose","onSubmit","open","submitTitle","title","data-test-id"],["medium",[27,"action",[[22,0,[]],[27,"toggle",["showConvertContactToCollabModal",[22,0,[]]],null]],null],[27,"action",[[22,0,[]],"convertContact"],null],[23,["showConvertContactToCollabModal"]],[27,"t",["add_collaborator.contacts.submit.label"],null],[27,"t",["add_collaborator.contacts.modal.title"],null],"convert-contact-modal"]],{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/ticket-actions/invite-collaborator/body-content",null,[["taggingEmail","description"],[[23,["taggingEmail"]],"add_collaborator.contacts.modal.description"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/invite-collaborator/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/multi-email/component",["exports","freshdesk/utils/blank-array"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({ajax:Ember.inject.service(),value:null,selected:(0,t.default)(),selectedObserver:Ember.observer("selected.[]",(function(){var e=this.getAttr("requiredField"),t=Ember.get(this,"selected"),s=e?t.mapBy(e):t;return Ember.set(this,"value",s),s})),actions:{createOptions:function(e){var t={details:e,email:e};Ember.get(this,"selected").pushObject(t)},search:function(e){return Ember.get(this,"ajax").request("/search/autocomplete/requesters?q=".concat(e)).then(this._handleSearchResponse.bind(this))}},_handleSearchResponse:function(e){return e.results}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/multi-email/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"7Rzuu2mw",block:'{"symbols":["options","term"],"statements":[[4,"ui-form/select-field",null,[["options","allowCreate","selected","multiple","onchange","search","oncreate"],[[23,["options"]],true,[23,["selected"]],[23,["multiple"]],[27,"action",[[22,0,[]],[27,"mut",[[23,["selected"]]],null]],null],[27,"action",[[22,0,[]],"search"],null],[27,"action",[[22,0,[]],"createOptions"],null]]],{"statements":[[0,"  "],[1,[22,1,["details"]],false],[0,"\\n"]],"parameters":[1,2]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/multi-email/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/notes/component",["exports","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/check-model-modified","freshdesk/utils/object-filter","freshdesk/mixins/tickets/editor-attachment","freshdesk/mixins/marketplace/interface/ticket-actions-notes","freshdesk/utils/blank-array","freshdesk/utils/mention-agent","freshdesk/utils/blank-object","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/shortcuts/ticket-details/ticket-editor","freshdesk/mixins/slash-commands/config","ember-concurrency","@freshdesk/common/utils/error-handler"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=[{id:"public",label:"tickets.action.public",icon:"globe-fill",description:"tickets.action.public.subtext",translate:!0},{id:"private",label:"tickets.action.private",icon:"lock-fill",description:"tickets.action.private.subtext",translate:!0}],f=Ember.Component.extend(t.default,i.default,a.default,c.default,s.default,d.default,m.default,{currentUser:Ember.inject.service(),ticketFields:Ember.inject.service("ticket-fields"),marketplace:Ember.inject.service(),ajax:Ember.inject.service(),marketplaceAdapter:Ember.inject.service(),currentAccount:Ember.inject.service(),eventSources:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),navigationAlert:Ember.inject.service("navigation-alert"),i18n:Ember.inject.service(),notes:h,mkpToAddress:null,quickReply:!1,showAgentAccessDialog:!1,isAgentAccessDecisionMade:!1,recentStatus:null,isSlashCommandShown:!1,hasBodyText:Ember.computed.bool("bodyText.length"),isGetAccessRunning:Ember.computed.reads("getAgentAccess.isRunning"),hasAttachments:Ember.computed.notEmpty("noteModel.attachment_ids"),agents:Ember.computed.reads("ticketFields.agents"),isPrivateNote:Ember.computed.equal("noteType.id","private"),cloudAttachments:(0,r.default)(),restrictedAgentData:(0,r.default)(),scrollToAttachment:Ember.computed.not("currentUser.latestNotesFirst"),replyNote:Ember.computed.reads("mkpInterface.controlData.replyNote"),noteOptions:Ember.computed.reads("mkpInterface.controlData.replyNote.noteOptions"),rememberedAgent:(0,o.default)(),atCommandsObj:(0,o.default)(),editorInstance:null,provideTicketAccessSelected:!1,newCollaboratorsAtMention:(0,r.default)(),disableNote:Ember.computed("hasBodyText","hasAttachments","isGetAccessRunning","showAgentAccessDialog",(function(){return this.isGetAccessRunning||this.showAgentAccessDialog||!(this.hasBodyText||this.hasAttachments)})),mkpAttachmentHidden:Ember.computed("mkpInterface.controlData.ticketAttachments.hide","marketplaceAdapter.controlData.ticketAttachments.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketAttachments.hide"):Ember.get(this,"mkpInterface.controlData.ticketAttachments.hide")})),dropDownOptions:Ember.computed("noteOptions","isPublicNote",(function(){var e=Ember.get(this,"noteOptions");return Ember.get(this,"ticket.hasPermission")?e?Ember.get(this,"notes").filter((function(t){return e.includes(t.id)})):this.currentUserPrivileges.hasCreatePublicNotePrivilege?Ember.get(this,"notes"):(e=["public"],Ember.get(this,"notes").filter((function(t){return!e.includes(t.id)}))):Ember.get(this,"notes").filter((function(e){return e.id===h[1].id}))})),noteType:Ember.computed("isPublicNote","isDefaultTypePublic",(function(){var e=Ember.get(this,"isPublicNote"),t=Ember.get(this,"ticket.hasPermission");return void 0===e&&(e=Ember.get(this,"isDefaultTypePublic")),e&&t?h[0]:h[1]})),selectedNoteType:Ember.computed("isPublicNote",(function(){var e=Ember.get(this,"isPublicNote"),t=Ember.get(this,"ticket.hasPermission");return e&&t&&this.currentUserPrivileges.hasCreatePublicNotePrivilege?"public":"private"})),noteModel:Ember.computed((function(){var e=Ember.Object.create();return Ember.get(this,"navAlertFeatureOn")&&this.initNavAlertRelatedAttrsInComponent(),e})),noteTypeIcon:Ember.computed("noteType",(function(){return Ember.get(this,"noteType.icon")})),noteTypeDescription:Ember.computed("noteType",(function(){return Ember.get(this,"noteType.description")})),bodyText:Ember.computed("emailErrorNoteData","noteModel.body",(function(){var e=Ember.get(this,"noteModel.body");return e||(e=Ember.get(this,"emailErrorNoteData")),e})),selected:Ember.computed("ticket","mkpToAddress",(function(){var e=Ember.get(this,"currentUser.id"),t=Ember.get(this,"ticket.responderId"),s=Ember.get(this,"replyNote"),n=s?Ember.get(s,"toAddress"):null;if(n){var i=n.replace(/ /g,"").split(",");return Ember.get(this,"agents").filter((function(e){return i.includes(Ember.get(e,"contact.email"))}))}return""!==n&&t&&t!==e?[Ember.get(this,"store").peekRecord("agent",t)]:[]})),hasAddCollaboratorEnabled:Ember.computed("hasColloboratorFeaturesAndLPEnabled",(function(){return this.hasColloboratorFeaturesAndLPEnabled&&this.currentUser.hasAbility("manage_collaborators")})),hasColloboratorFeaturesAndLPEnabled:Ember.computed("currentAccount.accountData.{features.[],launched.[]}",(function(){return this.currentAccount.mandatesEnabled({mandatoryFeatures:["collaborators","collaboration_at_mentions","collaborators_toggle"],mandatoryLaunchParties:["light_agents_at_mentions","light_agents"]})})),hasMentioningEnabled:Ember.computed("hasColloboratorFeaturesAndLPEnabled",(function(){return this.hasColloboratorFeaturesAndLPEnabled&&Ember.get(this,"currentUser").hasAbility("provide_access_via_mentions")})),editorPlaceholder:Ember.computed("hasAddCollaboratorEnabled",(function(){var e=this.hasAddCollaboratorEnabled?this.i18n.t("add_collaborator.placeholder"):"";return this.i18n.t("tickets.action.notes.editor.placeholder",{inviteCollaborator:e})})),actions:{discard:function(){this.clearAttachments(),this.sendAction("discardConversation")},toggleSolutionArticleSlider:function(){Ember.get(this,"toggleSolutionArticleSlider")()},toggleCannedResponseSlider:function(){Ember.get(this,"toggleCannedResponseSlider")()},sendConversation:function(e){var t=this;if(this.hasMentioningEnabled&&0!==Ember.get(this,"restrictedAgentData").length&&(this.validateNewCollaborators(),!Ember.get(this,"isAgentAccessDecisionMade")))return Ember.setProperties(this,{showAgentAccessDialog:!0,recentStatus:e}),Ember.RSVP.Promise.resolve();var s=Ember.get(this,"noteModel"),i=Ember.get(this,"isPrivateNote");Ember.set(s,"private",i),Ember.get(this,"mkpAttachmentHidden")&&Ember.set(s,"attachment_ids",[]);var a=Ember.get(this,"emailErrorNoteData");Ember.get(this,"noteModel.body")||(a?Ember.set(this,"noteModel.body",a):Ember.set(this,"noteModel.body","<div><br></div>")),this.setCloudFiles(s);var r=(0,n.default)(s,["body","user_id","attachment_ids","attachments","cloud_files","incoming","notify_emails","private"]),l=Ember.get(this,"ticket.responder"),o=Ember.get(l,"contact.email"),c=Ember.get(this,"selected").map((function(e){return Ember.get(e,"contact.email")}))||[];o&&c.concat(o),Ember.set(r,"notify_emails",c);this.events.publish("submitNote",{eventName:"submitNote"}),this.clearAttachments();var d=[];return d.push(Ember.get(this,"marketplace").publishEvent({event:"ticket.addNote"}).then((function(){return t._sendConversation(r,e)})).catch((function(e){return t._mkpPublishEventError(e)}))),Ember.RSVP.Promise.all(d.compact())},discardConversation:function(){Ember.get(this,"isSlashCommandShown")||this.send("checkAndProceedToDiscard")},onSubmitConversation:function(e){document.getElementById("send-and-set").disabled||(this.send("sendConversation",e),this.disableEditor())},onInsertAttachment:function(e){Ember.get(this,"noteModel")&&Ember.set(this,"noteModel.attachment_ids",e)},contentChanged:function(e,t){Ember.set(this,"noteModel.body",e),Ember.get(this,"navAlertFeatureOn")&&this.setNavAlertOnChange(Ember.get(this,"noteModel"),t)},onChange:function(e){this.clearAttachments(),this.sendAction("changeAction",e.id)},setAtCommandValues:function(e,t){Ember.setProperties(this,{atCommandsObj:e,editorInstance:t})},onAtCommand:function(e){var t=(0,l.default)(e,Ember.get(this,"selected"),Ember.get(this,"rememberedAgent")),s=t.uniqueAgentsSelected,n=t.agentEmail,i=t.rememberedAgent;(Ember.set(this,"rememberedAgent[".concat(e.id,"]"),i[e.id]),Ember.setProperties(this,{selected:s,"noteModel.notify_emails":n}),this.hasMentioningEnabled)&&(-1===Ember.get(this,"restrictedAgentData").map((function(e){return e.id})).indexOf(e.id)&&Ember.get(this,"getAgentAccess").perform(e))},toggleSlashCommand:function(e){Ember.set(this,"isSlashCommandShown",e)},onRemoveAgent:function(e){var t=this,s=Ember.get(this,"selected");e.forEach((function(e){var n=Ember.get(t,"store").peekRecord("agent",e);if(Ember.get(t,"rememberedAgent[".concat(n.id,"].isFromOnAtCommand"))){s.removeAt(s.indexOf(n)),Ember.set(t,"rememberedAgent[".concat(n.id,"].isFromOnAtCommand"),!1);var i=Ember.get(t,"restrictedAgentData").indexOf(n);i>-1&&Ember.get(t,"restrictedAgentData").removeAt(i)}})),this.send("onChangeAgent",s)},onChangeAgent:function(e){var t=e.map((function(e){return Ember.get(e,"contact.email")}));Ember.set(this,"selected",e),Ember.set(this,"noteModel.notify_emails",t)},onChangeNoteType:function(e){Ember.set(this,"noteType",e);var t="public"!==e.id;Ember.set(this,"noteModel.private",t),this._handleAtCommand(t)},searchNameEmail:function(e,t){t=t.toLowerCase();var s=Ember.get(e,"name").toLowerCase().indexOf(t);return-1==s?Ember.get(e,"contact.email").toLowerCase().indexOf(t):s},restrictAccess:function(){Ember.setProperties(this,{isAgentAccessDecisionMade:!0,showAgentAccessDialog:!1}),this.send("sendConversation",Ember.get(this,"recentStatus"))},provideAccess:function(){Ember.setProperties(this,{isAgentAccessDecisionMade:!0,showAgentAccessDialog:!1,provideTicketAccessSelected:!0}),this.send("sendConversation",Ember.get(this,"recentStatus"))},addNewCollaborator:function(e){this.newCollaboratorsAtMention.push(e.id)}},_handleAtCommand:function(e){var t=Ember.getProperties(this,"atCommandsObj","editorInstance"),s=t.atCommandsObj,n=t.editorInstance,i=n._editor;e?(s.initializeAtCommands(n),i.opts.placeholderText=this.editorPlaceholder):(s.detachObj(),i.opts.placeholderText=this.i18n.t("tickets.action.notes.editor.placeholder")),i.placeholder.refresh()},_sendConversation:function(e,t){Ember.get(this,"navigationAlert").resetAllValuesForComponent(Ember.get(this,"navigationObjectId"));var s=Ember.get(this,"sendConversation")(e,t);return s&&s.then(this.provideAgentAccess.bind(this))},_mkpPublishEventError:function(e){return Ember.get(this,"eventSources").errorHandler("marketplace.errors.tickets.addNote",e)},provideAgentAccess:function(){if(Ember.get(this,"provideTicketAccessSelected"))return Ember.get(this,"ticket").provideTicketAccess({user_ids:Ember.get(this,"restrictedAgentData").map((function(e){return parseInt(e.id)}))}).catch(this.provideAgentAccessFailureCB.bind(this))},provideAgentAccessFailureCB:function(e){p.default.throwMessageForKeys(this,e,"code",{},"fd.ticket.agent-provide-access-error")},getAgentAccess:(0,u.task)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ember.get(this,"ticket").checkTicketAccess({user_ids:[parseInt(t.id)]}).then(this.getAgentAccessSuccessCB.bind(this,t)).catch(this.showErrorMessage.bind(this,"fd.ticket.agent-access-check-error"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),getAgentAccessSuccessCB:function(e,t){"NO_ACCESS"===t.accesses[0][e.id]&&Ember.get(this,"restrictedAgentData").pushObject(e)},showErrorMessage:function(e){var t=Ember.get(this,"i18n").t(e);this.flashMessages.danger(t)},validateNewCollaborators:function(){var e=this;Ember.get(this,"restrictedAgentData").every((function(t){return e.newCollaboratorsAtMention.find((function(e){return t.id==e}))}))&&Ember.setProperties(this,{isAgentAccessDecisionMade:!0,provideTicketAccessSelected:!0})}});e.default=f})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/notes/provide-access-modal/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"B4P+Nc5t",block:'{"symbols":["modal","agent"],"statements":[[4,"nucleus-modal",null,[["onClose","title","className","isDismissible","size","closeOnEscapse"],[[23,["onClose"]],[27,"t",["fd.ticket.access-modal.header-agent"],[["count"],[[23,["restrictedAgentData","length"]]]]],"provide-access-modal",true,"medium",true]],{"statements":[[0,"  "],[1,[27,"component",[[22,1,["header"]]],[["class"],["provide-access-modal-header"]]],false],[0,"\\n"],[4,"component",[[22,1,["body"]]],[["class"],["provide-access-modal-body"]],{"statements":[[0,"    "],[7,"div"],[11,"class","access-modal-body"],[9],[0,"\\n      "],[7,"p"],[11,"class","description"],[9],[1,[27,"t",["fd.ticket.access-modal.description-agent"],[["count"],[[23,["restrictedAgentData","length"]]]]],false],[10],[0,"\\n      "],[7,"div"],[11,"class","body-wrapper"],[9],[0,"\\n"],[4,"each",[[23,["restrictedAgentData"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","card-wrapper mb-1 border-radius--medium element-flex--start pa-10"],[9],[0,"\\n            "],[7,"div"],[11,"class","panel-left"],[9],[0,"\\n              "],[1,[27,"app-components/avatar-user",null,[["user","size"],[[22,2,[]],"medium-secondary"]]],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","panel-right pl-20 wordbreak-fix"],[9],[0,"\\n              "],[7,"b"],[11,"class","text__infotext text--capatalize text--mediumlightblue text--xxsmall"],[9],[1,[22,2,["contact","name"]],false],[10],[0,"\\n              "],[7,"div"],[11,"class","text__infotext"],[9],[1,[22,2,["contact","email"]],false],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["footer"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","access-scope-popup-footer clearfix"],[9],[0,"\\n      "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n        "],[1,[27,"nucleus-button",null,[["data-test-id","variant","customClass","label","onClick"],["modal-ticket-access-cancel","secondary","mr-4",[27,"t",["common.cancel"],null],[23,["onClose"]]]]],false],[0,"\\n        "],[1,[27,"nucleus-button",null,[["data-test-id","variant","customClass","label","onClick"],["modal-ticket-access-restrict","secondary","mr-4",[27,"t",["fd.ticket.access-modal.footer.denied-btn"],null],[23,["restrictAccess"]]]]],false],[0,"\\n        "],[1,[27,"nucleus-button",null,[["data-test-id","disabled","variant","label","onClick"],["modal-ticket-access-provide",[23,["isInValid"]],"primary",[27,"t",["fd.ticket.access-modal.footer.access-btn"],null],[23,["provideAccess"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/notes/provide-access-modal/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/notes/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"lkNipFYE",block:'{"symbols":["agent","d"],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields ticket-action__header"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","ticket","isContentChanged","navigationObjectId","onChange","quickReply"],["notes",[23,["ticket"]],[23,["isContentChanged"]],[23,["navigationObjectId"]],[27,"action",[[22,0,[]],"onChange"],null],[23,["quickReply"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__notetype"],[11,"data-test-note-type",""],[9],[0,"\\n"],[4,"ui-components/drop-down",null,[["selected"],[[23,["selectedNoteType"]]]],{"statements":[[4,"component",[[22,2,["trigger"]]],null,{"statements":[[0,"          "],[7,"span"],[12,"class",[28,["ticket-action__notetypewrapper vertical-align ",[27,"if",[[23,["isPrivateNote"]],"ticket-action__private"],null]]]],[9],[0,"\\n            "],[1,[27,"svg-jar",[[23,["noteTypeIcon"]]],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"span"],[11,"data-test-id","note-type"],[11,"class","muted"],[9],[1,[27,"t",[[23,["noteTypeDescription"]]],null],false],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["ticket","hasPermission"]],[23,["currentUserPrivileges","hasCreatePublicNotePrivilege"]]],null]],null,{"statements":[[0,"            "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["currentUserPrivileges","hasCreatePublicNotePrivilege"]]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,2,["content"]]],[["options","title","onChange"],[[23,["dropDownOptions"]],[27,"t",["tickets.action.notes.title"],null],[27,"action",[[22,0,[]],"onChangeNoteType"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"data-test-notify-to",""],[11,"class","ticket-action__fields can-edit"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["ticket.details.actions.notifyTo"],null],false],[0,": "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"ui-form/select-field",null,[["options","customFdLabel","search","multiple","selected","matcher","onchange"],[[23,["agents"]],[27,"t",["ticket.details.actions.notifyTo"],null],false,true,[23,["selected"]],[27,"action",[[22,0,[]],"searchNameEmail"],null],[27,"action",[[22,0,[]],"onChangeAgent"],null]]],{"statements":[[0,"        "],[1,[22,1,["name"]],false],[0," ("],[1,[22,1,["contact","email"]],false],[0,")\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-action__editor"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["placeholder","value","shortcutenabled","ticket","quickReply","attachmentValue","onInsertAttachment","onRemoveAttachment","showCannedResponse","showCannedResponseTip","showCannedForm","showSolution","showAttachments","isSurveyEnabled","contentChanged","onAtCommand","onRemoveAgent","setAtCommandValues","toggleSlashCommand","addNewCollaborator","isLoading","autofocus","enableAtCommands","showFooter","fixedHeight","source","scrollToAttachment","skipFirstSendAction","onSubmitConversation","onEscape","isSlashCommandShown","hasImageAnnotationFeature","enableSlashCommands","isValidMkpPlaceholder","cloudAttachments","model","wrapDefaultFont","fixedFormattingToolbar","toggleSolutionArticleSlider","solutionArticleSuggest","bodyTextForInsert","isTicketDetail","cannedResponseSuggest","toggleCannedResponseSlider","hasAddCollaboratorEnabled"],[[23,["editorPlaceholder"]],[23,["bodyText"]],[23,["hasBodyText"]],[23,["ticket"]],[23,["quickReply"]],[23,["computedAttachments"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[23,["isSurveyEnabled"]],[27,"action",[[22,0,[]],"contentChanged"],null],[27,"action",[[22,0,[]],"onAtCommand"],null],[27,"action",[[22,0,[]],"onRemoveAgent"],null],[27,"action",[[22,0,[]],"setAtCommandValues"],null],[27,"action",[[22,0,[]],"toggleSlashCommand"],null],[27,"action",[[22,0,[]],"addNewCollaborator"],null],[23,["isLoading"]],true,[23,["isPrivateNote"]],true,332,"note",[23,["scrollToAttachment"]],false,[27,"action",[[22,0,[]],"onSubmitConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[23,["isSlashCommandShown"]],[27,"hasfeature",["image_annotation"],null],true,true,[23,["cloudAttachments"]],[23,["model"]],true,true,[27,"action",[[22,0,[]],"toggleSolutionArticleSlider"],null],[23,["solutionArticleSuggest"]],[23,["bodyTextForInsert"]],[23,["isTicketDetail"]],[23,["cannedResponseSuggest"]],[27,"action",[[22,0,[]],"toggleCannedResponseSlider"],null],[23,["hasAddCollaboratorEnabled"]]]],{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-action__btn"],[9],[0,"\\n"],[4,"if",[[23,["isGetAccessRunning"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","access-check-status text--antialias text--xsmall pr-10"],[9],[0,"\\n            "],[1,[27,"t",["ticket.details.access.checking"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"checkAndProceedToDiscard"],null]],[11,"class","btn btn--secondary vertical-align"],[9],[1,[27,"t",["form.cancel"],null],false],[10],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","label","pendingLabel","ticket","disableSubmit","externalPending","onSend"],[[27,"not",[[23,["quickReply"]]],null],[27,"t",["tickets.action.notes"],null],[27,"t",["tickets.action.addingnotes"],null],[23,["ticket"]],[23,["disableNote"]],[23,["disableSubmitExternal"]],[27,"action",[[22,0,[]],"sendConversation"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n  "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n"],[10],[0,"\\n\\n"],[4,"if",[[23,["showAgentAccessDialog"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/ticket-details/ticket-actions/notes/provide-access-modal",null,[["onClose","restrictAccess","restrictedAgentData","provideAccess"],[[27,"action",[[22,0,[]],[27,"mut",[[23,["showAgentAccessDialog"]]],null]],null],[27,"action",[[22,0,[]],"restrictAccess"],null],[23,["restrictedAgentData"]],[27,"action",[[22,0,[]],"provideAccess"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/notes/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/reply/component",["exports","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/tickets/collapsible-email","freshdesk/utils/object-filter","freshdesk/mixins/tickets/editor-attachment","freshdesk/utils/blank-array","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/shortcuts/ticket-details/ticket-editor","freshdesk/mixins/slash-commands/config","freshdesk/utils/delete-keys-from-object","freshdesk/constants/conversation","@freshdesk/tickets/utils/normalized-quoted-data"],(function(e,t,s,n,i,a,r,l,o,c,d,m){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=["trafficCop","undoEnqueued","undoAgentEnqueued","maxEmail"],p=Ember.Component.extend(t.default,s.default,i.default,r.default,l.default,o.default,{marketplace:Ember.inject.service(),draft:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),marketplaceAdapter:Ember.inject.service(),eventSources:Ember.inject.service(),classNames:["__module-tickets__ticket-details__ticket-actions__reply"],showCollapsedEmail:!0,quickReply:!1,quotedData:null,showCc:!1,showBcc:!1,isUndoSendReply:!1,displayLength:1,maxCount:50,isSlashCommandShown:!1,fromModified:!1,displayPopUp:!1,conversationType:"reply",showCcField:Ember.computed.or("showCc","hasCc"),showBccField:Ember.computed.or("showBcc","hasBcc"),bodyText:Ember.computed.reads("replyModel.body"),hasAttachments:Ember.computed.notEmpty("replyModel.attachment_ids"),hasBodyText:Ember.computed.bool("bodyText.length"),enableReply:Ember.computed.or("hasAttachments","hasBodyText"),attachmentValue:Ember.computed.reads("replyModel.attachments"),isCustomerReported:Ember.computed.not("ticket.requester.isAgent"),showSurvey:Ember.computed.and("currentAccount.includeSurveyManually","isCustomerReported"),showPostToForum:Ember.computed.notEmpty("ticket.ticketTopic"),selectedCcEmail:Ember.computed.mapBy("filtedCcEmail","email"),selectedBccEmail:Ember.computed.mapBy("filteredBccEmail","email"),cloudAttachments:(0,a.default)(),deleteQuotedText:Ember.computed.readOnly("mkpInterface.controlData.deleteQuotedText.click"),scrollToAttachment:Ember.computed.not("currentUser.latestNotesFirst"),isDraftSaving:Ember.computed.bool("draftSaveStatus.isSaving"),isDraftSaved:Ember.computed.bool("draftSaveStatus.isSaved"),isFocusBcc:!1,isFocusCc:!1,draftSaveStatus:Ember.computed("draft.draftSaveStatus",(function(){var e=Ember.getProperties(this,"draft","ticket"),t=e.draft.draftSaveStatus,s=void 0===t?[]:t,n=e.ticket.id;return s.find((function(e){return e.id==="reply_".concat(n)}))})),articlesSuggested:(0,a.default)(),mkpAttachmentHidden:Ember.computed("mkpInterface.controlData.ticketAttachments.hide","marketplaceAdapter.controlData.ticketAttachments.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketAttachments.hide"):Ember.get(this,"mkpInterface.controlData.ticketAttachments.hide")})),replyModel:Ember.computed("model.content.{from_email}","mkpInterface.controlData.{bcc.value,cc.value}","mkpFromEmail",(function(){var e=Ember.get(this,"model.content");if(!e)return e;var t=Ember.get(this,"mkpFromEmail.replyEmail")||Ember.get(this,"mkpFromEmail.reply_email");t&&!Ember.get(this,"fromModified")&&Ember.set(e,"from_email",t);var s=Ember.get(this,"mkpInterface.controlData.bcc.value");if(s){var n=s.map((function(e){return Ember.get(e,"email")}));e.bcc_emails=n}var i=Ember.get(this,"mkpInterface.controlData.cc.value");if(i){var a=i.map((function(e){return Ember.get(e,"email")}));e.cc_emails=a}if(e.reply_ticket_id=parseInt(Ember.get(this,"ticket.id")),Ember.get(this,"currentAccount").hasFeature("suggested_articles_count")){e.articles_suggested=e.articles_suggested||Ember.get(this,"articlesSuggested")}return e})),quotedText:Ember.computed("replyModel.quoted_text","deleteQuotedText",(function(){return Ember.get(this,"deleteQuotedText")?null:Ember.get(this,"replyModel.quoted_text")})),hasImageAnnotationFeature:Ember.computed("currentAccount.accountData","quickReply",(function(){return Ember.get(this,"currentAccount")&&Ember.get(this,"currentAccount").hasFeature("image_annotation")&&!Ember.get(this,"quickReply")})),isLoading:Ember.computed("model.isPending",(function(){return Ember.get(this,"model.isPending")||!1})),filtedCcEmail:Ember.computed("selectedCc.[]",(function(){var e=Ember.get(this,"selectedCc");return this.getValidEmail(e)})),filteredBccEmail:Ember.computed("selectedBcc.[]",(function(){var e=Ember.get(this,"selectedBcc");return this.getValidEmail(e)})),toEmail:Ember.computed("ticket.requester",(function(){var e=Ember.get(this,"ticket.senderEmail")||Ember.get(this,"ticket.requester.email"),t=Ember.get(this,"ticket.requester.name");return[e||t]})),ccInTicket:Ember.computed.map("ticket.replyCcEmails",(function(e){return{email:e,details:e}})),ccInDraftOrUndoneNote:Ember.computed.map("replyModel.cc_emails",(function(e){return{email:e,details:e}})),selectedCc:Ember.computed("hasDraft","ccInTicket","ccInDraftOrUndoneNote","mkpInterface.controlData.cc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.cc.value");return e||(Ember.get(this,"hasDraft")||Ember.get(this,"isUndoSendReply")||Ember.get(this,"ccInDraftOrUndoneNote").length>0?Ember.get(this,"ccInDraftOrUndoneNote"):Ember.get(this,"ccInTicket"))},set:function(e,t){return t}}),_selectedBcc:Ember.computed.map("replyModel.bcc_emails",(function(e){return{email:e,details:e}})),selectedBcc:Ember.computed("model.isPending","mkpInterface.controlData.bcc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.bcc.value");return e||Ember.get(this,"_selectedBcc")},set:function(e,t){return t}}),hasCc:Ember.computed("selectedCc",(function(){return Boolean(Ember.get(this,"selectedCc.length"))})),hasBcc:Ember.computed("selectedBcc",(function(){return Boolean(Ember.get(this,"selectedBcc.length"))})),allEmail:Ember.computed("replyModel.{cc_emails,bcc_emails}",(function(){var e=Ember.get(this,"toEmail"),t=Ember.get(this,"selectedCcEmail"),s=Ember.get(this,"selectedBccEmail");return[].concat(e,t,s)})),replyQuotedData:Ember.computed("quotedData","replyModel.{quoted_text,body}",(function(){var e=Ember.getProperties(this,"quotedText","quotedData","conversationType"),t=e.quotedText,s=e.quotedData,n=e.conversationType;return(0,m.default)(t,Ember.get(this,"replyModel.body"),s,n)})),init:function(){this._super.apply(this,arguments),Ember.get(this,"marketplace").on("fromUpdated",this.fromUpdated.bind(this)),Ember.get(this,"marketplace").on("activeEmailConfigUpdated",this.activeEmailConfigUpdated.bind(this)),Ember.get(this,"activeEmailConfigTask").perform()},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"marketplace").off("activeEmailConfigUpdated"),Ember.get(this,"marketplace").off("fromUpdated"),Ember.get(this,"showOmniChannelReply")&&Ember.get(this,"removeError")(u)},actions:{contentChanged:function(e){var t=Ember.get(this,"replyModel");Ember.isPresent(t)&&Ember.set(this,"replyModel.body",e),this._saveDraft()},toggleCannedResponseSlider:function(){Ember.get(this,"toggleCannedResponseSlider")()},discardConversation:function(){Ember.get(this,"isSlashCommandShown")||this.sendAction("discardConversation")},toggleSolutionArticleSlider:function(e){Ember.get(this,"toggleSolutionArticleSlider")(e)},clearCc:function(){Ember.set(this,"showCc",!1),Ember.set(this,"replyModel.cc_emails",[]),Ember.set(this,"selectedCc",[])},clearBcc:function(){Ember.set(this,"selectedBcc",[]),Ember.set(this,"showBcc",!1),Ember.set(this,"replyModel.bcc_emails",[])},togglecc:function(){Ember.setProperties(this,{showCc:!0,isFocusCc:!0})},togglebcc:function(){Ember.setProperties(this,{showBcc:!0,isFocusBcc:!0})},onClickCollapsedEmail:function(){Ember.set(this,"showCollapsedEmail",!1)},onEditorFocus:function(){Ember.set(this,"showCollapsedEmail",!0)},onChange:function(e){this.clearAttachments(),this.sendAction("changeAction",e.id)},updateSurvey:function(e){Ember.set(this,"replyModel.send_survey",e)},updateSurveyMonkey:function(e){Ember.set(this,"replyModel.include_surveymonkey_link",Number(e))},onChangeCc:function(e){Ember.set(this,"selectedCc",e);var t=Ember.get(this,"selectedCcEmail");Ember.set(this,"replyModel.cc_emails",t),Ember.set(this,"selectedCc",e),this.checkMaxEmailError()},onChangeBcc:function(e){Ember.set(this,"selectedBcc",e);var t=Ember.get(this,"selectedBccEmail");Ember.set(this,"replyModel.bcc_emails",t),this.checkMaxEmailError()},onChangeFrom:function(e){var t=Ember.get(e,"replyEmail")||Ember.get(e,"reply_email");Ember.setProperties(this,{fromEmail:e,fromModified:!0,"model.content.from_email":t})},getQuoted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ember.set(this,"quotedData",e),this._saveDraft()},onInsertAttachment:function(e){Ember.get(this,"model.then")&&Ember.get(this,"model").then(this._onInsertAttachment.bind(this,e))},sendConversation:function(e){var t=this,s=Ember.get(this,"replyModel");Ember.get(this,"mkpAttachmentHidden")&&Ember.set(s,"attachment_ids",[]),Ember.setProperties(s,{cc_emails:this.selectedCcEmail,bcc_emails:this.selectedBccEmail}),this.setCloudFiles(s);var i=(0,n.default)(s,d.default.allowedReplyFields);if(!i.from_email){var a=Ember.get(this,"defaultFromEmail.replyEmail");i.from_email=a}i.body=Ember.get(this,"replyQuotedData.bodyText"),Ember.get(this,"replyQuotedData.quoteRemoved")||(i.full_text=Ember.get(this,"replyQuotedData.fullText"));var r=Object.assign({},i);r=(0,c.default)(r,d.default.nonAllowedReplyFields),Ember.set(r,"to_email",Ember.get(this,"toEmail"));var l=[];return l.push(Ember.get(this,"marketplace").publishEvent({event:"ticket.sendReply",data:r}).then((function(){return t._sendConversation(i,e)})).catch((function(e){return t._mkpPublishEventError(e)}))),Ember.get(this,"displayPopUp")&&this.setPopUpDisplayed(),Ember.RSVP.Promise.all(l.compact())},onSubmitConversation:function(e){document.getElementById("send-and-set").disabled||(this.send("sendConversation",e),this.disableEditor())},updateArticlesSuggested:function(e){var t=e.id,s=e.language;if(Ember.get(this,"currentAccount").hasFeature("suggested_articles_count")){var n={language:s,article_id:Number(t)};Ember.get(this,"replyModel.articles_suggested").push(n),this._saveDraft()}}},willDestroy:function(){this._super.apply(this,arguments),this.clearAttachments(),Ember.get(this,"marketplace").off("fromUpdated")},_onInsertAttachment:function(e){Ember.get(this,"replyModel")&&(Ember.set(this,"replyModel.attachment_ids",e),this._saveDraft())},_saveDraft:function(){var e=Ember.get(this,"replyModel");if(!Ember.get(this,"isLoading")&&e){var t=(0,n.default)(e,["body","quoted_text","cc_emails","bcc_emails","from_email","attachment_ids","articles_suggested"]),s=Ember.get(this,"replyQuotedData"),i=s?Ember.get(s,"quoteRemoved"):null,a=Ember.$("<div>".concat(t.body,"</div>")).find(".freshdesk_quote").length;(i||a)&&Ember.set(t,"quoted_text",null),Ember.get(this,"draftInlineAttachmentIds")&&Ember.set(this,"model.inlineAttachmentIds",Ember.get(this,"draftInlineAttachmentIds")),Ember.get(this,"model.inlineAttachmentIds")&&Ember.set(t,"inline_attachment_ids",Ember.get(this,"model.inlineAttachmentIds")),t.body&&this.sendAction("saveDraft",t)}},checkMaxEmailError:function(){var e=Ember.get(this,"selectedCc.length"),t=Ember.get(this,"selectedBcc.length"),s=Ember.get(this,"maxCount");e>s||t>s?this.sendAction("showError","maxEmail"):this.sendAction("removeError","maxEmail")},getValidEmail:function(e){var t=Ember.get(this,"maxCount");return e.slice(0,t).filter((function(e){return void 0===e.valid||!0===e.valid}))},_sendConversation:function(e,t){return Ember.get(this,"sendConversation")(e,t)},_mkpPublishEventError:function(e){return Ember.get(this,"eventSources").errorHandler("marketplace.errors.tickets.reply",e)}});e.default=p})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"swZVN0kN",block:'{"symbols":["option","email","option","email"],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[11,"data-test-id","reply-action"],[9],[0,"\\n\\n  "],[7,"div"],[11,"class","ticket-action__fields ticket-action__header"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","ticket","onChange","quickReply"],["reply",[23,["ticket"]],[27,"action",[[22,0,[]],"onChange"],null],[23,["quickReply"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[12,"class",[28,["ticket-action__field ticket-action__from ",[27,"if",[[23,["mkpInterface","controlData","from","hide"]],"hide"],null]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__label"],[9],[1,[27,"t",["fd.from"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__email ticket-action__from-email ellipsis"],[9],[0,"\\n"],[4,"if",[[23,["emailConfigLoaded"]]],null,{"statements":[[4,"if",[[27,"gt",[[23,["customGlobalEmailConfig","length"]],1],null]],null,{"statements":[[0,"            "],[1,[27,"app-components/from-email",null,[["disabled","isEditor","fromOptions","selectedEmailConfig","onchange"],[[23,["mkpInterface","controlData","from","disable"]],true,[23,["customGlobalEmailConfig"]],[23,["filteredSelectedEmail"]],[27,"action",[[22,0,[]],"onChangeFrom"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div"],[11,"class","hint--rounded hint--top-right element-flex"],[12,"aria-label",[23,["customGlobalEmailConfig","firstObject","replyEmail"]]],[9],[0,"\\n              "],[7,"div"],[11,"class","ticket-action__fromemail ellipsis"],[9],[0,"\\n                "],[7,"span"],[11,"class","from-email-name"],[9],[1,[27,"if",[[23,["showAgent"]],[23,["agentName"]],[23,["customGlobalEmailConfig","firstObject","name"]]],null],false],[10],[0,"\\n                "],[7,"span"],[11,"class","from-email"],[9],[0,"("],[1,[23,["customGlobalEmailConfig","firstObject","replyEmail"]],false],[0,")"],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n"],[4,"ui-components/toggle-view",null,[["showDefault"],[false]],{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["ticket-action__email--collapsed ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","to","hide"]],"hide"],null]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__email ticket-action__requester"],[11,"id","collapsed-email"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/collapsed-email",null,[["onClick","wrapperId","displayLength","cc","bcc","to"],[[27,"action",[[22,0,[]],"onClickCollapsedEmail"],null],"ticket-action",[23,["displayLength"]],[23,["selectedCcEmail"]],[23,["selectedBccEmail"]],[23,["toEmail"]]]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__copyemail mt-4"],[12,"onclick",[27,"action",[[22,0,[]],"onClickCollapsedEmail"],null]],[9],[0,"\\n        "],[7,"span"],[12,"onclick",[27,"action",[[22,0,[]],"togglecc"],null]],[11,"role","button"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]],[9],[7,"span"],[11,"class","cc-count"],[9],[4,"if",[[23,["selectedCc","length"]]],null,{"statements":[[1,[23,["selectedCc","length"]],false]],"parameters":[]},null],[10],[0," "],[1,[27,"t",["fd.cc"],null],false],[10],[0,"\\n        "],[7,"span"],[12,"onclick",[27,"action",[[22,0,[]],"togglebcc"],null]],[11,"role","button"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]],[9],[7,"span"],[11,"class","bcc-count"],[9],[4,"if",[[23,["selectedBcc","length"]]],null,{"statements":[[1,[23,["selectedBcc","length"]],false]],"parameters":[]},null],[10],[0," "],[1,[27,"t",["fd.bcc"],null],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[12,"class",[28,["ticket-action__fields ",[27,"if",[[23,["mkpInterface","controlData","to","hide"]],"hide"],null]]]],[11,"data-test-requester",""],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-1"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field ticket-action__email ticket-action__requester ellipsis"],[9],[0,"\\n        "],[1,[21,"toEmail"],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__copyemail"],[9],[0,"\\n"],[4,"if",[[27,"not",[[23,["showCcField"]]],null]],null,{"statements":[[0,"          "],[7,"span"],[11,"data-test-cc-btn",""],[12,"onclick",[27,"action",[[22,0,[]],"togglecc"],null]],[11,"role","button"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]],[9],[1,[27,"t",["fd.cc"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"not",[[23,["showBccField"]]],null]],null,{"statements":[[0,"          "],[7,"span"],[11,"data-test-bcc-btn",""],[12,"onclick",[27,"action",[[22,0,[]],"togglebcc"],null]],[11,"role","button"],[12,"class",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]],[9],[1,[27,"t",["fd.bcc"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"if",[[27,"or",[[23,["showCcField"]],[23,["showBccField"]]],null]],null,{"statements":[[4,"if",[[23,["showCcField"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","cc","hide"]],"hide"],null]]]],[11,"data-test-cc",""],[9],[0,"\\n          "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["fd.cc"],null],false],[0,": "],[10],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","cc","disable"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n              "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedCc"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","display__email"],[9],[1,[22,4,["details"]],false],[10],[0,"\\n"]],"parameters":[4]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"ui-form/remote-select-field",null,[["selected","customFdLabel","onchange","multiple","tabindex","allowCreate","isSelectOnTab","maxcount","autofocus","url"],[[23,["selectedCc"]],[27,"t",["fd.cc"],null],[27,"action",[[22,0,[]],"onChangeCc"],null],true,"1",true,true,[23,["maxCount"]],[23,["isFocusCc"]],"/search/autocomplete/requesters"]],{"statements":[[0,"                "],[1,[22,3,["details"]],false],[0,"\\n"]],"parameters":[3]},null],[0,"            "],[10],[0,"\\n"],[4,"if",[[23,["selectedCc","length"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"role","button"],[12,"class",[28,["ticket-action__field ticket-action__clear ",[27,"if",[[23,["mkpInterface","controlData","cc","disable"]],"hide"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"clearCc"],null]],[9],[1,[27,"t",["fd.clearcc"],null],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showBccField"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["ticket-action__fields can-edit ",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]]]],[11,"data-test-bcc",""],[9],[0,"\\n          "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-11"],[9],[1,[27,"t",["fd.bcc"],null],false],[0,": "],[10],[0,"\\n          "],[7,"div"],[11,"class","ticket-action__field ticket-action__email"],[9],[0,"\\n"],[4,"if",[[23,["mkpInterface","controlData","bcc","disable"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["selectedBcc"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","display__email"],[9],[1,[22,2,["details"]],false],[10],[0,"\\n"]],"parameters":[2]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-form/remote-select-field",null,[["selected","tabindex","customFdLabel","onchange","multiple","isSelectOnTab","maxcount","autofocus","url"],[[23,["selectedBcc"]],"1",[27,"t",["fd.bcc"],null],[27,"action",[[22,0,[]],"onChangeBcc"],null],true,true,[23,["maxCount"]],[23,["isFocusBcc"]],"/search/autocomplete/requesters"]],{"statements":[[0,"                "],[1,[22,1,["details"]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]}],[0,"          "],[10],[0,"\\n"],[4,"if",[[23,["selectedBcc","length"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"role","button"],[12,"class",[28,["ticket-action__field ticket-action__clear ",[27,"if",[[23,["mkpInterface","controlData","bcc","hide"]],"hide"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"clearBcc"],null]],[9],[1,[27,"t",["fd.clearbcc"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}],[0,"  "],[7,"div"],[11,"class","ticket__editor-reply"],[9],[0,"\\n"],[4,"ui-form/editor/ticket-editor",null,[["placeholder","shortcutenabled","value","bodyTextForInsert","solutionArticleSuggest","ticket","quickReply","onFocus","attachmentValue","onInsertAttachment","onRemoveAttachment","quotedText","showCannedResponse","showCannedResponseTip","showCannedForm","showSolution","showAttachments","showPostToForum","showSurvey","updateSurvey","updateSurveyMonkey","isSurveyEnabled","contentChanged","isLoading","getQuoted","showFooter","fixedHeight","source","scrollToAttachment","autofocus","clearFileCache","insertBroadcast","broadcastedMessage","onSubmitConversation","onEscape","isSlashCommandShown","hasImageAnnotationFeature","enableSlashCommands","isValidMkpPlaceholder","cloudAttachments","installedApps","model","wrapDefaultFont","fixedFormattingToolbar","isTicketDetail","toggleSolutionArticleSlider","cannedResponseSuggest","toggleCannedResponseSlider","updateArticlesSuggested","displayPopUp"],["",true,[23,["bodyText"]],[23,["bodyTextForInsert"]],[23,["solutionArticleSuggest"]],[23,["ticket"]],[23,["quickReply"]],[27,"action",[[22,0,[]],"onEditorFocus"],null],[23,["computedAttachments"]],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["quotedText"]],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["quickReply"]]],null],[23,["showPostToForum"]],[23,["showSurvey"]],[27,"action",[[22,0,[]],"updateSurvey"],null],[27,"action",[[22,0,[]],"updateSurveyMonkey"],null],[23,["isSurveyEnabled"]],[27,"action",[[22,0,[]],"contentChanged"],null],[23,["isLoading"]],[27,"action",[[22,0,[]],"getQuoted"],null],true,332,"reply",[23,["scrollToAttachment"]],true,true,[23,["insertBroadcast"]],[23,["broadcastedMessage"]],[27,"action",[[22,0,[]],"onSubmitConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[23,["isSlashCommandShown"]],[23,["hasImageAnnotationFeature"]],true,true,[23,["cloudAttachments"]],[23,["installedApps"]],[23,["model"]],true,true,[23,["isTicketDetail"]],[27,"action",[[22,0,[]],"toggleSolutionArticleSlider"],null],[23,["cannedResponseSuggest"]],[27,"action",[[22,0,[]],"toggleCannedResponseSlider"],null],[27,"action",[[22,0,[]],"updateArticlesSuggested"],null],[27,"mut",[[23,["displayPopUp"]]],null]]],{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-action__btn reply-btn-wrapper"],[9],[0,"\\n        "],[7,"div"],[11,"class","draft-status text--antialias"],[9],[0,"\\n"],[4,"if",[[23,["isDraftSaving"]]],null,{"statements":[[0,"            "],[1,[27,"t",["ticket.details.draft.saving"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isDraftSaved"]]],null,{"statements":[[0,"            "],[1,[27,"t",["ticket.details.draft.saved"],null],false],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"button"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn discard-draft app-icon-btn"],[11,"data-test-button","discard-conversation"],[9],[0,"\\n          "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","reply-btn"],[9],[0,"\\n          "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","disableSubmit","externalPending","onSend","ticket"],[[27,"not",[[23,["quickReply"]]],null],[27,"not",[[23,["enableReply"]]],null],[23,["disableSubmitExternal"]],[27,"action",[[22,0,[]],"sendConversation"],null],[23,["ticket"]]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/reply/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/ticket-details/ticket-actions/replyToForward/component",["exports","freshdesk/components/module-tickets/ticket-details/ticket-actions/forward/component","@freshdesk/tickets/mixins/email-config","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/tickets/collapsible-email","freshdesk/utils/object-filter","freshdesk/utils/delete-keys-from-object","freshdesk/constants/conversation","freshdesk/mixins/integrations/attachment-apps","freshdesk/components/module-tickets/ticket-details/ticket-actions/forward/template"],(function(e,t,s,n,i,a,r,l,o,c){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=t.default.extend(s.default,n.default,i.default,o.default,{marketplace:Ember.inject.service(),eventSources:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),marketplaceAdapter:Ember.inject.service(),layout:c.default,textForAction:"tickets.action.reply_to_forward",textForActionPending:"tickets.action.replying_to_forward",conversationType:"reply",selectedCcEmails:Ember.computed.mapBy("selectedCc","email"),selectedBccEmails:Ember.computed.mapBy("selectedBcc","email"),mkpAttachmentHidden:Ember.computed("mkpInterface.controlData.ticketAttachments.hide","marketplaceAdapter.controlData.ticketAttachments.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketAttachments.hide"):Ember.get(this,"mkpInterface.controlData.ticketAttachments.hide")})),ccInModel:Ember.computed.map("forwardModel.cc_emails",(function(e){return{email:e,details:e}})),bccInModel:Ember.computed.map("forwardModel.bcc_emails",(function(e){return{email:e,details:e}})),toEmailInModel:Ember.computed.map("forwardModel.to_emails",(function(e){return{email:e,details:e}})),selectedCc:Ember.computed("ccInModel","mkpInterface.controlData.cc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.cc.value");if(e){var t=e.map((function(e){return Ember.get(e,"email")}));return Ember.get(this,"forwardModel")&&Ember.set(this,"forwardModel.cc_emails",t),e}return Ember.get(this,"ccInModel")},set:function(e,t){return t}}),selectedBcc:Ember.computed("bccInModel","mkpInterface.controlData.bcc.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.bcc.value");if(e){var t=e.map((function(e){return Ember.get(e,"email")}));return Ember.get(this,"forwardModel")&&Ember.set(this,"forwardModel.bcc_emails",t),e}return Ember.get(this,"bccInModel")},set:function(e,t){return t}}),selectedTo:Ember.computed("toEmailInModel","mkpInterface.controlData.to.value",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.to.value");return e&&Ember.get(this,"forwardModel")?(Ember.set(this,"forwardModel.to_emails",e.map((function(e){return Ember.get(e,"email")}))),e):Ember.get(this,"toEmailInModel")},set:function(e,t){return t}}),actions:{sendConversation:function(){var e=this;if(this.checkMinToError())return new Ember.RSVP.Promise((function(e){e({error:!0})}));var t=Ember.get(this,"forwardModel");Ember.get(this,"mkpAttachmentHidden")&&Ember.set(t,"attachment_ids",[]),Ember.setProperties(t,{cc_emails:this.selectedCcEmails,bcc_emails:this.selectedBccEmails}),this.setCloudFiles(t);var s=(0,a.default)(t,l.default.allowedReplytoforwardFields);if(!s.from_email){var n=Ember.get(this,"defaultFromEmail.replyEmail");s.from_email=n}s.body=Ember.get(this,"forwardQuotedData.bodyText"),Ember.get(this,"forwardQuotedData.quoteRemoved")||(s.full_text=Ember.get(this,"forwardQuotedData.fullText"));var i=Object.assign({},s);i=(0,r.default)(i,l.default.nonAllowedReplyToForwardFields);var o=[];return o.push(Ember.get(this,"marketplace").publishEvent({event:"ticket.sendReply",data:i}).then((function(){return e._sendConversation(s)})).catch((function(t){return e._mkpPublishEventError(t)}))),Ember.RSVP.Promise.all(o.compact())}},_sendConversation:function(e){return Ember.get(this,"navigationAlert").resetAllValuesForComponent(Ember.get(this,"navigationObjectId")),Ember.get(this,"sendConversation")(e)},_mkpPublishEventError:function(e){return Ember.get(this,"eventSources").errorHandler("marketplace.errors.tickets.reply",e)}});e.default=d})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/change-actions/component",["exports","freshdesk/constants/ticket"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=[{id:"reply",label:"tickets.action.reply"},{id:"notes",label:"tickets.action.addnote"},{id:"forward",label:"tickets.action.forward"},{id:"broadcast",label:"tickets.action.broadcast"}],n=Ember.Component.extend({currentUser:Ember.inject.service(),currentAccount:Ember.inject.service(),navigationAlert:Ember.inject.service("navigation-alert"),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["__module-tickets__ticket-details__ticket-actions__shared__change-actions"],quickReply:!1,previousSelected:null,isTrackerTicket:Ember.computed.equal("ticket.associationType",t.default.associationType.tracker),relatedTicketsCount:Ember.computed.reads("ticket.associatedTicketsCount"),twitterBlocked:Ember.computed("ticket.source","currentAccount.config.social.twitter_app_blocked",(function(){return Ember.get(this,"currentAccount.config.social.twitter_app_blocked")&&Ember.get(this,"ticket.source")===t.TWITTER_SOURCE})),actionState:Ember.computed("navigationAlert.actionState",(function(){var e=this;Ember.run.later((function(){var t=Ember.get(e,"navigationAlert.actionState"),s=Ember.get(e,"previousSelected");t&&s&&(Ember.set(e,"type",Ember.get(e,"previousSelected")),Ember.set(e,"navigationAlert.actionState",Ember.get(e,"navigationAlert.notProgressing")),Ember.set(e,"previousSelected",null))}))})),privilegedTicketActions:Ember.computed("twitterBlocked",(function(){var e=this,n=Ember.get(this,"twitterBlocked"),i=Ember.get(this,"isTrackerTicket"),a=Ember.get(this,"relatedTicketsCount"),r=function(t,s,n){return t.id===s&&Ember.get(e,"currentUser").hasPermissions({model:Ember.get(e,"ticket"),abilities:[n]})};return s.filter((function(s){var l=Ember.get(e,"mkpInterface");return!(!r(s,"forward","forward_ticket")||Ember.get(e,"quickReply")||Ember.get(l,"controlData.replyNote.hideForward")||Ember.get(l,"controlData.replyNote.disableForward"))||(!(!r(s,"reply","reply_ticket")||n||Ember.get(l,"controlData.replyNote.hideReply")||Ember.get(l,"controlData.replyNote.disableReply"))||("notes"===s.id&&!Ember.get(l,"controlData.replyNote.hideNote")&&!Ember.get(l,"controlData.replyNote.disableNote")||(!(s.id!==t.default.action.broadcast||!i||!a||Ember.get(e,"quickReply")||!Ember.get(e,"currentUser").hasAbility("reply_ticket"))||void 0)))}))})),label:Ember.computed("type",(function(){var e=this.getAttr("type");return"".concat("tickets.action.").concat(e)})),actions:{onChange:function(e,t){Ember.get(this,"isContentChanged")&&"reply"!=t?(Ember.set(this,"previousSelected",t),Ember.get(this,"navigationAlert").showNavAlert(Ember.get(this,"navigationObjectId"),this,this.actions.navAlertProceedCB,this.actions.navAlertDiscardCB,e)):this.send("navAlertProceedCB",e)},navAlertProceedCB:function(e){this.attrs.onChange(e)},navAlertDiscardCB:function(){Ember.set(this,"navigationAlert.actionState",Ember.get(this,"navigationAlert.inProgress"))}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/change-actions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"G41fH8s9",block:'{"symbols":["d"],"statements":[[4,"ui-components/drop-down",null,[["actionState","data-test-id","selected"],[[23,["actionState"]],"ticket-change-actions",[23,["type"]]]],{"statements":[[4,"component",[[22,1,["trigger"]]],null,{"statements":[[0,"    "],[1,[27,"svg-jar",[[23,["type"]]],[["class"],[[27,"concat",["app-icon app-icon--small app-icon--topalign ",[23,["type"]]],null]]]],false],[0,"\\n"],[4,"if",[[27,"gt",[[23,["privilegedTicketActions","length"]],0],null]],null,{"statements":[[0,"      "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"  "],[1,[27,"component",[[22,1,["content"]]],[["options","onChange"],[[23,["privilegedTicketActions"]],[27,"action",[[22,0,[]],"onChange"],null]]]],false],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/change-actions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/collapsed-email/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__ticket-details__ticket-actions__shared__collapsed-email"],showLeftEmail:!1,allEmailLength:Ember.computed.readOnly("allEmails.length"),toLength:Ember.computed.readOnly("to.length"),ccLength:Ember.computed.readOnly("cc.length"),bccLength:Ember.computed.readOnly("bcc.length"),displayEmailLength:Ember.computed.readOnly("displayEmail.length"),allEmails:Ember.computed("to","cc","bcc",(function(){var e=this.getAttr("to")||[],t=this.getAttr("cc")||[],s=this.getAttr("bcc")||[];return[].concat(e,t,s)})),displayEmail:Ember.computed("allEmails","displayLength",(function(){var e=this.allEmails,t=this.displayLength;return e.slice(0,t)})),leftEmail:Ember.computed("allEmailLength","displayEmailLength",(function(){return this.allEmailLength-this.displayEmailLength})),leftToCount:Ember.computed("toLength","displayEmailLength",(function(){return Ember.get(this,"to.length")-this.displayEmailLength})),leftCcCount:Ember.computed("toLength","ccLength","displayEmailLength",(function(){var e=this.displayEmailLength,t=this.ccLength,s=this.toLength;return e<=s?t:t-(e-s)})),leftBccCount:Ember.computed("toLength","ccLength","bccLength","displayEmailLength",(function(){var e=this.displayEmailLength,t=this.toLength,s=this.ccLength,n=this.bccLength;return e<=t+s?n:n-(e-(t+s))})),showMore:Ember.computed("displayEmailLength","allEmailLength",(function(){return this.allEmailLength>this.displayEmailLength})),click:function(){this.sendAction("onClick")}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/collapsed-email/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ZlRJ8GLk",block:'{"symbols":["email"],"statements":[[7,"span"],[11,"id","display__emails"],[11,"class","display__emails"],[9],[0,"\\n"],[4,"each",[[23,["displayEmail"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","display__email"],[9],[1,[22,1,[]],false],[10],[0,"\\n"]],"parameters":[1]},null],[10],[0,"\\n"],[7,"span"],[11,"class","display__more"],[9],[0,"\\n"],[4,"if",[[23,["leftEmail"]]],null,{"statements":[[0,"    +"],[1,[21,"leftEmail"],false],[0," "],[1,[27,"t",["fd.expand.collapse.more"],null],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["showMore"]],[23,["showLeftEmail"]]],null]],null,{"statements":[[0,"    (\\n"],[4,"if",[[27,"gt",[[23,["leftToCount"]],0],null]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","dis_email"],[9],[1,[21,"leftToCount"],false],[0," "],[1,[27,"t",["fd.to"],null],false],[0," "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"gt",[[23,["leftCcCount"]],0],null]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","dis_email"],[9],[1,[21,"leftCcCount"],false],[0," cc "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"gt",[[23,["leftBccCount"]],0],null]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","dis_email"],[9],[1,[21,"leftBccCount"],false],[0," bcc"],[10],[0,"\\n"]],"parameters":[]},null],[0,"    )\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/collapsed-email/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/error-message/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/error-message/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"6DQFI2jb",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","error-block error-block--replysection"],[9],[0,"\\n  "],[1,[27,"svg-jar",["unverified"],[["class"],["app-icon app-icon--small app-icon--error app-icon--topalign"]]],false],[0,"\\n  "],[1,[21,"message"],false],[0,"\\n\\n"],[4,"if",[[23,["clearError"]]],null,{"statements":[[0,"    "],[7,"button"],[11,"class","pull-right"],[3,"action",[[22,0,[]],[23,["clearError"]]]],[9],[0,"\\n      \\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/error-message/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/hide-action/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({tagName:"",actions:{hideAction:function(){this.attrs.hideAction()}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/hide-action/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"nz0oCzZd",block:'{"symbols":[],"statements":[[7,"a"],[12,"onclick",[27,"action",[[22,0,[]],"hideAction"],null]],[12,"aria-label",[27,"t",["fd.discard"],null]],[11,"class","ticketaction__delete hint--rounded hint--bottom app-icon-btn"],[9],[0,"\\n  "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/hide-action/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/omnichannel-reply-dropdown/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__ticket-details__ticket-actions__shared__omnichannel-reply-dropdown","btn-group"],classNameBindings:["buttonClass"],attributeBindings:["data-test-id"],actions:{showAction:function(e){Ember.get(this,"showAction")(e)},setReplyChannel:function(e){Ember.get(this,"setReplyChannel")(e)}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/omnichannel-reply-dropdown/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"JV1YlN3A",block:'{"symbols":["d"],"statements":[[1,[27,"nucleus-button",null,[["icon","label","onClick","customClass","variant","disabled","ariaLabel","id","data-test-id"],["reply",[27,"t",["tickets.action.reply"],null],[27,"if",[[27,"not",[[23,["disabledReplyBtn"]]],null],[27,"action",[[22,0,[]],"showAction","reply"],null]],null],"app-icon-btn--text omni-reply-button hint--rounded hint--bottom","secondary",[23,["disabledReplyBtn"]],[23,["ariaButtonLabel"]],[27,"if",[[23,["buttonClass"]],[27,"concat",["omni-channel-",[23,["buttonClass"]]],null],"omni-channel-reply-button"],null],"omni-channel-reply-button"]]],false],[0,"\\n"],[4,"ui-components/drop-down",null,[["verticalPosition","horizontalPosition","addOptionTestId","direction","disabled"],[[23,["verticalPosition"]],[23,["horizontalPosition"]],[23,["addOptionTestId"]],"hide",[23,["disabledReplyBtn"]]]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["tabindex","class","data-test-id"],["0","omni-channel-reply-trigger trigger-shortcuts",[27,"if",[[23,["buttonClass"]],[27,"concat",[[23,["buttonClass"]],"-trigger"],null],"omnichannel-reply-trigger"],null]]],{"statements":[[0,"    "],[7,"div"],[11,"class","btn-group dropup"],[9],[0,"\\n      "],[1,[27,"nucleus-button",null,[["data-test-id","icon","iconOnly","customClass","variant","iconSize","disabled"],["omni-channel-reply-dropdown-button","downarrow",true,"btn app-icon-btn omni-reply-dropdown dropdown-toggle","secondary","small",[23,["disabledReplyBtn"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[1,[27,"component",[[22,1,["content"]]],[["options","title","selected","data-test-id","onChange"],[[23,["replyOptions"]],[27,"t",["fd.omnichannel-reply.title"],null],[23,["currentReplyChannel"]],"omnichannel-reply-content",[27,"if",[[27,"not",[[23,["disabledReplyBtn"]]],null],[27,"action",[[22,0,[]],"setReplyChannel"],null]],null]]]],false],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/omnichannel-reply-dropdown/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({ticketFields:Ember.inject.service(),i18n:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),currentUser:Ember.inject.service(),classNames:["__module-tickets__ticket-details__ticket-actions__shared__send-and-set"],canSetStatus:!1,_status:Ember.computed.reads("ticketFields.statusChoices"),isPending:Ember.computed.or("pendingState","externalPending"),disableBtn:Ember.computed.or("isPending","disableSubmit"),contentLength:Ember.computed.reads("status.length"),label:Ember.computed((function(){return Ember.get(this,"i18n").t("ticket.submit.send")})),pendingLabel:Ember.computed((function(){return Ember.get(this,"i18n").t("ticket.submit.sending")})),hasStatusUpdatePrivilege:Ember.computed("currentUser.userData.abilities.[]",(function(){var e=Ember.get(this,"ticket"),t=this.currentUserPrivileges.hasUpdateTicketStatusPrivilege(Ember.get(this,"ticket.type"));return(!e||Ember.get(e,"hasPermission"))&&t&&Ember.get(this,"canSetStatus")})),status:Ember.computed.filter("_status",(function(e){return!!this.currentUser.isCollaborator||2!==e.value})),actions:{send:function(e){Ember.set(this,"pendingState",!0),this.onClick(e)},onOpen:function(){Ember.set(this,"keyboardPriority",2),Ember.set(this,"keyboardFirstResponder",!0)},onClose:function(){Ember.set(this,"activeItem",0),Ember.set(this,"keyboardPriority",0),Ember.set(this,"keyboardFirstResponder",!1)}},onClick:function(e){var t=this;Ember.get(this,"onSend")(e).finally((function(){t.isDestroyed||t.isDestroying||Ember.set(t,"pendingState",!1)}))},calculatePosition:function(e,t){var s=e.getBoundingClientRect(),n=s.top,i=s.height,a=t.getBoundingClientRect().height,r={};return n+250>window.innerHeight&&(r.top=-(a+i/2)),{style:r}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/sub-options/component",["exports","freshdesk/mixins/shortcuts/navigation-list"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{i18n:Ember.inject.service(),tagName:"",currentIndex:0,enterDebounceTime:1e3,contentLength:Ember.computed.reads("status.length"),label:Ember.computed((function(){return Ember.get(this,"i18n").t("ticket.submit.send")})),rowElements:Ember.computed("keyboardPriority",(function(){return document.querySelectorAll(".send-and-set-dropdown .dropdown-normal .app-dropdown__item")})),parentEle:Ember.computed("keyboardPriority",(function(){return document.querySelector(".send-and-set-dropdown .dropdown-normal")})),boundingClientRect:Ember.computed("parentEle",(function(){return Ember.get(this,"parentEle").getBoundingClientRect()})),actions:{send:function(e){this.sendAction("sendConversationWithSatatus",e)},currentItem:function(e){var t=Ember.get(this,"activeItem");if("enter"==e){var s=Ember.get(this,"status"),n=Ember.get(this,"currentIndex");this.send("send",s[n].value)}else Ember.set(this,"currentIndex",t),this.scrollElement(t,e)}},scrollElement:function(e,t){var s,n=Ember.get(this,"rowElements")[e],i=Ember.get(this,"boundingClientRect").top+0,a=window.innerHeight-Ember.get(this,"boundingClientRect").bottom+20,r=Ember.$(Ember.get(this,"parentEle")).scrollTop(),l=Ember.get(this,"parentEle").clientHeight/2;s="moveDown"==t?r+l:r-l,Ember.get(this,"scroller").scrollVertical(n,{parent:".send-and-set-dropdown .dropdown-normal",scrollOnlyIfInvisible:!0,offsetTop:parseInt(i),offsetHeight:-parseInt(a),duration:500,scrollTo:s})}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/sub-options/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"j6VdbnNW",block:'{"symbols":["s","index"],"statements":[[4,"each",[[23,["status"]]],null,{"statements":[[0,"  "],[7,"li"],[12,"class",[28,["app-dropdown__item ",[27,"if",[[27,"eq",[[22,2,[]],[23,["activeItem"]]],null],"list--active"],null]]]],[11,"data-test-id","send-and-set"],[9],[0,"\\n    "],[7,"a"],[12,"data-test-link",[28,["dropdown-submit-",[22,1,["translatedLabel"]]]]],[12,"onclick",[27,"action",[[22,0,[]],"send",[22,1,["value"]]],null]],[11,"href","javascript:void(0)"],[11,"class","send-and-set-item"],[11,"draggable","false"],[9],[0,"\\n      "],[1,[21,"label"],false],[0," "],[1,[27,"t",["tickets.and_set_as"],null],false],[0," "],[1,[22,1,["translatedLabel"]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[1,2]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/sub-options/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"6BTHl10D",block:'{"symbols":["dropdown"],"statements":[[7,"div"],[11,"class","btn-group send-and-set"],[9],[0,"\\n  "],[7,"button"],[11,"data-test-id","submit"],[11,"id","send-and-set"],[12,"disabled",[27,"if",[[23,["disableBtn"]],"disabled"],null]],[12,"class",[28,["btn ",[27,"if",[[23,["buttonClass"]],[23,["buttonClass"]],"btn--primary"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"send",null],null]],[11,"type","button"],[9],[0,"\\n"],[4,"if",[[23,["isPending"]]],null,{"statements":[[0,"      "],[1,[21,"pendingLabel"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[21,"label"],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[4,"if",[[23,["hasStatusUpdatePrivilege"]]],null,{"statements":[[4,"basic-dropdown",null,[["horizontalPosition","renderInPlace","data-test-id","calculatePosition","onOpen","onClose"],["center",true,"btn-dropdown",[23,["calculatePosition"]],[27,"action",[[22,0,[]],"onOpen"],null],[27,"action",[[22,0,[]],"onClose"],null]]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["tabindex","class"],["0","send-and-set-trigger trigger-shortcuts"]],{"statements":[[0,"        "],[7,"div"],[11,"class","btn-group dropup"],[9],[0,"\\n          "],[7,"button"],[12,"disabled",[27,"if",[[23,["disableBtn"]],"disabled"],null]],[12,"class",[28,["btn trigger-shortcuts dropdown-toggle set-btn ",[27,"if",[[23,["buttonClass"]],[23,["buttonClass"]],"btn--primary"],null]]]],[12,"aria-label",[27,"t",["keyboard_shortcuts.send_and_set"],null]],[11,"type","button"],[9],[0,"\\n            "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--small app-icon--white vertical-align"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["class"],["bs-dropdown send-and-set-dropdown"]],{"statements":[[0,"        "],[7,"ul"],[11,"class","dropdown-normal"],[12,"onclick",[27,"action",[[22,0,[]],[22,1,["actions","close"]]],null]],[9],[0,"\\n          "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set/sub-options",null,[["label","sendConversationWithSatatus","status","onSend"],[[23,["label"]],[27,"action",[[22,0,[]],"send"],null],[23,["status"]],[23,["onSend"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/shared/send-and-set/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/twitter-reply/component",["exports","freshdesk/constants/ticket","freshdesk/mixins/tickets/ticket-action","freshdesk/utils/object-filter","freshdesk/mixins/tickets/editor-attachment","freshdesk/utils/count-twitter-characters","ember-inject-scripts"],(function(e,t,s,n,i,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l="https://indfassetsblue.freshdesk.com/production/a/assets/external-js/twitter-text-3.0.1-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.js",o=[{id:"dm",label:"ticket.details.twitter.dm",icon:"dm"},{id:"mention",label:"ticket.details.twitter.mention",icon:"mention"}],c=["maxMentionTwitterCount","twitterUnfollwer","maxMentionTwitterCount","requesterHandleRequired","trafficCop"],d=Ember.Component.extend(s.default,i.default,{store:Ember.inject.service(),ajax:Ember.inject.service(),currentAccount:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),messageType:o,isFocused:!1,quickReply:!1,requesterTwitterId:Ember.computed.reads("ticket.requester.twitterId"),isDirectMessage:Ember.computed.reads("ticket.isDirectMessage"),bodyText:Ember.computed.alias("replyModel.body"),tweetType:Ember.computed.alias("ticket.tweet.tweet_type"),hasBodyText:Ember.computed.bool("bodyText.length"),selectedHandle:Ember.computed("ticket.responderTwitterHandle","mkpInterface.controlData.from.value",(function(){var e=Ember.get(this,"mkpInterface.controlData.from.value");return e&&!Ember.get(this,"isDirectMessage")?(e=e.startsWith("@")?e.substring(1):e,Ember.get(this,"store").peekAll("twitter-handle").findBy("screenName",e)||Ember.get(this,"ticket.responderTwitterHandle")):Ember.get(this,"ticket.responderTwitterHandle")})),replyModel:Ember.computed("selectedHandle",(function(){var e=Ember.get(this,"selectedMessageType.id"),t=parseInt(Ember.get(this,"selectedHandle.id")),s=Ember.get(this,"requesterTwitterId"),n=Ember.get(this,"ticket"),i=Ember.get(n,"conversations"),a=[];i&&(i=i.sortBy("id")).reverse().forEach((function(e){if(Ember.get(e,"incoming")){var t=Ember.get(e,"user"),s=Ember.get(t,"twitterId");s&&-1===a.indexOf(s)&&a.push(s)}})),-1===a.indexOf(s)&&a.push(s);var r="";return a.forEach((function(e){r+="@".concat(e," ")})),Ember.Object.create({tweet_type:e,twitter_handle_id:t,body:r,articles_suggested:[]})})),twitterHandles:Ember.computed((function(){return Ember.get(this,"store").peekAll("twitter-handle")})),selectedMessageType:Ember.computed({get:function(){return"dm"===Ember.get(this,"tweetType")?o[0]:o[1]},set:function(e,t){return t}}),isTwitterMention:Ember.computed.equal("selectedMessageType.id","mention"),maxCount:Ember.computed("selectedMessageType",(function(){return"dm"===Ember.get(this,"selectedMessageType.id")?t.default.twitter.dm.textCount:t.default.twitter.tweet.textCount})),attachmentConfig:Ember.computed("selectedMessageType",(function(){return"dm"===Ember.get(this,"selectedMessageType.id")?t.default.twitter.dm.attachment:t.default.twitter.tweet.attachment})),bodyTextLength:Ember.computed("replyModel.body",(function(){var e=Ember.get(this,"replyModel.body");return(0,a.default)(e)})),canSkipFollwerCheck:Ember.computed("isDirectMessage","selectedMessageType.id",(function(){return Ember.get(this,"isDirectMessage")||"mention"===Ember.get(this,"selectedMessageType.id")})),maxErrorObserver:Ember.observer("replyModel.body","selectedMessageType","selectedHandle",(function(){var e=Ember.get(this,"bodyTextLength"),t=Ember.get(this,"maxCount"),s=Ember.get(this,"selectedMessageType.id"),n=e>t;this.checkDmCharacterLimit(n,s),this.checkMentionCharacterLimit(n,s)})),canShowSurveys:Ember.computed("tweetType",(function(){return"dm"===Ember.get(this,"tweetType")})),init:function(){this._super.apply(this,arguments),window.twttr?this.checkFollowing():(0,r.default)(l).then(this.checkFollowing.bind(this))},willDestroyElement:function(){Ember.get(this,"showOmniChannelReply")&&Ember.get(this,"removeError")(c)},actions:{updateSurveyMonkey:function(e){Ember.get(this,"replyModel")&&Ember.set(this,"replyModel.include_surveymonkey_link",Number(e))},changeAgentHandle:function(e,t){t.actions.close();var s=Ember.get(e,"id"),n=Ember.get(this,"replyModel");Ember.set(n,"twitter_handle_id",parseInt(s)),Ember.set(this,"selectedHandle",e),this.checkFollowing()},onChangeTweetType:function(e){var t=Ember.get(this,"replyModel");Ember.set(this,"selectedMessageType",e),Ember.set(t,"tweet_type",e.id),this.checkFollowing()},discardConversation:function(){this.sendAction("discardConversation")},onInsertAttachment:function(e){this._onInsertAttachment(e)},sendConversation:function(e){var t=[],s=Ember.get(this,"selectedMessageType.id"),i=Ember.get(this,"bodyText");if("mention"!==s||!this.checkRequesterHandlePresentInBody(i)){var a=Ember.get(this,"replyModel"),r=(0,n.default)(a,["body","tweet_type","twitter_handle_id","attachment_ids","articles_suggested","send_survey","include_surveymonkey_link"]);t.push(this._sendConversation(r,e))}return Ember.RSVP.Promise.all(t.compact())}},checkFollowing:function(){if(this.sendAction("removeError","twitterUnfollwer"),!Ember.get(this,"canSkipFollwerCheck")){var e=Ember.get(this,"selectedHandle"),t={screen_name:Ember.get(this,"ticket.requester.twitterId")};e.checkFollowing(t).then(this._handleCheckFollowingResponse.bind(this))}},_handleCheckFollowingResponse:function(e){e.data.following||this.sendAction("showError","twitterUnfollwer")},_onInsertAttachment:function(e){Ember.get(this,"replyModel")&&Ember.set(this,"replyModel.attachment_ids",e)},_sendConversation:function(e,t){return Ember.get(this,"sendConversation")(e,t)},checkDmCharacterLimit:function(e,t){e&&"dm"===t?this.sendAction("showError","maxDmTwitterCount"):this.sendAction("removeError","maxDmTwitterCount")},checkMentionCharacterLimit:function(e,t){e&&"mention"===t?this.sendAction("showError","maxMentionTwitterCount"):this.sendAction("removeError","maxMentionTwitterCount")},checkRequesterHandlePresentInBody:function(e){var t=window.twttr.txt.extractMentions(e),s=Ember.get(this,"requesterTwitterId");return-1===t.indexOf(s)?(this.sendAction("showError","requesterHandleRequired"),!0):(this.sendAction("removeError","requesterHandleRequired"),!1)}});e.default=d})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/twitter-reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"dN5DrdEM",block:'{"symbols":["d","d","options","dropdown","option"],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__profilepic"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__switch"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["type","onChange","quickReply"],["reply",[27,"action",[[22,0,[]],"onChange"],null],[23,["quickReply"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__replyhandle"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["twitterHandles","length"]],1],null]],null,{"statements":[[0,"        "],[1,[27,"svg-jar",["twitter"],[["class"],["app-icon app-icon--small app-icon--topalign twitter-icon"]]],false],[0,"\\n        "],[1,[27,"twitter-handle",[[23,["selectedHandle","screenName"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"ui-components/drop-down",null,[["selected"],[[23,["selectedHandle"]]]],{"statements":[[4,"component",[[22,2,["trigger"]]],null,{"statements":[[0,"            "],[1,[27,"svg-jar",["twitter"],[["class"],["app-icon app-icon--small app-icon--topalign twitter-icon"]]],false],[0,"\\n            "],[7,"span"],[11,"class","twitterreply__handle"],[9],[1,[27,"twitter-handle",[[23,["selectedHandle","screenName"]]],null],false],[10],[0,"\\n            "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,2,["content"]]],[["options"],[[23,["twitterHandles"]]]],{"statements":[[4,"each",[[22,3,[]]],null,{"statements":[[0,"              "],[7,"div"],[12,"onclick",[27,"action",[[22,0,[]],"changeAgentHandle",[22,5,[]],[22,4,[]]],null]],[12,"class",[28,["dropdown__option ",[27,"if",[[27,"eq",[[22,5,["id"]],[23,["selectedHandle","id"]]],null],"selected"],null]]]],[9],[0,"\\n                "],[1,[27,"twitter-handle",[[22,5,["screenName"]]],null],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[5]},null]],"parameters":[3,4]},null]],"parameters":[2]},null]],"parameters":[]}],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__tweettype"],[9],[0,"\\n"],[4,"ui-components/drop-down",null,[["selected"],[[23,["tweetType"]]]],{"statements":[[4,"component",[[22,1,["trigger"]]],null,{"statements":[[0,"          "],[1,[27,"svg-jar",[[23,["selectedMessageType","id"]]],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0,"\\n          "],[7,"span"],[9],[1,[27,"t",[[23,["selectedMessageType","label"]]],null],false],[10],[0,"\\n          "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[27,"component",[[22,1,["content"]]],[["options","title","onChange"],[[23,["messageType"]],[27,"t",["ticket.details.postas"],null],[27,"action",[[22,0,[]],"onChangeTweetType"],null]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n    "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__label text__infotext mt-2"],[9],[1,[27,"t",["fd.to"],null],false],[0,": "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__email ticket-action__requester"],[9],[1,[23,["ticket","requester","twitterId"]],false],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"ui-form/editor/social-editor",null,[["value","maxCount","ticket","showAttachmentBtn","sourceType","messageType","isTwitterMention","attachmentConfig","installedApps","canShowSurveys","updateSurveyMonkey","onInsertAttachment","onRemoveAttachment","updateArticlesSuggested","solutionArticleSuggest","cannedResponseSuggest"],[[23,["bodyText"]],[23,["maxCount"]],[23,["ticket"]],true,"twitter",[23,["tweetType"]],[23,["isTwitterMention"]],[23,["attachmentConfig"]],[23,["installedApps"]],[23,["canShowSurveys"]],[27,"action",[[22,0,[]],"updateSurveyMonkey"],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[27,"action",[[22,0,[]],"updateArticlesSuggested"],null],[23,["solutionArticleSuggest"]],[23,["cannedResponseSuggest"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","element-inline reply-btn-wrapper"],[9],[0,"\\n      "],[7,"button"],[11,"data-test-id","discard-draft-twitter"],[12,"onclick",[27,"action",[[22,0,[]],"discardConversation"],null]],[11,"class","btn discard-draft app-icon-btn"],[9],[0,"\\n        "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","reply-btn"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["buttonClass","canSetStatus","disableSubmit","onSend","ticket"],["btn--twitter",[27,"not",[[23,["quickReply"]]],null],[27,"not",[[27,"and",[[27,"eq",[[23,["hasBodyText"]],true],null],[27,"lte",[[23,["bodyTextLength"]],[23,["maxCount"]]],null]],null]],null],[27,"action",[[22,0,[]],"sendConversation"],null],[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/twitter-reply/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/whatsapp-reply/component",["exports","freshdesk/utils/object-filter","freshdesk/mixins/tickets/ticket-action","freshdesk/mixins/shortcuts/ticket-details/ticket-editor","freshdesk/mixins/tickets/editor-attachment","freshdesk/constants/whatsapp","freshdesk/utils/whatsapp"],(function(e,t,s,n,i,a,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=Ember.Component.extend(s.default,n.default,i.default,{store:Ember.inject.service(),quickReply:!1,whatsAppSource:"whatsapp",attachmentConfig:a.ATTACHMENT_CONFIG,includeTicketIdInReplies:Ember.computed.reads("whatsApp.settings.actions.includeTicketIdInReplies"),bodyText:Ember.computed.alias("replyModel.body"),attachments:Ember.computed.alias("replyModel.attachment_ids"),bodyTextLength:Ember.computed.reads("bodyText.length"),hasNoBodyText:Ember.computed.equal("bodyTextLength",0),hasNoAttachments:Ember.computed.equal("attachments.length",0),hasNoContent:Ember.computed.and("hasNoBodyText","hasNoAttachments"),disableSubmitButton:Ember.computed.or("hasNoContent","isCharactersExceededLimit"),channelId:Ember.computed.or("ticket.channelInfo.id","whatsApp.id"),whatsAppChannels:Ember.computed("ticket.channelInfo",(function(){return Ember.get(this,"store").peekAll("channel")})),whatsApp:Ember.computed("whatsAppChannels.length",(function(){return r.default.fetchChannelApp(this.ticket,this.whatsAppChannels)})),isCharactersExceededLimit:Ember.computed("maxCount","bodyTextLength",(function(){return this.bodyTextLength>this.maxCount})),maxCount:Ember.computed("includeTicketIdInReplies",(function(){return this.includeTicketIdInReplies?a.MAX_COUNT-a.TICKET_ID_BORDER_LENGTH-this.ticket.id.toString().length:a.MAX_COUNT})),replyModel:Ember.computed("channelUniqueId","channelId",(function(){return Ember.Object.create({profile_unique_id:this.channelUniqueId,channel_id:parseInt(this.channelId),body:"",articles_suggested:[]})})),channelUniqueId:Ember.computed("ticket.{channelInfo,requester}",(function(){var e=Ember.getProperties(this.ticket.requester,"phone","mobile"),t=e.phone,s=e.mobile;return this.ticket.channelInfo&&[t,s].includes(this.ticket.channelInfo.profile_unique_id)?this.ticket.channelInfo.profile_unique_id:t||s||0})),actions:{sendConversation:function(e){var s="[#".concat(this.ticket.id,"]\n");this.includeTicketIdInReplies&&!this.replyModel.body.includes(s)&&Ember.set(this,"replyModel.body","".concat(s).concat(this.replyModel.body));var n=(0,t.default)(this.replyModel,a.ALLOWED_NOTE_FIELDS);return Ember.get(this,"sendConversation")(n,e)}}});e.default=l})),define("freshdesk/components/module-tickets/ticket-details/ticket-actions/whatsapp-reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5tX0KdQl",block:'{"symbols":[],"statements":[[7,"div"],[12,"class",[28,["ticket-action ",[27,"unless",[[23,["quickReply"]],"ticket-action__showpage"],null]]]],[11,"data-test-id","whatsapp-reply"],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-action__fields whatsapp-reply"],[9],[0,"\\n    "],[1,[27,"app-components/avatar-user",null,[["class","size","user"],["ticket-action__field app-icon--xxlarge","medium-secondary",[23,["currentUser","record","contact"]]]]],false],[0,"\\n    "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/change-actions",null,[["class","type","ticket","onChange","quickReply"],["ticket-action__field ticket-action__switch mt-5","reply",[23,["ticket"]],[27,"action",[[22,0,[]],"onChange"],null],[23,["quickReply"]]]]],false],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field requester-info ticket-action__requester element-flex pl-4 mt-5"],[9],[0,"\\n      "],[1,[27,"svg-jar",["whatsapp"],[["class"],["app-icon--normal app-icon--topalign float-left whatsapp-icon"]]],false],[0,"\\n      "],[7,"div"],[11,"class","ticket-action__field text--small pl-10 mt-2"],[11,"data-test-id","whatsapp-requester-detail"],[9],[0,"\\n        "],[7,"span"],[11,"data-test-id","replying-to-title"],[11,"class","text--normal"],[9],[1,[27,"t",["fd.replying-to"],null],false],[10],[0,"\\n        "],[7,"span"],[11,"data-test-id","requester-name-number"],[11,"class","text--extrabold"],[9],[1,[27,"ellipsis-text",[[23,["ticket","requesterName"]],15],null],false],[0," ("],[1,[27,"ellipsis-text",[[23,["channelUniqueId"]],15],null],false],[0,")"],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-action__field ticket-action__whatsappchannels border-radius--medium pb-6 pl-12 mt-6"],[9],[0,"\\n      "],[7,"span"],[11,"data-test-id","from-title"],[11,"class","pr-8"],[9],[1,[27,"t",["fd.from"],null],false],[0,":"],[10],[0,"\\n      "],[7,"span"],[11,"data-test-id","from-number"],[11,"class","whatsapp-channel pt-6 pb-6 pl-12 pr-12 border-radius--medium"],[9],[1,[23,["whatsApp","channelUniqueId"]],false],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-replying",null,[["agentsReplying"],[[23,["agentsReplying"]]]]],false],[0,"\\n"],[4,"ui-form/editor/social-editor",null,[["value","ticket","sourceType","attachmentConfig","showAttachmentBtn","onInsertAttachment","onRemoveAttachment","maxCount","oninput","updateArticlesSuggested","solutionArticleSuggest","cannedResponseSuggest"],[[23,["bodyText"]],[23,["ticket"]],[23,["whatsAppSource"]],[23,["attachmentConfig"]],[27,"launched",["whatsapp_outgoing_attachments"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["replyModel","attachment_ids"]]],null]],null],[27,"action",[[22,0,[]],"onRemoveAttachment"],null],[23,["maxCount"]],[27,"action",[[22,0,[]],[27,"if",[[23,["isCharactersExceededLimit"]],[23,["showError"]],[23,["removeError"]]],null],"maxWhatsAppCount"],null],[27,"action",[[22,0,[]],"updateArticlesSuggested"],null],[23,["solutionArticleSuggest"]],[23,["cannedResponseSuggest"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","element-inline reply-btn-wrapper"],[9],[0,"\\n"],[4,"nucleus-button",null,[["data-test-id","variant","iconOnly","class","onClick"],["discard-draft-whatsapp","secondary",true,"discard-draft",[27,"action",[[22,0,[]],[23,["discardConversation"]]],null]]],{"statements":[[0,"        "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"div"],[11,"class","reply-btn"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/send-and-set",null,[["canSetStatus","disableSubmit","onSend","ticket"],[[27,"not",[[23,["quickReply"]]],null],[23,["disableSubmitButton"]],[27,"action",[[22,0,[]],"sendConversation"],null],[23,["ticket"]]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-actions/whatsapp-reply/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/ticket-header/component",["exports","freshdesk/utils/whatsapp"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({moment:Ember.inject.service(),tagName:"",meta:Ember.computed.reads("ticket.meta"),createdBy:Ember.computed.reads("ticket.meta.createdAgent"),userAgent:Ember.computed.reads("ticket.meta.userAgent"),ticketSubject:Ember.computed.reads("ticket.subject"),ticketForm:Ember.computed.reads("ticket.ticketForm"),isOutboundEmail:Ember.computed.reads("ticket.isOutboundEmail"),showNoReplyWhatsAppAlert:Ember.computed("ticket.conversations.[]",(function(){return this.ticket.isWhatsapp&&t.default.lastWhatsAppConversationCreatedTime(this.ticket,this.moment)>=24})),ticketSubjectInfo:Ember.computed("ticketSubject",(function(){return Ember.isPresent(Ember.get(this,"ticketSubject"))?Ember.get(this,"ticketSubject"):"--"})),showSpamAlert:Ember.computed("ticket.emailSpamData",(function(){if(Ember.get(this,"ticket.emailSpamData")){var e=null===Ember.get(this,"ticket.emailSpamData.DKIM")||Ember.get(this,"ticket.emailSpamData.DKIM"),t=null===Ember.get(this,"ticket.emailSpamData.SPF")||Ember.get(this,"ticket.emailSpamData.SPF");return!(e&&t)}return!1}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/ticket-header/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"g426EVYR",block:'{"symbols":[],"statements":[[4,"if",[[23,["ticket","archiveTicket"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"data-test-div","archive-linked-ticket-alert"],[11,"class","archive-warning ticket-details-banner"],[9],[0,"\\n    "],[1,[27,"svg-jar",["alert-icon"],[["class"],["app-icon archive-warning--icon app-icon--regularsecondary app-icon--orange"]]],false],[0,"\\n    "],[7,"span"],[11,"aria-labelledby","archive-warning helptext"],[11,"class","archive-warning--help-text text--default"],[9],[0,"\\n      "],[1,[27,"t",["ticket.details.archive_ticket_text"],null],false],[0,"\\n      "],[4,"link-to",["helpdesk.tickets.show",[23,["ticket","archiveTicket","id"]]],null,{"statements":[[1,[27,"t",["ticket.details.archive_ticket_link"],null],false]],"parameters":[]},null],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showNoReplyWhatsAppAlert"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"data-test-id","whatsapp-reply-expired-alert"],[11,"class","archive-warning ticket-details-banner"],[9],[0,"\\n    "],[1,[27,"svg-jar",["alert-icon"],[["class"],["app-icon archive-warning--icon app-icon--regularsecondary app-icon--orange"]]],false],[0,"\\n    "],[7,"span"],[11,"aria-labelledby","whatsapp-reply-expired-warning helptext"],[11,"class","archive-warning--help-text text--default"],[11,"data-test-id","whatsapp-reply-expired-text"],[9],[0,"\\n      "],[1,[27,"t",["ticket.details.whatsapp_reply_time_expired"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ticket","archived"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"data-test-div","archived-alert"],[11,"class","archive-warning ticket-details-banner"],[9],[0,"\\n    "],[1,[27,"svg-jar",["alert-icon"],[["class"],["app-icon archive-warning--icon app-icon--regularsecondary app-icon--orange"]]],false],[0,"\\n    "],[7,"span"],[11,"aria-labelledby","archive-warning helptext"],[11,"class","archive-warning--help-text text--default"],[9],[0,"\\n      "],[7,"span"],[11,"class","text--semibold"],[9],[1,[27,"t",["tickets.details.archived_ticket"],null],false],[0," "],[10],[0,"\\n      "],[1,[27,"t",["ticket.details.archive_ticket_info"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["showSpamAlert"]],[27,"not",[[23,["ticket","spam"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","spam-alert ticket-details-banner"],[11,"data-test-id","spam-alert-container"],[9],[0,"\\n    "],[1,[27,"ui-components/quick-tips",null,[["typeIcon","type","size","title","linkText","linkAction","onClose","class"],["alert-icon","error","regularsecondary",[27,"t",["ticket.spam-alert.title"],null],[27,"t",["condition.mark_as_spam"],null],[27,"action",[[22,0,[]],[23,["markAsSpam"]],[23,["ticket"]]],null],[27,"action",[[22,0,[]],[27,"toggle",["showSpamAlert",[22,0,[]]],null]],null],"ticket-details-header-spam"]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[1,[27,"app-components/ticket-status",null,[["ticket","showTicketDetailsTags","showAssociationInfo","showBar"],[[23,["ticket"]],true,true,true]]],false],[0,"\\n"],[7,"div"],[11,"class","ticket-details-header"],[9],[0,"\\n  "],[7,"div"],[11,"class","ticket-header-container"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-header mr-4"],[9],[0,"\\n      "],[7,"div"],[11,"class","element-flex align-items--center"],[9],[0,"\\n        "],[1,[27,"svg-jar",[[23,["ticket","sourceIcon"]]],[["class"],["app-icon app-icon--large"]]],false],[0,"\\n        "],[7,"span"],[11,"class","ticket-subject-heading text--large text--bold"],[9],[0,"\\n          "],[1,[21,"ticketSubjectInfo"],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[23,["isReverseOrder"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-created-info text--default"],[9],[0,"\\n          "],[1,[27,"app-components/contact-popover",null,[["user","class","outboundEmail"],[[23,["ticket","userContact"]],"text--default text--semibold",[23,["isOutboundEmail"]]]]],false],[0,"\\n          "],[7,"span"],[11,"data-test-id","ticket-source"],[11,"class","created-info"],[9],[0,"\\n            "],[1,[23,["ticket","sourceLabel"]],false],[0,"\\n          "],[10],[0,"\\n"],[4,"if",[[23,["isOutboundEmail"]]],null,{"statements":[[0,"            "],[1,[27,"app-components/contact-popover",null,[["user","class","outboundEmail"],[[23,["ticket","requester"]],"text--semibold",true]]],false],[0,"  \\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["createdBy","name"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","created-by text--verylightgrey mr-4"],[9],[0,"\\n              "],[1,[27,"t",["fd.createdby"],null],false],[0," \\n            "],[10],[0,"\\n            "],[7,"span"],[11,"class","text--dark text--semibold"],[9],[0,"  \\n              "],[1,[23,["createdBy","name"]],false],[0," \\n            "],[10],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"not",[[23,["isOutboundEmail"]]],null],[23,["createdBy","name"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-created-info text--default"],[9],[0,"\\n          "],[7,"span"],[11,"class","text--verylightgrey mr-4"],[9],[0,"\\n            "],[1,[27,"t",["fd.createdby"],null],false],[0," \\n          "],[10],[0,"\\n          "],[7,"span"],[11,"class","text--dark text--semibold"],[9],[0,"  \\n            "],[1,[23,["createdBy","name"]],false],[0," \\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["userAgent"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/meta-info",null,[["meta","userAgent","ticketForm"],[[23,["meta"]],[23,["userAgent"]],[23,["ticketForm"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/ticket-header/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/top-navigation/component",["exports","ember-local-storage","freshdesk/mixins/filter-list/controller/filter-query-methods","freshdesk/mixins/shortcuts/ticket-details/top-navigation","freshdesk/constants/ticket","@freshworks/ember-collaboration-threads/constants/thread","freshdesk/mixins/filter-list/ticket-filter-defaults","freshdesk/constants/threads/ticket","ember-window-mock"],(function(e,t,s,n,i,a,r,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=Ember.Component.extend(n.default,s.default,r.default,{store:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),marketplaceAdapter:Ember.inject.service(),shortcutsTooltip:Ember.inject.service(),marketplace:Ember.inject.service(),eventSources:Ember.inject.service(),currentUser:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),collabThreadTickets:Ember.inject.service(),showActivity:!1,miniList:!0,updatePgnObj:!1,showConfirmDialog:!1,roboAssistEnabled:!1,actionTriggered:"",printUrl:i.default.printUrl,recentlyViewedCache:(0,t.storageFor)("tickets-list/recently-viewed"),filterId:Ember.computed.reads("ticketParamsCache.filter"),perPage:Ember.computed.reads("ticketParamsCache.perPage"),page:Ember.computed.reads("ticketParamsCache.page"),ticketList:Ember.computed.reads("recentlyViewedCache.resourceList"),ticketsCount:Ember.computed.reads("recentlyViewedCache.resourceCount"),filterTitle:Ember.computed.reads("recentlyViewedCache.resourceListLabel"),filterQueryModified:Ember.computed.reads("recentlyViewedCache.resourceListModified"),currentResource:Ember.computed.reads("ticket.id"),activitiesSwitcher:Ember.computed.or("ticket.{isActionable,archived}"),hidePagination:Ember.computed.reads("ticket.archived"),hideSpamButtonTd:Ember.computed("mkpInterface.controlData.ticketSpamBtn.hide","marketplaceAdapter.controlData.ticketSpamBtn.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketSpamBtn.hide"):Ember.get(this,"mkpInterface.controlData.ticketSpamBtn.hide")})),hideDeleteButtonTd:Ember.computed("mkpInterface.controlData.ticketDeleteBtn.hide","marketplaceAdapter.controlData.ticketDeleteBtn.hide",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketDeleteBtn.hide"):Ember.get(this,"mkpInterface.controlData.ticketDeleteBtn.hide")})),disableDeleteButtonTd:Ember.computed("mkpInterface.controlData.ticketDeleteBtn.disable","marketplaceAdapter.controlData.ticketDeleteBtn.disable",(function(){return Ember.get(this,"marketplaceAdapter").isFreshParentEnabled()?Ember.get(this,"marketplaceAdapter.controlData.ticketDeleteBtn.disable"):Ember.get(this,"mkpInterface.controlData.ticketDeleteBtn.disable")})),hideAddNoteButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideNote"),disableAddNoteButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableNote"),hideReplyButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideReply"),disableReplyButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableReply"),hideForwardButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.hideForward"),disableForwardButtonTd:Ember.computed.readOnly("mkpInterface.controlData.replyNote.disableForward"),showArchiveDelete:Ember.computed.and("hasDeleteTicketAbility","ticket.archived"),showArchivePrint:Ember.computed.reads("ticket.archived"),isFSMEnabled:Ember.computed.reads("currentAccount.fsmEnabled"),forwardType:Ember.computed("collabThreadTickets.isForwardThreadingEnabled",(function(){return this.collabThreadTickets.isForwardThreadingEnabled?i.FORWARD_TYPE.latest:i.FORWARD_TYPE.description})),forwardHeapId:Ember.computed("collabThreadTickets.isForwardThreadingEnabled",(function(){return this.collabThreadTickets.isForwardThreadingEnabled?a.FORWARD_HEAP_DATA.topNav:null})),canMergeTicket:Ember.computed("currentUser","hasPermission",(function(){var e=this.get("ticket.type")===i.default.serviceTaskType,t=this.currentUser.hasPermissions({model:this.ticket,abilities:["merge_or_split_ticket"]});return!(this.get("ticket.associationType")||e)&&t})),hasPermission:Ember.computed.reads("ticket.hasPermission"),twitterBlocked:Ember.computed("ticket.source",(function(){return Ember.get(this,"currentAccount.config.social.twitter_app_blocked")&&Ember.get(this,"ticket.source")===i.TWITTER_SOURCE})),hasDeleteTicketAbility:Ember.computed("currentUser","hasPermission",(function(){var e={model:Ember.get(this,"ticket"),abilities:["delete_ticket"]};return Ember.get(this,"currentUser").hasPermissions(e)})),canShowDeleteOption:Ember.computed((function(){return!!this.isFSMEnabled&&(this.get("ticket.type")===i.default.serviceTaskType?this.currentUserPrivileges.hasServiceTaskDeletePrivilege:this.hasDeleteTicketAbility)})),hasEditTicketAbility:Ember.computed("currentUser","hasPermission",(function(){var e={model:Ember.get(this,"ticket"),abilities:["edit_ticket_properties"]};return Ember.get(this,"currentUser").hasPermissions(e)})),hasWatcherFeature:Ember.computed("hasPermission",(function(){return Ember.get(this,"currentAccount").hasFeature("add_watcher")&&Ember.get(this,"hasPermission")})),isStatusResolved:Ember.computed("ticket.status",(function(){return Ember.get(this,"ticket.status")==i.default.status.resolved})),canCreateServiceTask:Ember.computed("hasPermission",(function(){var e=Ember.get(this,"ticket.associationType");return Ember.get(this,"isFSMEnabled")&&Ember.get(this,"ticket.canBeAssociated")&&(!e||e&&e===i.default.associationType.parent)&&this.currentUserPrivileges.canCreateChildServiceTask})),canConvertToTopic:Ember.computed("ticket",(function(){var e=Ember.isEmpty(Ember.get(this,"ticket.ticketTopic")),t=Ember.get(this,"ticket.requesterId"),s=Ember.get(Ember.get(this,"store").peekRecord("contact",t),"active"),n={model:Ember.get(this,"ticket"),abilities:["create_topic"],features:["forums"]};return Ember.get(this,"currentUser").hasPermissions(n)&&e&&s})),mergeLabel:Ember.computed("ticket.associationType",(function(){var e=Ember.get(this,"ticket.associationType"),t=Ember.get(this,"i18n").t("tickets.ticket_associations.ticket_actions.mergebtnlabel"),s=Ember.get(this,"i18n").t("tickets.merge");return e?t:s})),isTicketClosable:Ember.computed("ticket.updatedAt","hasPermission",(function(){var e=!(Ember.get(this,"ticket.isMarkedClosed")&&!Ember.get(this,"isStatusResolved"));return Ember.get(this,"hasEditTicketAbility")&&e&&Ember.get(this,"hasPermission")})),saveButtonLabel:Ember.computed("actionTriggered",(function(){var e=Ember.get(this,"actionTriggered");return"delete"===e?Ember.get(this,"showArchiveDelete")?Ember.get(this,"i18n").t("tickets.ticket_associations.ticket_actions.delete_forever"):Ember.get(this,"i18n").t("tickets.ticket_associations.ticket_actions.".concat(e,"_button")):Ember.get(this,"i18n").t("tickets.ticket_associations.ticket_actions.".concat(e))})),associationType:Ember.computed("ticket.associationType",(function(){var e=Ember.get(this,"ticket.associationType");return e?i.default.ticketAssociations[e]:""})),isTrackerNormalDelete:Ember.computed("associationType","actionTriggered",(function(){var e="tracker"===Ember.get(this,"associationType"),t=Ember.get(this,"ticket.associatedTicketsCount"),s="delete"===Ember.get(this,"actionTriggered");return e&&!t&&s})),isScenarioWarning:Ember.computed("actionTriggered","associationType",(function(){var e="parent"===Ember.get(this,"associationType"),t="scenario"===Ember.get(this,"actionTriggered");return e&&t})),threadParent:Ember.computed("currentResource",(function(){return{id:this.currentResource,type:l.THREAD_ANCHOR_PARENT.ticket,label:Ember.get(this,"i18n").t("fd.ticket"),reference:this.ticket}})),canAddMoreTasks:Ember.computed("ticket.associatedTicketsCount",(function(){return(Ember.get(this,"ticket.associatedTicketsCount")||0)<i.MAX_CHILD_COUNT})),serviceTaskButtonLabel:Ember.computed("currentAccount.accountData.launched.[]",(function(){return this.currentAccount.launched("independent_service_task")?"fsm.child_service_task":"tickets.new.serviceTask"})),init:function(){this._super.apply(this,arguments),this.currentAccount.hasFeature("robo_assist_ultimate")&&this.store.findAll("robo-assist").then(this.roboAssistSuccess.bind(this))},roboAssistSuccess:function(e){this.set("roboAssistEnabled",!!e.length&&e.firstObject.enabled)},actions:{openCollab:function(){this.sendAction("expandCollab",{scrollToBottom:!0})},createServiceTask:function(){Ember.get(this,"canAddMoreTasks")&&this.associateTicketsSlider("createServiceTask")},showAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ember.get(this,"showAction")(e,t)},closeTicket:function(e){var t=this;Ember.set(this,"closeDisableWhen",!0),Ember.get(this,"marketplace").publishEvent({event:"ticket.closeTicketClick"}).then((function(){return t._closeTicket(e)})).catch((function(e){return t._closeTicketError(e)}))},showTimeEntryForm:function(){var e=Ember.get(this,"ticket");this.showTimeEntryForm(null,e)},showEdit:function(e){this.attrs.showEdit(e)},delete:function(){Ember.set(this,"showConfirmDialog",!0),Ember.set(this,"actionTriggered","delete")},print:function(e){o.default.open(i.default.printUrl.concat("".concat(e,"/print")),"_blank")},markAsSpam:function(){var e=Ember.get(this,"ticket"),t=Ember.get(this,"associationType");"related"===t||"child"===t||("parent"===t||"tracker"===t)&&Ember.get(e,"associatedTicketsCount")?(Ember.set(this,"showConfirmDialog",!0),Ember.set(this,"actionTriggered","spam")):Ember.get(this,"markAsSpam")(e)},showExecuteSenario:function(){"parent"===Ember.get(this,"associationType")?(Ember.set(this,"showConfirmDialog",!0),Ember.set(this,"actionTriggered","scenario")):this.sendAction("showExecuteSenario")},confirmAction:function(e){var t=this,s=Ember.get(this,"ticket");switch(Ember.set(this,"showConfirmDialog",!1),e){case"delete":Ember.get(this,"marketplace").publishEvent({event:"ticket.deleteTicketClick"}).then((function(){return t._deleteTicket(s)})).catch((function(e){return t._mkpPublishEventError("marketplace.errors.tickets.delete",e)}));break;case"spam":Ember.get(this,"markAsSpam")(s);break;case"scenario":this.sendAction("showExecuteSenario")}},showhideActivity:function(e,t){Ember.set(this,"showActivity",e),this.attrs.showhideActivity(e,t)},pageChanged:function(){this.toggleShowHideActivity()},toggleShowHideActivity:function(){var e=Ember.get(this,"ticket"),t=Ember.get(this,"showActivity");this.send("showhideActivity",!t,e)},onTicketChange:function(e){this.attrs.onTicketChange(e)},loadMiniListTickets:function(e){var t=this,s=Ember.get(this,"store"),n=e.filter((function(e){return!s.hasRecordForId("ticket",e)}));if(n.length>0){var i={include:"requester,stats",ids:n.join(","),exclude:"custom_fields"};return s.query("ticket",i).then((function(){var n=e.filter((function(e){return s.hasRecordForId("ticket",e)}));Ember.set(t,"recentlyViewedCache.resourceList",n)}))}return{}},focusSelected:function(){this.scrollMinilist(50)},editTicket:function(){Ember.get(this,"disableEditButtonTd")||this.sendAction("initiateEditPage")}},scrollMinilist:function(e){var t=this;Ember.run.later((function(){var e=Ember.$('.tickets__list[data-ticket-id="'.concat(Ember.get(t,"ticket.id"),'"]'));e.length>0&&e[0].scrollIntoView({block:"end",behavior:"smooth"})}),e)},_setCloseDisableWhen:function(){Ember.set(this,"closeDisableWhen",!1)},_closeTicket:function(e){Ember.get(this,"closeTicket")(e).then(this._setCloseDisableWhen.bind(this))},_closeTicketError:function(e){Ember.set(this,"closeDisableWhen",!1),this._mkpPublishEventError("marketplace.errors.tickets.close",e)},_deleteTicket:function(e){Ember.get(this,"delete")(e)},_mkpPublishEventError:function(e,t){Ember.get(this,"eventSources").errorHandler(e,t)}});e.default=c})),define("freshdesk/components/module-tickets/ticket-details/top-navigation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ct0NkJhV",block:'{"symbols":["hashObj","dropdown","renderHash"],"statements":[[7,"div"],[9],[0,"\\n  "],[1,[27,"app-components/app-maintitle",null,[["title","titleroute","breadcrumb","ticket","titleModified"],[[27,"if",[[23,["filterTitle"]],[27,"truncate",[[23,["filterTitle"]],25,true],null],"Tickets"],null],"helpdesk.tickets",[23,["ticket","id"]],[23,["ticket"]],[23,["filterQueryModified"]]]]],false],[0,"\\n\\n"],[4,"ember-wormhole",null,[["to"],["mainactionbar"]],{"statements":[[0,"    "],[7,"div"],[11,"class","page-actions__left reply-bar-wrapper-top"],[9],[0,"\\n"],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[4,"if",[[23,["hasWatcherFeature"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/add-watcher",null,[["ticket","scenarioWatchers"],[[23,["ticket"]],[23,["scenarioWatchers"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n        "],[7,"div"],[11,"class","reply-bar-top"],[9],[0,"\\n"],[4,"if",[[27,"and",[[27,"haspermissions",null,[["model","abilities"],[[23,["ticket"]],"reply_ticket"]]],[23,["showTicketReply"]],[27,"not",[[23,["hideReplyButtonTd"]]],null]],null]],null,{"statements":[[4,"if",[[23,["showOmniChannelReply"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/ticket-details/ticket-actions/shared/omnichannel-reply-dropdown",null,[["showAction","replyOptions","currentReplyChannel","setReplyChannel","selected","buttonClass","addOptionTestId","ariaButtonLabel","data-test-id","disabledReplyBtn"],[[23,["showAction"]],[23,["replyOptions"]],[23,["currentReplyChannel"]],[23,["setReplyChannel"]],[23,["currentReplyChannel"]],"omni-reply-top",true,[23,["shortcutsTooltip","tickets","reply"]],"omnichannel-reply-dropdown",[27,"or",[[23,["disableReplyButtonTd"]],[23,["twitterBlocked"]]],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["data-test-email-action","ariaLabel","onClick","customClass","icon","label","disabled","variant"],["reply",[23,["shortcutsTooltip","tickets","reply"]],[27,"action",[[22,0,[]],"showAction","reply"],null],"btn-collapse app-icon-btn--text hint--rounded hint--bottom","reply",[27,"t",["tickets.action.reply"],null],[27,"or",[[23,["disableReplyButtonTd"]],[23,["twitterBlocked"]]],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"unless",[[23,["hideAddNoteButtonTd"]]],null,{"statements":[[0,"            "],[1,[27,"nucleus-button",null,[["data-test-note-action","onClick","ariaLabel","customClass","icon","label","disabled","variant"],["add",[27,"action",[[22,0,[]],"showAction","notes"],null],[23,["shortcutsTooltip","tickets","addNote"]],"btn-collapse app-icon-btn--text hint--rounded hint--bottom","addnote",[27,"t",["tickets.action.notes"],null],[23,["disableAddNoteButtonTd"]],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"haspermissions",null,[["model","abilities"],[[23,["ticket"]],"forward_ticket"]]],[27,"not",[[23,["hideForwardButtonTd"]]],null]],null]],null,{"statements":[[0,"            "],[5,"nucleus-button",[[11,"class","btn-collapse app-icon-btn--text hint--rounded hint--bottom"],[11,"data-test-email-action","forward"],[12,"data-heap-id",[21,"forwardHeapId"]]],[["@ariaLabel","@variant","@icon","@disabled","@label","@onClick"],[[23,["shortcutsTooltip","tickets","forward"]],"secondary","forward",[21,"disableForwardButtonTd"],[27,"t",["tickets.action.forward"],null],[27,"action",[[22,0,[]],"showAction","forward",[23,["forwardType"]]],null]]]],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n\\n"],[4,"if",[[23,["isTicketClosable"]]],null,{"statements":[[4,"async-button",null,[["data-test-id","click","disableWhen","data-test-actions","aria-label","class"],["close-top-navigation",[27,"action",[[22,0,[]],"closeTicket"],[["allowedKeys"],["shift"]]],[23,["closeDisableWhen"]],"close",[27,"t",["tickets.shift_close"],null],"hint--rounded hint--bottom app-icon-btn app-icon-btn--text hint--rounded hint--bottom"]],{"statements":[[0,"            "],[1,[27,"svg-jar",["close-ticket"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.close"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["canMergeTicket"]]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","data-test-actions","customClass","icon","label","variant"],[[27,"action",[[22,0,[]],[23,["merge"]],[23,["ticket"]]],null],[27,"t",["fd.merge"],null],"merge","app-icon-btn--text hint--rounded hint--bottom","merge",[27,"t",["tickets.merge"],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"not",[[23,["isFSMEnabled"]]],null],[23,["hasDeleteTicketAbility"]],[27,"not",[[23,["hideDeleteButtonTd"]]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","data-test-id","data-test-actions","customClass","icon","label","disabled","variant"],[[27,"action",[[22,0,[]],"delete",[23,["ticket"]]],null],[23,["shortcutsTooltip","tickets","delete"]],"top-navigation-delete","tktDelete","app-icon-btn--text hint--rounded hint--bottom","delete",[27,"t",["tickets.delete"],null],[23,["disableDeleteButtonTd"]],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canCreateServiceTask"]]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","data-test-actions","customClass","icon","label","disabled","variant"],[[27,"action",[[22,0,[]],"createServiceTask"],null],[27,"if",[[23,["canAddMoreTasks"]],[23,["shortcutsTooltip","ticketDetail","createServiceTask"]],[27,"t",["field_service_management.service_tasks_limit"],null]],null],"serviceTaskCreate","app-icon-btn--text hint--rounded hint--bottom","new",[27,"t",[[23,["serviceTaskButtonLabel"]]],null],[27,"not",[[23,["canAddMoreTasks"]]],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"not",[[23,["ticket","hasPermission"]]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","data-test-actions","customClass","icon","label","variant"],[[27,"action",[[22,0,[]],"print",[23,["ticket","id"]]],null],[27,"t",["tickets.print"],null],"print-button","app-icon-btn--text hint--rounded hint--bottom","print-icon",[27,"t",["tickets.print"],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["roboAssistEnabled"]]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["icon","iconSize","label","variant","data-test-id","class","aria-label","onClick"],["robo-assist-agent","medium",[27,"t",["tickets.robo_assist"],null],"secondary","tktWorkflow","hint--rounded hint--bottom",[27,"t",["common.refresh"],null],[27,"action",[[22,0,[]],[23,["openWorkflowOverlay"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[2,[23,["ticket","id"]],"ticketTopNavigationApps",false]],{"statements":[[4,"component",[[22,3,["render-content"]]],null,{"statements":[[0,"            "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","context","isVisible","tagName"],["ticket_top_navigation",[23,["ticket","id"]],true,""]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[3]},null],[4,"basic-dropdown",null,[["class","renderInPlace"],["app-dropdown-group",true]],{"statements":[[0,"\\n"],[4,"if",[[27,"haspermissions",null,[["model"],[[23,["ticket"]]]]]],null,{"statements":[[4,"component",[[22,2,["trigger"]]],null,{"statements":[[0,"              "],[1,[27,"nucleus-button",null,[["ariaLabel","customClass","data-test-actions","icon","iconOnly","iconSize","variant"],[[27,"t",["tickets.more"],null],"app-icon-btn--text hint--rounded hint--top dropdown-toggle","more","more",true,"medium","secondary"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,2,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"            "],[7,"ul"],[11,"class","dropdown-menu app-dropdown"],[3,"action",[[22,0,[]],[22,2,["actions","close"]]]],[9],[0,"\\n"],[4,"if",[[23,["canShowDeleteOption"]]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[11,"href","#"],[11,"data-test-actions","deleteAction"],[11,"class","app-dropdown__item"],[3,"action",[[22,0,[]],"delete",[23,["ticket"]]]],[9],[0,"\\n                    "],[1,[27,"t",["tickets.delete"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canExecuteScenarios"]]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[11,"href",""],[11,"data-test-actions","senario"],[11,"class","app-dropdown__item"],[3,"action",[[22,0,[]],"showExecuteSenario"]],[9],[0,"\\n                    "],[1,[27,"t",["fd.executescenario"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canConvertToTopic"]]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[12,"href",[27,"generate-url",["forums/new","",[27,"hash",null,[["ticket_id"],[[23,["ticket","id"]]]]]],null]],[11,"data-test-actions","topic"],[11,"class","app-dropdown__item"],[9],[0,"\\n                    "],[1,[27,"t",["fd.converttotopic"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["hasTimesheetsFeatureAndAbility"]],[23,["ticket","hasPermission"]]],null]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[11,"href",""],[11,"class","app-dropdown__item"],[11,"data-test-actions","addTimeEntry"],[3,"action",[[22,0,[]],"showTimeEntryForm",[23,["ticket"]]]],[9],[0,"\\n                    "],[1,[27,"t",["tickets.addtime"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["ticket","isActionable"]],[23,["isEditable"]],[27,"not",[[23,["hideEditButtonTd"]]],null]],null]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[11,"role","button"],[12,"onclick",[27,"action",[[22,0,[]],"editTicket"],null]],[11,"data-test-actions","editTicketTop"],[12,"class",[28,["app-dropdown__item ",[27,"if",[[23,["disableEditButtonTd"]],"disabled"],null]]]],[9],[0,"\\n                    "],[1,[27,"t",["fd.editTicketDetails"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ticket","hasPermission"]]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[12,"href",[27,"concat",[[23,["printUrl"]],[23,["ticket","id"]],"/print"],null]],[11,"data-test-actions","print"],[11,"target","_blank"],[11,"rel","noopener"],[12,"onclick",[27,"action",[[22,0,[]],[22,2,["actions","close"]]],null]],[11,"class","app-dropdown__item"],[9],[0,"\\n                    "],[1,[27,"t",["tickets.print"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"not",[[23,["hideSpamButtonTd"]]],null],[23,["ticket","hasPermission"]],[23,["currentUserPrivileges","hasSpamTicketPrivilege"]]],null]],null,{"statements":[[0,"                "],[7,"li"],[9],[0,"\\n                  "],[7,"a"],[11,"href",""],[11,"data-test-actions","markSpam"],[11,"class","app-dropdown__item"],[3,"action",[[22,0,[]],"markAsSpam",[23,["ticket"]]]],[9],[0,"\\n                    "],[1,[27,"t",["tickets.markasspam"],null],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[1,[27,"marketplace-list",null,[["mkpPlaceholder","context","isVisible","tagName"],["ticket_top_navigation",[23,["ticket","id"]],false,""]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["ticket","spam"]],[23,["ticket","hasPermission"]]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","data-test-actions","ariaLabel","customClass","icon","label","variant"],[[27,"action",[[22,0,[]],[23,["markUnSpam"]],[23,["ticket"]]],null],"markUnSpam",[27,"t",["tickets.unspam"],null],"app-icon-btn--text hint--rounded hint--bottom","resolved",[27,"t",["tickets.unspam"],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["showArchiveDelete"]],[27,"not",[[23,["hideDeleteButtonTd"]]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","data-test-actions","customClass","icon","label","disabled","variant"],[[27,"action",[[22,0,[]],"delete",[23,["ticket"]]],null],[23,["shortcutsTooltip","tickets","delete"]],"archive-delete","app-icon-btn--text hint--rounded hint--bottom","delete",[27,"t",["tickets.deleteforever"],null],[23,["disableDeleteButtonTd"]],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["showArchivePrint"]]],null,{"statements":[[0,"          "],[7,"a"],[12,"href",[28,["/helpdesk/tickets/archived/",[23,["ticket","id"]],"/print"]]],[11,"data-test-actions","print"],[11,"target","_blank"],[11,"rel","noopener"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"aria-label",[27,"t",["tickets.print"],null]],[9],[0,"\\n            "],[1,[27,"svg-jar",["print-icon"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.print"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["ticket","deleted"]],[23,["ticket","hasPermission"]]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","data-test-actions","ariaLabel","customClass","icon","label","variant"],[[27,"action",[[22,0,[]],[23,["restoreTicket"]],[23,["ticket"]]],null],"restoreTicket",[27,"t",["tickets.restore"],null],"app-icon-btn--text hint--rounded hint--bottom","refresh",[27,"t",["tickets.restore"],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"and",[[27,"haspermissions",null,[["model","abilities"],[[23,["ticket"]],"delete_ticket"]]],[27,"not",[[23,["ticket","archived"]]],null]],null]],null,{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["onClick","data-test-actions","ariaLabel","customClass","icon","label","variant"],[[27,"action",[[22,0,[]],[23,["deleteTicketForever"]],[23,["ticket"]]],null],"tktHardDelete",[27,"t",["tickets.deleteforever"],null],"app-icon-btn--text hint--rounded hint--bottom","delete",[27,"t",["tickets.deleteforever"],null],"secondary"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","page-actions__right"],[9],[0,"\\n      "],[7,"div"],[11,"id","sidebar-collapse"],[11,"class","pull-right ticket-sidebar--btn"],[9],[10],[0,"\\n"],[4,"unless",[[23,["hidePagination"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-pagination-widget",""],[11,"class","detail-pagination"],[9],[0,"\\n"],[4,"ui-components/resource-pagination",null,[["resourceList","currentResource","totalCount","perPage","pageNo","pageChanged","showMiniList","afterShowList","beforeShowList","resourceChanged","title","resourceModifiedFlag"],[[23,["ticketList"]],[23,["currentResource"]],[23,["ticketsCount"]],[23,["perPage"]],[23,["page"]],"onPageChange",[23,["miniList"]],"focusSelected",[27,"action",[[22,0,[]],"loadMiniListTickets"],null],"onTicketChange",[23,["filterTitle"]],[23,["filterQueryModified"]]]],{"statements":[[0,"\\n            "],[1,[27,"module-tickets/ticket-details/mini-list",null,[["ticketId","selectedId","dropdown","onClickCB"],[[22,1,["resource"]],[22,1,["currentResource"]],[22,1,["dropdown"]],[27,"action",[[22,0,[]],[22,1,["onClickCB"]]],null]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["activitiesSwitcher"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n          "],[1,[27,"nucleus-button",null,[["onClick","ariaLabel","customClass","icon","label","variant","data-test-toggle-activity"],[[27,"action",[[22,0,[]],"toggleShowHideActivity"],null],[23,["shortcutsTooltip","ticketDetail","activities"]],[27,"concat",["app-icon-btn--text hint--rounded hint--bottom app-icon-btn--toggle-state ",[27,"if",[[23,["showActivity"]],"app-icon-btn--active",""],null]],null],"activities",[27,"if",[[23,["showActivity"]],[27,"t",["tickets.activities.hide"],null],[27,"t",["tickets.activities.show"],null]],null],"secondary",true]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"hasfeature",["collab_threads_infra"],null]],null,{"statements":[[0,"        "],[1,[27,"collab-threads/threads-trigger",null,[["templateTasks","parent","threadsCount"],[[23,["threadTemplateTasks"]],[23,["threadParent"]],[23,["threadsCount"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[27,"module-tickets/ticket-details/agent-collision/agents-viewing",null,[["ticket","agentsViewing","agentsReplying"],[[23,["ticket"]],[23,["agentsViewing"]],[23,["agentsReplying"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showConfirmDialog"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close"],[[23,["saveButtonLabel"]],[23,["saveButtonLabel"]],[27,"action",[[22,0,[]],"confirmAction",[23,["actionTriggered"]]],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["showConfirmDialog"]]],null]],null]]],{"statements":[[0,"      "],[7,"p"],[9],[0,"\\n"],[4,"if",[[23,["isScenarioWarning"]]],null,{"statements":[[0,"          "],[1,[27,"t",["tickets.ticket_associations.ticket_actions.ticket_details.parent.scenario.description"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isTrackerNormalDelete"]]],null,{"statements":[[0,"            "],[1,[27,"t",["ticket.actions.tracker.delete.confirmation.message"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["associationType"]]],null,{"statements":[[0,"            "],[1,[27,"t",[[27,"concat",["tickets.ticket_associations.ticket_actions.",[23,["associationType"]],".",[23,["actionTriggered"]],".description"],null]],[["count"],[[23,["ticket","associatedTicketsCount"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["ticket.actions.delete.confirmation.message"],null],false],[0,"\\n          "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/top-navigation/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/component",["exports","freshdesk/constants/ticket"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({currentUserPrivileges:Ember.inject.service(),classNames:["__module-tickets__ticket-details__widgets__associate-tickets"],addChildsWithTemplate:!1,isTracker:Ember.computed.equal("ticket.associationType",t.default.associationType.tracker),isRelated:Ember.computed.equal("ticket.associationType",t.default.associationType.related),isParent:Ember.computed.equal("ticket.associationType",t.default.associationType.parent),isChild:Ember.computed.equal("ticket.associationType",t.default.associationType.child),canAddMoreChilds:Ember.computed("ticket.associatedTicketsCount",(function(){return Ember.get(this,"ticket.associatedTicketsCount")<t.MAX_CHILD_COUNT}))});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"rkYK5LaC",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","associate-tickets-widgets"],[9],[0,"\\n"],[4,"if",[[23,["isTracker"]]],null,{"statements":[[4,"if",[[23,["ticket","associatedTicketsCount"]]],null,{"statements":[[0,"      "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"associatedTickets"],null]],[11,"data-test-id","list-related"],[11,"class","text--small"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.related_list.label"],[["count"],[[23,["ticket","associatedTicketsCount"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","text--infotext text--gray"],[9],[0,"\\n        "],[7,"span"],[11,"class","text--small"],[9],[0,"\\n          "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.no_related"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isRelated"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/widgets/associate-tickets/ticket",null,[["ticket","primeTicketDetails","isRelated"],[[23,["ticket"]],[23,["primeTicketDetails"]],true]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isParent"]]],null,{"statements":[[0,"    "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"associatedTickets"],null]],[11,"data-test-id","list-related"],[11,"class","text--small"],[9],[0,"\\n      "],[1,[27,"t",["tickets.ticket_associations.child_list.label"],[["count"],[[23,["ticket","associatedTicketsCount"]]]]],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["currentUserPrivileges","hasParentChildPrivilege"]]],null,{"statements":[[4,"if",[[23,["canAddMoreChilds"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","text--gray text--uppercase pt-15 pb-15 add-more-label"],[9],[0,"\\n          "],[1,[27,"t",["tickets.ticket_associations.child.addnew"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","parent-child-widget"],[9],[0,"\\n          "],[7,"div"],[11,"class","add-child-actions"],[9],[0,"\\n            "],[1,[27,"svg-jar",["child"],[["aria-label","class"],[[27,"t",["tickets.ticket_associations.child.add_child"],null],"app-icon hint--rounded hint--top"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","add-child-tickets-widget link-actions"],[9],[0,"\\n          "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"createChild"],null]],[11,"data-test-id","create-child"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.child.create"],null],false],[0,"\\n          "],[10],[0," "],[7,"span"],[11,"class","muted"],[9],[1,[27,"t",["common.or"],null],false],[10],[0," "],[7,"br"],[9],[10],[0,"\\n          "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[27,"mut",[[23,["addChildsWithTemplate"]]],null]],null]],[11,"data-test-id","add-child"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.child.add_using_templates"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"nucleus-inline-banner",null,[["type","title","isDismissible"],["warning",[27,"t",["tickets.ticket_associations.child.limitreached"],null],false]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["isChild"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/widgets/associate-tickets/ticket",null,[["ticket","primeTicketDetails"],[[23,["ticket"]],[23,["primeTicketDetails"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["linkTickets"]],[27,"hasfeature",["link_tickets"],null]],null]],null,{"statements":[[4,"if",[[23,["currentUserPrivileges","hasLinkTicketPrivilege"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","link-actions mr-5"],[9],[0,"\\n          "],[1,[27,"svg-jar",["tracker"],[["aria-label","class"],[[27,"t",["tickets.link"],null],"app-icon hint--rounded hint--top"]]],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","link-tickets-widget link-actions"],[9],[0,"\\n          "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"createTracker"],null]],[11,"data-test-id","create-tracker"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.create"],null],false],[0,"\\n          "],[10],[0," "],[7,"span"],[11,"class","muted"],[9],[1,[27,"t",["common.or"],null],false],[10],[0," "],[7,"br"],[9],[10],[0,"\\n          "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"tracker"],null]],[11,"data-test-id","link-to-tracker"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.add"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","text--infotext text--gray"],[9],[0,"\\n          "],[7,"span"],[11,"class","text--small"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.no_related"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["addChild"]],[27,"hasfeature",["parent_child_tickets"],null]],null]],null,{"statements":[[4,"if",[[23,["currentUserPrivileges","hasParentChildPrivilege"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","parent-child-widget"],[9],[0,"\\n          "],[7,"div"],[11,"class","add-child-actions"],[9],[0,"\\n            "],[1,[27,"svg-jar",["child"],[["aria-label","class"],[[27,"t",["tickets.ticket_associations.child.add_child"],null],"app-icon hint--rounded hint--top"]]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","add-child-tickets-widget link-actions"],[9],[0,"\\n            "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"createChild"],null]],[11,"data-test-id","create-child"],[9],[0,"\\n              "],[1,[27,"t",["tickets.ticket_associations.child.create"],null],false],[0,"\\n            "],[10],[0," "],[7,"span"],[11,"class","muted"],[9],[1,[27,"t",["common.or"],null],false],[10],[0," "],[7,"br"],[9],[10],[0,"\\n            "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[27,"mut",[[23,["addChildsWithTemplate"]]],null]],null]],[11,"data-test-id","add-child"],[9],[0,"\\n              "],[1,[27,"t",["tickets.ticket_associations.child.add_using_templates"],null],false],[0,"\\n            "],[10],[0,"\\n"],[4,"if",[[27,"launched",["ticket_merge_enhancement"],null]],null,{"statements":[[0,"              "],[7,"span"],[11,"class","muted"],[9],[1,[27,"t",["common.or"],null],false],[10],[0," "],[7,"br"],[9],[10],[0,"\\n              "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"parent"],null]],[11,"data-test-id","link-to-parent"],[9],[0,"\\n                "],[1,[27,"t",["tickets.ticket_associations.link_tickets.parent.add"],null],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","text--infotext text--gray"],[9],[0,"\\n          "],[7,"span"],[11,"class","text--small"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.no_child_tickets"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"  "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[10],[0,"\\n\\n"],[4,"if",[[23,["addChildsWithTemplate"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","closeOnEscapse","showModalClose"],[[27,"action",[[22,0,[]],[27,"mut",[[23,["addChildsWithTemplate"]]],null]],null],false,true]],{"statements":[[0,"    "],[7,"div"],[11,"class","ticket-content"],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/add-child",null,[["ticket","close"],[[23,["ticket"]],[27,"action",[[22,0,[]],[27,"mut",[[23,["addChildsWithTemplate"]]],null]],null]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/ticket/component",["exports","freshdesk/constants/ticket","freshdesk/mixins/tickets/bulk-actions-helper"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(s.default,{i18n:Ember.inject.service(),store:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),classNames:["__module-tickets__ticket-details__widgets__associate-tickets__ticket"],unlinkTracker:!1,isLoading:Ember.computed.none("ticketInfo.subject"),broadcastInfo:Ember.computed.reads("primeTicketDetails.broadcast_message.created_at"),associationType:Ember.computed("ticket.associationType",(function(){return Ember.get(this,"ticket.associationType")===t.default.associationType.related?"tracker":"parent"})),agentName:Ember.computed("ticketInfo.responderId",(function(){var e=Ember.get(this,"ticketInfo.responderId");return e?Ember.get(Ember.get(this,"store").peekRecord("agent",e),"contact.name"):null})),didReceiveAttrs:function(){this._super.apply(this,arguments);var e=Ember.get(this,"primeTicketDetails");if(e){var t=this._convertItemToTicket();Ember.set(this,"ticketInfo",t)}},actions:{unlink:function(){Ember.set(this,"unlinkTracker",!0)}},_confirmUnlinkCB:function(){var e={ticket:{id:Ember.get(this,"ticket.id"),association_type:null,tracker_id:Ember.get(this,"TRACKER_ID_AFTER_UNLINK")}};Ember.get(this,"store").pushPayload(e),Ember.set(this,"unlinkTracker",!1);var t=Ember.get(this,"i18n").t("tickets.ticket_associations.link_tickets.unlink_success");Ember.get(this,"flashMessages").success(t)},_convertItemToTicket:function(){var e=Ember.get(this,"store"),t=Ember.get(this,"primeTicketDetails"),s=e.peekRecord("ticket",t.id);if(s)e.pushPayload(t),s=e.peekRecord("ticket",t.id);else{var n={subject:t.subject,createdAt:t.created_at,requesterId:t.requester_id,responderId:t.responder_id,stats:t.stats,status:t.status,permission:t.permission};s=e.createRecord("ticket",Ember.assign({},{id:t.id},n))}return s}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/ticket/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"9goJIDW3",block:'{"symbols":[],"statements":[[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"  "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","tickets__activity tracker__info"],[9],[0,"\\n    "],[7,"div"],[11,"class","tickets-type__label pb-5"],[9],[0,"\\n      "],[7,"span"],[11,"class","text__infotext text--uppercase text--xsmall"],[9],[0,"\\n        "],[1,[27,"t",[[27,"concat",["tickets.ticket_associations.",[23,["associationType"]],".label"],null]],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","tickets__ticket"],[9],[0,"\\n"],[4,"if",[[23,["ticketInfo","permission"]]],null,{"statements":[[4,"link-to",["helpdesk.tickets.show",[23,["ticketInfo","id"]]],[["class","target"],["text--small ticket-subject","_blank"]],{"statements":[[0,"          "],[1,[27,"truncate",[[23,["ticketInfo","subject"]],45,true],null],false],[0,"\\n          "],[7,"span"],[11,"class","ticket-number text--gray"],[9],[0,"  #"],[1,[23,["ticketInfo","id"]],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[11,"class","text__infotext text--small"],[9],[1,[27,"truncate",[[23,["ticketInfo","subject"]],45,true],null],false],[10],[0,"\\n        "],[7,"span"],[11,"class","ticket-number text--gray"],[9],[0,"  #"],[1,[23,["ticketInfo","id"]],false],[10],[0,"\\n"]],"parameters":[]}],[0,"      "],[7,"div"],[11,"class","tickets__details text--verysmall mt-5"],[9],[0,"\\n        "],[7,"p"],[11,"class","text__content  text--small text--antialias"],[9],[0,"\\n          "],[7,"span"],[11,"class","text__infotext"],[9],[1,[27,"t",["tickets.status"],null],false],[0,": "],[10],[1,[23,["ticketInfo","statusLabel"]],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"p"],[11,"class","text__content  text--small text--antialias"],[9],[0,"\\n          "],[7,"span"],[11,"class","text__infotext"],[9],[1,[27,"t",["tickets.agent"],null],false],[0,": "],[10],[0,"\\n          "],[7,"span"],[12,"class",[27,"if",[[23,["agentName"]],"","text__infotext"],null]],[9],[1,[27,"fill-default",[[23,["agentName"]]],null],false],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"p"],[11,"class","text__content  text--small text--antialias"],[9],[0,"\\n          "],[7,"span"],[11,"class","text__infotext"],[9],[0," "],[1,[27,"app-components/ticket-currentstate-info",null,[["ticket","showSlaStatus"],[[23,["ticketInfo"]],false]]],false],[0," "],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["isRelated"]],[23,["broadcastInfo"]]],null]],null,{"statements":[[0,"          "],[7,"p"],[11,"class","text__content text--small text--antialias"],[9],[0,"\\n            "],[7,"span"],[11,"class","text__infotext"],[9],[0,"\\n              "],[1,[27,"t",["tickets.ticket_associations.link_tickets.last_broadcasted_message"],null],false],[0,"\\n              "],[1,[27,"moment-from-now",[[23,["broadcastInfo"]]],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"],[4,"if",[[27,"and",[[23,["isRelated"]],[23,["currentUserPrivileges","hasLinkTicketPrivilege"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","widget-unlink-btn text--small"],[9],[0,"\\n          "],[7,"a"],[11,"data-test-id","unlink-ticket"],[3,"action",[[22,0,[]],"unlink"]],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"if",[[23,["unlinkTracker"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close"],[[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],[27,"t",["tickets.ticket_associations.link_tickets.unlink.label"],null],[27,"action",[[22,0,[]],"confirmUnlink"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["unlinkTracker"]]],null]],null]]],{"statements":[[0,"      "],[7,"p"],[11,"class","text__content"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.info_line_1"],null],false],[0,":\\n"],[4,"link-to",["helpdesk.tickets.show",[23,["ticketInfo","id"]]],[["class"],["text--semibold text--small"]],{"statements":[[0,"          "],[1,[27,"truncate",[[23,["ticketInfo","subject"]],55,true],null],false],[0,"\\n          "],[7,"span"],[11,"class","ticket-number text--gray"],[9],[0,"  #"],[1,[23,["ticketInfo","id"]],false],[0,"."],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[27,"t",["tickets.ticket_associations.link_tickets.unlink.info_line_2"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/associate-tickets/ticket/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/component",["exports","freshdesk/constants/quality-management/common","ember-concurrency"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend({tagName:"",store:Ember.inject.service(),flashMessages:Ember.inject.service(),dateFormat:t.default.dateFormat,isNewScore:Ember.computed.not("scoreId"),showSubmitButton:Ember.computed.or("isCurrentCoach","isNewScore"),editableScore:Ember.computed.or("isCurrentCoach","isNewScore"),totalEvaluations:Ember.computed.reads("evaluations.length"),isLoading:Ember.computed.or("fetchEvaluateTasks.isRunning","evaluatedScore.scorecard.isPending","isNoneEvaluations"),isAdminPrivilege:Ember.computed.or("currentUser.isAdmin","currentUser.isAccountAdmin"),noMatchesMessage:t.default.noMatchesMessage,isNoneEvaluations:Ember.computed("evaluatedScore.evaluations.length",(function(){return Ember.isNone(Ember.get(this,"evaluatedScore.evaluations.length"))})),buttonText:Ember.computed("isCurrentCoach","isNewScore",(function(){return this.i18n.t(this.isCurrentCoach?"form.update":"form.submit.action")})),evaluations:Ember.computed("evaluatedScore.scorecard.{name,isFulfilled,evaluationCriteria}","evaluatedScore.evaluations.@each",(function(){var e=Ember.get(this,"evaluatedScore.scorecard.evaluationCriteria")||[],t=Ember.get(this,"evaluatedScore.evaluations")||[];return t.length&&e.length&&e.map((function(e){return Ember.assign({},t.findBy("name",e.name).toJSON(),e.toJSON())}))})),isCurrentCoach:Ember.computed("evaluatedScore.coach.id","isNewScore",(function(){return this.isNewScore?null:Ember.get(this,"evaluatedScore.coach.id")==this.currentUser.id})),disableSubmit:Ember.computed("isNewScore","evaluationsRated","totalEvaluations","evaluatedScore.hasDirtyAttributes",(function(){return this.isNewScore?this.evaluationsRated!==this.totalEvaluations:!this.evaluatedScore.hasDirtyAttributes})),scoreClass:Ember.computed("evaluatedScore.score",(function(){return this.evaluatedScore.score<=t.default.medianScore?t.default.lowScoreClass:t.default.highScoreClass})),evaluationsRated:Ember.computed("evaluations.@each.{rating,skipped}",(function(){return(Ember.get(this,"evaluations")||[]).reduce((function(e,t){return e+(t.rating||t.skipped?1:0)}),0)})),notApplicableCount:Ember.computed("evaluations.@each.skipped",(function(){return(Ember.get(this,"evaluations")||[]).reduce((function(e,t){return e+(t.skipped?1:0)}),0)})),progressBarWidth:Ember.computed("evaluationsRated","totalEvaluations",(function(){var e=this.totalEvaluations?this.evaluationsRated/this.totalEvaluations*100:0;return Ember.String.htmlSafe("width:".concat(e,"%;"))})),errorInfo:Ember.computed("isAdminPrivilege",(function(){return this.isAdminPrivilege?t.default.errorInfoAdmin:t.default.errorInfoUser})),init:function(){this._super.apply(this,arguments),this.fetchEvaluateTasks.perform(this.scoreId)},fetchEvaluateTasks:(0,s.task)(regeneratorRuntime.mark((function e(s){var n,i,a,r,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser.hasAbility("manage_scores")){e.next=7;break}return e.next=4,this.store.findAll("scorecard");case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:if(a=e.t0,r=a.filterBy("status",t.default.publishedStatus),!s){e.next=16;break}return e.next=13,this.store.findRecord("score",s);case 13:n=e.sent,e.next=24;break;case 16:return i=r.firstObject,e.next=19,this.store.findRecord("agent",this.currentUser.id);case 19:l=e.sent,o=this._createScoreData(i,l),(n=this.store.createRecord("score",o)).set("scorecard",i),this.set("scorecards",r);case 24:this.set("evaluatedScore",n);case 25:case"end":return e.stop()}}),e,this)}))),didDestroyElement:function(){this._super.apply(this,arguments),this.evaluatedScore.rollbackAttributes()},actions:{changeSelectedScorecard:function(e){var t=this._getEvaluations(e);this.setProperties({"evaluatedScore.evaluations":t,"evaluatedScore.scorecard":e,"evaluatedScore.scorecardId":e.id,"evaluatedScore.attainedScore":this.attainedScoreCalculations(t),"evaluatedScore.maxScore":this.maxScoreCalculations(t)})},updateScore:function(){return this.evaluatedScore.save().then(this._successScore.bind(this)).catch(this._failureScore.bind(this))},setScore:function(e,s){var n=this.evaluations,i=n.findBy("name",e),a=s===t.default.initialValue;Ember.setProperties(i,{attainedScore:a?t.default.initialValue:parseInt(s),maxScore:a?t.default.initialValue:t.default.maxScore,rating:s,skipped:a}),Ember.setProperties(this,{"evaluatedScore.evaluations":n,"evaluatedScore.maxScore":this.maxScoreCalculations(n),"evaluatedScore.attainedScore":this.attainedScoreCalculations(n)})},setComment:function(e,t){var s=Ember.get(this,"evaluations").findBy("name",e);Ember.set(s,"comment",t),Ember.set(this,"evaluatedScore.evaluations",Ember.get(this,"evaluations"))}},maxScoreCalculations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=Ember.get(e,"length"),n=this.notApplicableCount,i=t.default.maxScore;return n?(s-n)*i:s*i},attainedScoreCalculations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=function(e,t){return e+ +t.rating};return e.reduce(t,0)},_successScore:function(e){this.flashMessages.success(this.i18n.t("quality-management.score.save.success")),this.onClose(),Ember.isEmpty(this.scores)&&this.set("scores",[e])},_failureScore:function(){this.flashMessages.danger(this.i18n.t("quality-management.score.save.failure"))},_createScoreData:function(e,t){var s=this._getEvaluations(e),n=this.ticket,i=void 0===n?{}:n,a=this.currentUser,r=this.ticketId,l=this.agentId;return{agent:i.responder,coach:t,scorecard:e,agentId:l,coachId:Ember.get(a,"id"),scorecardId:e&&e.id.toString(),evaluationEntity:i,evaluationEntityId:r&&r.toString(),evaluations:s,attainedScore:this.attainedScoreCalculations(s),maxScore:this.maxScoreCalculations(s)}},_getEvaluations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.evaluationCriteria,n=void 0===s?[]:s;return n.map((function(e){return Ember.assign({},e.toJSON(),{attainedScore:0,maxScore:t.default.maxScore,comment:"",rating:"",skipped:!1})}))}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/criteria-list/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({scoreRange:["1","2","3","4","5"],notAvailablerating:0,actions:{setScore:function(e,t){this.setScore(e,t)},setComment:function(e){this.setComment(e,this.evaluation.comment)}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/criteria-list/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ttPRy3fQ",block:'{"symbols":["score","index"],"statements":[[7,"div"],[11,"data-test-id","evaluation"],[11,"class","evaluation"],[9],[0,"\\n  "],[7,"p"],[11,"class","evaluation--title mb-0 wordbreak-fix"],[9],[1,[23,["evaluation","title"]],false],[10],[0,"\\n  "],[7,"p"],[11,"class","evaluation--desc text--xsmall text--verylightgrey wordbreak-fix"],[9],[1,[23,["evaluation","description"]],false],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","score-range mb-12"],[9],[0,"\\n"],[4,"each",[[23,["scoreRange"]]],null,{"statements":[[4,"if",[[23,["editableScore"]]],null,{"statements":[[0,"        "],[7,"button"],[12,"class",[28,["score-item",[27,"if",[[27,"eq",[[22,1,[]],[23,["evaluation","rating"]]],null]," selected"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"setScore",[23,["evaluation","name"]],[22,1,[]]],null]],[12,"data-test-id",[27,"concat",["score-item-",[23,["evaluationIndex"]],"-range-",[22,2,[]]],null]],[12,"aria-label",[27,"t",["quality-management.score.criteria.rating"],[["rating"],[[22,1,[]]]]]],[9],[0,"\\n          "],[1,[22,1,[]],false],[0,"\\n        "],[10],[0,"\\n\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[12,"class",[28,["score-item",[27,"if",[[27,"eq",[[22,1,[]],[23,["evaluation","rating"]]],null]," selected"],null]]]],[9],[0,"\\n          "],[1,[22,1,[]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[1,2]},null],[0,"\\n"],[4,"if",[[23,["evaluation","skipEnabled"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","score-seperator mr-10 ml-10"],[9],[1,[27,"t",["common.or"],null],false],[10],[0,"\\n"],[4,"if",[[23,["editableScore"]]],null,{"statements":[[0,"        "],[7,"button"],[12,"class",[28,["score-item not-available ",[27,"if",[[23,["evaluation","skipped"]],"selected"],null]]]],[12,"data-test-id",[27,"concat",["score-item-na-",[23,["evaluationIndex"]],"-range"],null]],[12,"onclick",[27,"action",[[22,0,[]],"setScore",[23,["evaluation","name"]],[23,["notAvailablerating"]]],null]],[12,"aria-label",[27,"t",["common.not-available"],null]],[9],[0,"\\n          "],[1,[27,"t",["common.not-available"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[12,"class",[28,["score-item not-available ",[27,"if",[[23,["evaluation","skipped"]],"selected"],null]]]],[9],[0,"\\n          "],[1,[27,"t",["common.not-available"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n"],[4,"if",[[23,["editableScore"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","input evaluation-comments"],[9],[0,"\\n      "],[1,[27,"textarea",null,[["data-test-id","autofocus","value","rows","placeholder","change"],["evaluation-comments",false,[23,["evaluation","comment"]],1,[27,"t",["quality-management.score.comments.placeholder"],null],[27,"action",[[22,0,[]],"setComment",[23,["evaluation","name"]]],null]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["evaluation","comment","length"]]],null,{"statements":[[0,"      "],[7,"p"],[11,"class","non-editable-comments"],[9],[0,"\\n        "],[1,[23,["evaluation","comment"]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/criteria-list/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"BMg2spN8",block:'{"symbols":["evaluation","index","scorecard"],"statements":[[4,"component",[[23,["slider","header"]]],[["showCloseButton","onClose"],[true,[23,["onClose"]]]],{"statements":[[0,"  "],[7,"div"],[11,"class","element-flex align-items--center ellipsis"],[9],[0,"\\n    "],[7,"h4"],[11,"class","modal-title text--extra-bold text--xxmedium"],[9],[0,"\\n      "],[1,[27,"svg-jar",["evaluations"],[["class"],["modal-icons app-icon app-icon--largesecondary"]]],false],[0,"\\n      "],[1,[27,"t",["fd.admin.quality-management"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[23,["slider","body"]]],null,{"statements":[[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"    "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","evaluation-form"],[9],[0,"\\n"],[4,"if",[[23,["scoreId"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","evaluation-info mb-12"],[9],[0,"\\n          "],[7,"p"],[11,"class","text--small"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--verylightgrey"],[9],[1,[27,"t",["fd.agent"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","agent-name"],[9],[1,[23,["evaluatedScore","agent","contact","name"]],false],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"p"],[11,"class","text--small"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--verylightgrey"],[9],[1,[27,"t",["fd.coach"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","coach-name"],[9],[1,[23,["evaluatedScore","coach","contact","name"]],false],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"p"],[11,"class","text--small"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--verylightgrey"],[9],[1,[27,"t",["admin.quality-management.column-name.scorecard"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","scorecard-name"],[9],[0,"\\n              "],[1,[23,["evaluatedScore","scorecard","name"]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"p"],[11,"class","text--small"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--verylightgrey"],[9],[1,[27,"t",["quality-management.score.evaluated"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","evaluated-date"],[9],[1,[27,"moment-format",[[23,["evaluatedScore","updatedAt"]],[23,["dateFormat"]]],null],false],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"p"],[11,"class","text--small"],[9],[0,"\\n            "],[7,"span"],[11,"class","text--verylightgrey"],[9],[1,[27,"t",["quality-management.score.quality-score"],null],false],[10],[0,"\\n            "],[7,"span"],[11,"class","text--semibold"],[11,"data-test-id","quality-score"],[9],[0,"("],[1,[23,["evaluatedScore","score"]],false],[0,"%)"],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[27,"not",[[23,["scoreId"]]],null],[23,["scorecards","length"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-id","scorecards"],[11,"class","scorecards"],[9],[0,"\\n          "],[7,"label"],[11,"class","text--small text--semibold pb-4 element-inline"],[9],[1,[27,"t",["quality-managemnet.score.scorecards-choose"],null],false],[10],[0,"\\n"],[4,"ui-form/select-field",null,[["options","selected","placeholder","triggerClass","renderInPlace","searchEnabled","searchField","onchange"],[[23,["scorecards"]],[23,["evaluatedScore","scorecard"]],[27,"t",["admin.quality-management.scorecards"],null],"scorecards-select",true,true,"name",[27,"action",[[22,0,[]],"changeSelectedScorecard"],null]]],{"statements":[[0,"            "],[1,[22,3,["name"]],false],[0,"\\n"]],"parameters":[3]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n      "],[7,"div"],[11,"class","evaluations"],[9],[0,"\\n"],[4,"each",[[23,["evaluations"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/widgets/evaluations/add-edit/criteria-list",null,[["evaluation","setScore","setComment","editableScore","evaluatedScore","evaluationIndex"],[[22,1,[]],[27,"action",[[22,0,[]],"setScore"],null],[27,"action",[[22,0,[]],"setComment"],null],[23,["editableScore"]],[23,["evaluatedScore"]],[22,2,[]]]]],false],[0,"\\n"]],"parameters":[1,2]},{"statements":[[4,"ui-components/empty-state",null,[["imageUrl","title","pageInfo","showNavigation","class","data-test-id","showContent"],["https://indfassetsblue.freshdesk.com/production/a/assets/images/empty-states/score-empty-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg","",[23,["errorInfo"]],false,"evaluations-empty mt-25","evaluation-empty",true]],{"statements":[[4,"if",[[23,["isAdminPrivilege"]]],null,{"statements":[[4,"link-to",["helpdesk.admin.quality-management.scorecards"],[["target"],["_blank"]],{"statements":[[0,"                "],[1,[27,"nucleus-button",null,[["variant","label"],["primary",[27,"t",["quality-management.score.no-evaluation-criteria.user.btn"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"              "],[7,"h3"],[11,"class","text--dark text--xxsmall text--semibold"],[9],[0,"\\n                "],[1,[27,"t",["quality-management.score.no-evaluation-criteria.user.url.title"],null],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"a"],[11,"data-test-id","evaluation-empty-link"],[11,"class","article-link"],[11,"href","https://support.freshdesk.com/support/solutions/articles/50000003567-overview-of-quality-coach-in-freshdesk"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n                "],[1,[27,"t",["quality-management.score.no-evaluation-criteria.user.link"],null],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[23,["evaluations","length"]]],null,{"statements":[[4,"component",[[23,["slider","footer"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","evaluate_form_submission"],[9],[0,"\\n      "],[7,"div"],[11,"class","progress-bar-wrapper"],[9],[0,"\\n        "],[7,"div"],[11,"data-test-id","progress-bar-value"],[11,"class","progress-bar-value"],[12,"style",[21,"progressBarWidth"]],[9],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","content-wrapper mt-12"],[9],[0,"\\n"],[4,"if",[[23,["totalEvaluations"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","score ml-12 text--verylightgrey"],[9],[0,"\\n            "],[1,[23,["evaluatedScore","attainedScore"]],false],[0," / "],[1,[23,["evaluatedScore","maxScore"]],false],[0,"\\n            "],[7,"span"],[11,"data-test-id","footer-score-info"],[12,"class",[28,["score-info ",[21,"scoreClass"]," text--xsmall ml-4"]]],[9],[0,"("],[1,[23,["evaluatedScore","score"]],false],[0,"%)"],[10],[0,"\\n          "],[10],[0,"\\n"],[4,"if",[[23,["showSubmitButton"]]],null,{"statements":[[0,"            "],[1,[27,"nucleus-button",null,[["variant","label","disabled","onClick"],[[23,["primary"]],[23,["buttonText"]],[23,["disableSubmit"]],[27,"action",[[22,0,[]],"updateScore"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/evaluations/add-edit/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({evaluationsPending:Ember.computed.reads("getEvaluations.isRunning"),hasCoachPrivilege:Ember.computed("currentUser.userData.abilities.[]",(function(){return Ember.get(this,"currentUser").hasAbility("manage_scores")})),init:function(){this._super.apply(this,arguments),Ember.get(this,"getEvaluations").perform()},actions:{openSliderShow:function(){Ember.tryInvoke(this,"openSlider")}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/show/component",["exports","freshdesk/constants/quality-management/common"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({scoreClass:Ember.computed("score.score",(function(){return this.score.score<=t.default.medianScore?t.default.lowScoreClass:t.default.highScoreClass})),actions:{openEvaluationSlider:function(e){Ember.tryInvoke(this,"openSlider",[e])}}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/show/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"BjfmmG8X",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","evaluation-wrapper"],[9],[0,"\\n  "],[7,"div"],[11,"data-test-id","evaluation-info"],[11,"class","evaluation-info"],[9],[0,"\\n    "],[7,"div"],[11,"class","coach-info"],[9],[0,"\\n      "],[7,"p"],[11,"class","mb-0 text--xsmall"],[9],[1,[27,"t",["fd.coach"],null],false],[10],[0,"\\n      "],[7,"p"],[11,"data-test-id","coach-name"],[11,"class","coach-name"],[9],[1,[23,["score","coach","contact","name"]],false],[10],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"data-test-id","score-info"],[12,"class",[28,["score-info ",[21,"scoreClass"]," text--xsmall"]]],[9],[0,"\\n      "],[1,[23,["score","score"]],false],[0,"%\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","show-evaluation"],[9],[0,"\\n    "],[7,"a"],[11,"data-test-id","show-evaluation-link"],[11,"class","show-evaluation-link text--xsmall"],[12,"onclick",[27,"action",[[22,0,[]],"openEvaluationSlider",[23,["score"]]],null]],[9],[0,"\\n      "],[1,[27,"t",["quality-management.score.show-evaluation"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/evaluations/show/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/evaluations/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"4JRVspxr",block:'{"symbols":["score"],"statements":[[7,"div"],[11,"class","evaluate-ticket"],[9],[0,"\\n"],[4,"if",[[23,["evaluationsPending"]]],null,{"statements":[[0,"    "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["scores","length"]]],null,{"statements":[[4,"each",[[23,["scores"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/widgets/evaluations/show",null,[["score","openSlider"],[[22,1,[]],[23,["openSlider"]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["hasCoachPrivilege"]]],null,{"statements":[[0,"        "],[7,"p"],[9],[1,[27,"t",["quality-management.score.no-evaluation"],null],false],[10],[0,"\\n        "],[1,[27,"nucleus-button",null,[["icon","label","data-test-id","onClick","variant","iconSize"],["new",[27,"t",["quality-management.score.evaluate"],null],"evaluate-agent-button",[27,"action",[[22,0,[]],"openSliderShow"],null],"primary","medium"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"t",["quality-management.score.no-evaluation"],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/evaluations/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/requester-info/component",["exports","ember-data","ember-concurrency","freshdesk/mixins/bubble-action","freshdesk/mixins/contacts/side-panel-info","freshdesk/mixins/content-truncate","freshdesk/utils/marketplace-fields","freshdesk/constants/marketplace","freshdesk/utils/custom-fields/lookup-field"],(function(e,t,s,n,i,a,r,l,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=t.default.PromiseArray,d=l.default.context,m=Ember.Component.extend(n.default,a.default,i.default,{store:Ember.inject.service(),currentUser:Ember.inject.service(),currentAccount:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),mkpInterfaceSources:Ember.inject.service("interface-sources"),mkpInterfacePage:"ticketDetails",classNames:["__module-tickets__ticket-details__widgets__requester-info"],sortField:["widgetPosition"],defaultFields:["default_email","default_phone","default_mobile","default_twitter_id"],reloadRequesterInfo:!1,requesterWidgetMkpFields:[],requester:Ember.computed.reads("ticket.requester"),requesterNotAgent:Ember.computed.not("requester.isAgent"),showRequesterWidget:Ember.computed.and("isRequesterWidgetEnabled","isRequesterWidget","requesterNotAgent"),canSeeNewTimeline:Ember.computed("currentAccount.accountData.launched.[]","currentUser.userData.abilities.[]","requesterNotAgent",(function(){return Ember.get(this,"requesterNotAgent")&&Ember.get(this,"currentUser").hasAbility("view_contacts")&&!Ember.get(this,"currentAccount").launched("requester_widget_timeline")})),requesterCompanies:Ember.computed("requester.companyList.[]",(function(){return Ember.get(this,"requester.companyList").map((function(e){return parseInt(e.id)}))})),company:Ember.computed("ticket.{company,companyId,updatedAt}",(function(){var e=Ember.get(this,"ticket.company"),t=Ember.get(this,"ticket.companyId");return t&&e.content&&parseInt(e.content.id)!=t?Ember.get(this,"store").findRecord("company",t):e})),requesterAssociatedCompany:Ember.computed("ticket.companyId","requester.isAgent","company.id","requesterCompanies",(function(){if(Ember.get(this,"requester.isAgent"))return!0;var e=Ember.get(this,"requesterCompanies"),t=Ember.get(this,"company.id"),s=Ember.get(this,"ticket.companyId");return e.includes(s)||e.includes(parseInt(t))})),sortedRequesterWidgetFields:Ember.computed("reload","requester","company",(function(){return Ember.get(this,"requesterWidgetFields").sortBy("widgetPosition")})),list:Ember.computed("reload","requester",(function(){return Ember.get(this,"sortedRequesterWidgetFields")})),linkableCompany:Ember.computed("company.id",(function(){return Ember.get(this,"currentUser").hasAbilities(["view_contacts"])?Ember.get(this,"company.id"):null})),recentTickets:Ember.computed("requester",(function(){return this._getRecentTickets(Ember.get(this,"requester.id"))})),isRequesterWidgetEnabled:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("requester_widget")})),contactWidgetFields:Ember.computed((function(){var e=this;return Ember.get(this,"store").peekAll("contact-field").filter((function(t){return!Ember.isEmpty(Ember.get(t,"widgetPosition"))&&e._canViewIfLookup(t.isLookup,t.lookupType)}))})),companyWidgetFields:Ember.computed((function(){var e=this;return Ember.get(this,"store").peekAll("company-field").filter((function(t){return!Ember.isEmpty(Ember.get(t,"widgetPosition"))&&e._canViewIfLookup(t.isLookup,t.lookupType)}))})),requesterWidgetFields:Ember.computed("reload","requester","company",(function(){var e=Ember.get(this,"requester"),t=Ember.get(this,"company"),s=this._fetchDetailsInfo(Ember.get(this,"contactWidgetFields"),e,d.contact),n=this._fetchDetailsInfo(Ember.get(this,"companyWidgetFields"),t,d.company);return s.concat(n)})),defaultContactFields:Ember.computed((function(){var e=this;return Ember.get(this,"store").peekAll("contact-field").filter((function(t){return Ember.get(e,"defaultFields").includes(Ember.get(t,"type"))}))})),defaultContactFieldsInfo:Ember.computed("reload","requester",(function(){var e=Ember.get(this,"requester");return this._fetchDetailsInfo(Ember.get(this,"defaultContactFields"),e,d.contact)})),fetchRequesterFields:(0,s.task)(regeneratorRuntime.mark((function e(){var t,s,n,i,a,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.getProperties(this,"store","showRequesterWidget"),s=t.store,n=t.showRequesterWidget,e.next=3,s.findAll("contact-field");case 3:return i=e.sent,e.next=6,s.findAll("company-field");case 6:return a=e.sent,n&&((0,r.registerMarketPlaceFields)(this.mkpInterface,this.mkpInterfaceSources,this.mkpInterfacePage,i,d.contact),(0,r.registerMarketPlaceFields)(this.mkpInterface,this.mkpInterfaceSources,this.mkpInterfacePage,a,d.company)),l=this._processMkpFields(i,d.contact),o=this._processMkpFields(a,d.company),Ember.set(this,"requesterWidgetMkpFields",l.concat(o)),e.abrupt("return",[i,a]);case 12:case"end":return e.stop()}}),e,this)}))),actions:{expand:function(){this.bubbleAction("expand")}},_filterFields:function(e){return e.filterBy("hasWidgetPosition",!0)},_canViewIfLookup:function(e,t){var s=this.currentAccount,n=this.currentUser;return!e||(0,o.hasLookupFieldViewPermissions)(t,s,n)},_getRecentTickets:function(e){return e?c.create({promise:Ember.get(this,"store").query("ticket",{query_hash:{0:{operator:"is_in",condition:"requester_id",value:[e],type:"default"}},per_page:6,exclude:"custom_fields"}).then(this._getRecentTicketsCB.bind(this)).catch(this._getRecentTicketsFailure.bind(this))}):[]},_getRecentTicketsCB:function(e){var t=Ember.get(this,"ticket.id");return e.filter((function(e){return e.id!==t}))},_getRecentTicketsFailure:function(){return this.flashMessages.danger("Failed to load the recent activities."),[]},_processMkpFields:function(e,t){return e.filter((function(e){return Ember.isPresent(Ember.get(e,"widgetPosition"))})).reduce((function(e,s){var n=Ember.get(s,"name");return e.pushObject((0,r.requesterInfoContext)(t,n)),e}),[])},_fetchDetailsInfo:function(e,t,s){var n=this,i=[];return e.forEach((function(e){var a,l=Ember.get(e,"type"),o=Ember.get(e,"fieldName");switch(o){case"language":a=(a=Ember.get(e,"choices").findBy("value",Ember.get(t,o)))&&a.label;break;case"allEmails":a=Ember.get(t,"email");break;case"otherPhoneNumbers":a=n._getOtherPhoneInfo(t);break;default:a=Ember.get(t,o),"custom_checkbox"===l&&(a=a?Ember.get(n,"i18n").t("fd.yes"):Ember.get(n,"i18n").t("fd.no"))}var c="custom_checkbox"===l?a&&"No"!=a:!Ember.isEmpty(a),d=Ember.getProperties(e,"label","name","widgetPosition"),m=d.label,u=d.name,p=d.widgetPosition;c&&i.pushObject({label:m,type:l,name:u,value:a,widgetPosition:p,additionalProps:(0,r.requesterInfoContext)(s,u,!0),lookupProperties:e.lookup,icon:["default_phone","default_mobile","custom_phone_number"].includes(l)?"phone":"default_twitter_id"===l?"twitter":""})})),i},_getOtherPhoneInfo:function(e){return(Ember.get(e,"otherPhoneNumbers")||[]).filter((function(e){return e.value}))}});e.default=m})),define("freshdesk/components/module-tickets/ticket-details/widgets/requester-info/fields-info/component",["exports","freshdesk/mixins/encrypted-field"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{telephony:Ember.inject.service(),currentAccount:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),classNames:["info-details"],isOmniChannelEnabled:Ember.computed((function(){return this.currentAccount.hasFeature("omni_channel")})),init:function(){this._super.apply(this,arguments),this._defineMkpFieldProps()},_defineMkpFieldProps:function(){var e=this,t=this.isRequesterWidget?"dyn_":"";this.fields.forEach((function(s){var n=Ember.getProperties(s,"contextFieldName","mkpFieldName"),i=n.contextFieldName,a=n.mkpFieldName;Ember.defineProperty(e,i,Ember.computed.not("mkpInterface.controlData.".concat(t).concat(a,".hide")))}))},actions:{triggerTelephony:function(e,t,s){this.isOmniChannelEnabled?this.telephony.triggerTelphone(e,t.value,s):s.preventDefault()}}});e.default=s})),define("freshdesk/components/module-tickets/ticket-details/widgets/requester-info/fields-info/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Z5gbbkXz",block:'{"symbols":["field"],"statements":[[4,"each",[[23,["fieldsInfo"]]],null,{"statements":[[4,"if",[[27,"get",[[22,0,[]],[22,1,["additionalProps","contextFieldName"]]],null]],null,{"statements":[[0,"    "],[7,"div"],[12,"data-test-id",[22,1,["additionalProps","dataTestId"]]],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,1,["type"]],"encrypted_text"],null]],null,{"statements":[[0,"        "],[1,[27,"ui-components/encrypted-field",null,[["label","value"],[[22,1,["label"]],[22,1,["value"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","info-details__item"],[9],[0,"\\n          "],[7,"div"],[11,"class","text__infotext text--xsmall"],[9],[0,"\\n            "],[1,[22,1,["label"]],false],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","info-details-content text__content text--semibold"],[9],[0,"\\n"],[4,"if",[[27,"or",[[27,"eq",[[22,1,["type"]],"custom_date"],null],[27,"eq",[[22,1,["type"]],"default_renewal_date"],null]],null]],null,{"statements":[[0,"              "],[1,[27,"moment-format",[[22,1,["value"]],[23,["currentAccount","timeFormat","date"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"custom_url"],null]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[22,1,["value"]]],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n                "],[1,[22,1,["value"]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_twitter_id"],null]],null,{"statements":[[0,"              "],[7,"a"],[11,"rel","noopener"],[12,"href",[27,"custom-url",[[27,"concat",["twitter.com/",[22,1,["value"]]],null]],null]],[11,"target","_blank"],[9],[0,"\\n                "],[1,[22,1,["value"]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_phone"],null]],null,{"statements":[[0,"              "],[7,"a"],[11,"rel","noopener"],[11,"class","default-text-color"],[11,"data-test-id","default-phone"],[12,"href",[28,["tel:",[22,1,["value"]]]]],[12,"onclick",[27,"action",[[22,0,[]],"triggerTelephony",[23,["requesterId"]],[22,1,[]]],null]],[9],[1,[22,1,["value"]],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_mobile"],null]],null,{"statements":[[0,"              "],[7,"a"],[12,"href",[28,["tel:",[22,1,["value"]]]]],[11,"data-test-id","default-mobile"],[11,"rel","noopener"],[11,"class","default-text-color"],[12,"onclick",[27,"action",[[22,0,[]],"triggerTelephony",[23,["requesterId"]],[22,1,[]]],null]],[9],[1,[22,1,["value"]],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[22,1,["type"]],"custom_paragraph"],null],[27,"eq",[[22,1,["type"]],"default_description"],null],[27,"eq",[[22,1,["type"]],"default_note"],null]],null]],null,{"statements":[[0,"              "],[1,[27,"plain-text-format",[[22,1,["value"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"lookup"],null]],null,{"statements":[[0,"              "],[1,[27,"app-components/lookup-text",null,[["fieldValue","lookupProperties"],[[22,1,["value"]],[22,1,["lookupProperties"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,1,["type"]],"default_other_phone_numbers"],null]],null,{"statements":[[0,"              "],[1,[27,"app-components/widgets/other-phone-info",null,[["allPhoneNumbers"],[[22,1,["value"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[22,1,["value"]],false],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/requester-info/fields-info/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/requester-info/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Yb2aqvpV",block:'{"symbols":["requesterInfo"],"statements":[[7,"div"],[11,"class","info-details-widget"],[11,"data-test-id","requester-info-widget"],[9],[0,"\\n  "],[7,"div"],[11,"class","row-fluid clearfix info-details__item"],[9],[0,"\\n    "],[1,[27,"app-components/avatar-user",null,[["user","size","class"],[[23,["requester"]],"large","contacts__cardpic contacts__avatar"]]],false],[0,"\\n    "],[7,"div"],[11,"data-test-id","name"],[11,"class","info-details__item__title"],[9],[0,"\\n      "],[1,[27,"app-components/user-link",null,[["user","linkClassNames"],[[23,["requester"]],"title-small text--semibold ellipsis widget-requestor-info"]]],false],[0,"\\n"],[4,"if",[[23,["requester","jobTitle"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","text__infotext ellipsis widget-requestor-info text--xsmall"],[9],[1,[23,["requester","jobTitle"]],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["company","name"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-id","company"],[11,"class","text--xsmall info-company-details"],[9],[0,"\\n          "],[7,"div"],[12,"aria-label",[27,"unless",[[23,["requesterAssociatedCompany"]],[27,"t",["ticket.company.association.warning"],null]],null]],[12,"class",[28,["company-info ",[27,"unless",[[23,["requesterAssociatedCompany"]],"hint--rounded hint--bottom company-hint"],null]]]],[9],[0,"\\n"],[4,"unless",[[23,["requesterAssociatedCompany"]]],null,{"statements":[[0,"              "],[7,"span"],[11,"data-test-id","company-assocoation-warning"],[11,"class","association-warning"],[9],[0,"\\n                "],[1,[27,"svg-jar",["unverified"],[["class"],["app-icon app-icon--small app-icon--warning warning-custom"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["linkableCompany"]]],null,{"statements":[[4,"link-to",["helpdesk.companies.show",[23,["linkableCompany"]]],[["class"],["text--xsmall info-details__company"]],{"statements":[[0,"                "],[1,[23,["company","name"]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"              "],[1,[23,["company","name"]],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","triggerOutOfOrder"],[[23,["renderPriority"]],[23,["requester","id"]],"requesterInfo",[23,["fetchRequesterFields"]],[23,["reloadRequesterInfo"]]]],{"statements":[[4,"component",[[22,1,["loader-state"]]],null,{"statements":[[0,"      "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["list-card"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["render-content"]]],null,{"statements":[[4,"if",[[23,["showRequesterWidget"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/widgets/requester-info/fields-info",null,[["requesterId","fields","fieldsInfo","isRequesterWidget"],[[23,["requester","id"]],[23,["requesterWidgetMkpFields"]],[23,["filteredData"]],true]]],false],[0,"\\n"],[4,"if",[[23,["showMore"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/widgets/requester-info/fields-info",null,[["requesterId","fields","fieldsInfo","isRequesterWidget"],[[23,["requester","id"]],[23,["requesterWidgetMkpFields"]],[23,["remaningData"]],true]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["remaningCount"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","text__content text--small text--semibold contacts__sidepanel--state"],[12,"onclick",[27,"action",[[22,0,[]],"toggleInfo"],null]],[9],[0,"\\n            "],[1,[27,"t",[[23,["toggleState"]]],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"hasabilities",["view_contacts"],null]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/widgets/requester-info/fields-info",null,[["requesterId","fields","fieldsInfo","isRequesterWidget"],[[23,["requester","id"]],[23,["requesterWidgetMkpFields"]],[23,["defaultContactFieldsInfo"]],false]]],false],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null]],"parameters":[1]},null],[0,"  "],[7,"div"],[11,"class","contacts__view_more_info"],[9],[0,"\\n"],[4,"link-to",["helpdesk.contacts.show",[23,["requester","id"]]],[["target","class","data-test-id"],["_blank","link-on-hover link-no-underline","view-more-info"]],{"statements":[[0,"      "],[7,"span"],[11,"class","new-tab-icon pr-2"],[9],[0," "],[1,[27,"svg-jar",["open-in-new-tab"],[["aria-label","class"],[[27,"t",["common.open-new-tab"],null],"app-icon app-icon--verysmallsecondary"]]],false],[0," "],[10],[0,"\\n      "],[1,[27,"t",["tickets.requester.info.view-more-info"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[4,"if",[[23,["canSeeNewTimeline"]]],null,{"statements":[[0,"    "],[1,[27,"app-components/timeline-activities",null,[["requester"],[[23,["requester"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"gt",[[23,["recentTickets","length"]],0],null]],null,{"statements":[[0,"    "],[1,[27,"app-components/recent-activities",null,[["activities","requester"],[[23,["recentTickets"]],[23,["requester"]]]]],false],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/requester-info/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/service-task/component",["exports","ember-concurrency","freshdesk/constants/ticket"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend({flashMessages:Ember.inject.service(),i18n:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),classNames:["__module-tickets__ticket-details__widgets__service-task"],serviceTasksCount:0,isLoading:!0,isChild:Ember.computed.equal("ticket.associationType",s.default.associationType.child),isParent:Ember.computed.equal("ticket.associationType",s.default.associationType.parent),showSTEmptyMessage:Ember.computed("serviceTasksCount",(function(){return!Ember.get(this,"isParent")&&0===Ember.get(this,"serviceTasksCount")&&!this.currentUserPrivileges.canCreateChildServiceTask})),canAddMoreTasks:Ember.computed("ticket.associatedTicketsCount","isParent",(function(){var e=Ember.get(this,"ticket.associatedTicketsCount")||0;return this.isParent&&e&&this.fetchServiceTasksCount.perform(),e<s.MAX_CHILD_COUNT&&this.currentUserPrivileges.canCreateChildServiceTask})),init:function(){this._super.apply(this,arguments)},fetchServiceTasksCount:(0,t.task)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ticket.getAllAssociatedTickets({type:s.default.serviceTaskType,only:"count"});case 3:t=e.sent,Ember.set(this,"serviceTasksCount",this._handleResponse(t)),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",this.flashMessages.danger(this.i18n.t("tickets.ticket_associations.associated_tickets.service_task.failed")));case 10:return e.prev=10,Ember.set(this,"isLoading",!1),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])}))).restartable(),_handleResponse:function(e){return e.meta.count?e.meta.count:0}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/widgets/service-task/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"f8LIGZHY",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","service-task-widget"],[9],[0,"\\n"],[4,"if",[[23,["isChild"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/widgets/associate-tickets/ticket",null,[["ticket","primeTicketDetails"],[[23,["ticket"]],[23,["primeTicketDetails"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isParent"]]],null,{"statements":[[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","service-task-loader"],[11,"data-test-id","service-task-loader"],[9],[0,"\\n          "],[1,[27,"ui-components/inline-loader",null,[["loaderClass"],["inline-loader"]]],false],[0,"\\n          "],[1,[27,"t",["tickets.ticket_associations.associated_tickets.service_task.progress"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["serviceTasksCount"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","mb-10"],[9],[0,"\\n          "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"associatedServiceTasks"],null]],[11,"data-test-id","list-service-tasks"],[11,"class","text--small"],[9],[0,"\\n            "],[1,[27,"t",["tickets.ticket_associations.child_list.service_task.label"],[["count"],[[23,["serviceTasksCount"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[23,["showSTEmptyMessage"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","mb-10 text--gray"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.child_list.service_task.label.no_service_tasks"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["canAddMoreTasks"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","create-service-task"],[9],[0,"\\n        "],[1,[27,"svg-jar",["plus"],[["aria-label","class"],["AddServiceTask","app-icon hint--rounded hint--top create-service-task__icon"]]],false],[0,"\\n        "],[7,"a"],[12,"onClick",[27,"action",[[22,0,[]],[23,["associateTicketsSlider"]],"createServiceTask"],null]],[11,"data-test-id","create-service-task"],[11,"class","create-service-task__text"],[9],[0,"\\n          "],[1,[27,"t",["tickets.ticket_associations.service_task.create"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/service-task/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/thp-apps-nudge/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"UqZ/KMa+",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","element-flex flex-direction--column justify-content--space-between align-items--center"],[9],[0,"\\n  "],[7,"section"],[11,"data-test-id","thp-apps-nudge-icons"],[11,"class","element-flex max-width justify-content--space-between align-items--center pl-20 pr-20 mt-15 mb-15"],[9],[0,"\\n    "],[1,[27,"svg-jar",["integration-jira-new"],[["class"],["app-icon app-icon--xxlarge"]]],false],[0,"\\n    "],[1,[27,"svg-jar",["integration-slack-new"],[["class"],["app-icon app-icon--xxlarge"]]],false],[0,"\\n    "],[1,[27,"svg-jar",["integration-shopify"],[["class"],["app-icon app-icon--xxlarge"]]],false],[0,"\\n    "],[1,[27,"svg-jar",["integration-teams-new"],[["class"],["app-icon app-icon--xxlarge"]]],false],[0,"\\n    "],[1,[27,"svg-jar",["office_icon"],[["class"],["app-icon app-icon--xxlarge"]]],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"p"],[11,"data-test-id","thp-apps-nudge-title"],[11,"class","text--extrabold text--darkblue text--medium text-align--center"],[9],[1,[27,"t",["fd.features.installedApps"],null],false],[10],[0,"\\n  "],[7,"p"],[11,"data-test-id","thp-apps-nudge-description"],[11,"class","text-align--center text--normal text--xsmall"],[9],[1,[27,"html-safe",[[27,"t",["fd.try-higher.apps_nudge_description"],null]],null],false],[10],[0,"\\n\\n"],[4,"link-to",["helpdesk.admin.explore",[27,"query-params",null,[["plan","feature"],["growth","installedApps"]]]],[["data-test-id","class"],["thp-apps-nudge-link","link-no-underline"]],{"statements":[[4,"nucleus-button",null,[["variant"],["secondary"]],{"statements":[[0,"      "],[7,"span"],[11,"class","text--extrabold text--darkblue"],[9],[1,[27,"t",["fd.try-higher.explore-plan.try-for-free"],null],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/thp-apps-nudge/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/time-entries/component",["exports","freshdesk/mixins/tickets/time-entry","freshdesk/utils/blank-array","ember-concurrency"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend(t.default,{store:Ember.inject.service(),moment:Ember.inject.service(),isLoading:!1,timeEntriesCount:0,perPage:100,timerRunningPoll:!1,sortList:["executedAt:desc","createdAt:desc"],timeSpent:0,maxTimeEntries:99,runningTimeEntries:(0,s.default)(),timeEntriesSorted:Ember.computed.sort("ticket.timeEntries","sortList"),totalTimeLogged:Ember.computed("timeSpent",(function(){var e=Ember.get(this,"timeSpent");return{hrs:e>=3600?Math.trunc(e/3600).toString().padStart(2,0):"00",mins:e>60?Math.trunc(e%3600/60).toString().padStart(2,0):"00",secs:(e%60).toString().padStart(2,0)}})),reloadHandler:Ember.observer("reload",(function(){this.fetchTimeEntries()})),reloadComputeTimeEntries:Ember.observer("ticket.timeEntries.@each.{isRunning,updatedAt}",(function(){this.computeTotalTime()})),init:function(){this._super.apply(this,arguments),Ember.set(this,"isLoading",!0),this.fetchTimeEntries()},willDestroyElement:function(){this._super.apply(this,arguments),this.stopTimer()},actions:{showTimeEntryForm:function(e){this.showTimeEntryForm(e)},startStopTimer:function(e){this.startStopTimer(e).then(this._success.bind(this,e),this._flashErrorMessage.bind(this,"ticket.details.timeentry.toggle.error"))},deleteTimeEntry:function(e){var t=this;this.deleteTimeEntry(e).then((function(){t.deleteTimeAppsData(e),t._flashSuccessMessage.bind(t,"ticket.details.timeentry.delete.success"),t.computeTotalTime()}),this._flashErrorMessage.bind(this,"ticket.details.timeentry.delete.error"))},tabActivated:function(){this.fetchTimeEntries()}},_success:function(e){this.updateTimerToApps(e),this.fetchTimeEntries()},stopTimer:function(){Ember.get(this,"totalTimer").cancelAll(),Ember.set(this,"timerRunningPoll",!1)},totalTimer:(0,n.task)(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Ember.get(this,"timerRunningPoll");case 1:if(!s){e.next=8;break}return i=Ember.get(this,"timeSpent"),e.next=5,(0,n.timeout)(1e3);case 5:Ember.set(this,"timeSpent",i+t),e.next=1;break;case 8:case"end":return e.stop()}}),e,this)}))).restartable(),fetchTimeEntries:function(){var e={per_page:Ember.get(this,"perPage")};Ember.get(this,"ticket").getAllTimeEntries(e).then(this._fetchTimeEntriesCB.bind(this),this._flashErrorMessage.bind(this,"ticket.details.timeentry.loading.error"))},_fetchTimeEntriesCB:function(e){Ember.get(this,"store").pushPayload(e),this.computeTotalTime()},computeTotalTime:function(){var e=this,t=Ember.get(this,"ticket.timeEntries")||[],s=[],n=0;t.forEach((function(t){var i=Ember.get(t,"timerRunning"),a=Ember.get(t,"timeSpent");if(i){s.push(t.id);var r=Ember.get(t,"startTime");a+=moment().diff(moment(r,Ember.get(e,"currentAccount.timeFormat.utc")),"seconds")}n+=a})),Ember.setProperties(this,{timeSpent:n,runningTimeEntries:s,isLoading:!1}),s.length?(Ember.set(this,"timerRunningPoll",!0),Ember.get(this,"totalTimer").perform(s.length,n)):this.stopTimer()},_flashSuccessMessage:function(e){this.flashMessages.success(this.i18n.t(e))},_flashErrorMessage:function(e){this.flashMessages.danger(this.i18n.t(e))}});e.default=i})),define("freshdesk/components/module-tickets/ticket-details/widgets/time-entries/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"uIQijXKg",block:'{"symbols":["timeEntry","index"],"statements":[[7,"div"],[11,"class","add-timer"],[9],[0,"\\n  "],[7,"div"],[11,"class","add-timer-content"],[9],[0,"\\n"],[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"      "],[1,[21,"ui-components/part-loading"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","time-tracked"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["timeEntriesSorted","length"]],[27,"lte",[[23,["timeEntriesSorted","length"]],[23,["maxTimeEntries"]]],null]],null]],null,{"statements":[[0,"          "],[7,"p"],[11,"class","time-tracked-label text--xsmall mb-2"],[9],[1,[27,"t",["timer.total-time-tracked"],null],false],[10],[0,"\\n          "],[7,"div"],[11,"class","total-time-counter text--large text--semibold"],[11,"data-test-id","total-time-tracked"],[9],[0,"\\n            "],[7,"span"],[9],[1,[23,["totalTimeLogged","hrs"]],false],[0,"h"],[10],[0,"\\n            "],[7,"span"],[11,"class","ml-12"],[9],[1,[23,["totalTimeLogged","mins"]],false],[0,"m"],[10],[0,"\\n            "],[7,"span"],[11,"class","ml-12"],[9],[1,[23,["totalTimeLogged","secs"]],false],[0,"s"],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"p"],[11,"class","time-tracked-label text--xsmall"],[9],[1,[27,"t",["timer.start-time-entries"],null],false],[10],[0,"\\n"]],"parameters":[]}],[0,"        "],[7,"button"],[11,"class","btn btn--primary text--xsmall btn__small mt-8"],[12,"aria-label",[27,"t",["timer.add-time"],null]],[11,"data-test-id","add-time"],[12,"disabled",[27,"not",[[23,["ticket","hasPermission"]]],null]],[3,"action",[[22,0,[]],"showTimeEntryForm",null]],[9],[0,"\\n          "],[1,[27,"t",["timer.add-time"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"each",[[23,["timeEntriesSorted"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-details/widgets/time-entries/time-entry",null,[["timeEntry","isEditable","timerAppActivated","isRunning","index","onTabFocused"],[[22,1,[]],[23,["ticket","hasPermission"]],[23,["timerAppActivated"]],[22,1,["timerRunning"]],[22,2,[]],[27,"action",[[22,0,[]],"tabActivated"],null]]]],false],[0,"\\n"]],"parameters":[1,2]},null]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/time-entries/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/widgets/time-entries/time-entry/component",["exports","freshdesk/mixins/bubble-action","@freshdesk/common/utils/time-util","ember-concurrency","freshdesk/constants/ticket"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=Ember.Component.extend(t.default,{moment:Ember.inject.service(),eventSources:Ember.inject.service(),marketplace:Ember.inject.service(),currentUser:Ember.inject.service(),showMore:!1,timerRunningPoll:!1,tagName:"",hidden:"",visibilityChange:"",isAHTEnabled:Ember.computed("currentAccount.accountData.{features.[],launched.[]}",(function(){return this.currentAccount.mandatesEnabled({mandatoryFeatures:i.AHT_MANDATES.features,mandatoryLaunchParties:i.AHT_MANDATES.launchParties})})),canEditTimer:Ember.computed("timeEntry",(function(){return(Ember.get(this,"currentUser").hasAbility("edit_time_entries")||Ember.get(this,"currentUser.id")==Ember.get(this,"timeEntry.agent.id"))&&Ember.get(this,"isEditable")})),executedToday:Ember.computed("timeEntry.executedAt",(function(){var e=Ember.get(this,"timeEntry.executedAt");return s.default.isToday(e,Ember.get(this,"moment"))})),timeEntryNote:Ember.computed("timeEntry.note","showMore",(function(){var e=Ember.get(this,"timeEntry.note"),t=Ember.get(this,"showMore");return{moreText:t?"fd.showless":"fd.showmore",note:t?e:"".concat(e.substring(0,64).trim(),"...")}})),init:function(){this._super.apply(this,arguments),Ember.get(this,"isRunning")&&this.initiateTimer(),this._browserSwitch=this._onBrowserTabSwitch.bind(this),void 0!==document.hidden?(Ember.set(this,"hidden","hidden"),Ember.set(this,"visibilityChange","visibilitychange")):void 0!==document.msHidden?(Ember.set(this,"hidden","mozHidden"),Ember.set(this,"visibilityChange","msvisibilitychange")):void 0!==document.webkitHidden&&(Ember.set(this,"hidden","webkitHidden"),Ember.set(this,"visibilityChange","webkitvisibilitychange")),document.addEventListener(Ember.get(this,"visibilityChange"),this._browserSwitch,!1)},willDestroyElement:function(){this._super.apply(this,arguments),Ember.get(this,"isRunning")||this.stopTimer(),document.removeEventListener(Ember.get(this,"visibilityChange"),this._browserSwitch)},didUpdateAttrs:function(){this._super.apply(this,arguments),Ember.get(this,"isRunning")?this.initiateTimer():this.stopTimer()},actions:{showTimeEntryForm:function(e){this.bubbleAction("showTimeEntryForm",e),Ember.set(this,"timerAppActivated",!1)},startStopTimer:function(e){this.bubbleAction("startStopTimer",e)},deleteTimeEntry:function(e){this.bubbleAction("deleteTimeEntry",e);var t=Ember.get(this,"eventSources").getModelHash(e);Ember.get(this,"marketplace").publishEvent({event:"ticket.deleteTimer",data:t})},toggleShowMore:function(){var e=Ember.get(this,"showMore");Ember.set(this,"showMore",!e)}},totalTimer:(0,n.task)(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Ember.get(this,"timerRunningPoll"),i=Ember.get(this,"timeEntry");case 2:if(!s){e.next=9;break}return e.next=5,(0,n.timeout)(1e3);case 5:t+=1,Ember.set(i,"newTimeSpent",t),e.next=2;break;case 9:case"end":return e.stop()}}),e,this)}))).restartable(),initiateTimer:function(){var e=Ember.get(this,"timeEntry"),t=Ember.get(e,"timeSpent"),s=Ember.get(e,"startTime"),n=t+moment().diff(moment(s,Ember.get(this,"currentAccount.timeFormat.utc")),"seconds");Ember.set(e,"newTimeSpent",n),Ember.set(this,"timerRunningPoll",!0),Ember.get(this,"totalTimer").perform(n)},stopTimer:function(){Ember.get(this,"totalTimer").cancelAll(),Ember.set(this,"timerRunningPoll",!1)},_onBrowserTabSwitch:function(){Ember.get(this,"isRunning")&&!document[Ember.get(this,"hidden")]&&(this.initiateTimer(),this.onTabFocused())}});e.default=a})),define("freshdesk/components/module-tickets/ticket-details/widgets/time-entries/time-entry/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5F58Hrey",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","add-timer__card"],[9],[0,"\\n  "],[7,"div"],[11,"class","clearfix"],[9],[0,"\\n    "],[7,"span"],[12,"class",[28,[[27,"if",[[23,["timeEntry","billable"]],"","hide "],null],"tag tag--billable"]]],[9],[1,[27,"t",["timer.billable"],null],false],[10],[0,"\\n    "],[7,"ul"],[11,"class","time-format text__content clearfix"],[9],[0,"\\n      "],[7,"li"],[11,"class","time-format__item"],[9],[0,"\\n        "],[7,"p"],[11,"data-test-timeEntry","hrs"],[12,"class",[28,["time-count ",[27,"if",[[27,"eq",[[23,["timeEntry","timeSpentHrs"]],"00"],null],"time-count--zero",""],null]]]],[9],[0,"\\n          "],[1,[23,["timeEntry","timeSpentHrs"]],false],[0,"\\n          "],[7,"span"],[11,"class","text__content time-units"],[9],[0,"h"],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"li"],[11,"class","time-format__item"],[9],[0,"\\n        "],[7,"p"],[11,"data-test-timeEntry","mins"],[12,"class",[28,["time-count ",[27,"if",[[27,"eq",[[23,["timeEntry","timeSpentMins"]],"00"],null],"time-count--zero",""],null]]]],[9],[0,"\\n          "],[1,[23,["timeEntry","timeSpentMins"]],false],[0,"\\n          "],[7,"span"],[11,"class","text__content time-units"],[9],[0,"m"],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"li"],[11,"class","time-format__item"],[9],[0,"\\n        "],[7,"p"],[11,"data-test-timeEntry","secs"],[12,"class",[28,["time-count text__content ",[27,"if",[[27,"eq",[[23,["timeEntry","timeSpentSecs"]],"00"],null],"time-count--zero",""],null]]]],[9],[0,"\\n          "],[1,[23,["timeEntry","timeSpentSecs"]],false],[0,"\\n          "],[7,"span"],[11,"class","text__content time-units"],[9],[0,"s"],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["canEditTimer"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","add-timer-options clearfix"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["executedToday"]],[27,"not",[[23,["isRunning"]]],null],[27,"not",[[23,["isAHTEnabled"]]],null]],null]],null,{"statements":[[0,"          "],[7,"a"],[11,"data-test-timeEntry","start"],[11,"class","add-timer-options__item"],[12,"aria-label",[27,"t",["time-entry.start-timer"],null]],[3,"action",[[22,0,[]],"startStopTimer",[23,["timeEntry"]]]],[9],[0,"\\n            "],[1,[27,"t",["timer.start"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["isRunning"]]],null,{"statements":[[0,"          "],[7,"a"],[11,"data-test-timeEntry","stop"],[11,"class","add-timer-options__item"],[12,"aria-label",[27,"t",["time-entry.stop-timer"],null]],[3,"action",[[22,0,[]],"startStopTimer",[23,["timeEntry"]]]],[9],[0,"\\n            "],[1,[27,"t",["timer.stop"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"not",[[23,["isAHTEnabled"]]],null]],null,{"statements":[[0,"          "],[7,"a"],[11,"data-test-timeEntry","edit"],[11,"class","add-timer-options__item"],[12,"aria-label",[27,"t",["fd.edit"],null]],[3,"action",[[22,0,[]],"showTimeEntryForm",[23,["timeEntry"]]]],[9],[0,"\\n            "],[1,[27,"t",["fd.edit"],null],false],[0,"\\n          "],[10],[0,"\\n        "]],"parameters":[]},null]],"parameters":[]}],[0,"\\n        "],[7,"a"],[11,"data-test-timeEntry","delete"],[11,"class","add-timer-options__item"],[12,"aria-label",[27,"t",["fd.delete"],null]],[3,"action",[[22,0,[]],"deleteTimeEntry",[23,["timeEntry"]]]],[9],[0,"\\n          "],[1,[27,"t",["fd.delete"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","add-timer-bottom clearfix"],[9],[0,"\\n    "],[7,"div"],[11,"class","container-fluid p0"],[9],[0,"\\n      "],[7,"div"],[11,"data-test-timeEntry","avatar"],[11,"class","col-md-2 text-left p0"],[9],[0,"\\n        "],[1,[27,"app-components/avatar-user",null,[["user","class"],[[23,["timeEntry","agent","contact"]],"contacts__cardpic contacts__avatar"]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","col-md-10 p0 pl-6"],[9],[0,"\\n        "],[7,"p"],[11,"data-test-timeEntry","agent"],[11,"class","text__content text--semibold"],[9],[1,[23,["timeEntry","agent","contact","name"]],false],[10],[0,"\\n        "],[7,"p"],[11,"data-test-timeEntry","executedAt"],[11,"class","text__infotext text--xsmall mb-0"],[9],[0,"\\n          "],[1,[27,"t",["tickets.activities.actions.timesheet.on"],null],false],[0," "],[1,[27,"moment-format",[[23,["timeEntry","executedAt"]],[23,["currentAccount","timeFormat","fullDate"]]],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","container-fluid p0"],[9],[0,"\\n"],[4,"if",[[23,["timeEntry","note"]]],null,{"statements":[[0,"        "],[7,"p"],[11,"data-test-timeEntry","note"],[11,"class","text__content timer-note text--xsmall"],[9],[0,"\\n"],[4,"if",[[27,"gt",[[23,["timeEntry","note","length"]],64],null]],null,{"statements":[[0,"            "],[1,[23,["timeEntryNote","note"]],false],[0,"\\n            "],[7,"span"],[11,"class","show-more"],[3,"action",[[22,0,[]],"toggleShowMore"]],[9],[0,"\\n              "],[1,[27,"t",[[23,["timeEntryNote","moreText"]]],null],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[23,["timeEntry","note"]],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/widgets/time-entries/time-entry/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/component",["exports","ember-concurrency","freshdesk/utils/blank-array","freshdesk/utils/search"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend({classNames:["ticket-workflows text--antialias"],store:Ember.inject.service(),currentUser:Ember.inject.service(),searchValue:"",errorInAutomationFetch:!1,errorInExecutionFetch:!1,activeItemsForAutomations:(0,s.default)(),activeItemsForExecutions:(0,s.default)(),openedAutomationItem:Ember.computed.reads("activeItemsForAutomations.firstObject.id"),openedExecutionItem:Ember.computed.reads("activeItemsForExecutions.firstObject.id"),isSearchValuePresent:Ember.computed.bool("searchValue.length"),showExecutionsList:Ember.computed.not("isSearchValuePresent"),filteredAutomations:(0,n.default)("automations","name","searchValue"),init:function(){var e=this;this._super.apply(this,arguments),this.fetchExecutions.perform().catch((function(){return e.errorInFetch("errorInExecutionFetch")})),this.fetchAutomations.perform().catch((function(){return e.errorInFetch("errorInAutomationFetch")}))},errorInFetch:function(e){this.set(e,!0)},fetchExecutions:(0,t.task)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.query("robo-assist-automation-execution",{ticket_id:this.ticket.id});case 2:t=e.sent,this.set("executions",t.toArray());case 4:case"end":return e.stop()}}),e,this)}))).restartable(),fetchAutomations:(0,t.task)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.query("robo-assist-automation",{group_ids:this.currentUser.groupIds,enabled:!0,status:["ACTIVE"]});case 2:t=e.sent,this.set("automations",t);case 4:case"end":return e.stop()}}),e,this)}))).restartable(),actions:{clearActiveItems:function(){this.set("activeItemsForAutomations",[])},updateExecutionsList:function(e){this.executions.unshiftObject(e),this.set("searchValue","")},onSearch:function(e){this.setProperties({activeItemsForAutomations:[],searchValue:e})},refreshAutomations:function(){this.set("searchValue",""),Ember.get(this,"fetchAutomations").perform()}}});e.default=i})),define("freshdesk/components/module-tickets/ticket-details/workflows/executed/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["ticket-workflows__body_basic-heading cursor-pointer"],statusTranslations:{"In progress":"dashboard.agent-availability.chat",Completed:"fsm.completed",Failed:"bot.unanswered.map_failed.one"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/executed/fields/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["ticket-workflows__body_item_content_execution_parameters_param wordbreak-fix pr-10 text--xsmall"],attributeBindings:["data-test-id"],"data-test-id":"freddy-processes-execution-item-parameters-param",moment:Ember.inject.service(),currentAccount:Ember.inject.service(),dateFormat:Ember.computed.reads("currentAccount.timeFormat.date"),timeFormat:Ember.computed.reads("currentAccount.timeFormat.calendarDateTime"),param:Ember.computed("automationParameters","name",(function(){return this.automationParameters.findBy("name",this.key)})),label:Ember.computed.reads("param.label"),type:Ember.computed.reads("param.type"),selectedValue:Ember.computed("type","value",(function(){var e=this.formatFromType[this.type];return e?e(this):this.value})),formatFromType:{date:function(e){var t=e.value,s=e.moment,n=e.dateFormat;return s.moment(new Date(t)).format(n)},datetime:function(e){var t=e.value,s=e.moment,n=e.timeFormat;return s.moment(new Date(t)).format(n)},multiselect:function(e){var t=e.value,s=e.param;return t.map((function(e){return s.options.findBy("id",e).name})).join(", ")}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/executed/fields/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"/eauWOdR",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","text--verylightgrey"],[9],[1,[21,"label"],false],[10],[0,"\\n"],[7,"div"],[11,"class","text--dark text--extra-bold hint--rounded hint--top execution_parameters_param_value"],[12,"aria-label",[21,"selectedValue"]],[9],[0,"\\n  "],[1,[27,"ellipsis-text",[[23,["selectedValue"]],30],null],false],[0,"\\n"],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/workflows/executed/fields/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/executed/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"9k3Ppg27",block:'{"symbols":["value","key","isExpanded"],"statements":[[4,"component",[[23,["accordion","trigger"]]],[["class","data-test-id"],["ticket-workflows__body_item_execution","freddy-processes-execution-item"]],{"statements":[[0,"  "],[7,"div"],[11,"class","element-flex ticket-workflows__body_basic-heading pa-16"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading-left"],[9],[0,"\\n      "],[7,"h5"],[11,"class","ticket-workflows__body_basic-heading-title mt-0 text--extra-bold"],[9],[0,"\\n        "],[1,[23,["item","automation","name"]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","text--verylightgrey text--xsmall"],[9],[0,"\\n        "],[1,[27,"truncate",[[23,["item","automation","description"]],100,true],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading-right element-flex align-items--center justify-content--end"],[9],[0,"\\n      "],[7,"div"],[11,"data-test-id","freddy-processes-execution-status"],[12,"class",[27,"concat",["ticket-workflows__body_tag pt-2 pb-2 pr-8 pl-8 text--xsmall text--extra-bold ",[27,"underscore",[[23,["item","status"]]],null]],null]],[9],[0,"\\n        "],[1,[27,"t",[[27,"get",[[23,["statusTranslations"]],[23,["item","status"]]],null]],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[27,"eq",[[23,["item","status"]],"Failed"],null]],null,{"statements":[[0,"      "],[1,[27,"nucleus-inline-banner",null,[["class","type","title","isDismissible"],["mt-8 max-width","danger",[23,["item","errorMsg"]],false]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n  "],[7,"div"],[11,"class","element-flex text--xsmall text--verylightgrey ticket-workflows__body_basic-details pt-12 pb-12 pl-16 pr-16"],[9],[0,"\\n    "],[7,"div"],[11,"class","triggered"],[9],[0,"\\n      "],[7,"span"],[9],[1,[27,"t",["fd.time"],null],false],[0," : "],[10],[0,"\\n      "],[7,"span"],[11,"class","text--dark text--extra-bold pr-20"],[9],[1,[27,"moment-format",[[23,["item","triggeredTime"]],[23,["currentAccount","timeFormat","calendarDateTime"]]],null],false],[10],[0,"\\n      "],[7,"span"],[11,"class","triggered-agent pl-20"],[9],[1,[27,"t",["fd.agent"],null],false],[0," : "],[10],[0,"\\n      "],[7,"span"],[11,"class","text--dark text--extra-bold"],[9],[0,"\\n        "],[1,[27,"ellipsis-text",[[27,"fill-default",[[23,["item","agent","name"]]],null],15],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[23,["item","id"]],[23,["openedExecutionItem"]]],null]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","hint--rounded hint--top element-flex align-self--center"],[12,"aria-label",[27,"t",["fd.viewless"],null]],[9],[0,"\\n          "],[1,[27,"svg-jar",["accordion-open"],[["class"],["app-icon app-icon--smallsecondary"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","hint--rounded hint--top element-flex align-self--center"],[12,"aria-label",[27,"t",["fd.expand.collapse.more"],null]],[9],[0,"\\n          "],[1,[27,"svg-jar",["accordion-close"],[["class"],["app-icon app-icon--smallsecondary"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[3]},null],[4,"component",[[23,["accordion","content"]]],[["class","data-test-id"],["ticket-workflows__body_item_content ticket-workflows__body_item_content_execution","freddy-processes-execution-item-content"]],{"statements":[[0,"  "],[7,"div"],[11,"class","element-flex ticket-workflows__body_item_content_execution_parameters pt-12"],[11,"data-test-id","freddy-processes-execution-item-parameters"],[9],[0,"\\n"],[4,"each",[[27,"-each-in",[[23,["item","parameters"]]],null]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-details/workflows/executed/fields",null,[["key","value","automationParameters"],[[22,2,[]],[22,1,[]],[23,["item","automation","parameters"]]]]],false],[0,"\\n"]],"parameters":[1,2]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/workflows/executed/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/form-fields/component",["exports","ember-concurrency"],(function(e,t){function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend({store:Ember.inject.service(),executeWorkflowSuccess:function(e){this.updateExecutionsList(e),this.flashMessages.success(this.i18n.t("ticket.details.executed_process.success",{name:e.automation.name,id:this.ticket.id})),this.clearItemAndAccordion()},executeWorkflowFailure:function(){this.flashMessages.danger(this.i18n.t("ticket.details.executed_process.error",{name:this.item.name,id:this.ticket.id}))},clearItemAndAccordion:function(){this.item.rollbackAttributes(),this.clearActiveItems()},executeWorkflow:(0,t.task)(regeneratorRuntime.mark((function e(){var t,n,i,a,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.item.validations.isValid){e.next=5;break}return t=this.item,n=t.id,i=t.parameters,a=this.store.createRecord("robo-assist-automation-execution",{automation:{id:n},ticketId:this.ticket.id,parameters:i.map((function(e){return s({},e.name,e.value)}))}),e.next=5,a.save().then((function(e){return r.executeWorkflowSuccess(e)})).catch((function(){return r.executeWorkflowFailure.bind(r)}));case 5:case"end":return e.stop()}}),e,this)}))),actions:{onCancel:function(){this.clearItemAndAccordion()}}});e.default=n})),define("freshdesk/components/module-tickets/ticket-details/workflows/form-fields/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"s+qvqQrT",block:'{"symbols":["f","field"],"statements":[[4,"ui-form/form-for",null,[["submit"],[[27,"perform",[[23,["executeWorkflow"]]],null]]],{"statements":[[0,"  "],[7,"div"],[11,"class","ticket-workflows__body_accordion m0 element-flex"],[9],[0,"\\n"],[4,"each",[[23,["item","parameters"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-workflows__body_accordion-section element-flex"],[9],[0,"\\n"],[4,"if",[[27,"or",[[27,"eq",[[22,2,["type"]],"str"],null],[27,"eq",[[22,2,["type"]],"email"],null]],null]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,1,["text-field"]],"value"],[["model","label"],[[22,2,[]],[22,2,["label"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"int"],null]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,1,["number-field"]],"value"],[["model","minValue","label"],[[22,2,[]],0,[22,2,["label"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["type"]],"text"],null]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,1,["textarea-field"]],"value"],[["model","label"],[[22,2,[]],[22,2,["label"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[22,2,["type"]],"datetime"],null],[27,"eq",[[22,2,["type"]],"date"],null]],null]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,1,["date-field"]],"value"],[["showTime","showClearButton","model","format","label"],[[27,"eq",[[22,2,["type"]],"datetime"],null],false,[22,2,[]],[27,"if",[[27,"eq",[[22,2,["type"]],"date"],null],[23,["currentAccount","timeFormat","date"]],[23,["currentAccount","timeFormat","calendarDateTime"]]],null],[22,2,["label"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[22,2,["type"]],"list"],null],[27,"eq",[[22,2,["type"]],"multiselect"],null]],null]],null,{"statements":[[0,"          "],[1,[27,"component",[[22,1,["select-field"]],"value"],[["model","hideDefault","multiple","placeholder","options","optionValuePath","optionLabelPath"],[[22,2,[]],true,[27,"eq",[[22,2,["type"]],"multiselect"],null],[22,2,["label"]],[22,2,["options"]],"id","name"]]],false],[0,"\\n        "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[2]},null],[0,"  "],[10],[0,"\\n  "],[7,"div"],[11,"class","ticket-workflows__body_accordion_actions element-flex"],[9],[0,"\\n    "],[1,[27,"component",[[22,1,["submit"]]],[["data-test-id","default","pending","class","disableWhen"],["workflow-execute",[27,"t",["fd.execute"],null],[27,"t",["common.saving"],null],"btn btn--primary mr-10",[23,["executeWorkflow","isRunning"]]]]],false],[0,"\\n    "],[1,[27,"nucleus-button",null,[["data-test-id","label","variant","onClick"],["workflow-execute-cancel",[27,"t",["form.cancel"],null],"secondary",[27,"action",[[22,0,[]],"onCancel"],null]]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/workflows/form-fields/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-details/workflows/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"caJw2QVI",block:'{"symbols":["modal","item","accordion","isExpanded","item","accordion"],"statements":[[4,"ui-components/inline-slider",null,null,{"statements":[[0,"\\n"],[4,"component",[[22,1,["header"]]],[["showCloseButton","onClose"],[true,[23,["onClose"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","ticket-workflows__header m0 text--semibold text--xxmedium element-flex align-items--center"],[9],[0,"\\n      "],[1,[27,"svg-jar",["robo-assist-agent"],[["class"],["app-icon app-icon--large mr-12"]]],false],[0,"\\n      "],[1,[27,"t",["fd.roboassist_processes"],null],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,1,["body"]]],null,{"statements":[[0,"    "],[1,[27,"ui-components/search-field",null,[["data-test-id","value","placeholder","key-up","class"],["freddy-processes-search",[23,["searchValue"]],"Search processes",[27,"action",[[22,0,[]],"onSearch"],null],"mb-15 pl-2 pr-2"]]],false],[0,"\\n\\n"],[4,"if",[[23,["showExecutionsList"]]],null,{"statements":[[4,"if",[[23,["fetchExecutions","isRunning"]]],null,{"statements":[[0,"        "],[7,"p"],[11,"class","ticket-workflows__body_heading text--verylightgrey"],[9],[0,"\\n          "],[1,[27,"t",["ticket.details.executed_processes.all"],null],false],[0," "],[7,"span"],[11,"class","dot-loader"],[9],[10],[0,"\\n        "],[10],[0,"\\n        "],[1,[27,"ui-components/placeholder-loader/list-card/medium",null,[["class"],["mt-20 height-auto"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["executions","length"]]],null,{"statements":[[0,"        "],[7,"p"],[11,"class","ticket-workflows__body_heading text--verylightgrey"],[11,"data-test-id","freddy-processes-executions-title"],[9],[0,"\\n          "],[1,[27,"t",["ticket.details.executed_processes.all"],[["count"],[[27,"concat",["(",[23,["executions","length"]],")"],null]]]],false],[0,"\\n          "],[1,[27,"nucleus-button",null,[["icon","size","iconOnly","variant","class","aria-label","onClick"],["refresh","small",true,"secondary","hint--rounded hint--top",[27,"t",["common.refresh"],null],[27,"perform",[[23,["fetchExecutions"]]],null]]]],false],[0,"\\n        "],[10],[0,"\\n"],[4,"ui-components/basic-accordion",null,[["data-test-id","items","activeItems","isOpenByDefault","isScrollable"],["freddy-processes-executions",[23,["executions"]],[23,["activeItemsForExecutions"]],false,false]],{"statements":[[0,"          "],[1,[27,"module-tickets/ticket-details/workflows/executed",null,[["openedExecutionItem","item","accordion"],[[23,["openedExecutionItem"]],[22,5,[]],[22,6,[]]]]],false],[0,"\\n"]],"parameters":[5,6]},null],[0,"      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["fetchAutomations","isRunning"]]],null,{"statements":[[0,"      "],[7,"p"],[11,"class","ticket-workflows__body_heading text--verylightgrey"],[9],[0,"\\n        "],[1,[27,"t",["ticket.details.processes.all"],null],false],[0," "],[7,"span"],[11,"class","dot-loader"],[9],[10],[0,"\\n      "],[10],[0,"\\n      "],[1,[27,"ui-components/placeholder-loader/list-card/medium",null,[["class"],["mt-20 height-auto"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["errorInAutomationFetch"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","ticket-workflows__body element-flex align-items--center"],[9],[0,"\\n"],[4,"ui-components/empty-state",null,[["class","imageUrl","imageAltLabel","title","pageInfo","showNavigation","showContent"],["ticket-workflows__body_actions","https://indfassetsblue.freshdesk.com/production/a/assets/images/cx-automation/robo-assist/error-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg","fd.somethingwentwrong.line1","fd.somethingwentwrong.line1","",false,true]],{"statements":[[0,"          "],[1,[27,"nucleus-button",null,[["data-test-id","label","ariaLabel","onClick"],["freddy-processes-refresh",[27,"t",["common.refresh"],null],[27,"t",["common.refresh"],null],[27,"action",[[22,0,[]],"refreshAutomations"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["filteredAutomations","length"]]],null,{"statements":[[0,"      "],[7,"p"],[11,"class","ticket-workflows__body_heading text--verylightgrey"],[9],[0,"\\n        "],[1,[27,"t",[[27,"if",[[23,["isSearchValuePresent"]],"ticket.details.search_processes.all","ticket.details.processes.all"],null]],[["count"],[[27,"concat",["(",[23,["filteredAutomations","length"]],")"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"],[4,"ui-components/basic-accordion",null,[["data-test-id","items","activeItems","isOpenByDefault","isScrollable"],["freddy-processes",[23,["filteredAutomations"]],[23,["activeItemsForAutomations"]],false,false]],{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading cursor-pointer"],[9],[0,"\\n"],[4,"component",[[22,3,["trigger"]]],[["class","data-test-id"],["ticket-workflows__body_item element-flex","freddy-processes-item"]],{"statements":[[0,"            "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading-left"],[9],[0,"\\n              "],[7,"h5"],[11,"class","ticket-workflows__body_basic-heading-title mt-0 text--extra-bold"],[9],[0,"\\n                "],[1,[22,2,["name"]],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","text--verylightgrey text--xsmall"],[9],[0,"\\n                "],[1,[27,"truncate",[[22,2,["description"]],100,true],null],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading-right element-flex align-items--center justify-content--end"],[9],[0,"\\n              "],[7,"div"],[11,"class","ticket-workflows__body_basic-heading-right-svg border-radius--medium app-icon--xxlarge element-flex align-items--center justify-content--center cursor-pointer"],[9],[0,"\\n"],[4,"if",[[27,"eq",[[22,2,["id"]],[23,["openedAutomationItem"]]],null]],null,{"statements":[[0,"                  "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--smallsecondary"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[27,"svg-jar",["right-arrow"],[["class"],["app-icon app-icon--smallsecondary"]]],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[4]},null],[4,"if",[[22,2,["parameters","length"]]],null,{"statements":[[4,"component",[[22,3,["content"]]],[["class","data-test-id"],["ticket-workflows__body_item_content","freddy-processes-item-content"]],{"statements":[[0,"              "],[1,[27,"module-tickets/ticket-details/workflows/form-fields",null,[["clearActiveItems","updateExecutionsList","ticket","item"],[[27,"action",[[22,0,[]],"clearActiveItems"],null],[27,"action",[[22,0,[]],"updateExecutionsList"],null],[23,["ticket"]],[22,2,[]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[2,3]},null]],"parameters":[]},{"statements":[[0,"      "],[7,"p"],[11,"class","ticket-workflows__body_heading text--verylightgrey"],[9],[0,"\\n        "],[1,[27,"t",[[27,"if",[[23,["isSearchValuePresent"]],"ticket.details.search_processes.all","ticket.details.processes.all"],null]],[["count"],[[27,"concat",["(",[23,["filteredAutomations","length"]],")"],null]]]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","ticket-workflows__body element-flex align-items--center"],[9],[0,"\\n"],[4,"ui-components/empty-state",null,[["class","imageUrl","pageInfo","title","showNavigation","showContent"],["ticket-workflows__body_actions",[27,"if",[[23,["isSearchValuePresent"]],"https://indfassetsblue.freshdesk.com/production/a/assets/images/cx-automation/robo-assist/empty-workflows-search-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg","https://indfassetsblue.freshdesk.com/production/a/assets/images/cx-automation/robo-assist/no-workflows-admin-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg"],null],"","",false,true]],{"statements":[[0,"          "],[7,"div"],[11,"class","title text--xlarge"],[11,"data-test-id","freddy-processes-empty-state-title"],[9],[0,"\\n"],[4,"if",[[23,["isSearchValuePresent"]]],null,{"statements":[[0,"              "],[1,[27,"t",["ticket.details.process.no_message.search"],[["searchterm"],[[23,["searchValue"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["ticket.details.process.no_message"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n"],[4,"if",[[23,["isSearchValuePresent"]]],null,{"statements":[[0,"            "],[1,[27,"nucleus-button",null,[["data-test-id","label","ariaLabel","onClick"],["freddy-processes-view-all-workflows",[27,"t",["ticket.details.process.view_all"],null],[27,"t",["ticket.details.process.view_all"],null],[27,"action",[[22,0,[]],"refreshAutomations"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"      "],[10],[0,"\\n    "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"\\n"]],"parameters":[]},null],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-details/workflows/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/component",["exports","freshdesk/mixins/tickets/form","freshdesk/mixins/tickets/insert-canned-response","freshdesk/constants/ticket","freshdesk/constants/ticket-form","freshdesk/mixins/integrations/attachment-apps","ember-keyboard","freshdesk/utils/blank-array","ember-concurrency","freshdesk/mixins/marketplace/interface/ticket-properties","freshdesk/mixins/tickets/child-ticket","freshdesk/utils/custom-form","freshdesk/mixins/tickets/wrap-email-notification-font","freshdesk/utils/ticket-field","freshdesk/mixins/fetch-user","freshdesk/constants/freshcaller","freshdesk/utils/tickets/ticket-form","freshdesk/constants/contacts/default-attributes","freshdesk/mixins/tickets/quick-create-failure"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h,f,b,k,g){function v(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var E=Ember.Component.extend(t.default,r.EKMixin,g.default,s.default,a.default,c.default,d.default,u.default,h.default,{store:Ember.inject.service("store"),ajax:Ember.inject.service(),ticketFields:Ember.inject.service(),i18n:Ember.inject.service(),flashMessages:Ember.inject.service(),currentUser:Ember.inject.service(),router:Ember.inject.service(),fieldService:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),attributeBindings:["data-heap-id"],"data-heap-id":Ember.computed.reads("formType"),classNames:["__module-tickets__ticket-form"],model:null,ticketCompany:null,startContactValidations:!1,isLoaded:!1,descriptionValidation:!1,displayInlineCannedResponse:!1,scrollOffset:-80,createAnother:!1,updateContactAddress:!1,contactAttribute:null,newContact:null,addNewRequester:!0,showCcField:!0,contactCreateUrl:"/api/_/contacts/quick_create",selectedContact:null,contactValidated:!0,editTicket:!1,isNewContact:!1,formType:null,formSchema:null,displayFlash:!0,addedAttachments:(0,l.default)(),inlineAttachments:(0,l.default)(),dynamicAttachmentsIds:(0,l.default)(),isFormTypeCreateChild:Ember.computed.equal("formType","createChild"),allowContactCreate:Ember.computed.or("isFormTypeCreateChild","data.allowContactCreate"),isfreshcallerTicket:Ember.computed.reads("data.isfreshcallerTicket"),isfreshcallerEditTicket:Ember.computed.and("isfreshcallerTicket","data.editTicket"),currentStatus:Ember.computed.reads("model.status"),filterAttachments:Ember.computed.setDiff("dynamicAttachmentsIds","attachmentInternalList"),removedAttachments:Ember.computed.setDiff("attachmentInternalList","dynamicAttachmentsIds"),cloudAttachments:Ember.computed.alias("model.cloudFiles"),associatedTicket:Ember.computed.reads("data.currentTicket"),selectedinternalGroup:Ember.computed.reads("ticketRecord.internalGroup"),selectedinternalAgent:Ember.computed.reads("ticketRecord.internalAgent"),ticketRecord:Ember.computed.reads("data.ticket"),selectedAgent:null,ticket:Ember.computed.alias("ticketRecord"),isNew:Ember.computed.reads("ticketRecord.isNew"),contactEmail:Ember.computed.reads("associatedTicket.responder.email"),fetchAgentDetails:Ember.computed.reads("formSchema.fetchAgentRequester"),showServiceTaskWarning:Ember.computed((function(){return"createServiceTask"===Ember.get(this,"formType")&&!Ember.get(this,"fieldService").getFieldTechnicians().length})),canShowAddMoreChilds:Ember.computed("associatedTicket","associatedTicket.associatedTicketsCount",(function(){var e=Ember.get(this,"associatedTicket.associatedTicketsCount")<9,t=["createChild","createServiceTask"].includes(Ember.get(this,"formType"));return e&&t})),internalGroupAgentFNames:Ember.computed((function(){return["internalGroupId","internalAgentId"]})),fields:Ember.computed((function(){return{}})),attachmentInternalList:Ember.computed.map("model.attachments",(function(e){return parseInt(Ember.get(e,"id"))})),hasFeatureSharedOwnership:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("shared_ownership")})),customTemplate:Ember.computed("ticketRecord.type","formType",(function(){return m.default.renderCustomForm(Ember.get(this,"formType"),Ember.get(this,"ticketRecord.type"))})),gotoTicketLink:Ember.computed((function(){var e=Ember.get(this,"currentAccount.accountUrl");return"".concat(e,"/a/").concat(i.default.goToTicket.tickets,"/").concat(Ember.get(this,"ticketRecord.id"))})),assignToLabel:Ember.computed("formSchema.assignToLabel",(function(){var e=Ember.get(this,"formSchema.assignToLabel");return e?Ember.get(this,"i18n").t(e):Ember.get(this,"i18n").t("ticket.assignto")})),submitButtonTitle:Ember.computed("formSchema.submitButton",(function(){var e=Ember.get(this,"formSchema.submitButton");return e||"async.button.submit.tracker"})),hasFeatureSplitAssignTo:Ember.computed((function(){return Ember.get(this,"currentAccount").launched("group_agent_split")})),groupValue:Ember.computed("ticketRecord.group",{get:function(){return Ember.get(this,"ticketRecord.group")},set:function(e,t){return t}}),agentValue:Ember.computed("ticketRecord.responder",{get:function(){return Ember.get(this,"ticketRecord.responder")},set:function(e,t){return t}}),ticketAttachments:Ember.computed("model.attachments","inlineAttachments",(function(){var e=[],t=[];return Ember.get(this,"model.attachments")&&(e=Ember.get(this,"model.attachments").map((function(e){return e}))),Ember.get(this,"inlineAttachments")&&(t=Ember.get(this,"inlineAttachments").map((function(e){return e}))),e.concat(t)})),descriptionIsRequired:Ember.computed("fields.length","model.status",(function(){var e=Ember.get(this,"fields").findBy("type","default_description"),t=Ember.get(e,"requiredForAgents");return t||Ember.get(e,"requiredForClosure")&&Ember.get(this,"model.isMarkedClosed")})),init:function(){this._super.apply(this,arguments),this._setDefaultValues(),this._setDataFromModal(),this._setFormSchema();var e=Ember.get(this,"ticketFields.fields");Ember.set(this,"model",Ember.get(this,"ticketRecord"));var t=Ember.get(this,"isNew")?e.filterBy("hiddenInCreate",!1):e.filterBy("showInEdit",!0);Ember.set(this,"fields",t),Ember.set(this,"isLoaded",!0);var s=Ember.get(this,"ticketRecord.requesterId"),n=Ember.get(this,"allAgents").findBy("id","".concat(s));n&&Ember.set(this,"selectedAgent",n),this.sendAction("modalLoaded")},actions:{onInsertAttachment:function(e){Ember.set(this,"dynamicAttachmentsIds",e)},closeFlash:function(){Ember.set(this,"displayFlash",!1)},multipleCompany:function(e){Ember.set(this,"ticketCompany",e)},errorFieldFocus:function(){},submit:function(){var e=Ember.get(this,"model");return Ember.set(e,"companyId",Ember.get(this,"ticketCompany")),Ember.get(this,"formSchema.associationType")?Ember.get(this,"setAssociationParams").perform(e).then(this._createTicket.bind(this)):Ember.get(this,"data.allowContactCreate")&&Ember.get(this,"isNewContact")?Ember.get(this,"contactAndTicketCreation").perform(e):this._createTicket()},cancel:function(){this.clearCloudAttachments(),this.sendAction("close")},insertCannedResponse:function(e){this.setCannedResponse(e)},hideCannedResponse:function(){Ember.set(this,"cannedResponse",!1)},displayCannedResponse:function(){Ember.set(this,"cannedResponse",!0)},enableCannedResponse:function(){this.removeHeaderSubText(),this.toggleProperty("displayInlineCannedResponse")},onSaveAgentAndGroup:function(e,t){this._saveAgentAndGroup(e,t,"responderId","groupId")},onSaveInternalAgentAndGroup:function(e,t){Ember.setProperties(this,{selectedinternalGroup:t,selectedinternalAgent:e}),this._saveAgentAndGroup(e,t,"internalAgentId","internalGroupId")},setPriority:function(e){var t=Ember.get(this,"model");Ember.set(t,"priority",e)},hideCreateOnInvalidInputForRequester:function(e,t){return!!Ember.get(this,"allowContactCreate")&&(!!Ember.get(this,"currentUser").hasAbility("manageContacts")&&(!e.includes("@")||t.canCreate))},toggleAddRequester:function(){this.toggleProperty("isNewContact"),Ember.set(this,"ticketCompany",null),Ember.set(this,"selectedContact",null),Ember.set(this,"startContactValidations",!1)},onFieldChange:function(e,t){"customFields.cf_fsm_appointment_start_time"===t&&this.computeAppointmentEndTime(e)}},_createTicket:function(){var e=this._transitionToTicket.bind(this),t=this._updateCurrentTicket.bind(this),s=this._failure.bind(this);this.setDescription();var n=Ember.get(this,"model"),i=Ember.get(this,"isNew"),a=i?Ember.get(this,"dynamicAttachmentsIds"):Ember.get(this,"filterAttachments");return Ember.set(n,"attachmentIds",a),Ember.get(this,"isfreshcallerEditTicket")&&Ember.get(n,"hasDirtyAttributes")&&Ember.set(n,"isCustomFieldsChanged",!0),!Ember.get(this,"formSchema.associationType")||Ember.get(this,"data.from")?Ember.get(this,"isNew")?n.save().then((function(){e(n,i)})).catch(s):Ember.get(this,"_updateTicketContent").perform():Ember.get(this,"contactValidated")?n.save().then(t).catch(s):void 0},contactAndTicketCreation:(0,o.task)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ember.set(this,"startContactValidations",!0),e.next=3,Ember.get(this,"validateAndCreateContact").perform();case 3:if(!(s=e.sent)){e.next=7;break}return Ember.set(t,"requesterId",s.id),e.abrupt("return",this._createTicket());case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),setAssociationParams:(0,o.task)(regeneratorRuntime.mark((function e(t){var s,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Ember.get(this,"relatedTicketIds"),"createTracker"!==Ember.get(this,"formType")){e.next=6;break}n=Ember.get(this,"selectedAgent"),Ember.setProperties(t,{relatedTicketIds:s,requesterId:n.id}),e.next=13;break;case 6:if(Ember.setProperties(t,{parentId:s[0]}),!Ember.get(this,"isNewContact")){e.next=13;break}return e.next=10,Ember.get(this,"validateAndCreateContact").perform();case 10:i=e.sent,a=i?i.id:null,Ember.set(t,"requesterId",a);case 13:case"end":return e.stop()}}),e,this)}))),_transitionToTicket:function(e){this.sendAction("close"),this.clearFormFields(),this.clearCloudAttachments();var t=Ember.get(this,"isfreshcallerTicket"),s=!!t&&e.status===n.default.status.closed;this._checkGlobalPermission()||this._checkGroupPermission(e)||this._checkTicketPermission(e)?Ember.get(this,"editTicket")?this.sendAction("refreshAction"):s||Ember.get(this,"router").transitionTo("helpdesk.tickets.show",e.id):Ember.get(this,"router").transitionTo("helpdesk.tickets");var i=Ember.get(this,"i18n").t(Ember.get(this,"formSchema.successMessage"));Ember.get(this,"flashMessages").success(i),t&&window.dispatchEvent(new CustomEvent("addFreshcallerResource",{detail:{id:e.id,subject:e.subject,type:f.default.TYPE,link:"".concat(Ember.get(this,"currentAccount.accountUrl")+f.default.LINK_PATH).concat(e.id),createdAt:e.createdAt}}))},_failure:function(e){var t,s=e.message,n=e.errors,i=void 0===n?[]:n;if(i.length){var a=(0,p.constructErrorKey)(i[0].detail);a&&((t=Ember.get(a,"ticket_id"))?Ember.get(this,"updateFreshcallerTicket").perform(t):s=Ember.get(this,"i18n").t("".concat(a,".flashmessage"),{fieldName:i[0].detail.field}))}t||Ember.get(this,"flashMessages").danger(s)},_updateCurrentTicket:function(){Ember.set(this,"isLoaded",!1);var e=Ember.get(this,"associatedTicket"),t=Ember.get(this,"formSchema"),s=t.associationType,i=t.successMessage,a={ticket:{id:e.id,association_type:n.default.associationType[s],associated_tickets_count:Ember.get(e,"associatedTicketsCount")+1}};Ember.get(this,"store").pushPayload(a),Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t(i)),Ember.get(this,"createAnother")?(Ember.setProperties(this,{createAnother:!1,addNewRequester:!0,isNewContact:!1}),this._refreshTicketFields()):this.sendAction("close"),"createTracker"===Ember.get(this,"formType")&&Ember.get(this,"updateTrackerAction")(),"createServiceTask"===Ember.get(this,"formType")&&this.updateParentRequesterInfo()},updateFreshcallerTicket:(0,o.task)(regeneratorRuntime.mark((function e(t){var s,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this._failure.bind(this),e.next=3,Ember.get(this,"store").findRecord("ticket",t);case 3:for(a in n=e.sent,i=Ember.get(this,"model").changedAttributes())"fcCallId"!==a&&Ember.set(n,a,i[a].lastObject);n.save().then(this._transitionToTicket(n)).catch(s);case 7:case"end":return e.stop()}}),e,this)}))),updateParentRequesterInfo:function(){var e=this.peekUser(Ember.get(this,"associatedTicket.requesterId"));if((0,b.updateCustomerInfo)(e,this.currentUser,this.ticketRecord,this.updateContactAddress))return e.save({adapterOptions:{enforce_mandatory:!1}}).then(this.updateContactSuccess.bind(this)).catch(this._failure.bind(this))},updateContactSuccess:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("contacts.success.update"))},_setDataFromModal:function(){var e=Ember.get(this,"store"),t=Ember.get(this,"data");t&&t.contactEmail&&Ember.set(this,"contactEmail",t.contactEmail),t&&t.type&&(Ember.set(this,"associateAction",t.type),Ember.set(this,"relatedTicketIds",t.relatedTicketIds),Ember.set(this,"updateTrackerAction",t.updateTrackerFn)),Ember.set(this,"newContact",e.createRecord("contact")),Ember.get(this,"isfreshcallerEditTicket")&&Ember.set(this,"isNew",!0)},_refreshTicketFields:function(){var e=this,t=this.buildChildTicketSchema(Ember.get(this,"formType"),Ember.get(this,"associatedTicket"),Ember.get(this,"fields"));Ember.set(this,"ticketRecord",t),Ember.set(this,"model",t),Ember.run.next((function(){Ember.set(e,"isLoaded",!0)}))},_setDefaultValues:function(){Ember.set(this,"contactAttribute",["companyName"].concat(v(k.defaultContactFieldNames)))},_getformType:function(){var e=Ember.get(this,"associateAction");return e||(Ember.get(this,"isNew")?"createTicket":"editTicket")},_setFormSchema:function(){var e=this._getformType();Ember.set(this,"formType",e),Ember.set(this,"formSchema",i.default[e])},clearFormFields:function(){Ember.set(this,"ticketCompany",null),Ember.set(this,"selectedContact",null)},onChangeRequester:function(e){Ember.set(this,"selectedContact",e)},_updateTicketContent:(0,o.task)(regeneratorRuntime.mark((function e(){var t,s,n,i,a,r,l,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ember.get(this,"model"),!Ember.get(this,"addNewRequester")){e.next=6;break}Ember.set(t,"companyId",Ember.get(this,"ticketCompany")),s=Ember.get(t,"requesterId"),e.next=11;break;case 6:return e.next=8,Ember.get(this,"validateAndCreateContact").perform();case 8:n=e.sent,s=n.id,Ember.set(t,"email",n.email);case 11:i={subject:Ember.get(t,"subject"),description:this._wrapFontFamily(Ember.get(t,"description")),attachment_ids:Ember.get(t,"attachmentIds"),cloud_files:Ember.get(this,"serializedCloudAttachments"),requester_id:s,email:Ember.get(t,"email")},Ember.get(this,"ticketCompany")?i.company_id=Ember.get(this,"ticketCompany"):Ember.set(t,"company",null),Ember.get(t,"inlineAttachmentIds")&&Ember.set(i,"inline_attachment_ids",Ember.get(t,"inlineAttachmentIds")),a=t.changedAttributes(),r={event:"ticket.propertiesUpdated",data:{changedAttributes:a}},l=Ember.get(this,"marketplace").publishEvent(r),Ember.RSVP.Promise.all(this._deleteAttachmentPromises()).then((function(){l.then((function(){return t.updateTicket(i)})).then(o._handleUpdateTicketResponse.bind(o,t)).catch((function(e){return o._failure(e)}))}));case 18:case"end":return e.stop()}}),e,this)}))),_deleteAttachmentPromises:function(){var e=[],t=Ember.get(this,"store"),s=Ember.get(this,"removedAttachments");return s.length>0&&s.forEach((function(s){var n=t.peekRecord("attachment",s);e.push(n.destroyRecord())})),e},_clearModelErrorMessage:Ember.observer("model.errors.messages.[]",(function(){var e=Ember.get(this,"model");Ember.get(e,"errors.messages.length")>0&&Ember.run.later((function(){e._internalModel.clearErrorMessages()}))})),removeHeaderSubText:function(){Ember.get(this,"displayInlineCannedResponse")?document.querySelector(".modal-dialog .modal-content").classList.add("modal-title-subtext"):document.querySelector(".modal-title-subtext").classList.remove("modal-title-subtext")},createContact:(0,o.task)(regeneratorRuntime.mark((function e(t){var s,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},Ember.get(this,"contactAttribute").forEach((function(e){s[e.decamelize()]=Ember.get(t,e)})),e.prev=2,e.next=5,Ember.get(this,"ajax").request(Ember.get(this,"contactCreateUrl"),{method:"POST",data:JSON.stringify(s)});case 5:return n=e.sent,i=Ember.get(this,"i18n"),Ember.get(this,"flashMessages").success(i.t("ticket.requester.create.success")),Ember.set(this,"newContact",Ember.get(this,"store").createRecord("contact")),e.abrupt("return",n.data);case 12:e.prev=12,e.t0=e.catch(2),this.quickCreateFailure(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),validateAndCreateContact:(0,o.task)(regeneratorRuntime.mark((function e(){var t,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ember.get(this,"newContact"),Ember.set(this,"startContactValidations",!0),e.next=4,t.validate();case 4:if(s=e.sent,n=s.validations,!Ember.get(n,"isInvalid")){e.next=12;break}return Ember.set(this,"contactValidated",!1),this.incrementProperty("focusOnError"),e.abrupt("return");case 12:Ember.set(this,"contactValidated",!0);case 13:return e.next=15,Ember.get(this,"createContact").perform(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,this)}))),submitNewTicket:Ember.on((0,r.keyDown)("cmd+Enter"),(function(){this.send("submit")})),_checkGroupPermission:function(e){return Ember.get(this,"currentUser.ticketScope")===n.default.agentScope.group&&Ember.get(this,"currentUser.groupIds").includes(Ember.get(e,"groupId"))},_checkTicketPermission:function(e){return Ember.get(this,"currentUser").get("id")===Ember.get(e,"responderId")},_checkGlobalPermission:function(){return Ember.get(this,"currentUser.ticketScope")===n.default.agentScope.global},_saveAgentAndGroup:function(e,t,s,n){var i={},a=Ember.get(this,"model"),r=t&&Ember.get(t,"id"),l=e&&Ember.get(e,"id");i[n]=r?parseInt(r):null,i[s]=l?parseInt(l):null,Ember.setProperties(a,i)},_handleUpdateTicketResponse:function(e,t){Ember.get(this,"store").pushPayload(t),Ember.get(this,"model").rollbackAttributes(),Ember.get(this,"model.inlineAttachmentIds")&&Ember.set(this,"model.inlineAttachmentIds",[]),this._transitionToTicket(e)}});e.default=E})),define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/component",["exports","freshdesk/utils/service-task","freshdesk/constants/service-task-agent-availability","freshdesk/utils/user-agent"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend({i18n:Ember.inject.service(),ajax:Ember.inject.service(),moment:Ember.inject.service(),store:Ember.inject.service(),flashMessages:Ember.inject.service(),classNames:["__module-tickets__ticket-details__widgets__service-task__agent-availability"],isLoading:!0,agentTicketsPresent:Ember.computed.gt("agentTickets.length",0),currentTimeSlot:Ember.computed("fsmStartTime","fsmEndTime",(function(){var e=Ember.get(this,"fsmStartTime"),t=Ember.get(this,"fsmEndTime");return e&&t&&Ember.get(this,"moment").moment(t).isAfter(e)})),isIEAgent:Ember.computed((function(){return n.default.isIE()})),currentTimeSlotPos:Ember.computed("currentTimeSlot",(function(){var e=Ember.get(this,"moment").moment(Ember.get(this,"fsmStartTime")),t=Ember.get(this,"moment").moment(Ember.get(this,"fsmEndTime")),n=Ember.get(this,"timeWindows"),i=e.format(s.TIME_FORMAT),a=t.format(s.TIME_FORMAT),r=n.findIndex((function(e){return e===i})),l=e.isSame(t,"day")?n.findIndex((function(e){return e===a})):n.length;return"width: ".concat((l-r)*s.SLOT_WIDTH,"px; left: ").concat(r*s.SLOT_WIDTH,"px")})),responderName:Ember.computed("ticketResponderId",(function(){var e=Ember.get(this,"ticketResponderId"),t=Ember.get(this,"store").peekRecord("agent",e);return Ember.get(t,"name")})),currentDate:Ember.computed("fsmStartTime",(function(){var e=Ember.get(this,"fsmStartTime")?Ember.get(this,"moment").moment(Ember.get(this,"fsmStartTime")):Ember.get(this,"moment").moment();return this._positionElement(),e.format("LL")})),init:function(){this._super.apply(this,arguments),Ember.set(this,"timeWindows",s.TIME_WINDOWS),Ember.set(this,"_oldResponderId",Ember.get(this,"ticketResponderId")),Ember.set(this,"_oldStartTime",Ember.get(this,"fsmStartTime"));var e=Ember.get(this,"ticketResponderId")!==this.currentUser.id&&this.scrollOnLoad;Ember.set(this,"changePosition",e),this.updateAgentTickets()},didUpdateAttrs:function(){this._super.apply(this,arguments);var e=Ember.get(this,"_oldResponderId"),t=Ember.get(this,"ticketResponderId"),s=Ember.get(this,"moment").moment(Ember.get(this,"_oldStartTime")),n=Ember.get(this,"moment").moment(Ember.get(this,"fsmStartTime"));e===t&&s.isSame(n,"day")||(Ember.set(this,"changePosition",!0),Ember.set(this,"_oldResponderId",t),Ember.set(this,"_oldStartTime",Ember.get(this,"fsmStartTime")),this.updateAgentTickets())},didRender:function(){this._super.apply(this,arguments);var e=this.$(".time-window");e.length&&Ember.get(this,"changePosition")&&(this._positionElement(),Ember.set(this,"changePosition",!1))},updateAgentTickets:function(){Ember.set(this,"isLoading",!0);var e=t.default.formQueryParams(Ember.get(this,"moment"),Ember.get(this,"fsmStartTime"),Ember.get(this,"ticketResponderId"));Ember.get(this,"store").query("ticket",e).then(this._ticketSuccess.bind(this)).catch(this._ticketFailure.bind(this))},_ticketSuccess:function(e){Ember.set(this,"isLoading",!1),Ember.set(this,"agentTickets",e)},_positionElement:function(){var e=Ember.get(this,"fsmStartTime"),t=e?4*Ember.get(this,"moment").moment(e).hour():s.DEFAULT_HOURS;t>80&&(t=80);var n=document.querySelector("#time-window-".concat(t));n&&Ember.run.next((function(){n.scrollIntoView({block:"center",inline:"center"})}))},_ticketFailure:function(){Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("fd.somethingwentwrongError"))}});e.default=i})),define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"5MbTegPK",block:'{"symbols":["ticket","timeWindow","index"],"statements":[[0,"\\n"],[7,"div"],[11,"class","agent-details"],[9],[1,[21,"responderName"],false],[1,[27,"t",["tickets.ticket_associations.service_task.agentSchedule"],null],false],[1,[21,"currentDate"],false],[10],[0,"\\n"],[7,"div"],[11,"class","agent-service-task-detail"],[9],[0,"\\n"],[4,"if",[[23,["isLoading"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","text-align--center"],[9],[0,"\\n      "],[1,[21,"ui-components/inline-loader"],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","day time-window"],[11,"data-test-id","time-window"],[12,"style",[27,"if",[[23,["isIEAgent"]],"-ms-grid-columns: (25px)[96]"],null]],[9],[0,"\\n"],[4,"each",[[23,["timeWindows"]]],null,{"statements":[[4,"if",[[27,"and",[[27,"eq",[[27,"mod",[[22,3,[]],4],null],0],null],[27,"gt",[[22,3,[]],0],null]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","day-hour"],[12,"id",[28,["time-window-",[22,3,[]]]]],[12,"style",[27,"grid-position",[1,0,1,[22,3,[]],0,2,[23,["isIEAgent"]]],null]],[9],[0,"\\n            "],[7,"div"],[11,"class","text"],[9],[1,[22,2,[]],false],[10],[0,"\\n            "],[7,"div"],[11,"class","vr"],[9],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[2,3]},null],[0,"    "],[10],[0,"\\n    "],[7,"div"],[11,"class","day day-events"],[12,"style",[27,"if",[[23,["isIEAgent"]],"-ms-grid-columns: (25px)[96]"],null]],[9],[0,"\\n"],[4,"each",[[23,["agentTickets"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-form/custom-form/agent-availability/ticket-card",null,[["ticket","timeWindows"],[[22,1,[]],[23,["timeWindows"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n"],[4,"if",[[23,["currentTimeSlot"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","container"],[12,"style",[21,"currentTimeSlotPos"]],[9],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-card/component",["exports","freshdesk/constants/service-task-agent-availability"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.String,n=Ember.Component.extend({moment:Ember.inject.service(),attributeBindings:["style","data-test-id"],style:Ember.computed("ticket.customFields.{cf_fsm_appointment_start_time,cf_fsm_appointment_end_time}",(function(){return"".concat(this.gridStartPosition(Ember.get(this,"ticket.customFields.cf_fsm_appointment_start_time"),Ember.get(this,"ticket.customFields.cf_fsm_appointment_end_time")),";z-index:1")})),"data-test-id":Ember.computed((function(){return"event-data-grid-".concat(Ember.get(this,"ticket.id"))})),actions:{onFocus:function(e){e&&e.actions&&e.actions.open()},onBlur:function(e){e&&e.actions&&e.actions.close()}},gridStartPosition:function(e,n){var i=this.moment.moment(e),a=this.moment.moment(n),r=this.timeWindows,l=i.format(t.TIME_FORMAT),o=r.findIndex((function(e){return e===l})),c=a.format(t.TIME_FORMAT),d=r.findIndex((function(e){return e===c}));return s.htmlSafe("grid-column: ".concat(o+1,"/ span ").concat(d-o,";\n     -ms-grid-column: ").concat(o+1,"; -ms-grid-column-span: ").concat(d-o,";  overflow: hidden"))}});e.default=n})),define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-card/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"VlKnO5By",block:'{"symbols":["dd"],"statements":[[4,"basic-dropdown-hover",null,null,{"statements":[[4,"component",[[22,1,["trigger"]]],[["class"],["trigger-shortcuts"]],{"statements":[[0,"    "],[7,"div"],[11,"class","event-wrapper"],[11,"data-test-id","event-data"],[9],[0,"\\n      "],[7,"div"],[11,"class","event"],[9],[0,"\\n        "],[7,"div"],[11,"class","contact-info"],[9],[1,[23,["ticket","customFields","cf_fsm_contact_name"]],false],[0,"  #"],[1,[23,["ticket","id"]],false],[0," "],[10],[0,"\\n        "],[7,"div"],[11,"class","address"],[9],[1,[23,["ticket","customFields","cf_fsm_service_location"]],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["onFocus","onBlur","class"],[[27,"action",[[22,0,[]],"onFocus"],null],[27,"action",[[22,0,[]],"onBlur"],null],"__module-tickets__ticket-details__widgets__service-task__agent-availability__details"]],{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-form/custom-form/agent-availability/ticket-detail",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-card/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-detail/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t}));define("freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-detail/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"17VuyNtp",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","detailed-card"],[12,"data-test-id",[28,["service-task-detailed-card-",[23,["ticket","id"]]]]],[9],[0,"\\n  "],[7,"div"],[11,"class","detailed-card__row"],[9],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--left"],[9],[0,"\\n      "],[7,"div"],[11,"class","contact-icon"],[9],[0,"\\n"],[4,"ui-components/avatar-icon",null,[["size","isCircle","class"],["small",true,"profilepic"]],{"statements":[[0,"          "],[1,[27,"ui-components/avatar-letters",null,[["name","class"],[[23,["ticket","customFields","cf_fsm_contact_name"]],"avatar-block"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","pl-10 ellipsis"],[12,"data-test-id",[28,["service-task-contact-name-",[23,["ticket","id"]]]]],[9],[0,"\\n        "],[1,[23,["ticket","customFields","cf_fsm_contact_name"]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--right"],[9],[0,"\\n      "],[7,"a"],[11,"target","_blank"],[12,"data-test-id",[28,["service-task-ticket-link-",[23,["ticket","id"]]]]],[11,"rel","noopener"],[12,"href",[28,["/a/tickets/",[23,["ticket","id"]]]]],[9],[0,"\\n        "],[1,[27,"svg-jar",["open-in-new-tab"],[["class","aria-hidden"],["app-icon app-icon--small","true"]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","detailed-card__row"],[9],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--left"],[9],[0,"\\n      "],[7,"div"],[11,"class","ellipsis service-task-subject"],[12,"data-test-id",[28,["service-task-subject-",[23,["ticket","id"]]]]],[9],[1,[23,["ticket","subject"]],false],[10],[0," \\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--right ticket-id"],[12,"data-test-id",[28,["service-task-ticket-id-",[23,["ticket","id"]]]]],[9],[0," #"],[1,[23,["ticket","id"]],false],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","detailed-card__row service-location"],[9],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--left"],[12,"data-test-id",[28,["service-task-location-",[23,["ticket","id"]]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ellipsis"],[9],[1,[23,["ticket","customFields","cf_fsm_service_location"]],false],[0," "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","detailed-card__row--right icon"],[9],[0,"\\n      "],[1,[27,"svg-jar",["location"],[["class","aria-hidden"],["app-icon app-icon--small","true"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/custom-form/agent-availability/ticket-detail/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/custom-form/component",["exports","freshdesk/mixins/fetch-user","freshdesk/utils/tickets/ticket-form"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{i18n:Ember.inject.service(),store:Ember.inject.service(),classNames:["__module-tickets__ticket-form__custom-form"],isServiceLocationPresent:Ember.computed((function(){var e=this.peekUser(Ember.get(this,"associatedTicket.requesterId"));return e&&!!e.address})),scrollOnLoad:!0,init:function(){this._super.apply(this,arguments),this._setFormFieldGroups()},_setFormFieldGroups:function(){var e=this.store.peekAll("section");Ember.set(this,"customTemplate",(0,s.customTemplate)(this.formType,this.ticketType)),Ember.set(this,"formFieldGroups",(0,s.buildFormFieldGroups)(this.get("customTemplate.fieldGroups"),this.formFields,e))}});e.default=n})),define("freshdesk/components/module-tickets/ticket-form/custom-form/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"kw/ZdX7v",block:'{"symbols":["formGroup","field","&default"],"statements":[[4,"each",[[23,["formFieldGroups"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"class",[27,"concat",["form-group ",[22,1,["name"]]],null]],[9],[0,"\\n"],[4,"if",[[22,1,["label"]]],null,{"statements":[[0,"      "],[7,"h4"],[11,"class","form-group__title"],[9],[1,[27,"t",[[22,1,["label"]]],null],false],[10],[0,"\\n"]],"parameters":[]},null],[4,"each",[[22,1,["fields"]]],null,{"statements":[[0,"      "],[14,3,[[22,2,[]]]],[0,"\\n"],[4,"if",[[27,"and",[[27,"eq",[[22,2,["name"]],"cf_fsm_service_location"],null],[23,["isServiceLocationPresent"]]],null]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/ticket-form/custom-form/update-contact",null,[["updateContactAddress"],[[23,["updateContactAddress"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[4,"if",[[27,"and",[[27,"eq",[[22,1,["name"]],"appointmentInfo"],null],[23,["ticketRecord","responderId"]]],null]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/ticket-form/custom-form/agent-availability",null,[["ticketResponderId","fsmStartTime","fsmEndTime","scrollOnLoad"],[[23,["ticketRecord","responderId"]],[23,["ticketRecord","customFields","cf_fsm_appointment_start_time"]],[23,["ticketRecord","customFields","cf_fsm_appointment_end_time"]],[23,["scrollOnLoad"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/custom-form/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/custom-form/update-contact/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/custom-form/update-contact/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"kyPEqRaX",block:'{"symbols":[],"statements":[[7,"label"],[11,"class","text--normal mb-10"],[9],[0,"\\n  "],[7,"span"],[11,"class","pull-left"],[9],[0,"\\n    "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","labelId","value"],["update-contact-address","update-contact-address",[23,["updateContactAddress"]]]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"class","update-contact-label"],[9],[0,"\\n    "],[1,[27,"t",["ticket.submit.updateContactAddress"],null],false],[0,"\\n  "],[10],[0,"\\n"],[10]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/custom-form/update-contact/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/fsm-warning-banner/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({currentUser:Ember.inject.service(),router:Ember.inject.service(),i18n:Ember.inject.service(),classNames:["mt-5"],attributeBindings:["data-test-id"],"data-test-id":"fsm-inline-banner",actions:{onAddFieldTechnicians:function(){Ember.tryInvoke(this,"close"),Ember.get(this,"router").transitionTo("helpdesk.admin.agents.new")}}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/fsm-warning-banner/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"JFotFfJS",block:'{"symbols":[],"statements":[[4,"nucleus-inline-banner",null,[["type"],["warning"]],{"statements":[[0,"  "],[1,[27,"t",["fsm.create_service_task.warning.description"],null],false],[0,"\\n"],[4,"if",[[23,["currentUser","isAdmin"]]],null,{"statements":[[0,"    "],[7,"a"],[12,"onclick",[27,"action",[[22,0,[]],"onAddFieldTechnicians"],null]],[11,"class","link-no-underline cursor-pointer"],[12,"aria-label",[27,"t",["fsm.create_service_task.warning.link_text"],null]],[11,"data-test-id","add-field-technicians"],[9],[0,"\\n      "],[1,[27,"t",["fsm.create_service_task.warning.link_text"],null],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",["fsm.create_service_task.warning.link_text"],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/fsm-warning-banner/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/section-form/component",["exports","freshdesk/utils/blank-array","freshdesk/utils/tickets/ticket-form","freshdesk/constants/ticket-field"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend({store:Ember.inject.service(),_previousSectionKeys:(0,t.default)(),sections:Ember.computed.reads("sectionField.sections"),showSection:Ember.computed.and("value","selectedSection"),sectionLabel:Ember.computed.reads("selectedSection.label"),sectionChanged:Ember.computed("ticket",{get:function(){return!1},set:function(e,t){return t}}),modelName:Ember.computed("sectionField.fieldName","bulkAction",(function(){return this.bulkAction&&Ember.get(this,"sectionField.fieldName")===n.default.groupId?n.default.assignTo:n.default.ticket})),sectionChoice:Ember.computed("value",(function(){var e=Ember.getProperties(this,"sectionField","sectionField.type","value","sectionChanged","store"),t=e.sectionField,n=e["sectionField.type"],i=e.value,a=e.sectionChanged,r=e.store,l=(0,s.getSectionChoice)(t,i,r);a&&this._resetPreviousSection();var o=(0,s.getSectionFieldKey)(n);return l?l[o]:null})),selectedSection:Ember.computed("sectionChoice",(function(){var e=Ember.get(this,"sectionChoice"),t=Ember.get(this,"sections");return Ember.set(this,"sectionChanged",!0),t.find((function(t){return Ember.get(t,"picklistMappingIds").includes(e)}))})),selectedTicketFields:Ember.computed.map("selectedSection.sectionFields",(function(e){var t=Ember.get(e,"ticketField"),s=Ember.get(this,"_previousSectionKeys"),n=Ember.getProperties(t,"name","type","nestedTicketFields"),i=n.name,a=n.type,r=n.nestedTicketFields;return s.push(i),"nested_field"===a&&r.forEach((function(e){s.push(Ember.get(e,"name"))})),Ember.set(this,"_previousSectionKeys",s),t})),init:function(){this._super.apply(this,arguments);var e=Ember.getProperties(this,"sectionField.fieldName","modelName"),t=e.modelName,s=e["sectionField.fieldName"];Ember.defineProperty(this,"value",Ember.computed.reads("".concat(t,".").concat(s)))},_resetPreviousSection:function(){var e=Ember.get(this,"_previousSectionKeys"),t=this;e.forEach((function(e){t._rollbackAttribute(e)})),Ember.set(this,"_previousSectionKeys",[])},_rollbackAttribute:function(e){var t=Ember.get(this,"ticket.savedCustomFields")||{};Ember.set(this,"ticket.customFields.".concat(e),t[e])}});e.default=i})),define("freshdesk/components/module-tickets/ticket-form/section-form/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Rq7DUSQh",block:'{"symbols":["&default"],"statements":[[4,"if",[[23,["showSection"]]],null,{"statements":[[0,"  "],[14,1,[[27,"hash",null,[["label","fields"],[[23,["sectionLabel"]],[23,["selectedTicketFields"]]]]]]],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/section-form/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"eHL9Y1jP",block:'{"symbols":["form","field","field"],"statements":[[7,"div"],[11,"class","modal-carousel_container modal-title-subtext"],[9],[0,"\\n"],[4,"if",[[23,["showServiceTaskWarning"]]],null,{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-form/fsm-warning-banner",null,[["close"],[[23,["close"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div"],[12,"class",[28,["modal-carousel_wrapper ",[27,"if",[[23,["displayInlineCannedResponse"]],"carousel-slider","carousel-default"],null]," "]]],[9],[0,"\\n    "],[7,"div"],[11,"class","modal-carousel__item carousel-default-view"],[9],[0,"\\n      "],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n        "],[7,"div"],[11,"class","modal-header__content"],[9],[0,"\\n          "],[7,"h4"],[11,"class","modal-title text--xlarge"],[9],[0,"\\n            "],[1,[27,"svg-jar",[[23,["formSchema","headerIcon"]]],[["class"],["modal-icons"]]],false],[0,"\\n            "],[1,[27,"t",[[23,["formSchema","headerTitle"]]],null],false],[0,"\\n"],[4,"if",[[23,["isfreshcallerEditTicket"]]],null,{"statements":[[0,"              "],[7,"a"],[11,"class","btn btn--secondary float-right go-to-ticket"],[12,"aria-label",[27,"t",["fd.go.to.ticket"],null]],[11,"data-test-id","go-to-ticket"],[11,"rel","noopener"],[12,"href",[21,"gotoTicketLink"]],[11,"target","_blank"],[9],[0,"\\n                "],[1,[27,"svg-jar",["open-in-new-tab"],[["class"],["app-icon--small app-icon new-tab-icon"]]],false],[7,"div"],[11,"class","go-to-ticket_text"],[9],[1,[27,"t",["fd.go.to.ticket"],null],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[23,["isLoaded"]]],null,{"statements":[[4,"if",[[27,"and",[[23,["isfreshcallerEditTicket"]],[23,["displayFlash"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","banner-text text--small"],[11,"data-test-id","freshcaller-banner"],[9],[0,"\\n            "],[7,"div"],[11,"class","banner-content"],[9],[0,"\\n              "],[1,[27,"svg-jar",["warning"],[["class"],["app-icon--small app-icon--warning banner-content__icon"]]],false],[0," "],[1,[27,"t",["fd.edit.ticket.banner"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[1,[27,"nucleus-button",null,[["size","variant","iconSize","iconOnly","icon","data-test-id","ariaLabel","customClass","onClick"],["small","text","small",true,"close","close-flash",[27,"t",["common.close"],null],"pull-right app-icon--small app-icon",[27,"action",[[22,0,[]],"closeFlash"],null]]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"ui-form/form-for",[[23,["model"]],[23,["rules"]]],[["submit","onValidationFailed","scrollOffset","focusOnError","defaultSubmitBtn"],[[27,"action",[[22,0,[]],"submit"],null],"errorFieldFocus",[23,["scrollOffset"]],[23,["focusOnError"]],[23,["submitButtonTitle"]]]],{"statements":[[4,"if",[[23,["data","allowContactCreate"]]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/new-ticket/ticket-form-field",null,[["fields","model","newContact","form","addNewRequester","isfreshcallerTicket","startContactValidations","onchangeCompany","toggleAddRequester","onInsertAttachment","cloudAttachments","contactId","emailId"],[[23,["fields"]],[23,["model"]],[23,["newContact"]],[22,1,[]],[23,["addNewRequester"]],[23,["isfreshcallerTicket"]],[23,["startContactValidations"]],[27,"action",[[22,0,[]],"multipleCompany"],null],[27,"action",[[22,0,[]],"toggleAddRequester"],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[23,["cloudAttachments"]],[23,["contactId"]],[23,["emailId"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["customTemplate"]]],null,{"statements":[[4,"module-tickets/ticket-form/custom-form",null,[["formFields","formType","ticketType","ticketRecord","associatedTicket","updateContactAddress"],[[23,["formFields"]],[23,["formType"]],[23,["ticketRecord","type"]],[23,["ticketRecord"]],[23,["associatedTicket"]],[23,["updateContactAddress"]]]],{"statements":[[0,"              "],[15,"helpdesk/tickets/ticket-form/ticket-form-fields",[1,3]],[0,"\\n"]],"parameters":[3]},null]],"parameters":[]},{"statements":[[4,"each",[[23,["formFields"]]],null,{"statements":[[4,"unless",[[22,2,["belongsToSection"]]],null,{"statements":[[0,"                "],[15,"helpdesk/tickets/ticket-form/ticket-form-fields",[1,2]],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[0,"          "]],"parameters":[]}]],"parameters":[]}],[0,"          "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n"],[4,"if",[[23,["canShowAddMoreChilds"]]],null,{"statements":[[0,"              "],[7,"label"],[11,"class","text--normal create-another-child-label"],[9],[0,"\\n                "],[7,"span"],[11,"class","modal__footer__checkbox pull-left"],[9],[0,"\\n                  "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","value"],["createAnotherTicket",[23,["createAnother"]]]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[9],[0,"\\n                  "],[1,[27,"t",["ticket.submit.createAnother"],null],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[7,"button"],[11,"name","button"],[12,"onclick",[27,"action",[[22,0,[]],"cancel"],null]],[11,"data-test-id","cancel-ticket-creation"],[11,"class","btn btn--secondary"],[11,"type","button"],[9],[0,"\\n              "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n              "],[1,[27,"component",[[22,1,["submit"]]],[["data-test-id"],["create-ticket"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n    "],[7,"div"],[12,"class",[28,[[27,"if",[[23,["displayInlineCannedResponse"]],"show-canned","hide-canned-response"],null]," modal-carousel__item custom-cannedResponse"]]],[9],[0,"\\n      "],[1,[27,"app-components/canned-response",null,[["insertCannedResponse","hideCannedResponse","inlineRender","toggleAction"],[[27,"action",[[22,0,[]],"insertCannedResponse"],null],[27,"action",[[22,0,[]],"cancel"],null],true,[27,"action",[[22,0,[]],"enableCannedResponse"],null]]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":true}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-form/ticket-field/component",["exports","freshdesk/constants/component-map/ticket-fields","freshdesk/constants/ticket","freshdesk/constants/agent","@freshdesk/common/constants/date-time","ember-copy"],(function(e,t,s,n,i,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var s=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(o){i=!0,a=o}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s.default.serviceTaskType,c=Ember.Component.extend({currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),eventSources:Ember.inject.service(),i18n:Ember.inject.service(),mkpInterface:Ember.inject.service("marketplace-interface"),disabled:!1,field:null,form:null,dropdownClass:null,hideDefaultOption:Ember.computed.readOnly("componentMap.hideDefaultOption"),hint:Ember.computed.readOnly("componentMap.hint"),nestedFieldUpdated:Ember.computed.readOnly("mkpInterface.controlData.nestedFieldUpdated"),isFreddySuggestion:Ember.computed.notEmpty("botSuggestion"),timeOptions:Ember.computed((function(){var e=(0,a.copy)(i.dateTimeDefaultChoices,!0);return e.interval.value=15,e})),fieldLabel:Ember.computed("field.{label,default}",(function(){if(Ember.get(this,"field.default")){var e=s.default.ticketFieldLabelMap[Ember.get(this,"field.name")];return e?Ember.get(this,"i18n").t(e):Ember.get(this,"field.label")}return Ember.get(this,"field.label")})),isRequired:Ember.computed("field.{requiredForAgents,requiredForClosure}","model.status",(function(){var e=Ember.get(this,"field.requiredForAgents");return e||Ember.get(this,"field.requiredForClosure")&&Ember.get(this,"model.isMarkedClosed")})),disableField:Ember.computed("field","disabled",(function(){var e=!1;["cf_fsm_appointment_start_time","cf_fsm_appointment_end_time"].includes(Ember.get(this,"field.name"))&&(Ember.get(this,"currentUser.type")===n.AGENT_TYPES.FIELD_AGENT&&(e=!Ember.get(this,"currentAccount.FSMSettings.field_agents_can_manage_appointments")));return Ember.get(this,"disabled")||e})),fieldDropdownChoices:Ember.computed("field.type","currentAccount","mkpInterface.controlData.{dropdownOptionsUpdated,mkpFieldChange}",{get:function(){var e=Ember.get(this,"mkpInterface.controlData.mkpFieldChange"),t=Ember.get(this,"field.name"),n=Ember.get(this,"field.type"),i=Ember.get(this,"field.choices")?(0,a.copy)(Ember.get(this,"field.choices"),!0):Ember.get(this,"field.choices");if(e&&e[t]){var r=e[t];i="nested_field"===n?this.filterCustomFieldChoices(i,r[0]):i.filter((function(e){return r.includes(e.value)}))}switch(n){case"default_ticket_type":return Ember.get(this,"currentAccount.fsmEnabled")?i.filter((function(e){return e.value!==o})):i;case"default_company":return Ember.get(this,"companyChoices");case"default_source":return i.filter((function(e){return!e.default&&!e.deleted||e.id===s.default.defaultSource}));default:return i}}}),companyChoices:Ember.computed((function(){var e=[];e=(Ember.get(this,"model.requester.allCompanies")||[]).map((function(e){return{label:Ember.get(e,"name"),value:parseInt(Ember.get(e,"id"),10)}}));var t=Ember.get(this,"model.company.name"),s=parseInt(Ember.get(this,"model.company.id"),10);return!e.some((function(e){if(e.value===s)return!0}))&&t&&s&&e.push({label:t,value:s}),e})),init:function(){this._super.apply(this,arguments);var e=Ember.get(this,"field.type"),n=t.default[e],i=n.type,a="is-".concat(i).camelize();if(Ember.set(this,"componentMap",n),Ember.set(this,a,!0),Ember.set(this,"optionValuePath",Ember.getWithDefault(this,"componentMap.optionValuePath","value")),s.default.translatableFields.includes(Ember.get(this,"field.type"))?Ember.set(this,"optionLabelPath",Ember.getWithDefault(this,"componentMap.optionLabelPath","translatedLabel")):Ember.set(this,"optionLabelPath",Ember.getWithDefault(this,"componentMap.optionLabelPath","label")),"nested_field"===e){var r=Ember.get(this,"field.nestedTicketFields.firstObject.name"),l=Ember.get(this,"field.nestedTicketFields.lastObject.name");Ember.defineProperty(this,"subCategoryDisabled",Ember.computed.oneWay("mkpInterface.controlData.dyn_".concat(r,".disable"))),Ember.defineProperty(this,"itemDisabled",Ember.computed.oneWay("mkpInterface.controlData.dyn_".concat(l,".disable")))}},actions:{onchange:function(e,t){var s=Ember.get(this,"field.type");t="nested_field"===s?t:Ember.get(this,"field.fieldName");var n=Ember.get(this,"eventSources"),i=n.propertyEvents.ticket,a=t.split("."),r=l(a,2),o=r[0],c=r[1];if(Object.keys(i).indexOf(o)>-1){var d=Ember.get(this,"model");n.publishFieldChange(Ember.get(d,t),e,"ticket",o,c)}this.onchange&&this.onchange.apply(this,arguments),this.onFieldChange&&this.onFieldChange(e,t,s,Ember.get(this,"field"))},oninput:function(e,t){var s=Ember.get(this,"field.type");t=Ember.get(this,"field.fieldName"),Ember.get(this,"oninput")&&Ember.get(this,"oninput").apply(void 0,arguments),Ember.get(this,"onFieldChange")&&Ember.get(this,"onFieldChange")(e,t,s,Ember.get(this,"field"))},getPciValue:function(e,t){var s=Ember.get(this,"getPciValue");s&&s(e,t)}},filterCustomFieldChoices:function(e,t){var s=this;if(t){var n="string"!=typeof t[0]?Object.keys(t):t;return e.filter((function(e){var i=n.includes(e.value);if(i&&t[e.value]){var a="object"===r(t[e.value][0])?t[e.value][0]:t[e.value];e.choices=s.filterCustomFieldChoices(e.choices,a)}return i}))}return[]}});c.reopenClass({positionalParams:["field"]});var d=c;e.default=d})),define("freshdesk/components/module-tickets/ticket-form/ticket-field/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"6eptUG10",block:'{"symbols":[],"statements":[[7,"div"],[12,"data-test-id",[27,"concat",["tkt-properties-",[23,["field","name"]]],null]],[9],[0,"\\n"],[4,"if",[[23,["isTextField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","text-field"]],[23,["field","fieldName"]]],[["label","hint","isRequired","disabled","onchange","oninput","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],[23,["isRequired"]],[23,["disableField"]],[27,"action",[[22,0,[]],"onchange"],null],[27,"action",[[22,0,[]],"oninput"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isSelectField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","select-field"]],[23,["field","fieldName"]]],[["placeholder","hint","isRequired","options","optionLabelPath","optionValuePath","dropdownClass","isFreddySuggestion","botSuggestion","beforeOptionsComponent","hideDefaultOption","disabled","onchange","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],[23,["isRequired"]],[23,["fieldDropdownChoices"]],[23,["optionLabelPath"]],[23,["optionValuePath"]],[23,["dropdownClass"]],[23,["isFreddySuggestion"]],[23,["botSuggestion"]],[27,"if",[[23,["isFreddySuggestion"]],[27,"component",["module-tickets/shared/freddy-suggestion/property"],[["ticket","botSuggestion"],[[23,["model"]],[23,["botSuggestion"]]]]],null],null],[23,["hideDefaultOption"]],[23,["disableField"]],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isLookupField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","lookup-field"]]],[["field","isRequired","hasValidation","onchange","lookupFieldRecordId","disabled"],[[23,["field"]],[23,["isRequired"]],false,[27,"action",[[22,0,[]],"onchange"],null],[27,"get",[[23,["model"]],[23,["field","fieldName"]]],null],[23,["disableField"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isTextareaField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","textarea-field"]],[23,["field","fieldName"]]],[["label","hint","autoresize","rows","max-rows","isRequired","refresh","disabled","oninput","onchange","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],true,2,10,[23,["isRequired"]],[23,["refresh"]],[23,["disableField"]],[27,"action",[[22,0,[]],"oninput"],null],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isNestedField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","nested-field"]],[23,["field","fieldName"]]],[["placeholder","hint","field","options","hideDefaultOption","optionLabelPath","optionValuePath","isRequired","disabled","subCategoryDisabled","itemDisabled","refresh","nestedFieldUpdated","onchange","ignoreFieldLevelValidation","isFreddySuggestion","botSuggestion"],[[23,["fieldLabel"]],[23,["hint"]],[23,["field"]],[23,["fieldDropdownChoices"]],[23,["field","hideDefaultOption"]],"label",[23,["optionValuePath"]],[23,["isRequired"]],[23,["disableField"]],[23,["subCategoryDisabled"]],[23,["itemDisabled"]],[23,["refresh"]],[23,["nestedFieldUpdated"]],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]],[23,["isFreddySuggestion"]],[23,["botSuggestion"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isNumberField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","number-field"]],[23,["field","fieldName"]]],[["label","hint","isRequired","disabled","oninput","onchange","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],[23,["isRequired"]],[23,["disableField"]],[27,"action",[[22,0,[]],"oninput"],null],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isCheckboxField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","checkbox-field"]],[23,["field","fieldName"]]],[["label","hint","isRequired","disabled","onchange","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],[23,["isRequired"]],[23,["disableField"]],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[23,["isDateField"]],[23,["isDateTimeField"]]],null]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","date-field"]],[23,["field","fieldName"]]],[["showTime","label","hint","timeOptions","isRequired","dropdownClass","disabled","onchange","ignoreFieldLevelValidation"],[[23,["isDateTimeField"]],[23,["fieldLabel"]],[23,["hint"]],[23,["timeOptions"]],[23,["isRequired"]],[23,["dropdownClass"]],[23,["disableField"]],[27,"action",[[22,0,[]],"onchange"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isFileField"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","file-field"]]],[["valuePath","label","isRequired","disabled"],[[23,["field","fieldName"]],[23,["fieldLabel"]],[23,["isRequired"]],[23,["disableField"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isEncryptedText"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","encrypted-text"]],[23,["field","fieldName"]]],[["label","hint","isRequired","disabled","onchange","oninput","ignoreFieldLevelValidation"],[[23,["fieldLabel"]],[23,["hint"]],[23,["isRequired"]],[23,["disableField"]],[27,"action",[[22,0,[]],"onchange"],null],[27,"action",[[22,0,[]],"oninput"],null],[23,["ignoreFieldLevelValidation"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["shouldRenderPciField"]],[23,["isSecureText"]]],null]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["form","pci-field"]],[23,["field","fieldName"]]],[["label","disabled","getPciValue","pciModel","name"],[[23,["fieldLabel"]],[23,["disableField"]],[27,"action",[[22,0,[]],"getPciValue"],null],[23,["pciModel"]],[23,["field","name"]]]]],false],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-form/ticket-field/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/ticket-template/component",["exports","ember-local-storage","freshdesk/utils/push-to-top","freshdesk/constants/ticket-template"],(function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Ember.Component.extend({store:Ember.inject.service(),templateApplied:!1,hasChild:!1,hasAssociation:!0,selectedTemplate:"",selectedName:"",classNames:["ticket_template_wrapper","clearfix"],classNameBindings:["hasAssociation:__module-tickets__ticket-template"],ticketTemplates:(0,t.storageFor)("ticket-templates"),showRecentlyUsed:Ember.computed.not("templateApplied"),isTemplatesEmpty:Ember.computed.empty("templates"),allTemplates:Ember.computed.map("ticketTemplates.content.[]",(function(e){var t=Ember.get(this,"store").peekRecord("ticket-template",parseInt(e.id));return{id:e.id,name:t.name,assoc_type:t.assocType,content:t,source:t.source}})),recentUsedUpdated:Ember.computed("showEmailOnly","allTemplates",(function(){return Ember.get(this,"showEmailOnly")?Ember.get(this,"allTemplates").filter((function(e){return!e.source||e.source===n.OUTBOUND_SOURCE_ID})):Ember.get(this,"allTemplates").filter((function(e){return e.source!==n.OUTBOUND_SOURCE_ID}))})),hasCreateAccess:Ember.computed((function(){return Ember.get(this,"currentUser").hasAbility("view_admin")})),init:function(){this._super.apply(this,arguments),this.templateList={},this.childTemplates=[],this.appliedTemplatedata=[],this.childIds=[]},actions:{childToggle:function(e,t){var s=Ember.get(this,"childIds"),n=[],i=Ember.get(this,"appliedTemplatedata");t.target.checked?(n=s.childTemplateIds.concat(e),t.target.removeAttribute("checked")):(n=s.childTemplateIds.filter((function(t){return t!==e})),t.target.setAttribute("checked","checked")),Ember.set(this,"childIds",{childTemplateIds:n}),Ember.set(this,"appliedTemplatedata",Ember.assign(i,Ember.get(this,"childIds"))),this.updateChildTemplates(n)},handleKeydown:function(e,t){if(t.keyCode!=n.ENTER_KEY){var s=t.target.value;if(s.length>3&&-1!==Ember.get(this,"options").mapBy("name").indexOf(s)){var i=Ember.get(this,"selectedName");Ember.set(this,"selectedName",i.concat([s]))}}},chooseTemplate:function(e){Ember.set(this,"templateApplied",!0),Ember.set(this,"hasChild",!1),Ember.set(this,"selectedName",e),this.hasAssociation&&e.content&&e.content.child_templates&&this.childTemplateactions(e.content),this.templateInfo(e.id).then(this.handleFindTemplateResponse.bind(this,e))},clear:function(){Ember.set(this,"templateApplied",!1),Ember.set(this,"hasChild",!1),Ember.set(this,"selectedName",[]),Ember.get(this,"clearTemplate")()}},templateInfo:function(e){return Ember.RSVP.hash({appliedTemplate:Ember.get(this,"store").findRecord("ticket-template",e,{reload:!0,include:"attachments"})})},showChild:function(e){Ember.set(this,"hasChild",!0),Ember.set(this,"childTemplates",e)},childTemplateactions:function(e){this.showChild(e.child_templates),Ember.set(this,"childIds",{child_template_ids:e.child_templates.mapBy("id")}),Ember.set(this,"appliedTemplatedata",Ember.assign(Ember.get(this,"appliedTemplatedata"),Ember.get(this,"childIds")))},handleFindTemplateResponse:function(e,t){var i=t.appliedTemplate;if(this.hasAssociation){var a=parseInt(e.id);Ember.get(i,"assocType")===n.ASSOCIATION_TYPE_PARENT_CHILD&&(this.newChildTemplateActions(i),Ember.assign(i,{parentTemplateId:a}))}Ember.set(this,"appliedTemplatedata",i),this.applyTemplate(Ember.get(this,"appliedTemplatedata"));var r=Ember.assign(e,{content:i}),l={maxLength:n.MAX_RECENT_TEMPLATES,recentUsed:Ember.get(this,"ticketTemplates.content"),data:r,matchKeys:["id"]},o=(0,s.default)(l);Ember.get(this,"ticketTemplates").setObjects(o)},newChildTemplateActions:function(e){var t=Ember.get(e,"childTemplates");this.showChild(t);var s=t.map((function(e){return e.id}));Ember.assign(e,{childTemplateIds:s}),Ember.set(this,"childIds",{childTemplateIds:s}),Ember.set(this,"appliedTemplatedata.childTemplateIds",s)}});e.default=i})),define("freshdesk/components/module-tickets/ticket-template/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"pLDBW28/",block:'{"symbols":["childtemplate","template","options"],"statements":[[7,"div"],[11,"class","template_widget"],[11,"data-test-id","template-widget"],[9],[0,"\\n"],[4,"if",[[23,["templateApplied"]]],null,{"statements":[[0,"    "],[7,"a"],[11,"class","make_inline vmid clearlink"],[11,"data-test-id","clear-template"],[12,"onclick",[27,"action",[[22,0,[]],"clear"],null]],[9],[1,[27,"t",["ticket.template.clear"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["isTemplatesEmpty"]]],null,{"statements":[[0,"    "],[7,"p"],[11,"data-test-id","template-description"],[9],[0,"\\n"],[4,"if",[[23,["hasCreateAccess"]]],null,{"statements":[[0,"        "],[1,[27,"t",["ticket.template.description_admin"],null],false],[0,"\\n        "],[7,"a"],[11,"href","/a/ticket_templates/new"],[11,"data-test-id","create-template-link"],[9],[1,[27,"t",["ticket.template.create_one"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[27,"t",["ticket.template.description_agent"],null],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"\\n    "],[7,"div"],[11,"id","powerselect_holder"],[11,"class","powerselect_holder"],[11,"data-test-id","templates-list"],[9],[0,"\\n\\n"],[4,"ui-form/select-field",null,[["class","options","selected","searchField","placeholder","searchPlaceholder","onchange","noMatchesMessage","onkeydown","data-test-id"],["power-select ticket_template_powerselect",[23,["templates"]],[23,["selectedName"]],"name",[27,"t",["ticket.template.select.placeholder"],null],[27,"t",["ticket.template.search.placeholder"],null],[27,"action",[[22,0,[]],"chooseTemplate"],null],[27,"t",["ticket.template.noresult"],null],[27,"action",[[22,0,[]],"handleKeydown"],null],"ticket-templates"]],{"statements":[[4,"if",[[27,"and",[[23,["hasAssociation"]],[27,"eq",[[22,3,["assoc_type"]],2],null]],null]],null,{"statements":[[0,"          "],[7,"span"],[11,"data-test-id","selectAssoc"],[11,"class","template_list_icon"],[9],[1,[27,"svg-jar",["parent-child"],[["class"],["app-icon app-icon--small"]]],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"span"],[11,"data-test-id","selectNoAssoc"],[11,"class","template_list_icon"],[9],[1,[27,"svg-jar",["template"],[["class"],["app-icon app-icon--small"]]],false],[10],[0,"\\n"]],"parameters":[]}],[0,"        "],[1,[27,"html-safe",[[22,3,["name"]]],null],false],[0,"\\n\\n\\n"]],"parameters":[3]},null],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["showRecentlyUsed"]]],null,{"statements":[[4,"if",[[27,"gt",[[23,["ticketTemplates","length"]],0],null]],null,{"statements":[[0,"      "],[7,"h5"],[9],[0,"\\n        "],[1,[27,"t",["ticket.template.recentlyused.template"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"ul"],[11,"class","reverse_list recent_templates"],[11,"data-test-id","recently-used-templates"],[9],[0,"\\n"],[4,"each",[[23,["recentUsedUpdated"]]],null,{"statements":[[0,"        "],[7,"li"],[11,"class","recent-item"],[9],[0,"\\n          "],[7,"a"],[11,"class","recent-item-link"],[11,"role","button"],[12,"onclick",[27,"action",[[22,0,[]],"chooseTemplate",[22,2,[]]],null]],[12,"data-test-template-name",[22,2,["name"]]],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["hasAssociation"]],[27,"eq",[[22,2,["assoc_type"]],2],null]],null]],null,{"statements":[[0,"              "],[7,"span"],[11,"data-test-id","recentAssoc"],[11,"class","template_list_icon"],[9],[1,[27,"svg-jar",["parent-child"],[["class"],["app-icon app-icon--small"]]],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"span"],[11,"data-test-id","recentNoAssoc"],[11,"class","template_list_icon"],[9],[1,[27,"svg-jar",["template"],[["class"],["app-icon app-icon--small"]]],false],[10],[0,"\\n"]],"parameters":[]}],[0,"            "],[1,[27,"html-safe",[[22,2,["name"]]],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[2]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["hasChild"]]],null,{"statements":[[0,"    "],[7,"ul"],[11,"class","child_templates"],[9],[0,"\\n"],[4,"each",[[23,["childTemplates"]]],null,{"statements":[[0,"        "],[7,"li"],[9],[0,"\\n          "],[7,"a"],[12,"onclick",[27,"action",[[22,0,[]],"childToggle",[22,1,["id"]]],null]],[12,"data-test-child-template",[22,1,["name"]]],[9],[0,"\\n            "],[7,"input"],[11,"checked","checked"],[11,"type","checkbox"],[9],[10],[1,[27,"html-safe",[[22,1,["name"]]],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/ticket-template/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/archive-export/component",["exports","freshdesk/utils/tickets/ticket-filter-query"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({account:Ember.inject.service("currentAccount"),classNames:["__module-tickets__tickets-list__archive-export"],query:null,hideTitle:!0,modalVisible:!1,selectedFilters:null,exportData:Ember.computed("query",(function(){var e=Ember.get(this,"account.fullDomain"),s=Ember.get(this,"selectedFilters").find((function(e){return"created_at"==e.condition}));return s=t.default.getDates(s),{query:Ember.get(this,"query"),exportName:Ember.get(this,"i18n").t("tickets.archiveExportName",{fromDate:s.fromDate,toDate:s.toDate,domain:e})}})),actions:{itemChanged:function(e){Ember.set(this,"selectedFilters",e)},showExportModal:function(){Ember.get(this,"selectedFilters")||Ember.set(this,"selectedFilters",Ember.get(this,"selectedValues.queryHash"));var e=t.default.parseFilters(Ember.get(this,"selectedFilters"));Ember.set(this,"query",e),Ember.set(this,"modalVisible",!0)}}});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/archive-export/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"uvMhlaHJ",block:'{"symbols":["wrapper"],"statements":[[0,"\\n"],[4,"page-layout/page-wrapper",null,[["id"],["archive-ticket-export"]],{"statements":[[0,"\\n"],[4,"component",[[22,1,["content"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","archive-ticket-export__form responsive-form-container"],[9],[0,"\\n      "],[7,"div"],[11,"class","sidebar__title text--semibold"],[9],[0,"\\n        "],[1,[27,"t",["filter.archivedTitle"],null],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"br"],[9],[10],[0,"\\n      "],[1,[27,"app-components/filter-list",null,[["isArchiveExport","filterDefaults","hideTitle","readonlyStatusShow","fieldsList","defaultFilterFields","data-test-div","selectedValues","isFilterSearchEnabled","performFilteringOnChange","containerSelector","itemChanged","class"],[[23,["isArchiveExport"]],[23,["filterDefaults"]],[23,["hideTitle"]],true,[23,["fieldsList"]],[23,["defaultFilterFields"]],"ticket-filter-section",[23,["selectedValues"]],[23,["isFilterSearchEnabled"]],true,".filter-items-container",[27,"action",[[22,0,[]],"itemChanged"],null],"scroll-wrap__right"]]],false],[0,"\\n\\n      "],[7,"div"],[11,"class","archive-ticket-export__button"],[9],[0,"\\n        "],[7,"button"],[11,"data-test-id","archive-next-btn"],[11,"class","btn btn--primary"],[3,"action",[[22,0,[]],"showExportModal"]],[9],[0,"\\n          "],[1,[27,"t",["fd.next"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"if",[[23,["modalVisible"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","closeOnEscapse"],[[27,"toggle-action",["modalVisible",[22,0,[]]],null],true,true]],{"statements":[[0,"          "],[7,"div"],[11,"class","ticket-content"],[9],[0,"\\n\\n            "],[1,[27,"module-tickets/tickets-list/tickets-export",null,[["data","isArchiveExport","hideTicketFilterBy","archivedExportTitle","archiveExportAction","close"],[[23,["exportData"]],[23,["isArchiveExport"]],true,true,true,[27,"toggle-action",["modalVisible",[22,0,[]]],null]]]],false],[0,"\\n\\n          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"component",[[22,1,["sidebar"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","archive-ticket-export__sidebar"],[9],[0,"\\n      "],[7,"img"],[11,"src","https://indfassetsblue.freshdesk.com/production/a/assets/images/archive-folder-3f4b79496dfed33c87f7b37f2c0297239f50e2fa1d0c6f5b4a62d36bb0059a24.svg"],[12,"alt",[27,"t",["filter.archive-icon"],null]],[11,"class","archive-icon app-icon icon-size-large"],[9],[10],[0,"\\n      "],[7,"div"],[9],[0,"\\n        "],[7,"p"],[11,"class","text__infotext"],[9],[0,"\\n          "],[1,[27,"t",["ticket.archive_list.help_text"],null],false],[0,"\\n          "],[7,"a"],[11,"class","helparticle text__link"],[11,"href","https://support.freshdesk.com/support/solutions/articles/212901-ticket-archiving"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n            "],[1,[27,"t",["fd.learn_more"],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/archive-export/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/auto-refresh/component",["exports","freshdesk/mixins/sockets/auto-refresh"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{autoRefreshData:null,customFieldNames:null,uniqueTicketsCreated:Ember.computed.uniq("ticketsCreated"),uniqueTicketsUpdated:Ember.computed.uniq("ticketsUpdated"),showAutoRefreshNotification:Ember.computed("ticketsCreated.[]","ticketsUpdated.[]",(function(){return!Ember.isEmpty(this.ticketsCreated)||!Ember.isEmpty(this.ticketsUpdated)})),createdTicketLabel:Ember.computed("uniqueTicketsCreated",(function(){return this.i18n.t("tickets.list.new_tickets",{count:this.uniqueTicketsCreated.length})})),updatedTicketLabel:Ember.computed("uniqueTicketsUpdated",(function(){return this.i18n.t("tickets.list.updates",{count:this.uniqueTicketsUpdated.length})})),didUpdateAttrs:function(){this._super.apply(this,arguments),this.resetAutoRefresh()},init:function(){this._super.apply(this,arguments),this.currentAccount.hasFeature("auto_refresh")&&this.initializeAutoRefreshSocket()},willDestroyElement:function(){this._super.apply(this,arguments),this.closeAutoRefreshSocket(),this.resetAutoRefresh()},actions:{refreshTicketList:function(){this.resetAutoRefresh(),this.onAutoRefreshReload()}},resetAutoRefresh:function(){this.refreshTicketContent(),this.ticketsUpdated.clear(),this.ticketsCreated.clear()}});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/auto-refresh/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"s/doMEsD",block:'{"symbols":[],"statements":[[4,"ui-components/refresh-notification",null,[["showNotification","notificationButtonClicked"],[[23,["showAutoRefreshNotification"]],[27,"action",[[22,0,[]],"refreshTicketList"],null]]],{"statements":[[4,"if",[[23,["uniqueTicketsCreated","length"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","unique-ticket-created"],[11,"data-test-id","tickets-created"],[9],[0,"\\n      "],[7,"span"],[11,"class","refresh-notification__container__count"],[9],[1,[23,["uniqueTicketsCreated","length"]],false],[10],[0,"\\n      "],[7,"span"],[11,"class","refresh-notification__container__label"],[9],[0," "],[1,[21,"createdTicketLabel"],false],[0," "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["uniqueTicketsUpdated","length"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","unique-ticket-updated position--relative"],[11,"data-test-id","tickets-updated"],[9],[0,"\\n      "],[7,"span"],[11,"class","refresh-notification__container__count ml-12"],[9],[1,[23,["uniqueTicketsUpdated","length"]],false],[10],[0,"\\n      "],[7,"span"],[11,"class","refresh-notification__container__label"],[9],[0," "],[1,[21,"updatedTicketLabel"],false],[0," "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/auto-refresh/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/component",["exports","freshdesk/constants/ticket","freshdesk/mixins/tickets/ticket-special-filters","freshdesk/mixins/filter-list/ticket-filter-init","freshdesk/mixins/tickets/block-requesters","freshdesk/utils/clear-flash-set","freshdesk/constants/flash-messages","freshdesk/constants/component-map/ticket-filter-fields","freshdesk/mixins/filter-list/list-view-states","freshdesk/mixins/tickets/ticket-table","freshdesk/mixins/tickets/close-validation","freshdesk/helpers/html-escape","ember-local-storage","freshdesk/mixins/shortcuts/ticket-list/ticket-list","freshdesk/mixins/tickets/bulk-actions-helper","freshdesk/mixins/tickets/ticket-update","freshdesk/utils/custom-objects"],(function(e,t,s,n,i,a,r,l,o,c,d,m,u,p,h,f,b){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var k=Ember.Component.extend(p.default,c.default,o.default,s.default,n.default,i.default,h.default,d.default,f.default,{ticketBulkAction:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),isSproutOrFree:Ember.computed.reads("currentAccount.isSproutOrFree"),isAdmin:Ember.computed.reads("currentUser.isAdmin"),isFreePlanAndAdmin:Ember.computed.and("isSproutOrFree","isAdmin"),notInTrialSubscription:Ember.computed.not("currentAccount.trialSubscription.active"),showSaveYourFilterBanner:Ember.computed.and("isFreePlanAndAdmin","notInTrialSubscription"),showFilterBannerLocalStorage:(0,u.storageFor)("tickets-list/banner"),showThpFilterNudge:Ember.computed.and("showFilterBannerLocalStorage.showBanner","showSaveYourFilterBanner"),bulkRecordsTask:b.bulkRecordsTask,showConfirmDialog:!1,toggleFilters:!0,displayDeleteTickets:!1,spamTrashDialog:!1,showEmptySpamTrash:Ember.computed.equal("ticketsWithoutWriteAccess.length",0),isSelectAll:null,currentRecord:"",showExport:!1,classNameBindings:["isTableView:responsive__table--full-width"],currentIndex:0,bulkCloseActionPerformed:!1,ticketCloseFailed:!1,interfaceCache:(0,u.storageFor)("tickets-list/interface"),listContent:Ember.computed.reads("tickets"),listRows:Ember.computed.reads("ticketTable.rows"),showBulkTicketUpdate:Ember.computed.reads("ticketBulkAction.showBulkTicketUpdate"),hasListContent:Ember.computed.bool("listContent.length"),showTable:Ember.computed.bool("tickets"),emptyingOnBackground:Ember.computed.reads("meta.emptying_on_background"),recordsSelected:Ember.computed("ticketBulkAction.associatedTicketsAction","selectedRecords","selectedAssocRecords",(function(){return Ember.get(this,"ticketBulkAction.associatedTicketsAction")?Ember.get(this,"selectedAssocRecords"):Ember.get(this,"selectedRecords")})),selectedAssocRecords:Ember.computed("ticketBulkAction.assocPermissibeTickets.@each.checkbox",(function(){return Ember.get(this,"ticketBulkAction.assocPermissibeTickets").filterBy("checkbox",!0)})),currentRow:Ember.computed("currentIndex",(function(){var e=Ember.get(this,"currentIndex");return Ember.get(this,"listRows").objectAt(e)})),exportData:Ember.computed("currentFilter.queryHash",(function(){var e=Ember.get(this,"currentFilter.queryHash");return{reference:"exportTickets",viewName:Ember.get(this,"queryParams.filter"),ticketFilters:e}})),emptySpamTrashText:Ember.computed("queryParams.filter",(function(){var e="deleted"==Ember.get(this,"queryParams.filter")?"Trash":"Spam";return{info:"tickets.info.empty".concat(e),link:"tickets.empty".concat(e)}})),createdFilterData:Ember.computed("currentFilter.{queryHash}",(function(){var e=Ember.get(this,"currentFilter.queryHash")||[],t=l.default.EligibleCreatedFilterValues,s=e.find((function(e){return"created_at"===e.condition}));if(s){var n=s.value;if(t.includes(n))return{value:n,range:null};if(n.from&&n.to)return{value:"set_date",range:{start:new Date(n.from),end:new Date(n.to)}}}return{value:"last_month",range:null}})),lookupColumns:Ember.computed("isTableView","currentColumns.[]",(function(){var e=this;return this.isTableView?this.currentColumns.filterBy("fieldtype","lookup").map((function(t){var s=t.valuePath,n=e._findColumnByValuePath(s).fieldName;return{fieldName:n,schemaId:e.fieldsList.findBy("name",n).lookup.meta.schemaId,valuePath:s}})):null})),recordsHash:Ember.computed("lookupColumns","ticketTable.rows",(function(){var e=this,t={};return this.lookupColumns?(this.ticketTable.rows.forEach((function(s){e.lookupColumns.forEach((function(e){var n=e.schemaId,i=e.valuePath,a=s.get("".concat(i));a&&(0,b.populateRecordsHash)(n,a,t)}))})),t):null})),getLookupRecords:Ember.computed("recordsHash",(function(){return this.recordsHash&&this.bulkRecordsTask.perform(this.store,this.recordsHash)})),init:function(){this._super.apply(this,arguments),Ember.set(this,"showFilterBannerLocalStorage.showBanner",null)},actions:{toggleBulkTicketUpdate:function(){Ember.set(this,"ticketBulkAction.associatedTicketsAction",!1),Ember.get(this,"ticketBulkAction").toggleBulkAction()},bulkUpdateTickets:function(e){var t=this;return this.bulkAction("bulkUpdate",e).then((function(e){return t._bulkSuccessMessage("tickets.bulkactions.bulkupdate.success",e)})).catch((function(e){return t._bulkFailureMessage("tickets.bulkactions.bulkupdate.fail",e)}))},executeScenario:function(e){var t=this,s=Ember.String.htmlSafe("<b>".concat((0,m.htmlEscape)([Ember.get(e,"name")]),"</b>")),n={scenario_id:parseInt(Ember.get(e,"id"))};return Ember.get(e,"actions").forEach((function(e){"status"===e.name&&t._closedStatus(e.value)&&Ember.set(t,"bulkCloseActionPerformed",!0)})),this.bulkAction("bulkScenarios",n).then((function(e){return t._bulkSuccessMessage("tickets.bulkactions.executescenario.success",e,{scenarioName:s})})).catch((function(e){return t._bulkFailureMessage("tickets.bulkactions.executescenario.fail",e)}))},restoreTickets:function(){var e=this;return this.bulkAction("bulkRestore").then((function(){return e._successMessage("tickets.bulkactions.restoretickets.success")})).catch((function(t){return e._bulkFailureMessage("tickets.bulkactions.restoretickets.fail",t)}))},resolveTickets:function(e){if(Ember.get(this,"parentTicketsSelectedCount")){Ember.set(this,"actionTriggered","bulk_close"),Ember.set(this,"showConfirmDialog",!0);var t=e.shiftKey||!1;Ember.set(this,"silentClose",t)}else this._resolveTickets(e)},assignAgents:function(e){var t=this,s=-1===e.id?this.currentUser:e,n=parseInt(Ember.get(s,"id")),i="".concat(Ember.get(s,"contact.name")),a={properties:{responder_id:n}};return this.bulkAction("bulkUpdate",a).then((function(e){return t._bulkSuccessMessage("tickets.bulkactions.assignagents.success",e,{agentName:i})})).catch((function(e){return t._bulkFailureMessage("tickets.bulkactions.assignagents.fail",e)}))},ticketNotSpam:function(){var e=this;return this.bulkAction("bulkUnspam").then((function(){return e._successMessage("tickets.bulkactions.ticketnotspam.success")})).catch((function(t){return e._bulkFailureMessage("tickets.bulkactions.ticketnotspam.fail",t)}))},bulkUnwatch:function(){var e=this;return this.bulkAction("bulkUnwatch").then((function(){return e._successMessage("tickets.bulkactions.bulkunwatch.success")})).catch((function(t){return e._bulkFailureMessage("tickets.bulkactions.bulkunwatch.fail",t)}))},deleteForever:function(){var e=this;return this.bulkAction("deleteForever").then((function(t){return e._bulkSuccessMessage("tickets.bulkactions.deleteforever.success",t)})).catch((function(t){return e._bulkFailureMessage("tickets.bulkactions.deleteforever.fail",t)}))},toggleOverlay:function(){Ember.get(this,"parentTicketsSelectedCount")?(Ember.set(this,"actionTriggered","scenario"),Ember.set(this,"showConfirmDialog",!0)):this.toggleProperty("showScenarios")},deleteTickets:function(){Ember.set(this,"actionTriggered","delete"),Ember.set(this,"showConfirmDialog",!0)},undoBulkTicketDelete:function(e){var t=e.map((function(e){return parseInt(Ember.get(e,"id"))})),s=e.length;Ember.get(e,"firstObject.content").bulkRestore({ids:t}).then(this._undoBulkTicketDeleteSuccessCB.bind(this,t,s),this._undoBulkTicketActionFailureCB.bind(this,"tickets.bulkactions.undodelete.fail",s))},mergeTickets:function(){this.unmergeableTicketsWarning("merge")||this._mergeTickets()},markasspam:function(){this.unmergeableTicketsWarning("spam")||this._spamTickets()},undoBulkMarkAsSpam:function(e){var t=e.length,s=e.map((function(e){return parseInt(e.content.id)}));Ember.get(e,"firstObject.content").bulkUnspam({ids:s}).then(this._undoBulkMarkAsSpamSuccessCB.bind(this,e,t),this._undoBulkTicketActionFailureCB.bind(this,"tickets.bulkactions.undospam.fail",t))},emptySpamOrTrash:function(){var e=this,t=Ember.get(this,"listContent.firstObject"),s=Ember.get(this,"queryParams.filter"),n="tickets.bulkactions.empty".concat(s,".fail");("spam"===s?t.emptySpam():t.emptyTrash()).then((function(){e.toggleProperty("spamTrashDialog"),e.resetPage()})).catch((function(){return e._failureMessage(n)}))},closeOverlay:function(){Ember.set(this,"showExport",!1)},outSideClick:function(){},exportTickets:function(){Ember.set(this,"showExport",!0)},tableCurrentIndex:function(e){Ember.set(this,"currentIndex",e)},resetRefreshOnListContent:function(){var e=Ember.get(this,"listContent");Ember.isArray(e)&&Ember.get(this,"listContent").forEach((function(e){Ember.set(e,"needsRefresh",!1)}))},setRefreshOnListContent:function(e){var t=Ember.get(this,"listContent");if(t){var s=t.find((function(t){return t.id===e.display_id.toString()}));if(Ember.get(s,"quickActionPerformed"))return Ember.set(s,"quickActionPerformed",!1),!1;Ember.set(s,"needsRefresh",!0)}return!0},onAutoRefreshReload:function(){this.resetPage()},onClose:function(e){"showBulkTicketUpdate"==e?Ember.setProperties(this,{"ticketBulkAction.showBulkTicketUpdate":!1,"ticketBulkAction.broadcastMessage":!1}):Ember.set(this,e,!1),Ember.get(this,"ticketCloseFailed")&&Ember.get(this,"selectedRecordsCount")!=Ember.get(this,"totalRecords")&&this.resetPage()},showTryForFreeBanner:function(){Ember.get(this,"showSaveYourFilterBanner")&&(null!==Ember.get(this,"showFilterBannerLocalStorage.showBanner")?this.toggleProperty("showThpFilterNudge"):Ember.set(this,"showThpFilterNudge",!1),Ember.set(this,"showFilterBannerLocalStorage.showBanner",Ember.get(this,"showThpFilterNudge")))}},willDestroy:function(){this._super.apply(this,arguments),Ember.set(this,"tickets",null),Ember.set(this,"meta",null)},bulkAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="bulkDelete"===e?Ember.get(this,"ticketsToBeDeletedIds"):Ember.get(this,"selectedRecordIds"),n=Ember.get(this,"ticketBulkAction.associatedTicketsAction")?Ember.get(this,"ticketBulkAction.selectedAssocTicketIds"):s,i=Ember.get(this,"listContent.firstObject"),a=i[e].bind(i),r=t.properties,l=Ember.assign({ids:n},t);return"bulkUpdate"===e&&r&&this._closedStatus(r.status)&&Ember.set(this,"bulkCloseActionPerformed",!0),Ember.set(this,"isBulkOperationPending",!0),a(l).then(this._bulkActionSuccess.bind(this)).catch(this._bulkActionFailure.bind(this))},_deleteTickets:function(){var e=this,t=Ember.get(this,"ticketsToBeDeleted"),s=t.length;return this.bulkAction("bulkDelete").then((function(){return e.handleDeleteSpamResponse("deletetickets","bulkDeleteTicket",t)})).catch((function(){return e._failureMessage("tickets.bulkactions.deletetickets.fail",{count:s})}))},_spamTickets:function(){var e=this,t=Ember.get(this,"selectedRecords"),s=t.length;return this.bulkAction("bulkSpam").then((function(){return e._spamTicketsSuccess(t)})).catch((function(){return e._failureMessage("tickets.bulkactions.markasspam.fail",{count:s})}))},_spamTicketsSuccess:function(e){var t=this;this.handleDeleteSpamResponse("markasspam","bulkSpamTicket",e),Ember.run.later((function(){return t.showBlockUsersFlash(e)}),r.default.timeUntilSuccessiveFlash)},handleDeleteSpamResponse:function(e,t,s){var n=s.length;this.resetPage(),(0,a.default)(this,t);var i=this.i18n.t("tickets.bulkactions.".concat(e,".success"),{count:n});Ember.get(this,"flashMessages").warning(i,{setName:t,content:{linkText:Ember.get(this,"i18n").t("flashmessage.undo"),linkAction:"markasspam"===e?this.actions.undoBulkMarkAsSpam.bind(this,s):this.actions.undoBulkTicketDelete.bind(this,s)}})},_mergeTickets:function(){var e=this,t={options:{template:"module-tickets/shared/tickets-merge",closeOnEscapse:!0,showModalClose:!0},data:{reference:"merge",tickets:Ember.get(this,"selectedRecords").map((function(e){return Ember.get(e,"content")})),updateToggleFn:function(){Ember.set(e,"isBulkOperationPending",!0),e.resetPage()}}};this.overlay.open(t)},_resolveTickets:function(e){var s,n=this;s=e?e.shiftKey||!1:Ember.get(this,"silentClose");var i={properties:{status:t.default.status.closed,skip_close_notification:s}};return this.bulkAction("bulkUpdate",i).then((function(e){return n._bulkSuccessMessage("tickets.bulkactions.resolvetickets.success",e,{validationDialog:!0})})).catch((function(e){return n._bulkFailureMessage("tickets.bulkactions.resolvetickets.fail",e,{validationDialog:!0})}))},_undoBulkTicketDeleteSuccessCB:function(e,t){var s=Ember.get(e,"firstObject"),n=Ember.get(this,"router").generate("helpdesk.tickets.show",s),i=Ember.String.htmlSafe(this.i18n.t("tickets.bulkactions.undodelete.success",{count:t,ticketLink:n,ticketID:s}));Ember.get(this,"flashMessages").add({type:"success",message:i,timeout:r.default.shorterTimeout}),this.sendAction("reloadPage")},_undoBulkTicketActionFailureCB:function(e,t){var s=this.i18n.t(e,{count:t});Ember.get(this,"flashMessages").danger(s)},_undoBulkMarkAsSpamSuccessCB:function(e,t){var s=Ember.get(e,"firstObject.content").id,n=Ember.get(this,"router").generate("helpdesk.tickets.show",s),i=Ember.String.htmlSafe(this.i18n.t("tickets.bulkactions.undodelete.success",{count:t,ticketLink:n,ticketID:s}));Ember.get(this,"flashMessages").add({type:"success",message:i,timeout:r.default.shorterTimeout}),this.sendAction("reloadPage")},_bulkActionSuccess:function(e){var t=this;return this._ticketCloseFailed(e)?(e.ticketCloseFailed=!0,e):(Ember.run.later((function(){return t.resetPage()}),2e3),e)},_bulkActionFailure:function(e){return this._ticketCloseFailed(e)?(e.ticketCloseFailed=!0,e):(this.isGroupAgentMisMatchFailure(e)&&Ember.get(this,"flashMessages").danger(this.i18n.t("ticket.fields.agent_group_empty")),this.failureReset(),e)},_bulkSuccessMessage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._showValidationDialog(s))return t;var n=this._extractBulkSuccessMessage(t),i=Ember.assign({count:n},s);return this._successMessage(e,i),t},_bulkFailureMessage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._showValidationDialog(s))return t;var n=Ember.get(this,"selectedRecords"),i=n.length,a=Ember.assign({count:i},{});this._failureMessage(e,a)},_successMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Ember.String.htmlSafe(this.i18n.t(e,t));this.flashMessages.success(s)},_failureMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.i18n.t(e,t);this.flashMessages.danger(s)},_extractBulkSuccessMessage:function(e){return e.data.succeeded.length},_extractBulkFailureMessage:function(e){return e.data.failed.length},resetPage:function(){Ember.get(this,"ticketTable.rows").setEach("isSelected",!1),this.sendAction("reloadPage")},failureReset:function(){Ember.set(this,"isBulkOperationPending",!1)}});e.default=k})),define("freshdesk/components/module-tickets/tickets-list/fetch-filter-option/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/fetch-filter-option/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"eqJ+Qxpy",block:'{"symbols":[],"statements":[[7,"div"],[9],[1,[23,["option","label"]],false],[10],[0,"\\n"],[7,"div"],[9],[1,[23,["option","email"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/fetch-filter-option/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/quick-reply/component",["exports","freshdesk/mixins/tickets/ticket-conversation-send","freshdesk/mixins/tickets/can-send-reply","freshdesk/constants/ticket","freshdesk/mixins/slash-commands/remove-slash","freshdesk/mixins/tickets/wrap-email-notification-font"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Ember.Component.extend(t.default,s.default,i.default,a.default,{store:Ember.inject.service(),draft:Ember.inject.service(),classNames:["__module-tickets__tickets-list__quick-reply"],lastConversation:null,isRequesterNote:Ember.computed.not("lastConversation.user.isAgent"),actionType:Ember.computed.reads("data.actionType"),ticket:Ember.computed.reads("data.ticket"),isQuickReply:Ember.computed.reads("data.quickReply"),updateHoverCard:Ember.computed.reads("data.updateLastConversation"),endpoint:Ember.computed.reads("actionType"),init:function(){var e=Ember.get(this,"store"),t={};this._super.apply(this,arguments),this._setLastConversation(),Ember.get(this,"actionType")==n.default.action.reply&&(Ember.set(t,"ticketDraft",Ember.get(this,"ticketDraft")),Ember.set(t,"agentReplyTemplate",Ember.get(this,"agentReplyTemplate"))),Ember.get(this,"lastConversation")||Ember.set(t,"ticket",e.findRecord("ticket",Ember.get(this,"ticket.id"))),Ember.isEmpty(t)?this.sendAction("modalLoaded"):Ember.RSVP.hash(t).then(this._handleTicketDetailResponse.bind(this))},actions:{sendConversation:function(e){return this._removeAtWhoContainer(e),this._wrapEmailNotificationFont(e),this.saveConversation(e)},showAction:function(e,t){Ember.set(this,"actionType",e.camelize());var s={eventName:e,eventParams:{type:t}};this.events.publish(e,s)},hideAction:function(){this.sendAction("close")},discardConversation:function(){var e=Ember.get(this,"hasDraft");"reply"===Ember.get(this,"actionType")&&e?Ember.get(this,"draft").discardDraft(Ember.get(this,"ticket")).catch(this._deleteDraftFailureCB.bind(this)).finally(this._deleteDraftFinally.bind(this)):this.sendAction("close")}},_handleTicketDetailResponse:function(e){this._setDraftSuccessCB(e.ticketDraft),this._setTicketDetails(e.ticket),this.sendAction("modalLoaded")},_setLastConversation:function(){var e=Ember.get(this,"store"),t=Ember.get(this,"ticket"),s=e.peekRecord("conversation",Ember.get(t,"lastConversationId"));s&&Ember.set(this,"lastConversation",s)},_setTicketDetails:function(e){e&&e.data&&Ember.get(this,"store").pushPayload("ticket",e.data)},_setDraftSuccessCB:function(e){e&&e.body&&(Ember.isEmpty(e.inline_attachment_ids)||Ember.set(this,"model.inlineAttachmentIds",e.inline_attachment_ids),Ember.set(this,"hasDraft",!0))},_pushConversationsToStore:function(e){return Ember.get(this,"store").pushPayload(e),e},_submitTicketSuccess:function(e,t){this._pushConversationsToStore(e),Ember.set(this,"hasDraft",!1),Ember.get(this,"updateHoverCard")(),Ember.get(this,"ticket").incrementCounter();var s=this._getConversationSuccessMessage(t);Ember.get(this,"flashMessages").success(s),this.sendAction("close")},_fetchLastConversation:function(){var e=Ember.get(this,"ticket");Ember.RSVP.hash({latestNote:e.latestNote(),ticketDraft:Ember.get(this,"ticketDraft")}).then(this._handleFetchConversationResponse.bind(this))},_handleFetchConversationResponse:function(e){this._handleLatestNote(e.latestNote),this._setDraftSuccessCB(e.ticketDraft),this.sendAction("modalLoaded")},_handleLatestNote:function(e){Ember.get(this,"isDestroyed")||Ember.get(this,"isDestroying")||e&&e.conversation&&(Ember.get(this,"store").pushPayload(e),this._setLastConversation())},_getConversationSuccessMessage:function(e){switch(e){case"reply":return Ember.get(this,"i18n").t("tickets.reply.successmessage");case"notes":return Ember.get(this,"i18n").t("tickets.note.successmessage")}},_submitTicketFailure:function(e){e.errors.any(this.isSignalRed)?(this.send("showError","trafficCop"),this.sendAction("modalLoading"),this._fetchLastConversation()):e.errors.any(this.isNotesLimitExceeded)?(Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.notes_limit_exceeded")),this.sendAction("close")):(Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("ticket.details.submitfailure")),this.sendAction("close"))}});e.default=r})),define("freshdesk/components/module-tickets/tickets-list/quick-reply/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"+yYF48T9",block:'{"symbols":["error"],"statements":[[7,"div"],[11,"class","quick-reply__last-note"],[11,"data-test-modal","quick-reply-modal"],[9],[0,"\\n  "],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n    "],[7,"h4"],[11,"class","modal-title text--xlarge"],[11,"data-test-modal-title","quick-response"],[9],[0,"\\n      "],[1,[27,"svg-jar",["quick-response"],[["class"],["modal-icons"]]],false],[0,"\\n      "],[1,[27,"t",["ticket.quick_glance"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"if",[[23,["lastConversation"]]],null,{"statements":[[0,"    "],[7,"div"],[12,"class",[27,"if",[[23,["isRequesterNote"]],"requester-note"],null]],[9],[0,"\\n      "],[1,[27,"module-tickets/ticket-details/conversation",null,[["conversation","isInActivity","ticket","quickReply"],[[23,["lastConversation"]],false,[23,["ticketRecord"]],true]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"module-tickets/ticket-details/description",null,[["ticket","quickReply"],[[23,["ticket"]],true]]],false],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n\\n"],[7,"div"],[11,"class","quick-reply__editor"],[9],[0,"\\n"],[4,"if",[[23,["ticketActionError","length"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","ticket-action-errors"],[11,"data-test-div","quick-reply-errors"],[9],[0,"\\n      "],[7,"ul"],[11,"class","error-lists"],[9],[0,"\\n"],[4,"each",[[23,["ticketActionError"]]],null,{"statements":[[0,"          "],[7,"li"],[11,"class","error-list"],[9],[0,"\\n            "],[1,[27,"svg-jar",["unverified"],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0,"\\n            "],[7,"span"],[9],[1,[27,"t",[[27,"concat",["ticket.action.error.",[22,1,[]]],null]],null],false],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[1,[27,"component",[[23,["renderAction"]]],[["ticket","model","quickReply","changeAction","hideAction","saveDraft","sendConversation","discardConversation","onEditorFocus","onEditorBlur","showError","navAlertFeatureOn"],[[23,["ticket"]],[23,["model"]],true,[27,"action",[[22,0,[]],"showAction"],null],[27,"action",[[22,0,[]],"hideAction"],null],[27,"action",[[22,0,[]],"saveDraft"],null],[27,"action",[[22,0,[]],"sendConversation"],null],[27,"action",[[22,0,[]],"discardConversation"],null],[27,"action",[[22,0,[]],"onEditorFocus"],null],[27,"action",[[22,0,[]],"onEditorBlur"],null],[27,"action",[[22,0,[]],"showError"],null],false]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/quick-reply/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/shared/close-validation/component",["exports","freshdesk/mixins/tickets/properties"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{store:Ember.inject.service(),ticketFields:Ember.inject.service(),marketplace:Ember.inject.service(),eventSources:Ember.inject.service(),scroller:Ember.inject.service(),classNames:["__module-tickets__tickets-list__shared__close-validation"],tickets:null,updatePromies:null,currentIndex:0,focusOnError:0,refreshProperty:0,dialogClose:!1,ticketsCount:Ember.computed.reads("ticketsList.length"),ticketExists:Ember.computed.notEmpty("ticket"),ticketsList:Ember.computed("tickets",(function(){var e=this.tickets;if(Ember.isArray(e)||(e=Ember.isNone(e)?[]:[e],Ember.set(this,"dialogClose",!0)),e.length>0){var t=this.currentIndex;return t%e.length===t&&this.incrementProperty("refreshProperty"),this.isAssocticketsAction?e:e.map((function(e){return e.content}))}this.onclose()})),ticket:Ember.computed("currentIndex","refreshProperty",(function(){var e=this;Ember.set(this,"refresh",!1);var t=this.currentIndex,s=this.ticketsList[t];return Ember.run.next((function(){Ember.set(e,"refresh",!0),e._validateActiveTicket()})),s})),actions:{toggleActiveTicket:function(e){this._changeTicket(e)},updateProperty:function(){return this.updateProperty()}},_changeTicket:function(e){e!=this.currentIndex&&(this.ticket.rollbackAttributes(),Ember.set(this,"currentIndex",e))},_updatePropertyCBTktSaveSuccess:function(){var e=this;Ember.run.next((function(){e.dialogClose?e.onclose():Ember.set(e,"updatePromise",null),e._removeFromList()}))},_updatePropertyCBTktSaveFailure:function(){},_validateActiveTicket:function(){var e=this;Ember.run.schedule("afterRender",this,(function(){var t=e.ticket;for(var s in e.assignedProperties)Ember.set(t,s,e.assignedProperties[s]);Ember.set(e,"startTicketValidation",!0),t.validate().then(e.incrementErrorProperty.bind(e))}))},incrementErrorProperty:function(){var e=this;Ember.run.next((function(){e.incrementProperty("focusOnError")}))},_removeFromList:function(){this._scrollToNext();var e=this.tickets;if(this.isAssocticketsAction){var t=Ember.isArray(e)?e.findBy("id",Ember.get(this,"ticket.id")):e;Ember.set(t,"checkbox",!1)}else{var s=Ember.isArray(e)?e.findBy("content.id",Ember.get(this,"ticket.id")):e;Ember.set(s,"selected",!1)}},_scrollToNext:function(){var e=this.ticketsCount,t=e>1?e-1:e,s=".ticket-list-item-".concat(this.currentIndex%t);this.scroller.scrollVertical(s,{offset:-150,parent:".ticket-closure"})}});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/shared/close-validation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"+VbbI/ha",block:'{"symbols":["item","index","property"],"statements":[[7,"div"],[11,"class","modal-content show ticket-closure"],[11,"data-test-modal","bulk-validation-modal"],[9],[0,"\\n  "],[7,"div"],[11,"class","col-md-6 closure-column"],[9],[0,"\\n    "],[7,"div"],[11,"class","ticket-list"],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-closure-header"],[9],[0,"\\n        "],[7,"h4"],[11,"class","modal-title text--xlarge closure-title"],[9],[0,"\\n          "],[1,[27,"svg-jar",["bulk-close"],[["class"],["modal-icons modal-close-icon"]]],false],[0," \\n"],[4,"if",[[23,["assignedProperties","status"]]],null,{"statements":[[0,"            "],[1,[27,"t",["tickets.list.closeTickets"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"t",["tickets.list.updateTickets"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[10],[0,"\\n        "],[7,"div"],[11,"class","text__content close-warning"],[9],[0,"\\n          "],[7,"div"],[11,"class","warning-content"],[9],[0,"\\n"],[4,"if",[[23,["assignedProperties","status"]]],null,{"statements":[[0,"              "],[1,[27,"html-safe",[[27,"t",["tickets.list.close_tickets"],[["count","total"],[[23,["ticketsCount"]],[23,["totalTickets"]]]]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"t",["tickets.list.update_tickets"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[11,"class","tickets"],[9],[0,"\\n"],[4,"each",[[23,["ticketsList"]]],null,{"statements":[[0,"          "],[7,"div"],[12,"class",[28,["ticket-list-item container-fluid ticket-list-item-",[22,2,[]]," ",[27,"if",[[27,"eq",[[23,["currentIndex"]],[22,2,[]]],null],"ticket-list-item--selected"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"toggleActiveTicket",[22,2,[]]],null]],[12,"data-test-div",[28,["ticket-list-item-",[22,2,[]]]]],[11,"data-test-ticket","ticket-list-item"],[9],[0,"\\n            "],[7,"div"],[11,"class","col-md-10 text__content cardlist__item subject"],[9],[0,"\\n              "],[7,"div"],[11,"class","center-align"],[9],[0,"\\n                "],[7,"span"],[11,"class","text__content text--semibold wrap-subject-content"],[9],[0,"\\n                  "],[1,[22,1,["subject"]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[11,"class","text__content text--gray"],[9],[0,"  #"],[1,[22,1,["id"]],false],[10],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n"],[4,"if",[[27,"eq",[[23,["currentIndex"]],[22,2,[]]],null]],null,{"statements":[[4,"module-tickets/tickets-list/shared/ticket-property",null,[["class","promise"],["col-md-2",[23,["updatePromise"]]]],{"statements":[[0,"                "],[7,"div"],[11,"class","list-filter__item--icon-overlay progress-icon"],[9],[0,"\\n                  "],[4,"component",[[22,3,["iconComponent"]]],null,{"statements":[],"parameters":[]},null],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[3]},null]],"parameters":[]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[1,2]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","col-md-6 closure-column"],[9],[0,"\\n"],[4,"if",[[23,["ticketExists"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","closure-ticket-properties"],[9],[0,"\\n        "],[1,[27,"module-tickets/ticket-details/properties",null,[["ticket","startTicketValidation","ticketFields","refresh","focusOnError","updateProperty"],[[23,["ticket"]],[23,["startTicketValidation"]],[23,["ticketFields","fields"]],[23,["refresh"]],[23,["focusOnError"]],[27,"action",[[22,0,[]],"updateProperty"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/shared/close-validation/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/shared/loading-status/component",["exports","ember-prop-types"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={icon:t.PropTypes.string},n=Ember.Component.extend({propTypes:s,isSaving:Ember.computed.readOnly("promise.isPending"),isSuccess:Ember.computed.readOnly("promise.isFulfilled"),isError:Ember.computed.readOnly("promise.isRejected"),isFinishedLoading:Ember.computed.or("isSuccess","isError"),getDefaultProps:function(){return{icon:"assignto"}}});e.default=n})),define("freshdesk/components/module-tickets/tickets-list/shared/loading-status/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"d3Cf9RXj",block:'{"symbols":["&default"],"statements":[[4,"if",[[23,["isSaving"]]],null,{"statements":[[0,"  "],[1,[27,"ui-components/gravity-loader",null,[["isLoading","class"],[true,"very-small-loading"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isSuccess"]]],null,{"statements":[[0,"    "],[1,[27,"svg-jar",["resolved"],[["class"],["app-icon flashout app-icon--small"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isError"]]],null,{"statements":[[0,"    "],[1,[27,"svg-jar",["error"],[["class"],["app-icon flashout error app-icon--small"]]],false],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}],[0,"  "],[7,"div"],[12,"class",[27,"if",[[23,["isFinishedLoading"]]," assignto flashin"],null]],[9],[0,"\\n"],[4,"if",[[24,1]],null,{"statements":[[0,"      "],[14,1],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"svg-jar",[[23,["icon"]]],[["class"],["app-icon app-icon--small"]]],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/shared/loading-status/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/shared/ticket-property/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["text__content","list-filter__item","clearfix"],hasIcon:Ember.computed.bool("icon")});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/shared/ticket-property/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"UXhpbRHZ",block:'{"symbols":["block","&default"],"statements":[[4,"with",[[27,"hash",null,[["iconComponent"],[[27,"component",["module-tickets/tickets-list/shared/loading-status"],[["promise","class","icon"],[[23,["promise"]],[27,"concat",["pull-left list-filter__icon list-filter__icon-",[23,["icon"]]],null],[23,["icon"]]]]]]]]],null,{"statements":[[4,"if",[[23,["hasIcon"]]],null,{"statements":[[0,"    "],[1,[22,1,["iconComponent"]],false],[0,"\\n    "],[14,2],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[14,2,[[27,"hash",null,[["iconComponent"],[[22,1,["iconComponent"]]]]]]],[0,"\\n"]],"parameters":[]}]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/shared/ticket-property/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"jFLAbXUT",block:'{"symbols":["wrapper","sidebarRenderHash","listRenderHash","autoRefreshRenderHash","filterRenderHash"],"statements":[[4,"page-layout/page-wrapper",null,null,{"statements":[[4,"component",[[22,1,["content"]]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","queryParams"],[0,[23,["queryParams","filter"]],"fetchTicketList",[23,["findFilterListContent"]],[23,["queryParams"]]]],{"statements":[[4,"component",[[22,3,["loader-state"]]],null,{"statements":[[0,"        "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,3,["render-content"]]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","taskOptions","queryParams"],[2,[23,["queryParams","filter"]],"findTicketFilters",[23,["findFilters"]],[27,"not",[[23,["showFilterSidebar"]]],null],[23,["queryParams"]]]],{"statements":[[4,"component",[[22,5,["render-content"]]],null,{"statements":[[0,"            "],[1,[27,"app-components/filter-list/filter-list-header",null,[["currentFilter","filtersList","filterDefaults","searchPlaceholder","isLoading"],[[23,["currentFilter"]],[23,["filtersList"]],[23,["filterDefaults"]],[27,"t",["tickets.filter.search.placeholder"],null],[22,3,["isContentLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[5]},null],[0,"\\n"],[4,"ember-wormhole",null,[["to"],["mainactionbar"]],{"statements":[[0,"          "],[7,"div"],[9],[0,"\\n"],[4,"if",[[23,["showTable"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/tickets-list/top-navigation",null,[["isSelectAll","toggleSelectAll","isChecked","count","hasListContent","perPage","page","isTableView","currentFilter","queryParams","isSpamOrTrash","isBulkOperationPending","toggleOverlay","toggleBulkAction","deleteTickets","switchView","restoreTickets","deleteForever","ticketNotSpam","assignAgents","mergeTickets","bulkUnwatch","resolveTickets","markasspam","exportTickets","linkTickets","linkToParent","isFilterExpanded","shouldHideFilterOptions","isLoading","isPageLoading","showBulkUpdateButton","showDeleteButton"],[[23,["isSelectAll"]],[27,"action",[[22,0,[]],"toggleSelectAll"],null],[23,["hasSelected"]],[23,["meta","count"]],[23,["hasListContent"]],[23,["perPage"]],[23,["page"]],[23,["isTableView"]],[23,["currentFilter"]],[23,["queryParams"]],[23,["isSpamOrTrash"]],[23,["isBulkOperationPending"]],[27,"action",[[22,0,[]],"toggleOverlay"],null],[27,"action",[[22,0,[]],"toggleBulkTicketUpdate"],null],[27,"action",[[22,0,[]],"deleteTickets"],null],[27,"action",[[22,0,[]],"switchTableView"],null],[27,"action",[[22,0,[]],"restoreTickets"],null],[27,"action",[[22,0,[]],"deleteForever"],null],[27,"action",[[22,0,[]],"ticketNotSpam"],null],[27,"action",[[22,0,[]],"assignAgents"],null],[27,"action",[[22,0,[]],"mergeTickets"],null],[27,"action",[[22,0,[]],"bulkUnwatch"],null],[27,"action",[[22,0,[]],"resolveTickets"],null],[27,"action",[[22,0,[]],"markasspam"],null],[27,"action",[[22,0,[]],"exportTickets"],null],[27,"action",[[22,0,[]],"linkTickets"],null],[27,"action",[[22,0,[]],"linkToParent"],null],[23,["isFilterExpanded"]],[23,["shouldHideFilterOptions"]],[27,"or",[[22,3,["isContentLoading"]],[23,["columnRearranging"]]],null],[27,"or",[[22,3,["isContentLoading"]],[23,["isMetaLoading"]]],null],[23,["showBulkUpdateButton"]],[23,["showDeleteButton"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              \\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[23,["tickets"]],[27,"or",[[23,["isSpam"]],[23,["isTrash"]]],null],[23,["showEmptySpamTrash"]]],null]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","spam-notification text__content text__infotext"],[11,"data-test-id","empty-spam"],[9],[0,"\\n            "],[7,"span"],[9],[0,"\\n"],[4,"if",[[23,["emptyingOnBackground"]]],null,{"statements":[[0,"                "],[1,[27,"t",["tickets.bulkactions.emptySpamTrash.notice"],[["name"],[[23,["viewName"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",[[23,["emptySpamTrashText","info"]]],null],false],[0,"\\n"],[4,"if",[[27,"hasabilities",["delete_ticket"],null]],null,{"statements":[[0,"                  "],[7,"a"],[11,"class","cursor-pointer"],[11,"role","button"],[12,"aria-label",[27,"t",[[23,["emptySpamTrashText","link"]]],null]],[12,"onclick",[27,"action",[[22,0,[]],[27,"mut",[[23,["spamTrashDialog"]],true],null]],null]],[9],[0,"\\n                    "],[1,[27,"t",[[23,["emptySpamTrashText","link"]]],null],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"sequential-render",null,[["renderPriority","context","taskName","asyncRender"],[3,[23,["queryParams","filter"]],"renderAutoRefresh",false]],{"statements":[[4,"component",[[22,4,["render-content"]]],null,{"statements":[[0,"            "],[1,[27,"module-tickets/tickets-list/auto-refresh",null,[["ticket","listContent","page","sortType","orderType","currentFilter","ticketfields","refreshTicketContent","setRefreshOnTicket","onAutoRefreshReload"],[[23,["ticket"]],[23,["listContent"]],[23,["page"]],[23,["sortType"]],[23,["orderType"]],[23,["currentFilter"]],[23,["ticketFields"]],[27,"action",[[22,0,[]],"resetRefreshOnListContent"],null],[27,"action",[[22,0,[]],"setRefreshOnListContent"],null],[27,"action",[[22,0,[]],"onAutoRefreshReload"],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[4]},null],[0,"\\n"],[4,"if",[[23,["showThpFilterNudge"]]],null,{"statements":[[4,"nucleus-inline-banner",null,[["isDismissible","type","class"],[false,"info","mb-8 d-flex justify-content--center align-items--center ticket-list-banner-center-align ticket-list-banner-icon-inline-align"]],{"statements":[[0,"            "],[7,"span"],[11,"data-test-id","ticket-list-thp-nudge"],[9],[0,"\\n              "],[1,[27,"html-safe",[[27,"t",["tickets.list.save_your_filters"],null]],null],false],[0,"\\n              "],[7,"span"],[9],[0,""],[10],[0,"\\n"],[4,"link-to",["helpdesk.admin.explore",[27,"query-params",null,[["plan","feature"],["growth","customTicketViews"]]]],[["data-test-id","class"],["ticket-list-thp-nudge-link","link-no-underline"]],{"statements":[[0,"                "],[7,"button"],[11,"class","btn btn--primary text--xsmall"],[12,"aria-label",[21,"label"]],[9],[1,[27,"t",["fd.try-higher.explore-plan.try-for-free"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showSelectedTicketsBanner"]]],null,{"statements":[[4,"nucleus-inline-banner",null,[["isDismissible","type","class"],[false,"info","mb-8 d-flex justify-content--center align-items--center ticket-list-banner-center-align"]],{"statements":[[0,"            "],[1,[27,"t",["tickets.list.write_access_display_banner"],[["count"],[[23,["ticketsWithWriteAccess","length"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["queryParams","hasArchiveTickets"]]],null,{"statements":[[4,"nucleus-inline-banner",null,[["isDismissible","type","class"],[true,"info","mb-8 d-flex justify-content--center align-items--center ticket-list-banner-center-align"]],{"statements":[[0,"            "],[1,[27,"t",["tickets.list.has_archive_tickets"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showTable"]]],null,{"statements":[[0,"          "],[1,[27,"module-tickets/tickets-list/tickets-table",null,[["isTableView","currentFilterId","showColumnChooser","ticketTable","staticColumns","dynamicColumns","allColumns","onApplyColumnChange","count","perPage","page","tableCurrentIndex","executeRow","isLoading","isPageLoading","isBulkOperationPending","getLookupRecords","isChecked"],[[23,["isTableView"]],[23,["queryParams","filter"]],[23,["showColumnChooser"]],[23,["ticketTable"]],[23,["staticColumns"]],[23,["dynamicColumns"]],[23,["allColumns"]],[27,"action",[[22,0,[]],"applyColumnChanges"],null],[23,["meta","count"]],[23,["perPage"]],[23,["page"]],[27,"action",[[22,0,[]],"tableCurrentIndex"],null],[27,"route-action",["goToModelPage"],null],[27,"or",[[22,3,["isContentLoading"]],[23,["columnRearranging"]]],null],[27,"or",[[22,3,["isContentLoading"]],[23,["isMetaLoading"]]],null],[23,["isBulkOperationPending"]],[23,["getLookupRecords"]],[23,["hasSelected"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[3]},null]],"parameters":[]},null],[4,"if",[[23,["showFilterSidebar"]]],null,{"statements":[[4,"component",[[22,1,["sidebar"]]],null,{"statements":[[4,"sequential-render",null,[["renderPriority","context","taskName","fetchDataTask","queryParams","renderImmediately"],[1,[23,["queryParams","filter"]],"renderTicketFilters",[23,["findCurrentFilter"]],[23,["queryParams"]],[23,["renderFiltersImmediately"]]]],{"statements":[[4,"component",[[22,2,["loader-state"]]],null,{"statements":[[0,"          "],[1,[27,"ui-components/placeholder-loader",null,[["placeholderType"],["filter-list"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,2,["render-content"]]],[["loaderClass"],["loader-fade"]],{"statements":[[0,"          "],[1,[27,"app-components/filter-list",null,[["filterDefaults","fieldsList","useAgentTimeZone","defaultFilterFields","cancelToggle","onFilterChange","clearFilter","data-test-div","selectedValues","isFilterSearchEnabled","isFilterSearchAllowed","performFilteringOnChange","enableVerticalCollection","containerSelector","class"],[[23,["filterDefaults"]],[23,["fieldsList"]],true,[23,["defaultFilterFields"]],[23,["refreshFilter"]],[27,"pipe-action",[[27,"route-action",["customSearch"],null],[27,"action",[[22,0,[]],"showTryForFreeBanner"],null]],null],[23,["clearFilter"]],"ticket-filter-section",[23,["currentFilter"]],[23,["isFilterSearchEnabled"]],true,false,true,".sidebar","scroll-wrap__right ticket-filter"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[1]},null],[0,"\\n"],[4,"if",[[23,["showScenarios"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","size","closeOnEscapse"],[[27,"action",[[22,0,[]],"onClose","showScenarios"],null],true,"medium",true]],{"statements":[[0,"    "],[1,[27,"module-tickets/shared/tickets-scenarios",null,[["onclose","executeScenario","selectedRecords","totalRecords","assignedProperties"],[[27,"action",[[22,0,[]],"onClose","showScenarios"],null],[27,"action",[[22,0,[]],"executeScenario"],null],[23,["selectedRecords"]],[23,["totalRecords"]],[23,["assignedProperties"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showBulkTicketUpdate"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","size","closeOnEscapse"],[[27,"action",[[22,0,[]],"onClose","showBulkTicketUpdate"],null],true,"medium",true]],{"statements":[[0,"    "],[1,[27,"module-tickets/tickets-list/tickets-bulkactions",null,[["onclose","onsubmit","parentTicketsSelectedCount","selectedRecords","totalRecords","ticketBulkAction","containsNonEditableTickets","assignedProperties"],[[27,"action",[[22,0,[]],"onClose","showBulkTicketUpdate"],null],[27,"action",[[22,0,[]],"bulkUpdateTickets"],null],[23,["parentTicketsSelectedCount"]],[23,["recordsSelected"]],[23,["totalRecords"]],[23,["ticketBulkAction"]],[23,["containsNonEditableTickets"]],[23,["assignedProperties"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showExport"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["outSideClick","close","showModalClose","closeOnEscapse"],[[27,"action",[[22,0,[]],"outSideClick"],null],[27,"action",[[22,0,[]],"closeOverlay"],null],true,true]],{"statements":[[0,"    "],[7,"div"],[11,"class","ticket-content"],[9],[0,"\\n      "],[1,[27,"module-tickets/tickets-list/tickets-export",null,[["data","createdFilterValue","createdDateRange","close"],[[23,["exportData"]],[23,["createdFilterData","value"]],[23,["createdFilterData","range"]],[27,"action",[[22,0,[]],"closeOverlay"],null]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showCloseTicketsValidationDialog"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","size","closeOnEscapse"],[[27,"action",[[22,0,[]],"onClose","showCloseTicketsValidationDialog"],null],true,"medium",true]],{"statements":[[0,"    "],[1,[27,"module-tickets/tickets-list/shared/close-validation",null,[["tickets","onclose","totalTickets","assignedProperties"],[[23,["selectedRecords"]],[27,"action",[[22,0,[]],"onClose","showCloseTicketsValidationDialog"],null],[23,["totalRecords"]],[23,["assignedProperties"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[0,"\\n"],[4,"if",[[23,["showConfirmDialog"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close","showCloseButton"],[[27,"t",[[27,"concat",["tickets.ticket_associations.ticket_actions.",[23,["actionTriggered"]]],null]],[["count"],[[23,["selectedRecordsCount"]]]]],[23,["saveButtonLabel"]],[27,"action",[[22,0,[]],"confirmAction",[23,["actionTriggered"]]],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["showConfirmDialog"]]],null]],null],[23,["showCloseButton"]]]],{"statements":[[0,"    "],[7,"p"],[9],[0,"\\n      "],[1,[21,"confirmDialogDescription"],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["spamTrashDialog"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close"],[[27,"t",[[23,["emptySpamTrashText","link"]]],null],[27,"t",["tickets.deleteforever"],null],[27,"action",[[22,0,[]],"emptySpamOrTrash"],null],[27,"action",[[22,0,[]],[27,"mut",[[23,["spamTrashDialog"]]],null]],null]]],{"statements":[[0,"    "],[7,"span"],[9],[0,"\\n      "],[1,[27,"t",["tickets.emptySpamTrash.dialog"],[["view"],[[23,["currentFilter","title"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["displayDeleteTickets"]]],null,{"statements":[[4,"app-components/confirm-dialog",null,[["title","saveLabel","save","close"],[[27,"t",["tickets.bulkactions.deletetickets.confirm.title"],null],[27,"t",["tickets.bulkactions.deletetickets.confirm.savelabel"],null],[27,"pipe-action",[[27,"action",[[22,0,[]],"deleteTickets"],null],[27,"toggle-action",["displayDeleteTickets",[22,0,[]]],null]],null],[27,"toggle-action",["displayDeleteTickets",[22,0,[]]],null]]],{"statements":[[4,"if",[[27,"eq",[[23,["selectedRecordsCount"]],1],null]],null,{"statements":[[0,"      "],[1,[27,"t",["tickets.bulkactions.deletetickets.confirm.single"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"t",["tickets.bulkactions.deletetickets.confirm.multiple"],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/broadcast-message/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({showBodyContent:!0,actions:{showBroadcastContent:function(){this.toggleProperty("showBodyContent")},insertIntoReply:function(){this.sendAction("insertIntoReply")}}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/broadcast-message/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"FpyA1W1V",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","broadcast-wrapper"],[11,"data-test-id","broadcast-wrapper"],[9],[0,"\\n  "],[7,"div"],[11,"class","header clearfix"],[9],[0,"\\n    "],[7,"div"],[11,"class","broadcast-title pull-left"],[11,"data-test-id","broadcast-title"],[9],[0,"\\n      "],[1,[27,"svg-jar",["broadcast"],[["class"],["broadcast-icon-wrapper app-icon app-icon--xlarge"]]],false],[0,"\\n      "],[7,"a"],[11,"role","button"],[11,"class","title text--semibold"],[11,"data-test-id","broadcast-title-button"],[12,"onclick",[27,"action",[[22,0,[]],"showBroadcastContent"],null]],[9],[1,[27,"t",["tickets.ticket_associations.link_tickets.list_page.last_broadcasted_message"],null],false],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","insert-reply pull-right"],[9],[0,"\\n      "],[7,"button"],[12,"aria-label",[27,"t",["tickets.ticket_associations.link_tickets.list_page.broadcasted_message.insert_to_reply"],null]],[11,"class","app-icon-btn app-icon-btn--text text--uppercase"],[12,"onclick",[27,"action",[[22,0,[]],"insertIntoReply"],null]],[11,"data-test-id","insert-reply"],[9],[0,"\\n        "],[1,[27,"t",["tickets.ticket_associations.link_tickets.list_page.broadcasted_message.insert_to_reply"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n    "],[7,"span"],[11,"class","created-at text--verysmall text--gray"],[9],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["createdAt"]]]]],false],[10],[0,"\\n  "],[10],[0,"\\n"],[4,"if",[[23,["showBodyContent"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","body-content"],[11,"data-test-id","broadcast-body-content"],[9],[0,"\\n      "],[1,[27,"html-safe",[[23,["broadcastMessage"]]],null],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/broadcast-message/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/component",["exports","freshdesk/mixins/tickets/form","@freshdesk/tickets/mixins/email-config","freshdesk/utils/blank-array","freshdesk/mixins/tickets/insert-canned-response","freshdesk/constants/ticket","@freshdesk/common/utils/plain-text","freshdesk/mixins/integrations/attachment-apps","freshdesk/mixins/tickets/wrap-email-notification-font"],(function(e,t,s,n,i,a,r,l,o){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=Ember.Component.extend(t.default,s.default,i.default,l.default,o.default,{store:Ember.inject.service(),ticketFields:Ember.inject.service(),scroller:Ember.inject.service(),currentUser:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),i18n:Ember.inject.service(),classNames:["__module-tickets__tickets-list__tickets-bulkactions"],model:null,isLoaded:!1,isSelected:!1,cannedResponse:!1,cannedDescription:null,customCheckFields:{customFields:{}},internalGroupAgentFNames:["internalGroupId","internalAgentId"],body:null,fromEmail:null,displayInlineCannedResponse:!1,defaultCollapsed:!0,showCloseWarning:!1,parentTicketsSelectedCount:0,showCloseValidationDialog:!1,isStatusChecked:!1,cannedTextProp:"contentHtml",agentGroupEnabled:!1,isInternalAgentGroupEnabled:!1,insertBroadcast:!1,cannotUpdateAll:Ember.computed.not("ticketBulkAction.updateAll"),permissibleTicketsCount:Ember.computed.reads("ticketBulkAction.permissibleTickets"),selectedAssocTicketsCount:Ember.computed.reads("ticketBulkAction.selectedTicketsCount"),broadcastMessage:Ember.computed.reads("ticketBulkAction.broadcastMessage"),createdAt:Ember.computed.reads("ticketBulkAction.createdAt"),associatedTicketsAction:Ember.computed.reads("ticketBulkAction.associatedTicketsAction"),editorBody:Ember.computed.alias("editorData.body"),isParentTicketSelected:Ember.computed.gt("parentTicketsSelectedCount",0),editorEnabled:Ember.computed.bool("editorData.body"),currentStatus:Ember.computed.reads("model.status"),showUpdateMessage:Ember.computed.and("cannotUpdateAll","associatedTicketsAction"),showBroadcastedMessage:Ember.computed.and("broadcastMessage","associatedTicketsAction"),showBulkUpdateProperties:Ember.computed("currentUser.userData.abilities.[]",(function(){return this.currentUserPrivileges.hasServiceTaskUpdatePrivilege||this.currentUser.hasAbility("edit_ticket_properties")})),bulkUpdateBannerMessage:Ember.computed("currentUser.userData.abilities.[]","containsNonEditableTickets",(function(){if(!this.containsNonEditableTickets)return!1;var e,t=this.currentUser.hasAbility("edit_ticket_properties"),s=this.currentUserPrivileges.hasServiceTaskUpdatePrivilege,n=!s&&t;return s&&!t?e=this.i18n.t("tickets.bulkactions.bulkupdate.only_service_task"):n&&(e=this.i18n.t("tickets.bulkactions.bulkupdate.only_tickets")),e})),showFooterBulkUpdateButton:Ember.computed("currentUser.userData.abilities.[]","containsNonEditableTickets",(function(){return!this.containsNonEditableTickets||this.currentUser.hasAbility("reply_ticket")})),addedAttachments:(0,n.default)(),inlineAttachments:(0,n.default)(),selectedtags:(0,n.default)(),cloudAttachments:(0,n.default)(),hasTags:Ember.computed.bool("selectedtags.length"),fields:Ember.computed((function(){return Ember.get(this,"ticketFields.fields").filterBy("showInBulkEdit",!0)})),hasFeatureSharedOwnership:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("shared_ownership")})),hasFeatureSplitAssignTo:Ember.computed((function(){return Ember.get(this,"currentAccount").launched("group_agent_split")})),assignTo:Ember.computed((function(){return Ember.Object.create()})),editorData:Ember.computed((function(){return Ember.Object.create({body:null,from_email:null,attachment_ids:[],cloud_files:[],inline_attachment_ids:[]})})),updateData:Ember.computed((function(){return Ember.Object.create({properties:{},reply:{}})})),init:function(){this._super.apply(this,arguments),this.setDefaults();var e=Ember.get(this,"store");Ember.RSVP.hash({newTicket:e.createRecord("ticket",{customFields:{}})}).then(this._initCB.bind(this))},actions:{insertIntoReply:function(){Ember.set(this,"insertBroadcast",!0)},contentChanged:function(e){var t=Boolean((0,r.default)(e).length);Ember.set(this,"editorEnabled",t),Ember.set(this,"editorBody",e)},onInsertAttachment:function(e){var t=Ember.get(this,"editorData");Ember.set(t,"attachment_ids",e)},errorFieldFocus:function(){},changeCheckbox:function(e,t){var s=Ember.get(this,"customCheckFields"),n=Ember.get(e,"type");Ember.set(s,Ember.get(e,"fieldName"),t),"nested_field"===n&&this.send("setNestedFields",s,e,t),"default_status"===n&&Ember.set(this,"isStatusChecked",t)},setNestedFields:function(e,t,s){Ember.get(t,"nestedTicketFields").forEach((function(t){var n="customFields.".concat(t.name);Ember.set(e,n,s)}))},changeSelectBox:function(e,t,s,n){var i=Ember.get(this,"customCheckFields");if(Ember.set(i,"".concat(e,"_defaultState"),!0),"status"===e){Ember.set(this,"showCloseWarning",!1);var r=a.default.status,l=r.closed,o=r.resolved,c=t===l||t===o;Ember.get(this,"isParentTicketSelected")&&c&&Ember.set(this,"showCloseWarning",!0)}n?"nested_field"===Ember.get(n,"type")&&(Ember.set(i,e,!Ember.isEmpty(t)),this.send("setNestedFields",i,n,!0)):(Ember.set(i,e,!Ember.isEmpty(t)),"status"===e&&Ember.set(this,"isStatusChecked",!Ember.isEmpty(t)))},setPriority:function(e){Ember.set(this,"model.priority",e),this.send("changeSelectBox","priority",e)},submit:function(){var e=this.getSerializedModel(),t=Ember.get(this,"editorEnabled"),s=Ember.get(this,"editorData"),n=Ember.get(this,"updateData"),i=Ember.get(this,"selectedtags"),a=Ember.get(this,"hasTags");if(this.setCloudFiles(s),Ember.get(this,"model.inlineAttachmentIds")&&(Ember.set(s,"inline_attachment_ids",Ember.get(this,"model.inlineAttachmentIds")),delete e.inline_attachment_ids),s.body){var r=document.createDocumentFragment(),l=document.createElement("div");for(l.innerHTML=s.body;l.firstChild;)r.appendChild(l.firstChild);var o=r.querySelectorAll("img[data-id]");Array.from(o).forEach((function(e){e.classList.add("inline-image")}));var c=document.createElement("div");c.appendChild(r.cloneNode(!0));var d=this._wrapFontFamily(c.innerHTML);Ember.set(this,"editorData.body",d)}if(a&&(e.tags=i),this.containsNonEditableTickets||!this.currentUser.hasAbility("edit_ticket_properties")&&!this.currentUserPrivileges.hasServiceTaskUpdatePrivilege?n.properties&&delete n.properties:Ember.set(n,"properties",e),t?Ember.set(n,"reply",s):n.reply&&delete n.reply,Ember.get(this,"agentGroupEnabled")){var m=Ember.get(this,"assignTo");Ember.set(n,"properties.group_id",m.groupId),Ember.set(n,"properties.responder_id",m.responderId)}if(Ember.get(this,"isInternalAgentGroupEnabled")&&Ember.get(this,"isStatusChecked")){var u=Ember.get(this,"model");Ember.set(n,"properties.internal_group_id",Ember.get(u,"internalGroupId")),Ember.set(n,"properties.internal_agent_id",Ember.get(u,"internalAgentId"))}return Ember.get(this,"onsubmit")(n).then(this._submitCB.bind(this))},cancel:function(){this.sendAction("onclose")},insertCannedResponse:function(e){this.setCannedResponse(e)},hideCannedResponse:function(){Ember.set(this,"cannedResponse",!1)},showCannedResponse:function(){Ember.set(this,"cannedResponse",!0)},enableCannedResponse:function(){this.toggleProperty("displayInlineCannedResponse")},onSaveAgentAndGroup:function(e,t){this._setAgentAndGroup(Ember.get(this,"assignTo"),e,t,"responderId","groupId"),Ember.set(this,"agentGroupEnabled",!0)},setInternalAgentAndGroup:function(e,t){this._setAgentAndGroup(Ember.get(this,"model"),e,t,"internalAgentId","internalGroupId"),Ember.set(this,"isInternalAgentGroupEnabled",!0)},onChangeFrom:function(e){Ember.set(this,"bulkActionFromEmail",e);var t=Ember.get(e,"replyEmail")||Ember.get(e,"reply_email");Ember.set(this,"editorData.from_email",t)},saveTags:function(e){Ember.set(this,"selectedtags",e)}},_setAgentAndGroup:function(e,t,s,n,i){var a={},r=s&&Ember.get(s,"id"),l=t&&Ember.get(t,"id");a[i]=r?parseInt(r):null,a[n]=l?parseInt(l):null,Ember.setProperties(e,a)},_initCB:function(e){Ember.set(this,"model",e.newTicket),this.setCheckBoxFields(),Ember.set(this,"isLoaded",!0)},setDefaults:function(){Ember.set(this,"editorData.body",null),Ember.set(this,"editorData.from_email",Ember.get(this,"defaultFromEmail.replyEmail"))},setCheckBoxFields:function(){var e=Ember.get(this,"fields"),t=Ember.get(this,"customCheckFields");e.forEach((function(e){var s=Ember.get(e,"fieldName");Ember.set(t,s,!1),Ember.set(t,"".concat(s,"_defaultState"),!1)}))},getSerializedModel:function(){var e=Ember.get(this,"model").serialize(),t=Ember.get(this,"customCheckFields");return this.getSelectedData(e,t)},getSelectedData:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in e){var i=s?n:n.camelize();"object"==c(e[n])&&null!==e[n]?t[i]&&this.getSelectedData(e[n],t[i],!0):null!=e[n]&&t[i]||delete e[n]}return e},_submitCB:function(e){e.ticketCloseFailed?Ember.set(this,"showCloseValidationDialog",!0):this.onclose()},onsubmit:function(){}});e.default=d})),define("freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"Q4Mpc2pj",block:'{"symbols":["f","field","currentSection","sectionField"],"statements":[[7,"div"],[11,"class","modal-content show"],[11,"data-test-modal","bulk-update-modal"],[9],[0,"\\n  "],[7,"div"],[11,"class","modal-carousel_container"],[9],[0,"\\n    "],[7,"div"],[12,"class",[28,["modal-carousel_wrapper ",[27,"if",[[23,["displayInlineCannedResponse"]],"carousel-slider","carousel-default"],null]," "]]],[9],[0,"\\n      "],[7,"div"],[12,"class",[28,["modal-carousel__item carousel-default-view ",[27,"if",[[23,["displayInlineCannedResponse"]],"hide-visibility"],null]," "]]],[9],[0,"\\n        "],[7,"div"],[11,"class","modal-header"],[9],[0,"\\n          "],[7,"h4"],[11,"class","modal-title text--xlarge"],[11,"data-test-modal-title","bulkupdate"],[9],[1,[27,"svg-jar",["bulk-action"],[["class"],["modal-icons"]]],false],[0,"  "],[1,[27,"t",["tickets.bulkactions"],null],false],[10],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["bulkUpdateBannerMessage"]]],null,{"statements":[[4,"nucleus-inline-banner",null,[["class","type","isDismissible"],["mb-12","info",false]],{"statements":[[0,"            "],[1,[21,"bulkUpdateBannerMessage"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"        "],[7,"div"],[11,"class","bulk-update"],[9],[0,"\\n"],[4,"if",[[23,["isLoaded"]]],null,{"statements":[[4,"if",[[23,["showUpdateMessage"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","update-msg"],[9],[0,"\\n                "],[1,[27,"svg-jar",["unverified"],[["class"],["app-icon app-icon--medium change-email-icon"]]],false],[0,"\\n                "],[1,[27,"t",["tickets.bulkupdate.warningmessage"],[["selectedTickets","permissibleTicketsCount"],[[23,["selectedAssocTicketsCount"]],[23,["permissibleTicketsCount"]]]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"hasabilities",["reply_ticket"],null]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","input-checkbox-wrapper bulk-update-reply clearfix"],[11,"data-test-checkbox","form-fields"],[12,"data-test-checkbox-field",[28,["form-fields-",[23,["field","fieldName"]]]]],[9],[0,"\\n                "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                  "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass"],[[23,["editorEnabled"]],"bulkreply","bulkreply_cb","bulkaction-cb"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                  "],[7,"div"],[11,"class","input bulk-update-from clearfix"],[9],[0,"\\n                    "],[7,"div"],[11,"class","field__label bulk-update-from-label"],[9],[1,[27,"t",["fd.from"],null],false],[0,": "],[10],[0,"\\n                    "],[7,"div"],[11,"class","bulk-update-from-field"],[9],[0,"\\n                      "],[1,[27,"app-components/from-email",null,[["isEditor","fromOptions","selectedEmailConfig","onchange"],[true,[23,["globalEmailConfig"]],[23,["bulkActionFromEmail"]],[27,"action",[[22,0,[]],"onChangeFrom"],null]]]],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                  "],[7,"div"],[11,"class","input"],[9],[0,"\\n                    "],[7,"div"],[11,"class","field__label"],[9],[1,[27,"t",["tickets.bulk_reply"],null],false],[0,": "],[10],[0,"\\n                    "],[1,[27,"ui-form/editor/ticket-editor",null,[["value","externalAttachments","showCannedResponse","placeholder","customClass","enableInlineCannedResponse","onInsertAttachment","editorInput","contentChanged","skipFirstSendAction","cloudAttachments","insertBroadcast","broadcastedMessage","model","wrapDefaultFont","showFooter","fixedFormattingToolbar"],[[23,["editorBody"]],[23,["inlineAttachments"]],true,"Add your reply here","editor-edit-note",[27,"action",[[22,0,[]],"enableCannedResponse"],null],[27,"action",[[22,0,[]],"onInsertAttachment"],null],[23,["editorInput"]],[27,"action",[[22,0,[]],"contentChanged"],null],false,[23,["cloudAttachments"]],[23,["insertBroadcast"]],[23,["broadcastMessage"]],[23,["model"]],true,true,true]]],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showBroadcastedMessage"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/tickets-list/tickets-bulkactions/broadcast-message",null,[["broadcastMessage","createdAt","insertIntoReply"],[[23,["broadcastMessage","body"]],[23,["createdAt"]],[27,"action",[[22,0,[]],"insertIntoReply"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"ui-form/form-for",[[23,["model"]]],[["submit","defaultSubmitBtn"],[[27,"action",[[22,0,[]],"submit"],null],"form.update"]],{"statements":[[0,"\\n"],[4,"if",[[23,["showBulkUpdateProperties"]]],null,{"statements":[[4,"each",[[23,["formFields"]]],null,{"statements":[[0,"\\n\\n"],[4,"unless",[[22,2,["belongsToSection"]]],null,{"statements":[[4,"if",[[27,"eq",[[22,2,["fieldName"]],"groupId"],null]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","input-checkbox-wrapper"],[9],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                          "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","disabled"],[[23,["agentGroupEnabled"]],"agentgroup","agentgroup_cb","bulkaction-cb form-cb",[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                        "],[10],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                          "],[7,"div"],[11,"class","input"],[9],[0,"\\n"],[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[0,"                              "],[1,[27,"module-tickets/shared/assign-to-new",null,[["agentList","groupList","form","disabled","onSave"],[[23,["allAgents"]],[23,["allGroups"]],[22,1,[]],[23,["containsNonEditableTickets"]],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                              "],[1,[27,"app-components/assign-to",null,[["label","agentList","groupList","type","data-test-id","disabled","onSave"],[[27,"t",["ticket.assignto"],null],[23,["allAgents"]],[23,["allGroups"]],"text","assign-to",[23,["containsNonEditableTickets"]],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"                          "],[10],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[22,2,["fieldName"]],"internalGroupId"],null],[23,["hasFeatureSharedOwnership"]]],null]],null,{"statements":[[4,"if",[[27,"and",[[23,["internalGroups","length"]],[23,["isStatusChecked"]]],null]],null,{"statements":[[0,"                        "],[7,"div"],[11,"class","input-checkbox-wrapper"],[9],[0,"\\n                          "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                            "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","disabled"],[[23,["isInternalAgentGroupEnabled"]],"agentgroup","internalagentgroup_cb","bulkaction-cb form-cb",[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                          "],[10],[0,"\\n                          "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                            "],[7,"div"],[11,"class","input"],[9],[0,"\\n"],[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[0,"                                "],[1,[27,"module-tickets/shared/assign-to-new",null,[["data-test-id","agentList","groupList","allowNilGroup","form","fieldNames","disabled","onSave"],["internal-group-agent",[23,["internalAgents"]],[23,["internalGroups"]],false,[22,1,[]],[23,["internalGroupAgentFNames"]],[23,["containsNonEditableTickets"]],[27,"action",[[22,0,[]],"setInternalAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[1,[27,"app-components/assign-to",null,[["label","isInternalGroup","agentList","groupList","allowNilGroup","type","fieldNames","disabled","onSave"],[[27,"t",["ticket.assigntointernal"],null],true,[23,["internalAgents"]],[23,["internalGroups"]],false,"text",[23,["internalGroupAgentFNames"]],[23,["containsNonEditableTickets"]],[27,"action",[[22,0,[]],"setInternalAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"                            "],[10],[0,"\\n                          "],[10],[0,"\\n                        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[7,"div"],[11,"class","input-checkbox-wrapper wrapper-disabled"],[9],[0,"\\n                          "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                            "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","disabled"],[[23,["isInternalAgentGroupEnabled"]],"agentgroup","internalagentgroup_cb","bulkaction-cb form-cb","disabled"]]],false],[0,"\\n                          "],[10],[0,"\\n                          "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                            "],[7,"div"],[11,"class","input"],[9],[0,"\\n                              "],[1,[27,"ui-form/text-field",null,[["label","disabled","value"],[[27,"t",["ticket.fields.internal_group_name"],null],true,[27,"t",["tickets.nointernalgroup"],null]]]],false],[0,"\\n                            "],[10],[0,"\\n                          "],[10],[0,"\\n                        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[22,2,["fieldName"]],"priority"],null]],null,{"statements":[[0,"                      "],[7,"div"],[11,"class","input-checkbox-wrapper"],[11,"data-test-checkbox","form-fields"],[12,"data-test-checkbox-field",[28,["form-fields-",[22,2,["fieldName"]]]]],[9],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                          "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","onchange","field","disabled"],[[27,"get",[[23,["customCheckFields"]],[22,2,["fieldName"]]],null],[22,2,["label"]],[27,"concat",[[27,"if",[[22,2,["default"]],[22,2,["type"]],[22,2,["name"]]],null],"_checkbox"],null],"bulkaction-cb form-cb",[27,"action",[[22,0,[]],"changeCheckbox",[22,2,[]]],null],[22,2,[]],[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                        "],[10],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                          "],[7,"div"],[11,"class","input"],[9],[0,"\\n                            "],[7,"label"],[11,"class","ember-power-select-placeholder"],[9],[1,[27,"t",["fd.priority"],null],false],[10],[0,"\\n                            "],[1,[27,"module-tickets/shared/priority-dropdown",null,[["priority","defaultEmpty","saveAction","disabled","fromBulkAction"],[[23,["model","priority"]],true,[27,"action",[[22,0,[]],"setPriority"],null],[23,["containsNonEditableTickets"]],true]]],false],[0,"\\n\\n                          "],[10],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"or",[[27,"eq",[[22,2,["fieldName"]],"responderId"],null],[27,"eq",[[22,2,["fieldName"]],"internalAgentId"],null]],null]],null,{"statements":[],"parameters":[]},{"statements":[[0,"                      "],[7,"div"],[11,"class","input-checkbox-wrapper clearfix"],[11,"data-test-checkbox","form-fields"],[12,"data-test-checkbox-field",[28,["form-fields-",[22,2,["fieldName"]]]]],[9],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                          "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","onchange","field","disabled"],[[27,"get",[[23,["customCheckFields"]],[22,2,["fieldName"]]],null],[22,2,["label"]],[27,"concat",[[27,"if",[[22,2,["default"]],[22,2,["type"]],[22,2,["name"]]],null],"_checkbox"],null],"bulkaction-cb form-cb",[27,"action",[[22,0,[]],"changeCheckbox",[22,2,[]]],null],[22,2,[]],[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                        "],[10],[0,"\\n                        "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                          "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,2,[]]],[["form","model","isRequired","onchange","disabled"],[[22,1,[]],[23,["model"]],false,[27,"action",[[22,0,[]],"changeSelectBox",[22,2,["fieldName"]]],null],[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                        "],[10],[0,"\\n                      "],[10],[0,"\\n                    "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[22,2,["hasSections"]]],null,{"statements":[[4,"module-tickets/ticket-form/section-form",null,[["sectionField","ticket","assignTo","bulkAction"],[[22,2,[]],[23,["model"]],[23,["assignTo"]],true]],{"statements":[[4,"each",[[27,"filter-by",["showInBulkEdit",true,[22,3,["fields"]]],null]],null,{"statements":[[0,"                          "],[7,"div"],[11,"class","input-checkbox-wrapper"],[9],[0,"\\n                            "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                              "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","onchange","field","disabled"],[[27,"get",[[23,["customCheckFields"]],[22,4,["fieldName"]]],null],[22,2,["label"]],[27,"concat",[[22,4,["name"]],"_checkbox"],null],"bulkaction-cb form-cb",[27,"action",[[22,0,[]],"changeCheckbox",[22,4,[]]],null],[22,4,[]],[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                            "],[10],[0,"\\n                            "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                              "],[1,[27,"module-tickets/ticket-form/ticket-field",[[22,4,[]]],[["form","model","isRequired","onchange","disabled"],[[22,1,[]],[23,["model"]],false,[27,"action",[[22,0,[]],"changeSelectBox",[22,4,["fieldName"]]],null],[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                            "],[10],[0,"\\n                          "],[10],[0,"\\n"]],"parameters":[4]},null]],"parameters":[3]},null]],"parameters":[]},null],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null],[0,"\\n                "],[7,"div"],[11,"class","input-checkbox-wrapper"],[11,"data-test-checkbox","form-fields"],[11,"data-test-checkbox-field","form-fields-tags"],[9],[0,"\\n                  "],[7,"div"],[11,"class","bulk-update-checkbox"],[9],[0,"\\n                    "],[1,[27,"ui-form/custom-checkbox",null,[["value","valuePath","labelId","customClass","disabled"],[[23,["hasTags"]],"tags","tag_cb","bulkaction-cb",[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                  "],[10],[0,"\\n                  "],[7,"div"],[11,"class","bulk-update-field"],[9],[0,"\\n                    "],[7,"div"],[11,"class","input"],[9],[0,"\\n                      "],[7,"div"],[11,"class","field__label"],[9],[1,[27,"t",["contactfields.tags"],null],false],[0," "],[10],[0,"\\n                      "],[1,[27,"app-components/app-tags/create-tag",null,[["tags","saveTags","onAddFocus","disableTags"],[[23,["selectedtags"]],[27,"action",[[22,0,[]],"saveTags"],null],false,[23,["containsNonEditableTickets"]]]]],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n"],[4,"if",[[23,["showCloseWarning"]]],null,{"statements":[[0,"                  "],[7,"div"],[11,"class","parent_child_warning text-left"],[9],[0,"\\n                    "],[1,[27,"t",["tickets.ticket_associations.ticket_list.ticket_actions.bulk_close"],[["count"],[[23,["parentTicketsSelectedCount"]]]]],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                "],[7,"button"],[11,"name","button"],[11,"class","btn btn--secondary"],[11,"data-test-button","bulk-update-cancel"],[11,"type","button"],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n                  "],[1,[27,"t",["common.cancel"],null],false],[0,"\\n                "],[10],[0,"\\n"],[4,"if",[[23,["showFooterBulkUpdateButton"]]],null,{"statements":[[0,"                  "],[7,"div"],[11,"class","pull-right bulk-action-submit-container"],[9],[0,"\\n                    "],[1,[27,"component",[[22,1,["submit"]]],[["data-test-id"],["submit"]]],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"div"],[12,"class",[28,["modal-carousel__item ",[27,"if",[[23,["displayInlineCannedResponse"]],"show-canned","hide-canned-response"],null]," modal-carousel__item custom-cannedResponse"]]],[9],[0,"\\n        "],[1,[27,"app-components/canned-response",null,[["insertCannedResponse","inlineRender","toggleAction","initiatedFrom"],[[27,"action",[[22,0,[]],"insertCannedResponse"],null],true,[27,"action",[[22,0,[]],"enableCannedResponse"],null],"bulkActions"]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"],[4,"if",[[23,["showCloseValidationDialog"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/tickets-list/shared/close-validation",null,[["tickets","totalTickets","assignedProperties","isAssocticketsAction","onclose"],[[23,["selectedRecords"]],[23,["totalRecords"]],[23,["assignedProperties"]],[23,["ticketBulkAction","associatedTicketsAction"]],[23,["onclose"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-bulkactions/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-export/component",["exports","freshdesk/constants/export-fields","freshdesk/utils/camelcase-to-underscore","freshdesk/utils/custom-fields/filter-custom-fields"],(function(e,t,s,n){function i(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Ember.Component.extend({moment:Ember.inject.service(),store:Ember.inject.service(),i18n:Ember.inject.service(),ajax:Ember.inject.service(),currentUser:Ember.inject.service(),classNames:["__module-tickets__tickets-list__tickets-export"],ticketFieldsList:t.ticketFieldsList,timePeriodOptions:t.timePeriodOptions,ticketStatusOptions:t.ticketStatusOptions,defaultExportStatus:"created_at",defaultContactFields:t.defaultContactFields,otherContactFields:t.otherContactFields,otherCompanyFields:t.otherCompanyFields,defaultCompanyFields:t.defaultCompanyFields,uniqueExternalIdField:t.uniqueExternalIdField,twitterRequesterFields:t.twitterRequesterFields,otherPhoneNumbersField:t.otherPhoneNumbersField,format:"csv",selectedDateRange:null,radioOptions:t.radioOptions,hasFieldsLoaded:!1,hasTimesheetFeatureEnabled:Ember.computed.reads("currentAccount.hasTimesheetsFeatureEnabled"),isExportCustomer:Ember.computed((function(){return Ember.get(this,"currentUser").hasAbility("export_customers")})),accordionItems:Ember.computed((function(){var e=this,t=[this._setAccordionProperties("ticketFields")];if(Ember.get(this,"isExportCustomer")){["contactFields","companyFields"].forEach((function(s){t.push(e._setAccordionProperties(s))}))}return t})),isInvalidExport:Ember.computed("accordionItems.@each.count",(function(){return 0===Ember.get(this,"accordionItems.firstObject").count})),defaultTimeSpan:Ember.computed("createdFilterValue",(function(){var e=Ember.get(this,"createdFilterValue");return t.TimePeriodsMap[e]?t.TimePeriodsMap[e]:t.TimePeriodsMap.last_month})),dateFilter:Ember.computed("defaultTimeSpan",(function(){var e=Ember.get(this,"timePeriodOptions"),t=Ember.get(this,"defaultTimeSpan");return e.findBy("id",t).dateFilter})),labelForStatus:Ember.computed("defaultExportStatus",(function(){var e=Ember.get(this,"defaultExportStatus");return"".concat("tickets.filter.status.").concat(e)})),exportCache:Ember.computed((function(){var e=this.localcache.getFromCache("ticket_export_selection");return Ember.isEmpty(e)?{}:e})),allowedTicketFields:Ember.computed("ticketFieldsList",(function(){var e=this;return Ember.get(this,"ticketFieldsList").filter((function(t){if("object"===a(Ember.get(t,"feature"))){var s=!1,n=!0;return Ember.get(t,"feature").forEach((function(i){"OR"===t.operator?s|=Ember.get(e,"currentAccount").hasFeature(i):n&=Ember.get(e,"currentAccount").hasFeature(i)})),"OR"===t.operator?s:n}return(!Ember.get(e,"isArchiveExport")||"shared_ownership"!==Ember.get(t,"feature"))&&(!Ember.get(t,"feature")||Ember.get(e,"currentAccount").hasFeature(Ember.get(t,"feature")))}))})),allowedCompanyFields:Ember.computed("otherCompanyFields",(function(){var e=this;return Ember.get(this,"otherCompanyFields").filter((function(t){return!Ember.get(t,"feature")||Ember.get(e,"currentAccount").hasFeature(Ember.get(t,"feature"))}))})),ticketFields:Ember.computed((function(){var e=[],t=Ember.get(this,"store").peekAll("ticket-field"),s=(0,n.default)(t);e.pushObjects(Ember.get(this,"allowedTicketFields")),e.pushObjects(s),Ember.get(this,"hasTimesheetFeatureEnabled")||e.removeObject(e.findBy("name","time_tracked_hours"));var i=Ember.get(this,"exportCache");if(Object.keys(i).length)this.selectCachedItems(e,"ticketFields");else{this.selectItems(e,["display_id","subject","status_name"])}return e})),_contactFields:Ember.computed((function(){return Ember.get(this,"store").peekAll("contact-field")})),contactFields:Ember.computed("_contactFields",(function(){var e=Ember.get(this,"_contactFields"),t=[],s=(0,n.default)(e);t.pushObjects(Ember.get(this,"defaultContactFields")),this.currentUser.hasAbility("export_customers")&&(t.pushObjects(Ember.get(this,"otherContactFields")),t.pushObjects(s)),Ember.get(this,"currentAccount").hasFeature("unique_contact_identifier")&&t.pushObjects(Ember.get(this,"uniqueExternalIdField")),Ember.get(this,"currentAccount").hasFeature("basic_twitter")&&t.pushObjects(Ember.get(this,"twitterRequesterFields"));var i=Ember.get(this,"exportCache");if(Object.keys(i).length)this.selectCachedItems(t,"contactFields");else{this.selectItems(t,["contact_id","name"])}return this.currentAccount.launched("ucr_write")&&t.pushObjects(Ember.get(this,"otherPhoneNumbersField")),t})),_companyFields:Ember.computed((function(){return Ember.get(this,"store").peekAll("company-field")})),companyFields:Ember.computed((function(){var e=[],t=Ember.get(this,"_companyFields").filterBy("default",!1);return e.pushObjects(Ember.get(this,"defaultCompanyFields")),this.currentUser.hasAbility("export_customers")&&(e.pushObjects(Ember.get(this,"allowedCompanyFields")),e.pushObjects(t)),this.selectCachedItems(e,"companyFields"),e})),init:function(){this._super.apply(this,arguments),this.sendAction("modalLoaded"),Ember.RSVP.all([Ember.get(this,"store").findAll("contact-field"),Ember.get(this,"store").findAll("company-field")]).then(this._preLoadCallback.bind(this))},actions:{onChangeStatus:function(e,t){Ember.set(this,"defaultExportStatus",t.id),e.actions.close()},onDateChange:function(e){Ember.set(this,"selectedDateRange",e)},exportFormat:function(e){Ember.set(this,"format",e)},archiveExport:function(){var e=this,t=Ember.get(this,"data.query")||[],n=Ember.get(this,"data.exportName"),i=Ember.get(this,"format"),a=this.getFieldsInFormat("ticketFields"),r=this.getFieldsInFormat("contactFields"),l=this.getFieldsInFormat("companyFields");if(Ember.isEmpty(Object.keys(a)))Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("tickets.export.validation.ticketField"));else{this.cacheSelectedFields(a,r,l),r=Ember.get(this,"isExportCustomer")?r:{},l=Ember.get(this,"isExportCustomer")?l:{};var o=(0,s.default)({query:t,exportName:n,format:i,ticketFields:a,contactFields:r,companyFields:l});Ember.get(this,"ajax").raw("/api/_/tickets/archived/export",{method:"post",data:o}).then((function(t){e._archiveExportCB(t)})).catch((function(t){var s=t.response,n=t.jqXHR,i=t.payload,a=n.statusCode().status;e._archiveExportRejectCB(a,s,i)}))}this.sendAction("close")},export:function(){var e=Ember.get(this,"format"),t=this.getSelectedDateRange(),n=Ember.get(this,"dateFilter"),i=Ember.get(this,"defaultExportStatus"),a=Ember.get(this,"data.ticketFilters")||[],r=Ember.get(this,"data.viewName"),l=t.startDate.locale("en").utc().format(),o=t.endDate.locale("en").utc().format(),c=this.getFieldsInFormat("ticketFields"),d=this.getFieldsInFormat("contactFields"),m=this.getFieldsInFormat("companyFields");if(Ember.isEmpty(Object.keys(c)))Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("tickets.export.validation.ticketField"));else{this.cacheSelectedFields(c,d,m);var u={format:e,dateFilter:n,ticketStateFilter:i,queryHash:a,startDate:l,endDate:o,ticketFields:c,contactFields:d=Ember.get(this,"isExportCustomer")?d:{},companyFields:m=Ember.get(this,"isExportCustomer")?m:{}};"monitored_by"==r&&(u.filterName="monitored_by");var p=(0,s.default)(u);Ember.get(this,"store").peekAll("ticket").objectAt(0).exportCsv(p).then(this._exportCB.bind(this),this._exportRejectCB.bind(this))}this.sendAction("close")}},_preLoadCallback:function(){this.isDestroyed||this.isDestroying||Ember.set(this,"hasFieldsLoaded",!0)},_exportCB:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("tickets.export.success")),this.close()},_exportRejectCB:function(e){e.errors.length>0&&Ember.get(this,"flashMessages").danger(e.errors[0].message)},_archiveExportCB:function(){Ember.get(this,"flashMessages").success(Ember.get(this,"i18n").t("tickets.export.success"))},_archiveExportRejectCB:function(e,t,s){switch(e){case 429:Ember.get(this,"flashMessages").danger(Ember.get(this,"i18n").t("fd.rate-limit.export_ticket_limit_reached"));break;default:s.errors.length>0&&Ember.get(this,"flashMessages").danger(s.errors[0].message)}},calculateCheckedCount:function(e){var t=Ember.get(this,e),s=0,n=!0;return t.forEach((function(e){Ember.get(e,"isChecked")?s++:n=!1,Ember.get(e,"nestedTicketFields")&&Ember.get(e,"nestedTicketFields").forEach((function(e){Ember.get(e,"isChecked")?s++:n=!1}))})),n?Ember.get(this,"i18n").t("tickets.export.count.selected.all"):s},selectItems:function(e,t){e.forEach((function(e){t.includes(Ember.get(e,"name"))&&Ember.set(e,"isChecked",!0)}))},selectCachedItems:function(e,t){var s=Ember.get(this,"exportCache"),n=t in s?this.getCachedField(s,t):[];e.forEach((function(e){"custom_paragraph"!==Ember.get(e,"type")&&Ember.set(e,"isChecked",n.includes(Ember.get(e,"name")));var t=Ember.get(e,"nestedTicketFields");t&&t.forEach((function(e){Ember.set(e,"isChecked",n.includes(Ember.get(e,"name")))}))}))},getCachedField:function(e,t){return e[t]},getFieldsInFormat:function(e){var t=this,s=Ember.get(this,e),n={custom_fields:{}};return s.forEach((function(e){var s=Ember.get(e,"default");Ember.get(e,"isChecked")&&(s?n[Ember.get(e,"name")]=Ember.get(t,"i18n").t(Ember.get(e,"label")):n.custom_fields[Ember.get(e,"name")]=Ember.get(e,"label"));var i=Ember.get(e,"nestedTicketFields");i&&i.forEach((function(e){Ember.get(e,"isChecked")&&(s?n[Ember.get(e,"name")]=Ember.get(e,"label"):n.custom_fields[Ember.get(e,"name")]=Ember.get(e,"label"))}))})),n},cacheSelectedFields:function(e,t,s){var n={};n.ticketFields=[].concat(i(Object.keys(e)),i(Object.keys(e.custom_fields))),n.contactFields=[].concat(i(Object.keys(t)),i(Object.keys(t.custom_fields))),n.companyFields=[].concat(i(Object.keys(s)),i(Object.keys(s.custom_fields))),this.localcache.addToCache("ticket_export_selection",n)},getCreatedDateRange:function(){var e=Ember.get(this,"createdDateRange");return e?{startDate:Ember.get(this,"moment").moment(e.start),endDate:Ember.get(this,"moment").moment(e.end)}:null},getSelectedDateRange:function(){return Ember.get(this,"selectedDateRange")||this.getCreatedDateRange()||{startDate:Ember.get(this,"moment").moment().startOf("day").subtract(30,"days"),endDate:Ember.get(this,"moment").moment().endOf("day")}},_setAccordionProperties:function(e){var t=Ember.get(this,e),s=e.toLowerCase();return{title:"tickets.export.".concat(s),content:t,additionalFields:t.filterBy("type","custom_paragraph"),encryptedFields:t.filterBy("type","encrypted_text"),count:this.calculateCheckedCount(e)}}});e.default=r})),define("freshdesk/components/module-tickets/tickets-list/tickets-export/export-fields/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({i18n:Ember.inject.service(),currentAccount:Ember.inject.service(),classNames:["__module-tickets__tickets-list__tickets-export__export-fields"],isExportSelectAll:!1,showAdditionalFields:!1,showEncryptedFields:Ember.computed.and("currentAccount.isEncryptionEnabled","encryptedFields"),otherFields:Ember.computed.union("additionalFields","encryptedFields"),primaryFields:Ember.computed.setDiff("exportFields","otherFields"),isTicketFields:Ember.computed((function(){return-1!==Ember.get(this,"title").indexOf("ticketfields")})),init:function(){this._super.apply(this,arguments),this.updateSelectAllCheckbox(Ember.get(this,"primaryFields"))},actions:{checkboxEvent:function(e){var t=Ember.get(e,"isChecked");this.updateCount(t);var s=this.getProperFields();this.updateSelectAllCheckbox(s)},exportSelectAllEvent:function(){var e=this.getProperFields(),t=Ember.get(this,"isExportSelectAll");this.updateCheckedStateForAll(e,t),this.updateCountForSelectAll(e,t)},additionalFieldsAction:function(){this.toggleProperty("showAdditionalFields");var e=this.getProperFields();this.removeCheckedState(Ember.get(this,"additionalFields")),this.updateCountForPrimaryFields(),this.updateSelectAllCheckbox(e)}},countPrimaryCheckedItems:function(){var e=0;return Ember.get(this,"primaryFields").forEach((function(t){Ember.get(t,"isChecked")&&e++,Ember.get(t,"nestedTicketFields")&&Ember.get(t,"nestedTicketFields").forEach((function(t){Ember.get(t,"isChecked")&&e++}))})),e},nestedFieldsCount:function(){var e=0;return Ember.get(this,"primaryFields").forEach((function(t){Ember.get(t,"nestedTicketFields")&&(e+=Ember.get(t,"nestedTicketFields").length)})),e},fullCount:function(){return Ember.get(this,"exportFields").length+this.nestedFieldsCount()},countAdditionalCheckedItems:function(){var e=0;return Ember.get(this,"additionalFields").forEach((function(t){t.isChecked&&e++})),e},getProperFields:function(){var e=Ember.get(this,"primaryFields").concat(Ember.get(this,"encryptedFields"));return Ember.get(this,"showAdditionalFields")?Ember.get(this,"exportFields"):e},updateCount:function(e){var t=Ember.get(this,"selectedFieldsCount"),s=t==Ember.get(this,"i18n").t("tickets.export.count.selected.all")?this.fullCount():t;e?parseInt(s)+1==this.fullCount()?Ember.set(this,"selectedFieldsCount",Ember.get(this,"i18n").t("tickets.export.count.selected.all")):Ember.set(this,"selectedFieldsCount",parseInt(s)+1):Ember.set(this,"selectedFieldsCount",parseInt(s)-1)},updateSelectAllCheckbox:function(e){var t=this;Ember.set(this,"isExportSelectAll",!0),e.forEach((function(e){Ember.get(e,"isChecked")||Ember.set(t,"isExportSelectAll",!1),Ember.get(e,"nestedTicketFields")&&Ember.get(e,"nestedTicketFields").forEach((function(e){Ember.get(e,"isChecked")||Ember.set(t,"isExportSelectAll",!1)}))}))},updateCountForSelectAll:function(e,t){if(t){var s=e.length+this.nestedFieldsCount();Ember.get(this,"exportFields")===e?Ember.set(this,"selectedFieldsCount",Ember.get(this,"i18n").t("tickets.export.count.selected.all")):Ember.set(this,"selectedFieldsCount",s)}else Ember.set(this,"selectedFieldsCount",0)},updateCheckedStateForAll:function(e,t){e.forEach((function(e){Ember.set(e,"isChecked",t),Ember.get(e,"nestedTicketFields")&&Ember.get(e,"nestedTicketFields").forEach((function(e){Ember.set(e,"isChecked",t)}))}))},removeCheckedState:function(e){e.forEach((function(e){Ember.set(e,"isChecked",!1)}))},updateCountForPrimaryFields:function(){var e=this.countPrimaryCheckedItems();Ember.set(this,"selectedFieldsCount",e)}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-export/export-fields/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"YMtCEcz5",block:'{"symbols":["item","item","nestedItem","index","item"],"statements":[[7,"div"],[11,"data-test-export-feilds-container",""],[12,"id",[21,"title"]],[11,"class","export-fields"],[9],[0,"\\n  "],[7,"div"],[11,"class","options-header text--xsmall"],[9],[0,"\\n    "],[7,"label"],[9],[0,"\\n      "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","value","valuePath","label","customClass","labelId","onchange"],["all-fields-checkbox",[23,["isExportSelectAll"]],"select-all",[27,"t",["tickets.export.select_all"],null],"export-select-all",[27,"concat",["select-all","-",[23,["title"]]],null],[27,"action",[[22,0,[]],"exportSelectAllEvent"],null]]]],false],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["isTicketFields"]]],null,{"statements":[[0,"      "],[7,"button"],[11,"class","select-description-fields"],[11,"data-test-id","include-description-fields"],[12,"onclick",[27,"action",[[22,0,[]],"additionalFieldsAction"],null]],[9],[0,"\\n"],[4,"if",[[23,["showAdditionalFields"]]],null,{"statements":[[0,"          "],[1,[27,"t",["tickets.export.description.exclude"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"t",["tickets.export.description.include"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n  "],[7,"div"],[11,"class","export-body"],[9],[0,"\\n"],[4,"if",[[23,["showAdditionalFields"]]],null,{"statements":[[4,"each",[[23,["additionalFields"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","export-body__item"],[9],[0,"\\n          "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","value","valuePath","label","customClass","labelId","onchange"],[[22,5,["name"]],[22,5,["isChecked"]],[22,5,["name"]],[27,"if",[[22,5,["default"]],[27,"t",[[22,5,["label"]]],null],[22,5,["label"]]],null],"export-checkbox",[27,"concat",[[22,5,["name"]],"-",[23,["title"]]],null],[27,"action",[[22,0,[]],"checkboxEvent",[22,5,[]]],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[5]},null],[0,"      "],[7,"br"],[9],[10],[0,"\\n      "],[7,"hr"],[11,"class","horizontal-divider"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[23,["primaryFields"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","export-body__item"],[11,"data-test-export-field-div",""],[9],[0,"\\n\\n        "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","value","valuePath","label","customClass","labelId","onchange"],[[22,2,["name"]],[22,2,["isChecked"]],[22,2,["name"]],[27,"if",[[22,2,["default"]],[27,"t",[[22,2,["label"]]],null],[22,2,["label"]]],null],"export-checkbox",[27,"concat",[[22,2,["name"]],"-",[23,["title"]]],null],[27,"action",[[22,0,[]],"checkboxEvent",[22,2,[]]],null]]]],false],[0,"\\n\\n"],[4,"if",[[22,2,["nestedTicketFields"]]],null,{"statements":[[4,"each",[[22,2,["nestedTicketFields"]]],null,{"statements":[[0,"            "],[7,"br"],[9],[10],[0,"\\n"],[4,"if",[[27,"eq",[[22,4,[]],0],null]],null,{"statements":[[0,"              "],[7,"p"],[11,"class","dotted-tree-first"],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"p"],[11,"class","dotted-tree-others"],[9],[10],[0,"\\n"]],"parameters":[]}],[0,"            "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","value","valuePath","label","customClass","labelId","onchange"],[[22,3,["name"]],[22,3,["isChecked"]],[22,3,["name"]],[27,"if",[[22,3,["default"]],[27,"t",[[22,3,["label"]]],null],[22,3,["label"]]],null],"export-checkbox nested-checkbox",[27,"concat",[[22,3,["name"]],"-nf-",[23,["title"]]],null],[27,"action",[[22,0,[]],"checkboxEvent",[22,3,[]]],null]]]],false],[0,"\\n"]],"parameters":[3,4]},null]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[2]},null],[4,"if",[[23,["showEncryptedFields"]]],null,{"statements":[[0,"      "],[7,"hr"],[11,"class","horizontal-divider"],[9],[10],[0,"\\n      "],[7,"div"],[11,"class","encrypted-title"],[9],[0,"\\n        "],[1,[27,"svg-jar",["encrypted"],[["aria-label","class"],[[27,"t",["fd.encrypted"],null],"app-icon vertical-align"]]],false],[0,"\\n        "],[7,"span"],[11,"class","vertical-align text--semibold"],[9],[0,"\\n          "],[1,[27,"t",["tickets.export.encryptedfields"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"],[4,"each",[[23,["encryptedFields"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","export-body__item"],[9],[0,"\\n          "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","value","valuePath","label","customClass","labelId","onchange"],[[22,1,["name"]],[22,1,["isChecked"]],[22,1,["name"]],[27,"if",[[22,1,["default"]],[27,"t",[[22,1,["label"]]],null],[22,1,["label"]]],null],"export-checkbox",[27,"concat",[[22,1,["name"]],"-",[23,["title"]]],null],[27,"action",[[22,0,[]],"checkboxEvent",[22,1,[]]],null]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[7,"div"],[11,"class","encrypted-info text--xsmall"],[9],[0,"\\n        "],[1,[27,"t",["tickets.export.sensitiveinfo"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-export/export-fields/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-export/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"vQW7AfNt",block:'{"symbols":["item","accordion","isExpanded","dropdown","option"],"statements":[[7,"div"],[11,"class","modal-header"],[9],[0,"\\n  "],[7,"h4"],[11,"class","modal-title text--xlarge text--semibold"],[9],[0,"\\n    "],[1,[27,"svg-jar",["export"],[["class"],["modal-icons app-icon--xlarge"]]],false],[0,"\\n"],[4,"if",[[23,["archivedExportTitle"]]],null,{"statements":[[0,"      "],[1,[27,"t",["tickets.archiveExport"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"t",["tickets.export"],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"],[4,"if",[[23,["hasFieldsLoaded"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","export-content"],[9],[0,"\\n    "],[7,"div"],[11,"class","filter-group"],[9],[0,"\\n      "],[7,"span"],[11,"class","muted text--small filter-group__as"],[9],[1,[27,"t",["tickets.export.as"],null],false],[0,":"],[10],[0,"\\n      "],[7,"div"],[11,"class","export-as-radioBtn"],[9],[0,"\\n        "],[1,[27,"ui-form/custom-radio-group",null,[["options","valuePath","customClass","onChange"],[[23,["radioOptions"]],"exportformat","radio-group",[27,"action",[[22,0,[]],"exportFormat"],null]]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"unless",[[23,["hideTicketFilterBy"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","filter-group"],[9],[0,"\\n        "],[7,"span"],[11,"class","muted text--small filter-group__by"],[9],[1,[27,"t",["tickets.export.filterby"],null],false],[0,": "],[10],[0,"\\n\\n        "],[7,"div"],[11,"class","dropdown-inline"],[11,"data-test-id","dropdown-status"],[9],[0,"\\n"],[4,"basic-dropdown",null,[["renderInPlace"],[true]],{"statements":[[4,"component",[[22,4,["trigger"]]],[["class"],["dd-trigger-status"]],{"statements":[[0,"              "],[1,[27,"truncate",[[27,"t",[[23,["labelForStatus"]]],null],15,true],null],false],[0,"\\n              "],[7,"span"],[12,"class",[27,"if",[[22,4,["isOpen"]],"open-state"],null]],[9],[0,"\\n                "],[1,[27,"svg-jar",["downarrow"],[["class"],["app-icon app-icon--verysmall down-arrow"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,4,["content"]]],[["class"],["dd-content-status"]],{"statements":[[0,"              "],[7,"div"],[11,"class","app-custom-dropdown"],[9],[0,"\\n"],[4,"each",[[23,["ticketStatusOptions"]]],null,{"statements":[[0,"                  "],[7,"div"],[12,"class",[28,["app-custom-dropdown__option ",[27,"if",[[27,"eq",[[23,["labelForStatus"]],[22,5,["label"]]],null],"selected"],null]]]],[12,"onclick",[27,"action",[[22,0,[]],"onChangeStatus",[22,4,[]],[22,5,[]]],null]],[9],[0,"\\n                    "],[1,[27,"t",[[22,5,["label"]]],null],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[5]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[4]},null],[0,"        "],[10],[0,"\\n        "],[7,"div"],[11,"class","seperator muted"],[9],[0," | "],[10],[0,"\\n        "],[7,"div"],[11,"class","dropdown-inline"],[11,"data-test-id","dropdown-time-range"],[9],[0,"\\n          "],[1,[27,"ui-components/date-dropdown",null,[["selectedId","optionsList","selectedDateRange","onDateChange"],[[23,["defaultTimeSpan"]],[23,["timePeriodOptions"]],[23,["createdDateRange"]],[27,"action",[[22,0,[]],"onDateChange"],null]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"ui-components/basic-accordion",null,[["items","openMultiple"],[[23,["accordionItems"]],true]],{"statements":[[4,"component",[[22,2,["trigger"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"data-test-export-feilds-title",""],[11,"class","accordion-heading"],[9],[0,"\\n          "],[7,"div"],[11,"class","accordion-title"],[9],[0,"\\n            "],[7,"div"],[11,"class","title-block"],[9],[0,"\\n              "],[7,"span"],[11,"class","text--semibold"],[9],[0,"\\n                "],[1,[27,"t",[[22,1,["title"]]],null],false],[0,"\\n              "],[10],[0,"\\n"],[4,"if",[[27,"and",[[27,"eq",[[22,1,["count"]],0],null],[27,"eq",[[22,1,["title"]],"tickets.export.ticketfields"],null]],null]],null,{"statements":[[0,"                "],[7,"span"],[11,"class","required-field"],[9],[0,"*"],[10],[0,"\\n                "],[7,"div"],[11,"class","text__infotext"],[9],[0,"\\n                  "],[1,[27,"t",["tickets.export.validation.ticketField"],null],false],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n            "],[7,"div"],[12,"class",[28,["fields-selected text__infotext ",[27,"if",[[27,"and",[[27,"eq",[[22,1,["count"]],0],null],[27,"eq",[[22,1,["title"]],"tickets.export.ticketfields"],null]],null],"required-fields-count"],null]]]],[9],[0,"\\n              "],[7,"span"],[11,"data-test-id","field-count"],[11,"class","text--xsmall muted"],[9],[0,"\\n                "],[1,[27,"t",["tickets.export.count.selected"],[["count"],[[22,1,["count"]]]]],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"span"],[12,"class",[28,["arrow-icon ",[27,"if",[[22,3,[]],"expand-item"],null]]]],[9],[0,"\\n                "],[1,[27,"svg-jar",["rightbullet"],[["class"],["app-icon app-icon--verysmall accordion-right-bullet"]]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[3]},null],[4,"component",[[22,2,["content"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/tickets-list/tickets-export/export-fields",null,[["title","exportFields","additionalFields","encryptedFields","selectedFieldsCount"],[[22,1,["title"]],[22,1,["content"]],[22,1,["additionalFields"]],[22,1,["encryptedFields"]],[22,1,["count"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"    \\n    "],[7,"div"],[11,"class","modal-footer form_submission"],[9],[0,"\\n      "],[7,"button"],[11,"data-test-id","export-cancel"],[11,"name","button"],[12,"onclick",[27,"action",[[22,0,[]],[23,["close"]]],null]],[11,"class","btn btn--secondary"],[11,"type","button"],[9],[0,"\\n        "],[1,[27,"t",["filter.cancel"],null],false],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[23,["archiveExportAction"]]],null,{"statements":[[0,"        "],[7,"button"],[11,"data-test-id","export"],[12,"onclick",[27,"action",[[22,0,[]],"archiveExport"],null]],[11,"class","btn btn--primary"],[12,"disabled",[21,"isInvalidExport"]],[11,"type","button"],[9],[0,"\\n          "],[1,[27,"t",["fd.export"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"button"],[11,"data-test-id","export"],[12,"onclick",[27,"action",[[22,0,[]],"export"],null]],[11,"class","btn btn--primary"],[12,"disabled",[21,"isInvalidExport"]],[11,"type","button"],[9],[0,"\\n          "],[1,[27,"t",["fd.export"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[21,"ui-components/module-loading"],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-export/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/autorefresh/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({tagName:""});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/autorefresh/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"++BmDb1I",block:'{"symbols":[],"statements":[[4,"if",[[23,["row","needsRefresh"]]],null,{"statements":[[0,"  "],[1,[27,"svg-jar",["autorefresh"],[["class"],["app-icon--small app-icon--grey list-auto-refresh-icon"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/autorefresh/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/cell-renderer/component",["exports","freshdesk/mixins/tickets/ticket-update","freshdesk/constants/ticket"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{ticketFields:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),classNames:["hcell-template","__module-tickets__tickets-list__tickets-table__cell-renderer"],attributeBindings:["data-test-id"],validateAgent:!1,isProduct:Ember.computed.equal("column.valuePath","product"),isSource:Ember.computed.equal("column.valuePath","source"),isSkill:Ember.computed.equal("column.valuePath","skill"),isRequester:Ember.computed.equal("column.valuePath","customer"),isSubject:Ember.computed.equal("column.valuePath","subject"),isAssignTo:Ember.computed.equal("column.fieldtype","assignto"),isStatus:Ember.computed.equal("column.valuePath","statusTranslatedLabel"),isInternalAssignTo:Ember.computed.equal("column.fieldtype","internalAssignTo"),isPriority:Ember.computed.equal("column.valuePath","priority"),isRequesterRespondedAt:Ember.computed.equal("column.valuePath","stats.requesterRespondedAt"),isFrDueBy:Ember.computed.equal("column.valuePath","frDueBy"),showFrDueBy:Ember.computed.and("isFrDueBy","ticket.frDueBy"),isNrDueBy:Ember.computed.equal("column.valuePath","nrDueBy"),showNrDueBy:Ember.computed.and("isNrDueBy","ticket.nrDueBy"),isDueBy:Ember.computed.equal("column.valuePath","dueBy"),showDueBy:Ember.computed.and("isDueBy","ticket.dueBy"),isTag:Ember.computed.equal("column.valuePath","tags"),ticket:Ember.computed.reads("row.content"),format:Ember.computed.reads("currentAccount.timeFormat.dateTime"),now:moment().valueOf(),firstResponseOverdue:Ember.computed.reads("ticket.frEscalated"),nextResponseOverdue:Ember.computed.reads("ticket.nrEscalated"),dueByOverdue:Ember.computed.reads("ticket.isEscalated"),"data-test-id":Ember.computed("column.valuePath",(function(){return"".concat(Ember.get(this,"column.valuePath"),"_test_label")})),showWaitingSince:Ember.computed("ticket.stats",(function(){return moment(Ember.get(this,"ticket.stats.requesterRespondedAt")).isAfter(Ember.get(this,"ticket.stats.agentRespondedAt"))})),ticketTypeLabel:Ember.computed("column.valuePath",(function(){var e,t=Ember.get(this,"column.name"),s=(Ember.get(this,"ticketFields.translatedChoiceMap")[t]||{}).choices,n=Ember.get(this,"value");return Ember.isPresent(s)&&Ember.isPresent(s[n])&&(e=s[n].label),e||n})),productColumn:Ember.computed((function(){var e=Ember.get(this,"ticket.productId");return Ember.get(this,"ticketFields.productChoices").findBy("id",e)})),hasFeatureSplitAssignTo:Ember.computed((function(){return Ember.get(this,"currentAccount").launched("group_agent_split")})),agentErrorMessage:Ember.computed((function(){var e=Ember.get(this,"i18n");return e.t("fd.validation.agentblank.notallowed",{fieldName:e.t("ticket.fields.responder_name")})})),skillColumn:Ember.computed("ticket.skillId",(function(){var e=Ember.get(this,"ticket.skillId");return Ember.get(this,"ticketFields.skills.choices")&&Ember.get(this,"ticketFields.skills.choices").findBy("id",e)})),internalGroupSelected:Ember.computed("ticket.{status,internalGroupId}","ticketFields.internalGroups",(function(){var e=Ember.get(this,"ticket.internalGroupId");return Ember.get(this,"ticketFields.internalGroups")&&Ember.get(this,"ticketFields.internalGroups").findBy("value",e)})),internalAgentSelected:Ember.computed("ticket.internalAgentId","ticketFields.internalAgents",(function(){var e=Ember.get(this,"ticket.internalAgentId");return Ember.get(this,"ticketFields.internalAgents")&&Ember.get(this,"ticketFields.internalAgents").findBy("value",e)})),propEditAllowed:Ember.computed("extra.isPropEditDisabled","currentUser.abilities","row.{hasPermission,isActionable}",(function(){var e={model:Ember.get(this,"row")};e.abilities=Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type"));var t=Ember.get(this,"currentUser").hasPermissions(e);return!Ember.get(this,"extra.isPropEditDisabled")&&t&&Ember.get(this,"row.isActionable")})),isTicketOpen:Ember.computed("ticket.status",(function(){return Ember.get(this,"ticket.status")===s.default.status.open})),isSlaOn:Ember.computed.not("ticket.statusChoice.stop_sla_timer")});e.default=n})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/cell-renderer/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"TZg7676T",block:'{"symbols":["status"],"statements":[[4,"if",[[23,["isRequester"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","avatar-info-cell"],[9],[0,"\\n    "],[7,"div"],[11,"class","avatar-image"],[9],[0,"\\n      "],[1,[27,"app-components/avatar-user",null,[["user"],[[23,["row","requester"]]]]],false],[0,"\\n    "],[10],[0,"\\n    "],[1,[27,"app-components/contact-popover",null,[["user","class","data-test-id"],[[23,["row","requester"]],"avatar-text text__content","table-view-contact"]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isSubject"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/tickets-list/tickets-table/ticket-subject-popover",null,[["ticket","class"],[[23,["row","content"]],"pr-12"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isInternalAssignTo"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","group-agent"],[9],[0,"\\n"],[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/assign-to-new/trigger-cell-renderer",null,[["groupName","agentName","isEditable"],[[23,["internalGroupSelected","label"]],[23,["internalAgentSelected","label"]],[23,["propEditAllowed"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"data-test-assignto-trigger",""],[11,"class","assign-to-label"],[9],[0,"\\n        "],[7,"div"],[11,"class","assign-to-label-text"],[9],[0,"\\n          "],[1,[27,"ellipsis-text",[[27,"fill-default",[[23,["internalGroupSelected","label"]],"--"],null]],null],false],[0," /\\n          "],[1,[27,"ellipsis-text",[[27,"fill-default",[[23,["internalAgentSelected","label"]],"--"],null]],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isAssignTo"]]],null,{"statements":[[4,"ui-components/hover-lazy-loader",null,[["class","data-test-id","enableComponentRender"],["group-agent","assign-to-hover",[23,["propEditAllowed"]]]],{"statements":[[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/assign-to-new",null,[["agentList","groupList","agentRequired","groupRequired","groupValue","agentValue","disabled","onSave"],[[23,["allAgents"]],[23,["allGroups"]],[23,["agentRequired"]],[23,["groupRequired"]],[23,["groupValue"]],[23,["agentValue"]],[27,"not",[[23,["propEditAllowed"]]],null],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"],[4,"if",[[23,["validateAgent"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","validationMessage"],[9],[0,"\\n          "],[1,[27,"svg-jar",["info-outline"],[["class"],["app-icon app-icon--normal"]]],false],[0,"\\n          "],[7,"span"],[11,"class","help-block pl-4"],[9],[1,[21,"agentErrorMessage"],false],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"app-components/assign-to",null,[["agentRequired","groupRequired","groupValue","agentValue","agentList","groupList","hideLabel","disabled","onSave"],[[23,["agentRequired"]],[23,["groupRequired"]],[23,["groupValue"]],[23,["agentValue"]],[23,["allAgents"]],[23,["allGroups"]],[27,"not",[[23,["propEditAllowed"]]],null],[27,"not",[[23,["propEditAllowed"]]],null],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["hasFeatureSplitAssignTo"]]],null,{"statements":[[0,"      "],[1,[27,"module-tickets/shared/assign-to-new",null,[["agentList","groupList","groupValue","agentValue","disabled","hideLabel","disabledClasses"],[[23,["allAgents"]],[23,["allGroups"]],[23,["groupValue"]],[23,["agentValue"]],[27,"not",[[23,["propEditAllowed"]]],null],[27,"not",[[23,["propEditAllowed"]]],null],"assign-to-select pt-6 pl-10 pr-10"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"data-test-assignto-trigger",""],[11,"class","assign-to-label"],[9],[0,"\\n        "],[7,"div"],[11,"class","assign-to-label-text"],[9],[0,"\\n          "],[1,[27,"ellipsis-text",[[27,"fill-default",[[23,["ticket","group","name"]],"--"],null]],null],false],[0," /\\n          "],[1,[27,"ellipsis-text",[[27,"fill-default",[[23,["ticket","responder","contact","name"]],"--"],null]],null],false],[0,"\\n        "],[10],[0,"\\n"],[4,"if",[[23,["propEditAllowed"]]],null,{"statements":[[0,"          "],[7,"span"],[11,"class","ember-power-select-status-icon"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isStatus"]]],null,{"statements":[[4,"ui-components/hover-lazy-loader",null,[["class","data-test-id","enableComponentRender"],["status-select","status-hover",[23,["propEditAllowed"]]]],{"statements":[[0,"    "],[7,"div"],[12,"aria-label",[27,"t",["tickets.status"],null]],[11,"class","ticket-list-dropselect dropdown-status hint hint--left"],[11,"data-test-id","dropdown-status"],[12,"data-test-div",[28,["dropdown-status-",[23,["ticket","id"]]]]],[9],[0,"\\n"],[4,"power-select",null,[["selected","options","searchField","searchEnabled","onchange"],[[23,["ticket","statusChoice"]],[23,["ticketFields","statusChoices"]],"translatedLabel",[23,["showSearchInStatus"]],[27,"action",[[22,0,[]],"chooseStatus"],null]]],{"statements":[[0,"        "],[1,[22,1,["translatedLabel"]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","pull-left list-filter__label"],[12,"aria-label",[27,"t",["tickets.status"],null]],[9],[0,"\\n      "],[1,[23,["ticket","statusTranslatedLabel"]],false],[0,"\\n"],[4,"if",[[23,["propEditAllowed"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","ember-power-select-status-icon"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isSkill"]]],null,{"statements":[[4,"if",[[23,["skillColumn","label"]]],null,{"statements":[[0,"    "],[1,[23,["skillColumn","label"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isPriority"]]],null,{"statements":[[4,"ui-components/hover-lazy-loader",null,[["class","data-test-id","enableComponentRender"],["priority","priority-hover",[23,["propEditAllowed"]]]],{"statements":[[0,"    "],[1,[27,"module-tickets/shared/priority-dropdown",null,[["priority","ticket","saveAction","updatePromise","additionalClasses","isPropEditDisabled"],[[23,["ticket","priority"]],[23,["ticket"]],[27,"action",[[22,0,[]],"choosePriority"],null],[23,["priorityPromise"]],"ticket-list-dropselect",false]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"module-tickets/shared/priority-dropdown",null,[["priority","ticket","isPropEditDisabled"],[[23,["ticket","priority"]],[23,["ticket"]],true]]],false],[0,"\\n"],[4,"if",[[23,["propEditAllowed"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","ember-power-select-status-icon priority-icon"],[9],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["showFrDueBy"]]],null,{"statements":[[4,"if",[[27,"not",[[23,["ticket","stats","firstRespondedAt"]]],null]],null,{"statements":[[0,"    "],[7,"span"],[12,"class",[27,"if",[[23,["firstResponseOverdue"]],"text--red","text--muted"],null]],[9],[0,"\\n      "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["ticket","frDueBy"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["showNrDueBy"]]],null,{"statements":[[4,"if",[[23,["isSlaOn"]]],null,{"statements":[[0,"    "],[7,"span"],[12,"class",[27,"if",[[23,["nextResponseOverdue"]],"text--red","text--muted"],null]],[9],[0,"\\n      "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["ticket","nrDueBy"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["showDueBy"]]],null,{"statements":[[4,"if",[[23,["isSlaOn"]]],null,{"statements":[[0,"    "],[7,"span"],[12,"class",[27,"if",[[23,["dueByOverdue"]],"text--red","text--muted"],null]],[9],[0,"\\n      "],[1,[27,"ui-components/time-ago",null,[["dateTime"],[[23,["ticket","dueBy"]]]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isRequesterRespondedAt"]]],null,{"statements":[[4,"if",[[27,"and",[[23,["ticket","stats","requesterRespondedAt"]],[23,["showWaitingSince"]]],null]],null,{"statements":[[0,"    "],[1,[27,"moment-from-now",[[23,["ticket","stats","requesterRespondedAt"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isTag"]]],null,{"statements":[[4,"if",[[23,["ticket","tags"]]],null,{"statements":[[0,"    "],[1,[27,"ui-components/list-with-show-more",null,[["data"],[[23,["ticket","tags"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isProduct"]]],null,{"statements":[[4,"if",[[27,"and",[[23,["ticket","productId"]],[23,["productColumn","name"]]],null]],null,{"statements":[[0,"    "],[1,[23,["productColumn","name"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[27,"eq",[[23,["column","fieldtype"]],"custom_date"],null]],null,{"statements":[[0,"  "],[1,[27,"moment-format",[[23,["value"]],[23,["format"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["column","valuePath"]],"type"],null],[23,["ticketTypeLabel"]]],null]],null,{"statements":[[0,"  "],[1,[21,"ticketTypeLabel"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isSource"]]],null,{"statements":[[0,"  "],[1,[27,"svg-jar",[[23,["ticket","sourceIcon"]]],[["data-test-icon","class"],[[23,["ticket","sourceIcon"]],"app-icon app-icon--small app-icon--topalign"]]],false],[7,"span"],[11,"class","ml-4"],[9],[1,[23,["ticket","sourceChoice","label"]],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["value"]]],null,{"statements":[[0,"  "],[1,[21,"value"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[23,["showValidationDialog"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","size","closeOnEscapse"],[[27,"toggle-action",["showValidationDialog",[22,0,[]]],null],true,"medium",true]],{"statements":[[0,"    "],[1,[27,"module-tickets/tickets-list/shared/close-validation",null,[["tickets","assignedProperties","onclose"],[[23,["selectedRecord"]],[23,["assignedProperties"]],[27,"toggle-action",["showValidationDialog",[22,0,[]]],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/cell-renderer/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-add/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__tickets-list__tickets-table__columns-chooser__column-add"]});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-add/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"9BbWiT14",block:'{"symbols":["col"],"statements":[[4,"each",[[23,["columnsSearchList"]]],null,{"statements":[[0,"  "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser/column-item",null,[["col","addColumns","isAdd"],[[22,1,[]],[23,["addColumns"]],true]]],false],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-add/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-item/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["column-item","__module-tickets__tickets-list__tickets-table__columns-chooser__column-item"],isAdd:!1,actions:{removeColumn:function(e){var t=this.removeColumn;t&&t(e)},addColumns:function(e){var t=this.addColumns;t&&t(e)}}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"au+eyNqV",block:'{"symbols":[],"statements":[[4,"if",[[23,["isAdd"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","col col-add"],[12,"onclick",[27,"action",[[22,0,[]],"addColumns",[23,["col"]]],null]],[9],[0,"\\n    "],[7,"span"],[11,"class","col-add"],[12,"data-test-id",[23,["col","label"]]],[9],[1,[27,"svg-jar",["add"],[["class"],["app-icon app-icon--dark back app-icon--small"]]],false],[10],[0,"\\n    "],[7,"span"],[11,"class","col-label"],[9],[1,[23,["col","label"]],false],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","col"],[9],[0,"\\n    "],[7,"span"],[11,"class","col-remove"],[12,"data-test-id",[23,["col","label"]]],[12,"onclick",[27,"action",[[22,0,[]],"removeColumn",[23,["col"]]],null]],[9],[0,"\\n      "],[1,[27,"svg-jar",["remove"],[["class"],["app-icon app-icon--dark back app-icon--small"]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"span"],[11,"class","col-label"],[9],[1,[23,["col","label"]],false],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"span"],[11,"class","drag-thumb"],[9],[1,[27,"svg-jar",["rearrange"],[["class"],["app-icon app-icon--lightgray app-icon--small"]]],false],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-rearrange/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["columns-dynamic"],actions:{reorderItems:function(e){var t=this.sortEndAction;t&&t(e)}}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-rearrange/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"SamSgjE3",block:'{"symbols":["group","col"],"statements":[[7,"div"],[11,"class","sidebar__title dynamic-title text--semibold"],[9],[1,[27,"t",["fd.columns.included"],null],false],[10],[0,"\\n"],[4,"sortable-group",null,[["tagName","onChange"],["div","reorderItems"]],{"statements":[[4,"each",[[23,["dynamicCol"]]],null,{"statements":[[4,"sortable-item",null,[["tagName","model","group","handle","spacing"],["div",[22,2,[]],[22,1,[]],".column-item",1]],{"statements":[[0,"      "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser/column-item",null,[["col","removeColumn"],[[22,2,[]],[23,["removeColumn"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/column-rearrange/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({currentAccount:Ember.inject.service(),classNames:["__module-tickets__tickets-list__tickets-table__columns-chooser"],disableApply:!0,attributeBindings:["dataTestId:data-test-id"],dataTestId:"tickets-list-table-column-chooser",staticCol:Ember.computed.filter("staticColumns",(function(e){return!Ember.isEmpty(e.label)})),columnsSearchList:Ember.computed("allColumns","dynamicCol.[]",(function(){var e=Ember.get(this,"allColumns"),t=Ember.get(this,"dynamicCol"),s=Ember.get(this,"staticCol"),n=[].concat(t,s);return e.filter((function(e){return!(!e.nestedList&&!e.valuePath)&&!n.find((function(t){return e.nestedList?!!t.nestedList&&e.nestedList.join("/")===t.nestedList.join("/"):!Ember.isEmpty(e.valuePath)&&e.valuePath===t.valuePath}))}))})),hasCustomizeTableView:Ember.computed((function(){return Ember.get(this,"currentAccount").hasFeature("customizeTableView")})),actions:{cancel:function(e){e.actions.close()},sortEndAction:function(e){Ember.set(this,"dynamicCol",e),this.makeDirty()},apply:function(e){var t=Ember.get(this,"apply");e.actions.close(),t&&t(Ember.get(this,"dynamicCol"))},removeColumn:function(e){Ember.get(this,"dynamicCol").removeObject(e),this.makeDirty()},onOpen:function(e){Ember.setProperties(this,{dynamicCol:[].concat(Ember.get(this,"dynamicColumns")),disableApply:!0,dropdown:e})},onColumnsAdd:function(e){Ember.get(this,"dynamicCol").addObject(e),this.makeDirty()}},makeDirty:function(){Ember.set(this,"disableApply",!1)}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/search/component",["exports"],(function(e){function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var s=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(o){i=!0,a=o}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({classNames:["search-new"],didInsertElement:function(){this._super.apply(this,arguments),this.focusInput()},actions:{chooseOption:function(e){var s=this.addColumns,n=t(e,1)[0];s&&s(n),this.focusInput()}},focusInput:function(){t(this.$(".ember-power-select-trigger-multiple-input"),1)[0].focus()}});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/search/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"/VC2eL9M",block:'{"symbols":["column"],"statements":[[4,"power-select-multiple",null,[["options","renderInPlace","verticalPosition","placeholder","searchEnabled","triggerClass","noMatchesMessage","searchField","onchange"],[[23,["columnsSearchList"]],true,"below",[27,"t",["fd.addcolumns"],null],true,"search-trigger",[27,"t",["fd.nocolumns"],null],"label",[27,"action",[[22,0,[]],"chooseOption"],null]]],{"statements":[[0,"  "],[1,[22,1,["label"]],false],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/search/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"207UKtr5",block:'{"symbols":["dropdown","col"],"statements":[[4,"if",[[23,["hasCustomizeTableView"]]],null,{"statements":[[4,"basic-dropdown",null,[["class","onOpen","horizontalPosition","renderInPlace"],["columns_chooser app-dropdown-group pull-left",[27,"action",[[22,0,[]],"onOpen",[23,["dropdown"]]],null],"auto",true]],{"statements":[[4,"component",[[22,1,["trigger"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"data-test-id","trigger"],[12,"aria-label",[27,"t",["fd.editcolumns"],null]],[11,"class","hint--left"],[9],[0,"\\n        "],[7,"div"],[11,"class","trigger"],[9],[0,"\\n          "],[7,"div"],[11,"class","add-icon"],[9],[0,"\\n            "],[1,[27,"svg-jar",["edit-new"],[["class"],["app-icon app-icon--dark back app-icon--small"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"      "],[7,"div"],[11,"class","content"],[9],[0,"\\n        "],[7,"div"],[11,"class","columns"],[9],[0,"\\n          "],[7,"div"],[11,"class","sidebar__title columns-title text--semibold"],[9],[1,[27,"t",["fd.columns.default"],null],false],[10],[0,"\\n          "],[7,"div"],[11,"class","columns-static"],[11,"data-test-id","columns-static"],[9],[0,"\\n"],[4,"each",[[23,["staticCol"]]],null,{"statements":[[0,"              "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser/column-item",null,[["col"],[[22,2,[]]]]],false],[0,"\\n"]],"parameters":[2]},null],[0,"          "],[10],[0,"\\n          "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser/column-rearrange",null,[["sortEndAction","dynamicCol","removeColumn"],[[27,"action",[[22,0,[]],"sortEndAction"],null],[23,["dynamicCol"]],[27,"action",[[22,0,[]],"removeColumn"],null]]]],false],[0,"\\n"],[4,"if",[[27,"gt",[[23,["columnsSearchList","length"]],0],null]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","columns-add"],[11,"data-test-id","columns-add"],[9],[0,"\\n              "],[7,"div"],[11,"class","sidebar__title columns-title text--semibold"],[9],[1,[27,"t",["fd.columns.excluded"],null],false],[10],[0,"\\n              "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser/column-add",null,[["columnsSearchList","addColumns"],[[23,["columnsSearchList"]],[27,"action",[[22,0,[]],"onColumnsAdd"],null]]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n        "],[7,"div"],[11,"class","footer"],[9],[0,"\\n          "],[7,"div"],[11,"class","buttons pull-right"],[9],[0,"\\n            "],[7,"button"],[11,"name","button"],[12,"onclick",[27,"action",[[22,0,[]],"cancel",[22,1,[]]],null]],[11,"class","btn btn--secondary"],[11,"type","button"],[9],[0,"\\n              "],[1,[27,"t",["form.cancel"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"button"],[11,"name","button"],[12,"onclick",[27,"action",[[22,0,[]],"apply",[22,1,[]]],null]],[12,"disabled",[21,"disableApply"]],[11,"class","btn btn--primary"],[11,"type","button"],[9],[0,"\\n              "],[1,[27,"t",["fd.apply"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/columns-chooser/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/component",["exports","freshdesk/mixins/shortcuts/ticket-list/ticket-table","freshdesk/constants/ticket"],(function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ember.Component.extend(t.default,{classNames:["fresh-table","__module-tickets__tickets-list__tickets-table"],classNameBindings:["isLoading:list-loading","isTableView:ticket-list-table-view"],currentUser:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),i18n:Ember.inject.service(),listRows:Ember.computed.reads("ticketTable.rows"),upperBound:Ember.computed.reads("listRows.length"),showBannerMessage:Ember.computed("bulkActionInfoBannerMsg","isChecked",(function(){return this.bulkActionInfoBannerMsg&&this.isChecked&&this.currentUserPrivileges.hasCollaboratorPrivileges})),bulkActionInfoBannerMsg:Ember.computed("currentUser.userData.abilities.[]",(function(){var e=this,t=[];return s.BULK_ACTION_BANNER_PRIVILEGES.forEach((function(s){s.conditions.every((function(t){var s=!0;return t.privilege&&e.currentUser.hasAbility(t.privilege)||t.context&&Ember.get(e,t.context)||(s=!1),s}))&&t.push(e.i18n.t(s.transKey))})),t.length&&t.length<s.BULK_ACTION_BANNER_PRIVILEGES.length?this.i18n.t("tickets.bulk_action.banner.label",{availablePrivileges:t.join(", ")}):null})),extra:Ember.computed("isBulkOperationPending","currentIndex","currentFilterId","getLookupRecords",(function(){var e="ongoing_collab"===Ember.get(this,"currentFilterId");return{isRowLoading:Ember.get(this,"isBulkOperationPending"),currentRow:Ember.get(this,"currentRow"),removeCheckBox:e,isPropEditDisabled:e,getLookupRecords:this.getLookupRecords}})),showPagination:Ember.computed("count","perPage",(function(){var e=Ember.getProperties(this,"count","perPage");return e.count>e.perPage})),currentIndex:Ember.computed("listRows",{get:function(){return 0},set:function(e,t){var s=Ember.get(this,"upperBound")-1;return Math.min(s,Math.max(0,t))}}),currentRow:Ember.computed("currentIndex",(function(){var e=Ember.get(this,"currentIndex");return Ember.get(this,"listRows").objectAt(e)})),selectRow:function(e){e.toggleProperty("selected")},executeRow:function(){}});e.default=n})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/custom-field/component",["exports","freshdesk/mixins/custom-file-field-actions"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend(t.default,{currentAccount:Ember.inject.service(),ticketFields:Ember.inject.service(),store:Ember.inject.service(),lightbox:Ember.inject.service(),flashMessages:Ember.inject.service(),i18n:Ember.inject.service(),classNames:["hcell-template"],attributeBindings:["data-test-id"],"data-test-id":Ember.computed("column.fieldtype",(function(){return"".concat(Ember.get(this,"column.fieldtype"),"_test_label")})),albumName:Ember.computed("value","column.fieldtype",(function(){return"".concat(Ember.get(this,"column.fieldtype"),"_").concat(this.value)})),isDateField:Ember.computed((function(){var e=Ember.get(this,"column.fieldtype");return"custom_date"===e||"custom_date_time"===e})),format:Ember.computed("currentAccount.timeFormat",(function(){return"custom_date_time"===Ember.get(this,"column.fieldtype")?Ember.get(this,"currentAccount.timeFormat.calendarDateTime"):Ember.get(this,"currentAccount.timeFormat.date")})),isBool:Ember.computed("value",(function(){return"boolean"==typeof this.value})),isLookupField:Ember.computed.equal("column.fieldtype","lookup"),customDropdownLabels:Ember.computed("column.valuePath",(function(){var e,t=Ember.get(this,"column.valuePath"),s=(Ember.get(this,"ticketFields.translatedChoiceMap")[t]||{}).choices,n=Ember.get(this,"row.".concat(t));return Ember.isPresent(s)&&Ember.isPresent(s[n])&&(e=s[n].label),e||n})),nestedListLabels:Ember.computed("column.nestedList",(function(){var e=this,t=Ember.get(this,"column.nestedList"),s=(Ember.get(this,"ticketFields.translatedChoiceMap")[t[0]]||{}).choices;return t.map((function(t){var n=Ember.get(e,"row.".concat(t));if(Ember.isPresent(s)&&Ember.isPresent(s[n])){var i=s[n];return s=i.choices,i.label}return n}))})),lookupProperties:Ember.computed("isLookupField","ticketFields.fields.[]","column.fieldName",(function(){return this.isLookupField?this.ticketFields.fields.findBy("name",this.column.fieldName).lookup:null})),lookupResolve:Ember.computed("extra.getLookupRecords","value",(function(){var e,t,s=this;return null===(e=this.extra)||void 0===e||null===(t=e.getLookupRecords)||void 0===t?void 0:t.then((function(e){return e.findBy("displayId",s.value)}))}))});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/custom-field/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"onEFNNL4",block:'{"symbols":["column","index"],"statements":[[4,"if",[[23,["isBool"]]],null,{"statements":[[4,"if",[[23,["value"]]],null,{"statements":[[0,"    "],[1,[27,"t",["fd.yes"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"t",["fd.no"],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isDateField"]]],null,{"statements":[[0,"  "],[1,[27,"moment-format",[[23,["value"]],[23,["format"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["column","nestedList"]]],null,{"statements":[[4,"each",[[23,["nestedListLabels"]]],null,{"statements":[[4,"if",[[22,1,[]]],null,{"statements":[[0,"      "],[1,[22,1,[]],false],[0,"\\n"],[4,"if",[[27,"lt",[[22,2,[]],[27,"sub",[[23,["nestedListLabels","length"]],1],null]],null]],null,{"statements":[[0,"        /\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"lt",[[22,2,[]],[27,"sub",[[23,["nestedListLabels","length"]],1],null]],null]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","inactive"],[9],[0,"- -/"],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[1,2]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["column","fieldtype"]],"custom_dropdown"],null],[23,["customDropdownLabels"]]],null]],null,{"statements":[[0,"  "],[1,[21,"customDropdownLabels"],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[27,"eq",[[23,["column","fieldtype"]],"custom_file"],null],[23,["value"]]],null]],null,{"statements":[[0,"  "],[7,"a"],[12,"onclick",[27,"action",[[22,0,[]],"openAttachment",[23,["value"]]],null]],[11,"class","link-no-underline cursor-pointer"],[11,"data-test-id","view-attachment"],[9],[0,"\\n    "],[1,[27,"svg-jar",["attachment"],[["data-test-id","class"],["file-attachment","app-icon app-icon--regular vertical-align mb-2"]]],false],[0,"\\n    "],[7,"span"],[11,"data-test-id","custom-file-placeholder"],[9],[1,[27,"t",["fd.viewfile"],null],false],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isLookupField"]]],null,{"statements":[[0,"  "],[1,[27,"app-components/lookup-text",null,[["loaderType","fillDefaultIfEmpty","lookupProperties","fieldPromise"],["gravity",true,[23,["lookupProperties"]],[23,["lookupResolve"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["value"]]],null,{"statements":[[0,"  "],[1,[21,"value"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"span"],[11,"class","inactive"],[9],[0,"- -"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/custom-field/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/group-agent-column-renderer/component",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.Component.extend({classNames:["__module-tickets__tickets-list__tickets-table__group-agent-column-renderer"],attributeBindings:["data-test-id"]});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/group-agent-column-renderer/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"+KKx1cOn",block:'{"symbols":[],"statements":[[7,"div"],[11,"class","header-text pl-10"],[9],[0,"\\n  "],[1,[27,"t",[[23,["column","groupLabel"]]],null],false],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","header-text pl-5"],[9],[0,"\\n  "],[1,[27,"t",[[23,["column","agentLabel"]]],null],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/group-agent-column-renderer/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/no-record/component",["exports","freshdesk/utils/blank-array"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Component.extend({classNames:["empty-results"],queryHash:(0,t.default)()});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/no-record/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"TQwH2itG",block:'{"symbols":[],"statements":[[1,[27,"svg-jar",["empty-tickets-list"],[["class"],["app-icon"]]],false],[0,"\\n"],[7,"div"],[11,"class","text--semibold text--xlarge mt-6"],[9],[0,"\\n  "],[1,[27,"t",["tickets.list.empty.title"],null],false],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","text__infotext mt-3"],[9],[0,"\\n  "],[1,[27,"t",["tickets.list.empty.info"],null],false],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","text--semibold mt-6"],[9],[0,"\\n"],[4,"link-to",["helpdesk.tickets.filters.show","all_tickets",[27,"query-params",null,[["page","queryHash"],[1,[23,["queryHash"]]]]]],null,{"statements":[[0,"    "],[1,[27,"t",["tickets.viewalltickets"],null],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/no-record/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"d50RN9hA",block:'{"symbols":["table","columns","table","columns"],"statements":[[4,"if",[[23,["showBannerMessage"]]],null,{"statements":[[4,"nucleus-inline-banner",null,[["class","type","isDismissible"],["mb-12 d-flex justify-content--center align-items--center ticket-list-banner-center-align","info",false]],{"statements":[[0,"    "],[1,[21,"bulkActionInfoBannerMsg"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["isTableView"]]],null,{"statements":[[4,"if",[[27,"not",[[23,["ticketTable","isEmpty"]]],null]],null,{"statements":[[4,"light-table",[[23,["ticketTable"]]],null,{"statements":[[0,"      "],[1,[27,"component",[[22,3,["head"]]],[["class"],["table-header"]]],false],[0,"\\n      "],[1,[27,"component",[[22,3,["body"]]],[["class","extra","rowComponent","canSelect","selectOnClick","multiSelect","data-test-id"],["list",[23,["extra"]],[27,"component",["module-tickets/tickets-list/tickets-table/ticket-row"],null],true,false,true,"table"]]],false],[0,"\\n"],[4,"if",[[23,["showPagination"]]],null,{"statements":[[4,"component",[[22,3,["foot"]]],null,{"statements":[[0,"          "],[7,"tr"],[11,"class","tickets__pagination"],[9],[0,"\\n            "],[7,"td"],[12,"colspan",[22,4,["length"]]],[9],[0,"\\n              "],[1,[27,"ui-components/fresh-pagination",null,[["pageBasedType","count","perPage","page","isLoading"],[true,[23,["count"]],[23,["perPage"]],[23,["page"]],[23,["isPageLoading"]]]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[4]},null]],"parameters":[]},null],[4,"if",[[23,["showColumnChooser"]]],null,{"statements":[[0,"        "],[1,[27,"module-tickets/tickets-list/tickets-table/columns-chooser",null,[["staticColumns","dynamicColumns","apply","allColumns"],[[23,["staticColumns"]],[23,["dynamicColumns"]],[23,["onApplyColumnChange"]],[23,["allColumns"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[3]},null]],"parameters":[]},{"statements":[[0,"    "],[1,[21,"module-tickets/tickets-list/tickets-table/no-record"],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"light-table",[[23,["ticketTable"]]],null,{"statements":[[4,"if",[[27,"not",[[23,["ticketTable","isEmpty"]]],null]],null,{"statements":[[0,"      "],[1,[27,"component",[[22,1,["body"]]],[["class","extra","rowComponent","selectOnClick","multiSelect"],["card-view",[23,["extra"]],[27,"component",["ui-components/light-table/marked-row"],null],false,true]]],false],[0,"\\n\\n"],[4,"if",[[23,["showPagination"]]],null,{"statements":[[4,"component",[[22,1,["foot"]]],null,{"statements":[[0,"          "],[7,"tr"],[9],[0,"\\n            "],[7,"td"],[12,"colspan",[22,2,["length"]]],[9],[0,"\\n              "],[1,[27,"ui-components/fresh-pagination",null,[["pageBasedType","count","perPage","page","isLoading"],[true,[23,["count"]],[23,["perPage"]],[23,["page"]],[23,["isPageLoading"]]]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[2]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"      "],[1,[21,"module-tickets/tickets-list/tickets-table/no-record"],false],[0,"\\n"]],"parameters":[]}]],"parameters":[1]},null]],"parameters":[]}],[1,[27,"interactivity-beacon",null,[["routeInteractive","model"],[true,[23,["ticketTable"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/template.hbs"}});e.default=t}));define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-item/component",["exports","freshdesk/mixins/tickets/ticket-prop-mapping","freshdesk/mixins/tickets/ticket-update","ember-in-viewport","freshdesk/mixins/tickets/bulk-actions-helper","freshdesk/mixins/tickets/service-task"],(function(e,t,s,n,i,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={fromIndex:6,batchOffset:300,initialOffset:200,batchCount:18},l={fromIndex:6,batchOffset:300,initialOffset:2500,batchCount:3},o=Ember.Component.extend(t.default,s.default,n.default,i.default,a.default,{browserChecker:Ember.inject.service(),currentAccount:Ember.inject.service(),currentUser:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),i18n:Ember.inject.service(),classNames:["tickets__list","row-fluid","__module-tickets__tickets-list__tickets-table__ticket-item"],classNameBindings:["isSelected:tickets__list--selected"],priorityPromise:null,statusPromise:null,assigntoPromise:null,isSelected:Ember.computed.reads("row.selected"),ticket:Ember.computed.reads("row.content"),showSearchInStatus:Ember.computed.gt("ticketFields.statusChoices.length",10),showBar:Ember.computed.empty("ticket.tags"),companyName:Ember.computed.reads("ticket.company.name"),recentSurvey:Ember.computed.reads("ticket.surveyResult.recentSurvey"),isNotActive:Ember.computed.not("ticket.ticketActive"),source:Ember.computed.reads("ticket.source"),propEditAllowed:Ember.computed("extra.isPropEditDisabled","currentUser.abilities","ticket.hasPermission",(function(){var e={model:Ember.get(this,"ticket")};e.abilities=Ember.get(this,"currentUserPrivileges").checkTicketUpdatePrivilege(Ember.get(this,"ticket.type"));var t=Ember.get(this,"currentUser").hasPermissions(e);return!Ember.get(this,"extra.isPropEditDisabled")&&t})),deferOptions:Ember.computed((function(){return Ember.get(this,"browserChecker.isExplorer")||Ember.get(this,"browserChecker.isEdge")?l:r})),deferRendering:Ember.computed((function(){var e=Ember.get(this,"row.index");e++;var t=Ember.get(this,"deferOptions"),s=t.batchOffset,n=t.fromIndex,i=t.initialOffset,a=t.batchCount;if(e>n){var r=i+s*Math.floor(e/a);return Ember.set(this,"deferTime",Math.floor(r)),!0}return!1})),appointmentTimeDetails:Ember.computed("appointmentTime",(function(){return Ember.get(this,"appointmentTime")||Ember.get(this,"i18n").t("form.date_placeholder")})),viewportOptionsOverride:Ember.on("didInsertElement",(function(){Ember.setProperties(this,{viewportSpy:!1,viewportScrollSensitivity:1,viewportTolerance:{top:-110,left:0,bottom:0,right:0}})})),didRender:function(){var e=this;this._super.apply(this,arguments);var t=Ember.get(this,"deferTime");t&&t>0&&(Ember.set(this,"deferTime",0),Ember.run.later((function(){e.isDestroyed||e.isDestroying||Ember.set(e,"deferRendering",!1)}),t))},didEnterViewport:function(){Ember.set(this,"deferRendering",!1)},getKeys:function(e){var t=Ember.get(this,"itemData").findBy("name",e);return Ember.get(t,"choices")}});e.default=o})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-item/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"ZndHGa8v",block:'{"symbols":["property","status","property","property"],"statements":[[4,"if",[[23,["deferRendering"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","col-md-9 list-content list-content--main"],[9],[0,"\\n    "],[1,[27,"svg-jar",["ticket-list-item"],[["class"],["placeholder-content-ticketitem"]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[12,"class",[28,["col-md-9 list-content list-content--main ",[27,"if",[[23,["isNotActive"]],"list-content--inactive-data"],null],"  ",[27,"if",[[23,["extra","removeCheckBox"]],"no-check-box"],null]]]],[12,"data-test-ticket-content",[23,["ticket","id"]]],[9],[0,"\\n    "],[7,"div"],[11,"class","list-check-wrap"],[9],[0,"\\n"],[4,"if",[[27,"not",[[23,["extra","removeCheckBox"]]],null]],null,{"statements":[[4,"ui-components/gravity-loader",null,[["class","isLoading"],["list-checkbox",[27,"and",[[23,["row","selected"]],[23,["extra","isRowLoading"]]],null]]],{"statements":[[0,"          "],[1,[27,"ui-form/custom-checkbox",null,[["data-test-id","labelId","disabled","value","checkboxClass"],["ticket-checkbox",[23,["ticket","id"]],[27,"or",[[23,["extra","isRowLoading"]],[23,["extra","removeCheckBox"]],[27,"not",[[23,["ticket","hasPermission"]]],null]],null],[23,["row","selected"]],"trigger-shortcuts"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"      "],[7,"div"],[11,"class","app-user-photo pull-left"],[9],[0,"\\n        "],[7,"div"],[11,"class","avatar-overlay"],[9],[10],[0,"\\n        "],[1,[27,"app-components/avatar-user",null,[["user","size","class"],[[23,["ticket","requester"]],"large","app-user-photo--normal"]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[12,"class",[28,["list-content-wrap ",[27,"if",[[23,["newTicketCheck"]],"new-ticket"],null]]]],[9],[0,"\\n      "],[7,"div"],[11,"class","ticket-tag-wrap clearfix"],[12,"data-test-ticket-label",[23,["ticket","id"]]],[9],[0,"\\n"],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[0,"          "],[1,[27,"app-components/ticket-status",null,[["ticket","showBar"],[[23,["ticket"]],[23,["showBar"]]]]],false],[0,"\\n          "],[1,[27,"ui-components/list-with-show-more",null,[["data","associationType"],[[23,["ticket","tags"]],[23,["associationInfo","type"]]]]],false],[0,"\\n\\n"],[4,"if",[[23,["associationInfo","type"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","text__content pull-left association-wrap"],[9],[0,"\\n              "],[7,"span"],[11,"class","text--bold associated-label text--uppercase"],[12,"data-test-id",[23,["associationInfo","type"]]],[9],[0,"\\n                "],[1,[27,"svg-jar",[[23,["associationInfo","type"]]],[["class"],["app-icon app-icon--small app-icon--topalign"]]],false],[0,"\\n                "],[1,[23,["associationInfo","text"]],false],[0,"\\n              "],[10],[0,"\\n"],[4,"if",[[23,["displayAssociatesCount"]]],null,{"statements":[[0,"                "],[7,"a"],[11,"role","button"],[12,"onClick",[27,"action",[[22,0,[]],"associateTickets",[23,["associationData","action"]],"ticketsList"],null]],[11,"data-test-id","associated-tkt-count"],[11,"class","text--verysmall"],[9],[0,"\\n                  ("],[1,[27,"titleize",[[27,"t",[[23,["associationData","label"]]],[["count"],[[23,["ticket","associatedTicketsCount"]]]]]],null],false],[0,")\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[7,"div"],[9],[0,"\\n        "],[1,[27,"module-tickets/tickets-list/tickets-table/ticket-subject-popover",null,[["ticket","class"],[[23,["ticket"]],"text--default"]]],false],[0,"\\n      "],[10],[0,"\\n\\n      "],[7,"p"],[11,"class","text__content text__infotext text--antialias ticket-info"],[12,"data-test-ticket-timestamp",[23,["ticket","id"]]],[9],[0,"\\n        "],[1,[27,"svg-jar",[[23,["ticket","sourceIcon"]]],[["data-test-icon","class"],[[23,["ticket","sourceIcon"]],"app-icon app-icon--small app-icon--topalign"]]],false],[0,"\\n"],[4,"if",[[23,["recentSurvey"]]],null,{"statements":[[0,"          "],[1,[27,"svg-jar",["dot"],[["class"],["app-icon app-icon--micro"]]],false],[0,"\\n          "],[7,"div"],[12,"aria-label",[23,["recentSurvey","value"]]],[11,"class","ticketlist-survey-icon hint--rounded hint--right"],[9],[0,"\\n            "],[1,[27,"svg-jar",[[23,["recentSurvey","spec","ticketListSvg"]]],[["class","width","height"],["app-icon","36px","36px"]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ticket","requester"]]],null,{"statements":[[0,"          "],[1,[27,"app-components/contact-popover",null,[["user","class","data-test-link"],[[23,["ticket","requester"]],"user-link","contact"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"span"],[9],[0," "],[1,[27,"t",["fd.missing-contact"],null],false],[0," "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["companyName"]]],null,{"statements":[[0,"          ("],[1,[21,"companyName"],false],[0,")\\n"]],"parameters":[]},null],[0,"        "],[7,"span"],[9],[0,"\\n          "],[1,[27,"svg-jar",["dot"],[["class"],["app-icon app-icon--micro"]]],false],[0,"\\n          "],[1,[27,"app-components/ticket-currentstate-info",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[12,"class",[28,["col-md-3 list-content list-content--info ",[27,"if",[[23,["isNotActive"]],"list-content--inactive-data"],null]]]],[12,"data-test-dropdown",[28,["ticket-dropdown-content-",[23,["ticket","id"]]]]],[9],[0,"\\n"],[4,"if",[[23,["ticket","needsRefresh"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","pull-right refresh-ticket-list"],[9],[0,"\\n        "],[1,[27,"svg-jar",["autorefresh"],[["class"],["app-icon--small app-icon--grey"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["ticket","isActionable"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","list-filter-wrap"],[9],[0,"\\n        "],[7,"div"],[11,"class","col-md-12 list-filter"],[9],[0,"\\n"],[4,"if",[[23,["isServiceTask"]]],null,{"statements":[[4,"module-tickets/tickets-list/shared/ticket-property",null,[["icon","promise","class","data-test-id"],["calendar",[23,["priorityPromise"]],"mb-4","appointment-details"]],{"statements":[[0,"              "],[7,"div"],[12,"aria-label",[21,"appointmentTimeDetails"]],[12,"class",[28,["fsm-appointment-details-tooltip ",[27,"if",[[23,["appointmentTime"]]," hint hint--bottom"],null]]]],[9],[0,"\\n                "],[7,"div"],[11,"class","fsm-appointment-details pl-5"],[9],[1,[21,"appointmentTimeDetails"],false],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"module-tickets/tickets-list/shared/ticket-property",null,[["promise","class"],[[23,["priorityPromise"]],"list-filter__priority"]],{"statements":[[0,"              "],[7,"div"],[11,"class","list-filter__item--icon-overlay"],[9],[0,"\\n"],[4,"component",[[22,4,["iconComponent"]]],null,{"statements":[[0,"                  "],[7,"span"],[12,"class",[28,["tickets__list--",[21,"priorityKey"]," tickets__list--dropdown"]]],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n              "],[7,"div"],[11,"class","text__content list-filter__label list-filter__priority__label drop-small"],[9],[0,"\\n"],[4,"ui-components/hover-lazy-loader",null,[["data-test-id"],["priority-hover"]],{"statements":[[0,"                  "],[1,[27,"module-tickets/shared/priority-dropdown",null,[["priority","ticket","saveAction","updatePromise","additionalClasses","isPropEditDisabled"],[[23,["ticket","priority"]],[23,["ticket"]],[27,"action",[[22,0,[]],"choosePriority"],null],[23,["priorityPromise"]],"ticket-list-dropselect",[27,"or",[[23,["extra","isPropEditDisabled"]],[27,"not",[[23,["ticket","hasPermission"]]],null]],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[7,"div"],[11,"class","list-priority--before-hover"],[11,"data-test-id","list-priority-before-hover"],[9],[0,"\\n                    "],[1,[27,"module-tickets/shared/priority-dropdown",null,[["priority","ticket","isPropEditDisabled","showPriorityPointer"],[[23,["ticket","priority"]],[23,["ticket"]],true,[23,["propEditAllowed"]]]]],false],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[]}],[0,"              "],[10],[0,"\\n"]],"parameters":[4]},null]],"parameters":[]}],[4,"module-tickets/tickets-list/shared/ticket-property",null,[["icon","promise"],["assignto",[23,["assigntoPromise"]]]],{"statements":[[0,"            "],[7,"div"],[11,"class","pull-left list-filter__label"],[9],[0,"\\n              "],[7,"div"],[11,"class","ticket-list-assign-to"],[9],[0,"\\n"],[4,"ui-components/hover-lazy-loader",null,[["enableComponentRender","data-test-id"],[[23,["propEditAllowed"]],"assign-to-hover"]],{"statements":[[0,"                  "],[1,[27,"app-components/assign-to",null,[["agentRequired","groupRequired","groupValue","agentValue","agentList","groupList","hideLabel","disabled","onSave"],[[23,["agentRequired"]],[23,["groupRequired"]],[23,["groupValue"]],[23,["agentValue"]],[23,["allAgents"]],[23,["allGroups"]],[27,"not",[[23,["propEditAllowed"]]],null],[27,"not",[[23,["propEditAllowed"]]],null],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[27,"app-components/assign-to",null,[["agentRequired","groupRequired","groupValue","agentValue","agentList","groupList","hideLabel","disabled","onSave"],[[23,["agentRequired"]],[23,["groupRequired"]],[23,["groupValue"]],[23,["agentValue"]],[23,["allAgents"]],[23,["allGroups"]],[27,"not",[[23,["propEditAllowed"]]],null],[27,"not",[[23,["propEditAllowed"]]],null],[27,"action",[[22,0,[]],"onSaveAgentAndGroup"],null]]]],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[3]},null],[0,"\\n"],[4,"module-tickets/tickets-list/shared/ticket-property",null,[["icon","class","promise"],["status","list-filter__status",[23,["statusPromise"]]]],{"statements":[[4,"ui-components/hover-lazy-loader",null,[["enableComponentRender","data-test-id"],[[23,["propEditAllowed"]],"status-hover"]],{"statements":[[0,"              "],[7,"div"],[12,"aria-label",[27,"t",["tickets.status"],null]],[11,"class","ticket-list-dropselect hint hint--left"],[11,"data-test-id","dropdown-status"],[12,"data-test-div",[28,["dropdown-status-",[23,["ticket","id"]]]]],[9],[0,"\\n"],[4,"power-select",null,[["selected","options","searchField","searchEnabled","onchange"],[[23,["ticket","statusChoice"]],[23,["ticketFields","statusChoices"]],"translatedLabel",[23,["showSearchInStatus"]],[27,"action",[[22,0,[]],"chooseStatus"],null]]],{"statements":[[0,"                  "],[1,[22,2,["translatedLabel"]],false],[0,"\\n"]],"parameters":[2]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div"],[11,"class","pull-left list-filter__label"],[11,"data-test-id","status-before-hover"],[9],[0,"\\n                "],[1,[23,["ticket","statusTranslatedLabel"]],false],[0,"\\n"],[4,"if",[[23,["propEditAllowed"]]],null,{"statements":[[0,"                  "],[7,"span"],[11,"class","ember-power-select-status-icon list-filter__label__pointer"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[1]},null],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]}],[4,"if",[[23,["showValidationDialog"]]],null,{"statements":[[4,"app-components/modal-dialog",null,[["close","showModalClose","size","closeOnEscapse"],[[27,"toggle-action",["showValidationDialog",[22,0,[]]],null],true,"medium",true]],{"statements":[[0,"    "],[1,[27,"module-tickets/tickets-list/shared/close-validation",null,[["tickets","assignedProperties","onclose"],[[23,["selectedRecord"]],[23,["assignedProperties"]],[27,"toggle-action",["showValidationDialog",[22,0,[]]],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-item/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-light-table/component",["exports","ember-light-table/components/light-table"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t.default.extend({totalWidth:Ember.computed("visibleColumns.@each.width","visibleColumns.[]","windowWidth",(function(){var e=Ember.get(this,"visibleColumns"),t=Ember.get(this,"windowWidth")||Ember.$(window).width(),s=e.getEach("width"),n=(s[s.length-1]||"").match(/\D+$/),i=0;if(Ember.isEmpty(n))return 0;n=n[0];for(var a=1;a<s.length;a++){var r=s[a];if(Ember.isNone(r)||-1===r.indexOf(n))return 0;i+=parseInt(r,10)}return this._windowWidth?t<this._windowWidth&&(i=Math.ceil(i+(100-t/this._windowWidth*100))):(this._totalWidth=i,this._windowWidth=t),"".concat(i=i<100?100:i).concat(n)})),initResizeObserver:Ember.on("init",(function(){Ember.$(window).on("resize",this.handleResize.bind(this))})),willDestroyElement:function(){this._super.apply(this,arguments),Ember.$(window).off("resize")},didRender:function(){this._super.apply(this,arguments);var e=Ember.get(this,"visibleColumns");e.filter((function(e){return Ember.isNone(e.notResize)})).forEach((function(e){var t=Ember.get(e,"minwidth")?parseInt(Ember.get(e,"minwidth")):null,s=parseInt(Ember.get(e,"width")),n=Ember.get(e,"finalWidth"),i=Ember.get(e,"headerwidth");t&&(i&&(t=i>t?i:t),n=t<n?n:t,1===Math.abs(s-n)&&(n=s)),Ember.set(e,"width","".concat(n,"%"))}))},handleResize:function(){Ember.set(this,"windowWidth",Ember.$(window).width())}});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-row/component",["exports","freshdesk/components/ui-components/light-table/marked-row/component"],(function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t.default.extend({classNameBindings:["isNotActive:ticket-notactive"],isNotActive:Ember.computed.not("row.content.ticketActive"),attributeBindings:["data-test-id"],ticket:Ember.computed.reads("row.content"),"data-test-id":Ember.computed("ticket",(function(){return"ticket-row-".concat(this.ticket.id)}))});e.default=s})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-subject-popover/component",["exports","freshdesk/constants/component-map/conversation-source","ember-concurrency","freshdesk/mixins/tickets/can-send-reply","freshdesk/mixins/tickets/ticket-status"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=[2,3],r=Ember.Component.extend(n.default,i.default,{store:Ember.inject.service(),showPopOver:!1,isDataLoaded:!1,quickReplySent:!1,showQuickReply:!0,classNames:["ticket-listview-hover","__module-tickets__tickets-list__tickets-table__ticket-subject-popover"],classNameBindings:["isAssociated"],renderLazyElement:!1,isAssociated:Ember.computed.notEmpty("ticket.associationType"),actions:{onOpen:function(){Ember.get(this,"fetchLatestNote").perform(Ember.get(this,"ticket"))},prevent:function(e){var t=this,s=Array.prototype.slice.call(arguments),n=s[2];return n.metaKey||n.ctrlKey||a.includes(n.which)||(this.sendAction("sendSearchDataToHeap"),Ember.run.next((function(){Ember.get(t,"router").transitionTo("helpdesk.tickets.show",e)}))),!1},addQuickNote:function(e){var t=this,s={options:{template:"module-tickets/tickets-list/quick-reply",showModalClose:!0,quickReply:!0,className:"quick-reply-overlay"},data:{ticket:Ember.get(this,"ticket"),actionType:e,quickReply:!0,updateLastConversation:function(){Ember.set(t,"quickReplySent",!0)}}};this.overlay.open(s)},forceLazyRender:function(){var e=this;Ember.set(this,"renderLazyElement",!0),Ember.run.next((function(){e.element.querySelector(".ember-basic-dropdown-trigger").focus()}))}},fetchLatestNote:(0,s.task)(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ember.get(this,"quickReplySent")){e.next=4;break}this.setViewData(!0),e.next=9;break;case 4:if(Ember.get(this,"isDataLoaded")){e.next=9;break}return e.next=7,t.latestNote();case 7:s=e.sent,this._handleLatestNote(s);case 9:case"end":return e.stop()}}),e,this)}))),setViewData:function(e){var s="";if(e){var n=Ember.get(this,"ticket.lastConversationId"),i=Ember.get(this,"store").peekRecord("conversation",n),a=t.noteSource[Ember.get(i,"source")],r=Ember.get(i,"private");s="forward_email"===a?"tickets.overlay_forward":"note"===a?r?"tickets.overlay_private_note":"tickets.overlay_public_note":"tickets.overlay_reply",Ember.setProperties(this,{bodyText:Ember.get(i,"bodyText"),timeInfo:Ember.get(i,"createdAt"),user:Ember.get(i,"user"),msgKey:s})}else s="tickets.overlay_submitted_ticket",Ember.setProperties(this,{bodyText:Ember.get(this,"ticket.descriptionText"),timeInfo:Ember.get(this,"ticket.createdAt"),user:Ember.get(this,"ticket.requester"),msgKey:s});Ember.set(this,"isDataLoaded",!0)},_handleLatestNote:function(e){if(!Ember.get(this,"isDestroyed")&&!Ember.get(this,"isDestroying"))if(e&&(e.conversation||e.ticket)){e.ticket&&this.ticket.deleted&&(e.ticket.deleted=!0),Ember.get(this,"store").pushPayload(e);var t=Object.prototype.hasOwnProperty.call(e,"conversation");this.setViewData(t)}else this.setViewData(!1)}});e.default=r})),define("freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-subject-popover/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"4skDwlww",block:'{"symbols":["dropdown"],"statements":[[4,"ui-components/hover-lazy-loader",null,[["enableComponentRender","renderLazyElement"],[[27,"not",[[23,["ticket","archived"]]],null],[23,["renderLazyElement"]]]],{"statements":[[0,"\\n"],[4,"basic-dropdown-hover",null,[["horizontalPosition","onOpen","openDelay","closeDelay"],["left",[27,"action",[[22,0,[]],"onOpen"],null],800,200]],{"statements":[[4,"component",[[22,1,["trigger"]]],[["class","data-test-id","onMouseDown","onFocus","onBlur","tabindex"],["trigger-shortcuts",[27,"concat",["ticket-subject-hover-",[23,["ticket","id"]]],null],[27,"action",[[22,0,[]],"prevent",[23,["ticket","id"]]],null],[27,"action",[[22,0,[]],[22,1,["actions","open"]]],null],[27,"action",[[22,0,[]],[22,1,["actions","close"]]],null],"-1"]],{"statements":[[0,"      "],[1,[27,"app-components/ticket-subject-link",null,[["ticket"],[[23,["ticket"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["class"],["ticket-list-item-hover dropdown-pointer-left"]],{"statements":[[4,"if",[[23,["isDataLoaded"]]],null,{"statements":[[0,"        "],[1,[27,"app-components/ticket-subject-card",null,[["showQuickReply","showTicketReply","addQuickNote","ticket","user","timeInfo","msgKey","bodyText"],[[23,["showQuickReply"]],[23,["showTicketReply"]],[27,"pipe-action",[[27,"action",[[22,0,[]],"addQuickNote"],null],[27,"action",[[22,0,[]],[22,1,["actions","close"]]],null]],null],[23,["ticket"]],[23,["user"]],[23,["timeInfo"]],[23,["msgKey"]],[23,["bodyText"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","ticket-list-user-hover clearfix"],[9],[0,"\\n          "],[7,"span"],[9],[1,[27,"t",["fd.loading"],null],false],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[1]},null]],"parameters":[]},{"statements":[[0,"  "],[1,[27,"app-components/ticket-subject-link",null,[["ticket","onclick","focusIn"],[[23,["ticket"]],[27,"action",[[22,0,[]],"prevent",[23,["ticket","id"]]],null],[27,"action",[[22,0,[]],"forceLazyRender"],null]]]],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/tickets-table/ticket-subject-popover/template.hbs"}});e.default=t})),define("freshdesk/components/module-tickets/tickets-list/top-navigation/component",["exports","freshdesk/mixins/tickets/ticket-special-filters","freshdesk/constants/ticket","freshdesk/constants/agent","freshdesk/constants/occulsion-rendering-standard-options"],(function(e,t,s,n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s.default.sortOptions,r=Ember.Component.extend(t.default,{store:Ember.inject.service(),shortcutsTooltip:Ember.inject.service(),currentUserPrivileges:Ember.inject.service(),classNames:["__module-tickets__tickets-list__top-navigation"],classNameBindings:["isLoading:list-loading"],orderByValues:["asc","desc"],defaultOcculsionOptions:i.defaultOcculsionOptions,searchAgents:"",notSpamOrTrash:Ember.computed.not("isSpamOrTrash"),notOngoingCollab:Ember.computed.not("isOngoingCollab"),notSpamTrashAndNotOngoingCollab:Ember.computed.and("notSpamOrTrash","notOngoingCollab"),hasEditTicketOrSTPrivilege:Ember.computed("currentUser.userData.abilities.[]",(function(){return this.currentUser.hasAbility("edit_ticket_properties")||this.currentUserPrivileges.hasServiceTaskUpdatePrivilege})),isExportVisible:Ember.computed("hasListContent","isSpamOrTrash","isOngoingCollab",(function(){var e=Ember.get(this,"hasListContent"),t=this.currentUser.hasAbility("export_tickets");return this.notSpamTrashAndNotOngoingCollab&&e&&t})),sortByOptions:Ember.computed("currentAccount.accountData.features.[]",(function(){var e=[];for(var t in a){var s=a[t];s.features?this.currentAccount.featuresEnabled(s.features)&&e.push({name:s.name,key:s.key}):e.push({name:s.name,key:s.key})}return e})),sortByTitle:Ember.computed("currentFilter.orderBy",(function(){var e=Ember.get(this,"currentFilter.orderBy");return a[e].key})),hasBulkScenarios:Ember.computed((function(){return this.currentAccount.hasFeature("scenarioAutomation")&&this.currentUserPrivileges.hasExecuteScenarioAutomationPrivilege})),viewTypes:Ember.computed((function(){return[{type:this.i18n.t("fd.cardview"),value:!1,link:"list-view"},{type:this.i18n.t("fd.tableview"),value:!0,link:"table-view"}]})),agentslist:Ember.computed("ticketfields","searchAgents",(function(){var e=this.store.peekAll("agent"),t=Object.create({id:-1,contact:{name:this.i18n.t("ticket.assigntome")}}),s=Ember.get(this,"searchAgents").toLowerCase(),i=e.toArray().filter((function(e){var t;return n.ASSIGNABLE_AGENT_TYPE.includes(e.type)&&(null===(t=e.contact)||void 0===t?void 0:t.name)&&e.contact.name.toLowerCase().includes(s)}));return i.unshift(t),i})),actions:{assignAgents:function(e,t){this.assignAgents(e),t.actions.close()},resolveTickets:function(e){this.resolveTickets(e)}}});e.default=r})),define("freshdesk/components/module-tickets/tickets-list/top-navigation/template",["exports"],(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Ember.HTMLBars.template({id:"bETymSOy",block:'{"symbols":["dropdown","viewType","dropdown","orderType","sortItem","dropdown","dropdown","agent","index"],"statements":[[7,"div"],[11,"class","page-actions__left"],[9],[0,"\\n"],[4,"if",[[27,"and",[[23,["hasListContent"]],[27,"not",[[23,["isOngoingCollab"]]],null]],null]],null,{"statements":[[4,"ui-components/gravity-loader",null,[["class","isLoading"],["top-navigation--checkbox-wrapper",[27,"and",[[23,["isSelectAll"]],[23,["isBulkOperationPending"]]],null]]],{"statements":[[0,"      "],[1,[27,"ui-form/custom-checkbox",null,[["labelId","class","checkboxClass","disabled","value","onchange","data-test-id"],["top-navigation","top-navigation-checkbox","trigger-shortcuts",[23,["isBulkOperationPending"]],[23,["isSelectAll"]],[23,["toggleSelectAll"]],"select-all-tickets"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[27,"and",[[23,["hasListContent"]],[23,["isChecked"]]],null]],null,{"statements":[[4,"if",[[23,["isTrash"]]],null,{"statements":[[0,"      "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text"],[12,"onclick",[21,"restoreTickets"]],[12,"aria-label",[27,"t",["tickets.restore"],null]],[9],[0,"\\n        "],[1,[27,"svg-jar",["refresh"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.restore"],null],false],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[27,"hasabilities",["delete_ticket"],null]],null,{"statements":[[0,"        "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"onclick",[21,"deleteForever"]],[12,"aria-label",[23,["shortcutsTooltip","tickets","delete"]]],[9],[0,"\\n          "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.deleteforever"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["isSpam"]]],null,{"statements":[[0,"      "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text"],[12,"onclick",[21,"ticketNotSpam"]],[12,"aria-label",[27,"t",["tickets.unspam"],null]],[9],[0,"\\n        "],[1,[27,"svg-jar",["resolved"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.unspam"],null],false],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[27,"hasabilities",["delete_ticket"],null]],null,{"statements":[[0,"        "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"onclick",[21,"deleteForever"]],[11,"data-test-id","delete-forever"],[12,"aria-label",[23,["shortcutsTooltip","tickets","delete"]]],[9],[0,"\\n          "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.deleteforever"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[27,"not",[[27,"or",[[23,["isSpamOrTrash"]],[23,["isOngoingCollab"]]],null]],null]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","action-btn-slide"],[9],[0,"\\n"],[4,"if",[[23,["hasEditTicketOrSTPrivilege"]]],null,{"statements":[[4,"basic-dropdown",null,[["class","renderInPlace"],["app-dropdown-group",true]],{"statements":[[4,"component",[[22,7,["trigger"]]],null,{"statements":[[0,"              "],[7,"button"],[12,"aria-label",[27,"t",["tickets.assign"],null]],[11,"data-toggle","dropdown"],[12,"data-test-link",[27,"t",["tickets.assign"],null]],[11,"data-test-id","ticket-assign"],[11,"class","dropdown-toggle app-icon-btn app-icon-btn--text"],[9],[0,"\\n                "],[1,[27,"svg-jar",["assignto"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.assign"],null],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,7,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"\\n              "],[7,"div"],[11,"class","input search-assign-input background-white pa-5"],[11,"data-test-id","assign-search-div"],[9],[0,"\\n                "],[1,[27,"ui-components/search-field",null,[["placeholder","value","cancelIcon","autoFocus","hideSearchIcon","considerFocusState","uniqueIdClass","autocomplete"],[[27,"t",["freshcaller.transfer.agent-group-search"],null],[23,["searchAgents"]],true,true,true,false,"search-assign-input-test","off"]]],false],[0,"\\n              "],[10],[0,"\\n              "],[7,"ul"],[11,"class","dropdown-normal assign-to-list vertical-select-options mb-0 pt-0"],[9],[0,"\\n"],[4,"app-components/vertical-collection-options",null,[["occulsionRenderOptions","options"],[[23,["defaultOcculsionOptions"]],[23,["agentslist"]]]],{"statements":[[0,"                  "],[7,"li"],[9],[0,"\\n                    "],[7,"a"],[11,"href","javascript:void(0)"],[11,"class","app-dropdown__item"],[11,"data-test-id","ticket-assign-agent"],[12,"onclick",[27,"action",[[22,0,[]],"assignAgents",[22,8,[]],[22,7,[]]],null]],[9],[0,"\\n                      "],[1,[22,8,["contact","name"]],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n"]],"parameters":[8,9]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[7]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["hasEditTicketOrSTPrivilege"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"onclick",[27,"action",[[22,0,[]],"resolveTickets"],[["allowedKeys"],["shift"]]]],[12,"aria-label",[27,"t",["tickets.shift_close"],null]],[11,"data-test-link","Close Ticket"],[9],[0,"\\n            "],[1,[27,"svg-jar",["close-ticket"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.closeTicket"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showBulkUpdateButton"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text"],[12,"data-test-link",[27,"t",["tickets.bulkactions"],null]],[12,"onclick",[21,"toggleBulkAction"]],[9],[0,"\\n            "],[1,[27,"svg-jar",["convert"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.bulkactions"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"hasabilities",["merge_or_split_ticket"],null]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text"],[12,"onclick",[21,"mergeTickets"]],[12,"data-test-link",[27,"t",["tickets.merge"],null]],[9],[0,"\\n            "],[1,[27,"svg-jar",["merge"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.merge"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"and",[[27,"hasfeature",["link_tickets"],null],[23,["currentUserPrivileges","hasLinkTicketPrivilege"]]],null]],null,{"statements":[[4,"if",[[27,"launched",["ticket_merge_enhancement"],null]],null,{"statements":[[4,"basic-dropdown",null,[["data-test-id","class","renderInPlace"],["link-ticket-dropdown","app-dropdown-group",true]],{"statements":[[4,"component",[[22,6,["trigger"]]],null,{"statements":[[0,"                "],[7,"button"],[11,"class","app-icon-btn dropdown-toggle app-icon-btn app-icon-btn--text hint--rounded hint--top"],[12,"aria-label",[27,"t",["tickets.link"],null]],[12,"data-test-link",[27,"t",["tickets.link"],null]],[9],[0,"\\n                  "],[1,[27,"svg-jar",["insert-link"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.link"],null],false],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,6,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"                "],[7,"ul"],[11,"class","dropdown-menu app-dropdown"],[3,"action",[[22,0,[]],[22,6,["actions","close"]]]],[9],[0,"\\n                  "],[7,"li"],[9],[0,"\\n                    "],[7,"a"],[11,"href","#"],[12,"onclick",[21,"linkToParent"]],[11,"data-test-actions","linkToParent"],[11,"class","app-dropdown__item app-icon-btn--text m-0"],[9],[0,"\\n                      "],[1,[27,"svg-jar",["social"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.ticket_associations.link_tickets.parent.add"],null],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                  "],[7,"li"],[9],[0,"\\n                    "],[7,"a"],[11,"href","#"],[12,"onclick",[21,"linkTickets"]],[11,"data-test-actions","linkToTracker"],[11,"class","app-dropdown__item app-icon-btn--text m-0"],[9],[0,"\\n                      "],[1,[27,"svg-jar",["tracker"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.ticket_associations.link_tickets.tracker.add"],null],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[6]},null]],"parameters":[]},{"statements":[[0,"            "],[7,"button"],[11,"class","app-icon-btn dropdown-toggle app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"aria-label",[27,"t",["tickets.link"],null]],[12,"onclick",[21,"linkTickets"]],[12,"data-test-link",[27,"t",["tickets.link"],null]],[9],[0,"\\n              "],[1,[27,"svg-jar",["insert-link"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["tickets.link"],null],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["isMonitoredBy"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text"],[12,"onclick",[21,"bulkUnwatch"]],[9],[0,"\\n            "],[1,[27,"svg-jar",["star"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.unwatch"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["hasBulkScenarios"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"aria-label",[23,["shortcutsTooltip","tickets","scenario"]]],[12,"data-test-link",[27,"t",["tickets.scenarios"],null]],[12,"onclick",[21,"toggleOverlay"]],[9],[0,"\\n            "],[1,[27,"svg-jar",["scenarios"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.scenarios"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["currentUserPrivileges","hasSpamTicketPrivilege"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"aria-label",[23,["shortcutsTooltip","tickets","spam"]]],[12,"data-test-link",[27,"t",["tickets.markasspam"],null]],[12,"onclick",[21,"markasspam"]],[9],[0,"\\n            "],[1,[27,"svg-jar",["spam"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.markasspam"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showDeleteButton"]]],null,{"statements":[[0,"          "],[7,"button"],[11,"class","app-icon-btn app-icon-btn--text hint--rounded hint--bottom"],[12,"aria-label",[23,["shortcutsTooltip","tickets","delete"]]],[12,"onclick",[27,"action",[[22,0,[]],[23,["deleteTickets"]]],null]],[11,"data-toggle","dropdown"],[12,"data-test-link",[27,"t",["tickets.delete"],null]],[9],[0,"\\n            "],[1,[27,"svg-jar",["delete"],[["class"],["app-icon"]]],false],[0,"\\n            "],[1,[27,"t",["tickets.delete"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[27,"and",[[23,["hasListContent"]],[23,["currentFilter"]]],null]],null,{"statements":[[4,"basic-dropdown",null,[["class","renderInPlace"],["pull-left sortby-dropdown",true]],{"statements":[[4,"component",[[22,3,["trigger"]]],[["class"],["trigger-shortcuts"]],{"statements":[[0,"          "],[7,"span"],[11,"class","muted"],[9],[0,"\\n            "],[1,[27,"t",["tickets.sortby"],null],false],[0,":\\n          "],[10],[0,"\\n          "],[7,"button"],[11,"class","btn btn--transparent btn--date-select scale-none"],[11,"data-test-id","view-sort"],[9],[0,"\\n            "],[1,[27,"t",[[23,["sortByTitle"]]],null],false],[0,"\\n            "],[1,[27,"svg-jar",["downarrow"],[["class","data-test-dropdown"],["app-icon app-icon--verysmall","menu-sort"]]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,3,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"          "],[7,"ul"],[11,"class","dropdown-menu dropdown-normal app-dropdown"],[3,"action",[[22,0,[]],[22,3,["actions","close"]]]],[9],[0,"\\n"],[4,"each",[[23,["sortByOptions"]]],null,{"statements":[[0,"              "],[7,"li"],[12,"class",[28,["dropdown-normal__item ",[27,"if",[[27,"eq",[[22,5,["name"]],[23,["currentFilter","orderBy"]]],null],"selected"],null]]]],[11,"data-test-dropdown","sort-menulist"],[9],[0,"\\n"],[4,"link-to",["helpdesk.tickets.filters.show",[27,"query-params",null,[["orderBy"],[[22,5,["name"]]]]]],[["click","class","data-test-id"],[[27,"action",[[22,0,[]],[22,3,["actions","close"]]],null],"item-link",[27,"concat",["view-sort-options-",[22,5,["name"]]],null]]],{"statements":[[4,"if",[[27,"eq",[[22,5,["name"]],[23,["currentFilter","orderBy"]]],null]],null,{"statements":[[0,"                    "],[1,[27,"svg-jar",["resolved"],[["class"],["app-icon app-icon--small selectedtick"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[1,[27,"t",[[22,5,["key"]]],null],false],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[5]},null],[0,"            "],[7,"li"],[11,"role","separator"],[11,"class","divider"],[9],[10],[0,"\\n"],[4,"each",[[23,["orderByValues"]]],null,{"statements":[[0,"              "],[7,"li"],[12,"class",[28,["dropdown-normal__item ",[27,"if",[[27,"eq",[[22,4,[]],[23,["currentFilter","orderType"]]],null],"selected"],null]]]],[9],[0,"\\n"],[4,"link-to",["helpdesk.tickets.filters.show",[27,"query-params",null,[["orderType"],[[22,4,[]]]]]],[["click","class"],[[27,"action",[[22,0,[]],[22,3,["actions","close"]]],null],"item-link"]],{"statements":[[0,"\\n"],[4,"if",[[27,"eq",[[22,4,[]],[23,["currentFilter","orderType"]]],null]],null,{"statements":[[0,"                    "],[1,[27,"svg-jar",["resolved"],[["class"],["app-icon app-icon--small selectedtick"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"                  "],[1,[27,"t",[[27,"concat",["ticket.sortby.",[22,4,[]]],null]],null],false],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n"]],"parameters":[4]},null],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[3]},null]],"parameters":[]},null]],"parameters":[]}],[10],[0,"\\n"],[7,"div"],[11,"class","page-actions__right"],[9],[0,"\\n  "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n"],[4,"if",[[27,"and",[[27,"not",[[23,["isChecked"]]],null],[23,["hasListContent"]]],null]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","view-action"],[9],[0,"\\n"],[4,"basic-dropdown",null,[["class","renderInPlace"],["app-dropdown-group dropdown-layout",true]],{"statements":[[4,"component",[[22,1,["trigger"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","muted"],[9],[0,"\\n              "],[1,[27,"t",["ticket.detail.layout"],null],false],[0,":\\n            "],[10],[0,"\\n            "],[7,"button"],[11,"data-toggle","dropdown"],[11,"data-test-id","view-dropdown"],[11,"class","btn btn--transparent btn--date-select scale-none p0"],[9],[0,"\\n"],[4,"if",[[23,["isTableView"]]],null,{"statements":[[0,"                "],[1,[27,"t",["fd.tableview"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[27,"t",["fd.cardview"],null],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[1,[27,"svg-jar",["downarrow"],[["class","data-test-dropdown"],["app-icon app-icon--verysmall","menu-sort"]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[4,"component",[[22,1,["content"]]],[["class"],["bs-dropdown"]],{"statements":[[0,"            "],[7,"ul"],[11,"class","dropdown-menu dropdown-normal app-dropdown"],[3,"action",[[22,0,[]],[22,1,["actions","close"]]]],[9],[0,"\\n"],[4,"each",[[23,["viewTypes"]]],null,{"statements":[[0,"                "],[7,"li"],[12,"class",[28,["dropdown-normal__item ",[27,"if",[[27,"eq",[[22,2,["value"]],[23,["isTableView"]]],null],"selected"],null]]]],[11,"data-test-id","view-list"],[9],[0,"\\n                  "],[7,"a"],[11,"href","javascript:void(0)"],[11,"class","item-link"],[11,"data-test-id","change-view"],[12,"data-test-link",[22,2,["link"]]],[12,"onclick",[27,"action",[[22,0,[]],[23,["switchView"]],[22,2,["value"]]],null]],[9],[0,"\\n                    "],[1,[22,2,["type"]],false],[0,"\\n                    "],[7,"span"],[11,"class","resolved-icon"],[9],[0,"\\n                      "],[1,[27,"svg-jar",["resolved"],[["class"],["app-icon app-icon--small selectedtick"]]],false],[0,"\\n                    "],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n"]],"parameters":[2]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["isExportVisible"]]],null,{"statements":[[0,"      "],[7,"button"],[11,"class","app-icon-btn app-icon-btn app-icon-btn--text"],[11,"data-test-id","ticket-list-export"],[12,"aria-label",[27,"t",["fd.export"],null]],[12,"onclick",[21,"exportTickets"]],[9],[0,"\\n        "],[1,[27,"svg-jar",["newexport"],[["class"],["app-icon"]]],false],[0," "],[1,[27,"t",["fd.export"],null],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[1,[27,"ui-components/fresh-pagination",null,[["count","perPage","page","isLoading"],[[23,["count"]],[23,["perPage"]],[23,["page"]],[23,["isPageLoading"]]]]],false],[0,"\\n    "],[1,[27,"app-components/filter-list/filter-list-collapse",null,[["isFilterExpanded","shouldHideFilterOptions"],[[23,["isFilterExpanded"]],[23,["shouldHideFilterOptions"]]]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"freshdesk/components/module-tickets/tickets-list/top-navigation/template.hbs"}});e.default=t})),define("freshdesk/config/environment",[],(function(){try{var e="freshdesk/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),s={default:JSON.parse(unescape(t))};return Object.defineProperty(s,"__esModule",{value:!0}),s}catch(n){throw new Error('Could not read config from meta tag with name "'+e+'".')}}));
//# sourceMappingURL=tickets.map