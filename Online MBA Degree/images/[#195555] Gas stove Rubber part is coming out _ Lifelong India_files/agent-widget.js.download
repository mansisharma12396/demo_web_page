(function e(t,s,i){function n(a,r){if(!s[a]){if(!t[a]){var d="function"==typeof require&&require
if(!r&&d)return d(a,!0)
if(o)return o(a,!0)
var l=new Error("Cannot find module '"+a+"'")
throw l.code="MODULE_NOT_FOUND",l}var c=s[a]={exports:{}}
t[a][0].call(c.exports,(function(e){return n(t[a][1][e]||e)}),c,c.exports,e,t,s,i)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a])
return n})({1:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default={frameDivId:"unity_agent_div",frameId:"unity_agent_frame",pushFrameDivId:"unity_push_frame_div",pushFrameId:"unity_push_frame",headerClass:"fcHeadDiv",logoClass:"fcLogo",closeIconClass:"fcCloseIcon",incompatibilityDiv:"fcErrMsgDiv",incompatibilityTitle:"fcMsgTitle",incompatibilitySuggestionDiv:"fcSuggestionMsgDiv",toolTipClass:"fcToolTipClass",toolTipTriangleClass:"fcToolTipTriangle",browserIncompatibilityMsg:{title:"It's not you, It's us :(",desc:"Freshchat is not supported on IE 11 and below",suggestion:"Why don't you try other browsers?"},browsers:{chrome:"Chrome",safari:"Safari",firefox:"Firefox",edge:"Edge"},fileUrl:{fcLogo:"https://assetscdn-web.freshchat.com/agent/static/assets/images/freshchat_logo-ff1ff9e9c3c853b430d5ba5d344b2388.svg",closeIcon:"https://assetscdn-web.freshchat.com/agent/static/assets/images/agent-widget/ic_close-e297fd1f44a87cd7c80e8226cf867d28.svg",chrome:"https://assetscdn-web.freshchat.com/agent/static/assets/images/agent-widget/ic_chrome-7aff918a8587e0e94c851bcaa7250d24.svg",firefox:"https://assetscdn-web.freshchat.com/agent/static/assets/images/agent-widget/ic_firefox-2f64be947f383e9724bc4d514f16a53a.svg",safari:"https://assetscdn-web.freshchat.com/agent/static/assets/images/agent-widget/ic_safari-f3e3017755fac09cf7cde5ca2289e24e.svg",edge:"https://assetscdn-web.freshchat.com/agent/static/assets/images/agent-widget/ic_edge-43acc6ebf3a477ab124bd413027d45db.svg"},EVENTS:{MANAGE_EXTENDED_WIDGET:"manage_extended_widget"}}},{}],2:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0}),s.default={setAttr:function(e,t){for(var s in t)t.hasOwnProperty(s)&&e.setAttribute(s,t[s])
return e},hasClass:function(e,t){if(e&&t&&t.trim().length>0)return e.classList?e.classList.contains(t):!(!e.className||!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},addClass:function(e,t){e&&t&&t.trim().length>0&&(e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t))},removeClass:function(e,t){if(e)if(e.classList)e.classList.remove(t)
else if(this.hasClass(e,t)){var s=new RegExp("(\\s|^)"+t+"(\\s|$)")
e.className=e.className.replace(s," ")}},purge:function(e){var t,s,i,n=e.attributes
if(n)for(t=n.length-1;t>=0;t-=1)"function"==typeof e[i=n[t].name]&&(e[i]=null)
if(n=e.childNodes)for(s=n.length,t=0;t<s;t+=1)this.purge(e.childNodes[t])}}},{}],3:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0})
var i,n=e("./../common/constants"),o=(i=n)&&i.__esModule?i:{default:i}
s.default={getBrowserInfo:function(){var e,t,s,i=navigator.appVersion,n=navigator.userAgent,o=navigator.appName,a=""+parseFloat(i),r=parseInt(i,10)
return-1!==(t=n.indexOf("Opera"))?(o="Opera",a=n.substring(t+6),-1!==(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!==(t=n.indexOf("MSIE"))||-1!==(t=n.indexOf("Trident"))?(o="IE",a=n.substring(t+5)):-1!==(t=n.indexOf("Edge"))?(o="Edge",a=n.substring(t+8)):-1!==(t=n.indexOf("Chrome"))?(o="Chrome",a=n.substring(t+7)):-1!==(t=n.indexOf("Safari"))?(o="Safari",a=n.substring(t+7),-1!==(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!==(t=n.indexOf("Firefox"))?(o="Firefox",a=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(o=n.substring(e,t),a=n.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=navigator.appName)),-1!==(s=a.indexOf(";"))&&(a=a.substring(0,s)),-1!==(s=a.indexOf(" "))&&(a=a.substring(0,s)),r=parseInt(""+a,10),isNaN(r)&&(a=""+parseFloat(i),r=parseInt(i,10)),{name:o,version:r,versionx:a,os:navigator.platform}},isIE:function(){return"IE"===this.getBrowserInfo().name},getHTMLPage:function(){var e=[],t=o.default.fileUrl
return e.push({id:"{{FC_LOGO_URL}}",value:t.fcLogo}),e.push({id:"{{FC_CLOSE_URL}}",value:t.closeIcon}),e.push({id:"{{CHROME_IMG_URL}}",value:t.chrome}),e.push({id:"{{FIREFOX_IMG_URL}}",value:t.firefox}),e.push({id:"{{SAFARI_IMG_URL}}",value:t.safari}),e.push({id:"{{EDGE_IMG_URL}}",value:t.edge}),e.push({id:"{{CHROME_BROWSER_TEXT}}",value:o.default.browsers.chrome}),e.push({id:"{{FIREFOX_BROWSER_TEXT}}",value:o.default.browsers.firefox}),e.push({id:"{{SAFARI_BROWSER_TEXT}}",value:o.default.browsers.safari}),e.push({id:"{{EDGE_BROWSER_TEXT}}",value:o.default.browsers.edge}),e.push({id:"{{IE_NOT_SUPPORTED_TITLE}}",value:o.default.browserIncompatibilityMsg.title}),e.push({id:"{{IE_NOT_SUPPORTED_DESCRIPTION}}",value:o.default.browserIncompatibilityMsg.desc}),e.push({id:"{{BROWSER_SUGGESTION_TEXT}}",value:o.default.browserIncompatibilityMsg.suggestion}),this.replaceTags('<div class="fcHeadDiv">\n                    <img class="fcLogo" src="{{FC_LOGO_URL}}">\n                    <img class="fcCloseIcon" src={{FC_CLOSE_URL}} onclick=\'fcAgentWidget.close()\'>\n                  </div>\n                  <div class="fcErrMsgDiv">\n                    <p class="fcMsgTitle">{{IE_NOT_SUPPORTED_TITLE}}</p>\n                    <span class="fcMsgDesc">{{IE_NOT_SUPPORTED_DESCRIPTION}}</span>\n                  </div>\n                  <div class="fcSuggestionMsgDiv">\n                    <p>{{BROWSER_SUGGESTION_TEXT}}</p>\n                    <div class="browser-icons">\n                      <div>\n                        <img src={{CHROME_IMG_URL}}>\n                        <span class="fcToolTipTriangle"></span>\n                        <span class="fcToolTipClass chrome">{{CHROME_BROWSER_TEXT}}</span>\n                      </div>\n                      <div>\n                        <img src={{FIREFOX_IMG_URL}}>\n                        <span class="fcToolTipTriangle"></span>\n                        <span class="fcToolTipClass firefox">{{FIREFOX_BROWSER_TEXT}}</span>\n                      </div>\n                      <div>\n                        <img src={{SAFARI_IMG_URL}}>\n                        <span class="fcToolTipTriangle"></span>\n                        <span class="fcToolTipClass safari">{{SAFARI_BROWSER_TEXT}}</span>\n                      </div>\n                      <div>\n                        <img src={{EDGE_IMG_URL}}>\n                        <span class="fcToolTipTriangle"></span>\n                        <span class="fcToolTipClass edge">{{EDGE_BROWSER_TEXT}}</span>\n                      </div>\n                    <div>\n                  </div>',e)},replaceTags:function(e,t){return t.forEach((function(t){e=e.replace(new RegExp(t.id,"g"),t.value)})),e}}},{"./../common/constants":1}],4:[function(e,t,s){"use strict"
var i,n
Object.defineProperty(s,"__esModule",{value:!0}),s.default=(i={},n=["conversation:loaded","widget:maximized","widget:minimized","widget:closed","widget:loaded","user:created","user:cleared","message:sent","message:received","push:subscribed","FS:UnreadNotification","FS:routeMCRConctact","FS:channels","FS:userMessageResponse","FS:imageResponse"],{clear:function(){i={}},valid:function(e){return!(!e||!n)&&-1!==n.indexOf(e)},subscribe:function(e,t){t&&this.valid(e)&&(void 0===i[e]&&(i[e]=[]),i[e].push(t))},unsubscribe:function(e,t){if(this.valid(e)){var s,n=i&&i[e]
if(n)if(t){for(var o=0,a=n.length;o<a;o++)if((s=n[o])&&"function"==typeof s&&s.name===t.name){n.splice(o,1)
break}}else i[e]=[]}},publish:function(e,t){if(this.valid(e)){var s,n=i&&i[e]
if(n)for(var o=0,a=n.length;o<a;o++)s=n[o],t?s(t):s()}}})},{}],5:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0})
var i=r(e("./../common/constants")),n=r(e("./../common/dom")),o=r(e("./browser")),a=r(e("./events"))
function r(e){return e&&e.__esModule?e:{default:e}}s.default={getHost:function(){return this.host},getToken:function(){return this.token},getReferrer:function(){return this.referrer},getDomId:function(){return this.domId},getOffset:function(){return this.offset?parseInt(this.offset):""},getPosition:function(){return this.position?this.position.toLowerCase():""},getWidgetSource:function(){return this.src},getWidgetColorSettings:function(){return{widgetHeaderColor:this.widgetHeaderColor,notificationHeaderColor:this.notificationHeaderColor,widgetDropdownColor:this.widgetDropdownColor}},getFrameElement:function(){return this.frameElement},getFrameWrapperElement:function(){return this.frameWrapperElement},isWidgetClosed:function(){return this.widgetClosed},getConfigSettings:function(){return this.config},setWidgetClosed:function(e){this.widgetClosed=e},init:function(e){this.token=e.token,this.referrer=e.referrer,this.host=e.host,this.domId=e.domId,this.offset=e.offset,this.position=e.position,this.widgetHeaderColor=e.widgetHeaderColor,this.notificationHeaderColor=e.notificationHeaderColor,this.widgetDropdownColor=e.widgetDropdownColor,this.config=e.config,this.src=e.src,this.widgetClosed=!0,this.blockAutoLoad=e.blockAutoLoad},load:function(e,t){this.blockAutoLoad&&(e=this.addQueryParams(e,{blockAutoLoad:this.blockAutoLoad})),this.frame=window.open(e,t)},postMessage:function(e){this.frame&&this.frame.postMessage(e,this.getHost())},dispatch:function(e,t){e&&t&&"function"==typeof e&&e(t)},unload:function(){this.remove()},origin:function(){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.encodeURIComponent(window.location.origin)},maximizeWidget:function(){var e=this.getFrameElement(),t=this.getFrameWrapperElement()
t&&(t.setAttribute("class","unity_widget_maximized"),e&&(e.setAttribute("title","AGENT MESSENGER"),n.default.removeClass(e,"fc-hide"),n.default.removeClass(e,"notify-msg")),this.setWidgetClosed(!1),this.postMessage({action:"setMinimized",payload:!1}),a.default.publish("widget:maximized"))},closeWidget:function(){var e=this.getFrameElement(),t=this.getFrameWrapperElement()
t&&(e&&n.default.addClass(e,"fc-hide"),n.default.addClass(t,"fc-hide"),this.setWidgetClosed(!0),this.postMessage({action:"setMinimized",payload:!0}),a.default.publish("widget:closed"))},add:function(){var e=document,t=e.body,s=this.getFrameWrapperElement()
if(!s){if(s=e.createElement("DIV"),this.frameWrapperElement=s,this.addStyleSheet(),n.default.setAttr(s,{id:i.default.frameDivId,class:"fc-hide"}),o.default.isIE())s.innerHTML=o.default.getHTMLPage(),t.appendChild(s)
else{var a=e.createElement("IFRAME")
n.default.setAttr(a,{id:i.default.frameId,name:i.default.frameId,frameborder:"0",class:"fc-hide",allowTransparency:"true"}),s.appendChild(a),t.appendChild(s),this.frameElement=a,this.load(this.getHost()+"/a/0/agent-widget?origin="+this.origin()+"&token="+this.token,i.default.frameId)}this.addPreference(s)}},updateHost:function(e){var t=e&&e.appId||0,s=e&&e.domain,n=e&&e.token
s&&(this.host=s),n&&(this.token=n),this.load(this.getHost()+"/a/"+t+"/agent-widget?origin="+this.origin()+"&token="+this.token,i.default.frameId)},addStyleSheet:function(){var e=document,t=e.createElement("link")
t.href=this.getHost()+"/css/agent-widget.css?t="+(new Date).getTime(),t.rel="stylesheet",e.getElementsByTagName("head")[0].appendChild(t)},remove:function(e){var t,s=document,i=s.body;(t=e?s.getElementById(e):this.getFrameWrapperElement())&&(this.frame=null,n.default.purge(t),i.removeChild(t),this.frameElement=null,this.frameWrapperElement=null)},setPositionOffset:function(e){this.config.position=e},addPreference:function(e){var t=document.getElementById(i.default.frameId)
t&&t.setAttribute("style","background-color: transparent"),this.setWidgetDivPosition(e)},setWidgetDivPosition:function(e){var t="",s=this.config.position
if(e||(e=this.getFrameWrapperElement()),s)for(var i in s)switch(i){case"leftOffset":t+="left:"+s[i]+"px;"
break
case"rightOffset":t+="right:"+s[i]+"px;"
break
case"topOffset":t+="top:"+s[i]+"px;"
break
case"bottomOffset":t+="bottom:"+s[i]+"px;"}else t=this.getPosition()||this.getOffset()?this.getPosition()&&this.getOffset()?this.getPosition()+":"+this.getOffset()+"px":this.getPosition()?this.getPosition()+": 15px":"left:"+this.getOffset()+"px":"left: 30px"
e.setAttribute("style",t)},addQueryParams:function(e,t){if(e&&t&&Object.keys(t).length>0){var s=e.indexOf("#"),i=-1===s?"":e.substr(s),n=-1!==(e=-1===s?e:e.substr(0,s)).indexOf("?")?"&":"?"
return""+e+n+Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")+i}return e}}},{"./../common/constants":1,"./../common/dom":2,"./browser":3,"./events":4}],6:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0})
var i=r(e("./frame")),n=r(e("./push_frame")),o=r(e("./events")),a=r(e("../common/constants"))
function r(e){return e&&e.__esModule?e:{default:e}}s.default={subscribe:function(e){window.addEventListener?(window.addEventListener("message",this.onMessage.bind(this),!1),window.addEventListener("focus",this.onVisibilityChange,!1),window.addEventListener("blur",this.onVisibilityChange,!1)):(window.attachEvent("onmessage",this.onMessage.bind(this)),window.attachEvent("focus",this.onVisibilityChange),window.attachEvent("blur",this.onVisibilityChange))},unsubscribe:function(){window.removeEventListener?(window.removeEventListener("message",this.onMessage,!1),window.removeEventListener("focus",this.onVisibilityChange,!1),window.removeEventListener("blur",this.onVisibilityChange,!1)):(window.detachEvent("onmessage",this.onMessage),window.detachEvent("focus",this.onVisibilityChange),window.detachEvent("blur",this.onVisibilityChange))},onVisibilityChange:function(e){switch(e.type){case"focus":i.default.postMessage({action:"widget_focus"})
break
case"blur":i.default.postMessage({action:"widget_blur",payload:{location:window.location.href}})}},onMessage:function(e){var t=e.origin||e.originalEvent.origin,s=i.default.getFrameWrapperElement(),r=i.default.getFrameElement()
if(i.default.getHost()&&-1!==i.default.getHost().indexOf(t)||n.default.getHostOrigin()&&-1!==n.default.getHostOrigin().indexOf(t)){var d=e.data,l=d&&d.action
if(l)switch(l){case"update-host":i.default.updateHost(d.payload)
break
case"maximize":r.setAttribute("class",""),s.setAttribute("class","unity_widget_maximized"),i.default.setWidgetClosed(!1),i.default.postMessage({action:"setMinimized",payload:!1}),o.default.publish("widget:maximized")
break
case"minimize":s.setAttribute("class","unity_widget_minimized"),i.default.setWidgetClosed(!0),i.default.postMessage({action:"setMinimized",payload:!0}),o.default.publish("widget:minimized")
break
case"close":r.setAttribute("class","fc-hide"),s.setAttribute("class","fc-hide"),i.default.setWidgetClosed(!0),i.default.postMessage({action:"setMinimized",payload:!0}),o.default.publish("widget:closed")
break
case"notify-messages":s.setAttribute("class","msg-notification"),r.setAttribute("class","notify-msg")
break
case"getWidgetConfigSettings":var c=i.default.getConfigSettings(),f=i.default.getWidgetColorSettings()
if(c.colorCustomization||(c.colorCustomization={}),!c.colorCustomization.widgetHeaderColor&&f)for(var u in f)c.colorCustomization[u]=f[u]
i.default.postMessage({action:"widgetConfigSettings",payload:c})
break
case"getWidgetState":var g=i.default.isWidgetClosed()
i.default.postMessage({action:"setMinimized",payload:g})
break
case"getWidgetSource":i.default.postMessage({action:"setWidgetSource",payload:i.default.getWidgetSource()})
break
case"notify_external_application":o.default.publish("FS:UnreadNotification",d.payload)
break
case"notify_conversation_change":o.default.publish("conversation:loaded",d.payload)
break
case"publish_mcr_contactId":o.default.publish("FS:routeMCRConctact",d.payload)
break
case a.default.EVENTS.MANAGE_EXTENDED_WIDGET:var p=d.payload,h=p.controlsEnabled,m=p.isExpanded
if(h){var b,v=["with-extended-controls"]
m?v.push("controls-expanded"):s.classList.remove("controls-expanded"),(b=s.classList).add.apply(b,v)}else s.classList.remove("with-extended-controls","controls-expanded")
break
case"publish_user_response":o.default.publish("FS:userMessageResponse",d.payload)
break
case"publish_image_response":o.default.publish("FS:imageResponse",d.payload)
break
case"publish_fs_channels":o.default.publish("FS:channels",d.payload)
break
case"widget_loaded":o.default.publish("widget:loaded")}}}}},{"../common/constants":1,"./events":4,"./frame":5,"./push_frame":7}],7:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0})
var i,n,o,a,r=c(e("../common/dom")),d=c(e("./frame")),l=c(e("../common/constants"))
function c(e){return e&&e.__esModule?e:{default:e}}s.default=(i=null,n=null,o=!1,a=null,{isLoaded:function(){return o},loaded:function(e){o=e},getSource:function(){return a},setSource:function(e){a=e},getHost:function(){return i},getHostOrigin:function(){return n},init:function(e){i=e.host,n=e.hostOrigin,this.load()},reset:function(){i=null,n=null,o=!1,a=null},postMessage:function(e){e.openWindow?window.open(i+"&action="+btoa(e.action),"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400"):o&&this.post({action:e.action,payload:e.payload})},post:function(e){a.postMessage(e,n)},add:function(){var e=document,t=e.body,s=e.getElementById(l.default.pushFrameDivId),n=e.createElement("IFRAME")
s||((s=e.createElement("DIV")).setAttribute("id",l.default.pushFrameDivId),r.default.setAttr(n,{id:l.default.pushFrameId,src:i,frameborder:"0"}),s.appendChild(n),t.appendChild(s))},load:function(){r.default.isPushSupportedByBrowser()&&this.add()},unload:function(){d.default.remove(l.default.pushFrameDivId),this.reset()}})},{"../common/constants":1,"../common/dom":2,"./frame":5}],8:[function(e,t,s){"use strict"
var i,n=e("./widget"),o=(i=n)&&i.__esModule?i:{default:i}
window.fcAgentWidget||(window.fcAgentWidget=o.default)},{"./widget":9}],9:[function(e,t,s){"use strict"
Object.defineProperty(s,"__esModule",{value:!0})
var i=a(e("./helpers/frame")),n=a(e("./helpers/message")),o=a(e("./helpers/events"))
function a(e){return e&&e.__esModule?e:{default:e}}s.default={init:function(e){e.token&&(void 0===e.open&&(e.open=!1),e.referrer||(e.referrer=btoa(window.location.href)),i.default.init({host:e.host,parentUrl:e.referrer,src:e.src?e.src:"Freshsales",domId:e.domId?e.domId:"",offset:e.offset?e.offset:"",position:e.position?e.position:"",widgetHeaderColor:e.widgetHeaderColor,notificationHeaderColor:e.notificationHeaderColor,widgetDropdownColor:e.widgetDropdownColor,token:e.token,config:e.config?e.config:{},blockAutoLoad:e.blockAutoLoad}),e.onLoad&&o.default.subscribe("widget:loaded",e.onLoad),e.FsHandlers&&o.default.subscribe("FS:actionHandler",e.onClickViewLeads),i.default.add(),n.default.subscribe())},destroy:function(){i.default.unload()},open:function(e){e&&"notification"==e.type?i.default.postMessage({action:"openNotification",payload:e.notification}):e&&i.default.postMessage({action:"openConversation",payload:{id:e.id,type:e.type,channelId:e.channelId,conversationId:e.conversationId}}),i.default.maximizeWidget()},sendMessage:function(e){e&&i.default.postMessage({action:"sendMessage",payload:{userIds:e.userIds,message:e.message,channelId:e.channelId}})},close:function(){i.default.closeWidget()},getChannels:function(){i.default.postMessage({action:"publishChannels"})},uploadImage:function(e){i.default.postMessage({action:"uploadImage",payload:{image:e.image,name:e.name}})},move:function(e){e&&(i.default.setPositionOffset(e),i.default.setWidgetDivPosition())},on:function(e,t){o.default.subscribe(e,t)},off:function(e,t){o.default.unsubscribe(e,t)}}},{"./helpers/events":4,"./helpers/frame":5,"./helpers/message":6}]},{},[8])
